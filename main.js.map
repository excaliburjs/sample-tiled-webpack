{"version":3,"file":"main.js","mappings":"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","sources":["webpack://sample-tiled-webpack/./node_modules/@excaliburjs/plugin-tiled/build/umd/excalibur-tiled.min.js","webpack://sample-tiled-webpack/./node_modules/excalibur/build/dist/excalibur.js","webpack://sample-tiled-webpack/./src/config.ts","webpack://sample-tiled-webpack/./src/main.ts","webpack://sample-tiled-webpack/./src/player.ts","webpack://sample-tiled-webpack/./src/resources.ts","webpack://sample-tiled-webpack/webpack/bootstrap","webpack://sample-tiled-webpack/webpack/startup"],"sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(function(){try{return require(\"jsdom\")}catch(e){}}(),require(\"excalibur\")):\"function\"==typeof define&&define.amd?define([\"jsdom\",\"excalibur\"],t):\"object\"==typeof exports?exports.ex=t(function(){try{return require(\"jsdom\")}catch(e){}}(),require(\"excalibur\")):(e.ex=e.ex||{},e.ex.Plugin=e.ex.Plugin||{},e.ex.Plugin.Tiled=t(e.jsdom,e.ex))}(self,((e,t)=>(()=>{\"use strict\";var A={668:(e,t,A)=>{var i={};(0,A(805).assign)(i,A(303),A(83),A(681)),e.exports=i},303:(e,t,A)=>{var i=A(411),a=A(805),s=A(996),r=A(674),n=A(442),o=Object.prototype.toString,l=0,g=-1,d=0,h=8;function c(e){if(!(this instanceof c))return new c(e);this.options=a.assign({level:g,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new n,this.strm.avail_out=0;var A=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(A!==l)throw new Error(r[A]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var I;if(I=\"string\"==typeof t.dictionary?s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===o.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(A=i.deflateSetDictionary(this.strm,I))!==l)throw new Error(r[A]);this._dict_set=!0}}function I(e,t){var A=new c(t);if(A.push(e,!0),A.err)throw A.msg||r[A.err];return A.result}c.prototype.push=function(e,t){var A,r,n=this.strm,g=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?4:0,\"string\"==typeof e?n.input=s.string2buf(e):\"[object ArrayBuffer]\"===o.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new a.Buf8(g),n.next_out=0,n.avail_out=g),1!==(A=i.deflate(n,r))&&A!==l)return this.onEnd(A),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==r&&2!==r)||(\"string\"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(n.output,n.next_out))):this.onData(a.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&1!==A);return 4===r?(A=i.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===l):2!==r||(this.onEnd(l),n.avail_out=0,!0)},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){e===l&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=c,t.deflate=I,t.deflateRaw=function(e,t){return(t=t||{}).raw=!0,I(e,t)},t.gzip=function(e,t){return(t=t||{}).gzip=!0,I(e,t)}},83:(e,t,A)=>{var i=A(447),a=A(805),s=A(996),r=A(681),n=A(674),o=A(442),l=A(414),g=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:\"\"},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg=\"\",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var A=i.inflateInit2(this.strm,t.windowBits);if(A!==r.Z_OK)throw new Error(n[A]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),t.dictionary&&(\"string\"==typeof t.dictionary?t.dictionary=s.string2buf(t.dictionary):\"[object ArrayBuffer]\"===g.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(A=i.inflateSetDictionary(this.strm,t.dictionary))!==r.Z_OK))throw new Error(n[A])}function h(e,t){var A=new d(t);if(A.push(e,!0),A.err)throw A.msg||n[A.err];return A.result}d.prototype.push=function(e,t){var A,n,o,l,d,h=this.strm,c=this.options.chunkSize,I=this.options.dictionary,u=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?r.Z_FINISH:r.Z_NO_FLUSH,\"string\"==typeof e?h.input=s.binstring2buf(e):\"[object ArrayBuffer]\"===g.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(c),h.next_out=0,h.avail_out=c),(A=i.inflate(h,r.Z_NO_FLUSH))===r.Z_NEED_DICT&&I&&(A=i.inflateSetDictionary(this.strm,I)),A===r.Z_BUF_ERROR&&!0===u&&(A=r.Z_OK,u=!1),A!==r.Z_STREAM_END&&A!==r.Z_OK)return this.onEnd(A),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&A!==r.Z_STREAM_END&&(0!==h.avail_in||n!==r.Z_FINISH&&n!==r.Z_SYNC_FLUSH)||(\"string\"===this.options.to?(o=s.utf8border(h.output,h.next_out),l=h.next_out-o,d=s.buf2string(h.output,o),h.next_out=l,h.avail_out=c-l,l&&a.arraySet(h.output,h.output,o,l,0),this.onData(d)):this.onData(a.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(u=!0)}while((h.avail_in>0||0===h.avail_out)&&A!==r.Z_STREAM_END);return A===r.Z_STREAM_END&&(n=r.Z_FINISH),n===r.Z_FINISH?(A=i.inflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===r.Z_OK):n!==r.Z_SYNC_FLUSH||(this.onEnd(r.Z_OK),h.avail_out=0,!0)},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===r.Z_OK&&(\"string\"===this.options.to?this.result=this.chunks.join(\"\"):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=h,t.inflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},t.ungzip=h},805:(e,t)=>{var A=\"undefined\"!=typeof Uint8Array&&\"undefined\"!=typeof Uint16Array&&\"undefined\"!=typeof Int32Array;function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var A=t.shift();if(A){if(\"object\"!=typeof A)throw new TypeError(A+\"must be non-object\");for(var a in A)i(A,a)&&(e[a]=A[a])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,A,i,a){if(t.subarray&&e.subarray)e.set(t.subarray(A,A+i),a);else for(var s=0;s<i;s++)e[a+s]=t[A+s]},flattenChunks:function(e){var t,A,i,a,s,r;for(i=0,t=0,A=e.length;t<A;t++)i+=e[t].length;for(r=new Uint8Array(i),a=0,t=0,A=e.length;t<A;t++)s=e[t],r.set(s,a),a+=s.length;return r}},s={arraySet:function(e,t,A,i,a){for(var s=0;s<i;s++)e[a+s]=t[A+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(A)},996:(e,t,A)=>{var i=A(805),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var r=new i.Buf8(256),n=0;n<256;n++)r[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;function o(e,t){if(t<65534&&(e.subarray&&s||!e.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var A=\"\",r=0;r<t;r++)A+=String.fromCharCode(e[r]);return A}r[254]=r[254]=1,t.string2buf=function(e){var t,A,a,s,r,n=e.length,o=0;for(s=0;s<n;s++)55296==(64512&(A=e.charCodeAt(s)))&&s+1<n&&56320==(64512&(a=e.charCodeAt(s+1)))&&(A=65536+(A-55296<<10)+(a-56320),s++),o+=A<128?1:A<2048?2:A<65536?3:4;for(t=new i.Buf8(o),r=0,s=0;r<o;s++)55296==(64512&(A=e.charCodeAt(s)))&&s+1<n&&56320==(64512&(a=e.charCodeAt(s+1)))&&(A=65536+(A-55296<<10)+(a-56320),s++),A<128?t[r++]=A:A<2048?(t[r++]=192|A>>>6,t[r++]=128|63&A):A<65536?(t[r++]=224|A>>>12,t[r++]=128|A>>>6&63,t[r++]=128|63&A):(t[r++]=240|A>>>18,t[r++]=128|A>>>12&63,t[r++]=128|A>>>6&63,t[r++]=128|63&A);return t},t.buf2binstring=function(e){return o(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),A=0,a=t.length;A<a;A++)t[A]=e.charCodeAt(A);return t},t.buf2string=function(e,t){var A,i,a,s,n=t||e.length,l=new Array(2*n);for(i=0,A=0;A<n;)if((a=e[A++])<128)l[i++]=a;else if((s=r[a])>4)l[i++]=65533,A+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&A<n;)a=a<<6|63&e[A++],s--;s>1?l[i++]=65533:a<65536?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return o(l,i)},t.utf8border=function(e,t){var A;for((t=t||e.length)>e.length&&(t=e.length),A=t-1;A>=0&&128==(192&e[A]);)A--;return A<0||0===A?t:A+r[e[A]]>t?A:t}},269:e=>{e.exports=function(e,t,A,i){for(var a=65535&e|0,s=e>>>16&65535|0,r=0;0!==A;){A-=r=A>2e3?2e3:A;do{s=s+(a=a+t[i++]|0)|0}while(--r);a%=65521,s%=65521}return a|s<<16|0}},681:e=>{e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},823:e=>{var t=function(){for(var e,t=[],A=0;A<256;A++){e=A;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[A]=e}return t}();e.exports=function(e,A,i,a){var s=t,r=a+i;e^=-1;for(var n=a;n<r;n++)e=e>>>8^s[255&(e^A[n])];return-1^e}},411:(e,t,A)=>{var i,a=A(805),s=A(665),r=A(269),n=A(823),o=A(674),l=0,g=4,d=0,h=-2,c=-1,I=4,u=2,B=8,C=9,p=286,f=30,Q=19,E=2*p+1,m=15,y=3,w=258,_=w+y+1,v=42,b=103,k=113,D=666,x=1,L=2,S=3,F=4;function G(e,t){return e.msg=o[t],t}function T(e){return(e<<1)-(e>4?9:0)}function N(e){for(var t=e.length;--t>=0;)e[t]=0}function R(e){var t=e.state,A=t.pending;A>e.avail_out&&(A=e.avail_out),0!==A&&(a.arraySet(e.output,t.pending_buf,t.pending_out,A,e.next_out),e.next_out+=A,t.pending_out+=A,e.total_out+=A,e.avail_out-=A,t.pending-=A,0===t.pending&&(t.pending_out=0))}function M(e,t){s._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)}function U(e,t){e.pending_buf[e.pending++]=t}function O(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function q(e,t){var A,i,a=e.max_chain_length,s=e.strstart,r=e.prev_length,n=e.nice_match,o=e.strstart>e.w_size-_?e.strstart-(e.w_size-_):0,l=e.window,g=e.w_mask,d=e.prev,h=e.strstart+w,c=l[s+r-1],I=l[s+r];e.prev_length>=e.good_match&&(a>>=2),n>e.lookahead&&(n=e.lookahead);do{if(l[(A=t)+r]===I&&l[A+r-1]===c&&l[A]===l[s]&&l[++A]===l[s+1]){s+=2,A++;do{}while(l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&l[++s]===l[++A]&&s<h);if(i=w-(h-s),s=h-w,i>r){if(e.match_start=t,r=i,i>=n)break;c=l[s+r-1],I=l[s+r]}}}while((t=d[t&g])>o&&0!=--a);return r<=e.lookahead?r:e.lookahead}function j(e){var t,A,i,s,o,l,g,d,h,c,I=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=I+(I-_)){a.arraySet(e.window,e.window,I,I,0),e.match_start-=I,e.strstart-=I,e.block_start-=I,t=A=e.hash_size;do{i=e.head[--t],e.head[t]=i>=I?i-I:0}while(--A);t=A=I;do{i=e.prev[--t],e.prev[t]=i>=I?i-I:0}while(--A);s+=I}if(0===e.strm.avail_in)break;if(l=e.strm,g=e.window,d=e.strstart+e.lookahead,h=s,c=void 0,(c=l.avail_in)>h&&(c=h),A=0===c?0:(l.avail_in-=c,a.arraySet(g,l.input,l.next_in,c,d),1===l.state.wrap?l.adler=r(l.adler,g,c,d):2===l.state.wrap&&(l.adler=n(l.adler,g,c,d)),l.next_in+=c,l.total_in+=c,c),e.lookahead+=A,e.lookahead+e.insert>=y)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+y-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<y)););}while(e.lookahead<_&&0!==e.strm.avail_in)}function J(e,t){for(var A,i;;){if(e.lookahead<_){if(j(e),e.lookahead<_&&t===l)return x;if(0===e.lookahead)break}if(A=0,e.lookahead>=y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+y-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==A&&e.strstart-A<=e.w_size-_&&(e.match_length=q(e,A)),e.match_length>=y)if(i=s._tr_tally(e,e.strstart-e.match_start,e.match_length-y),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=y){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+y-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(M(e,!1),0===e.strm.avail_out))return x}return e.insert=e.strstart<y-1?e.strstart:y-1,t===g?(M(e,!0),0===e.strm.avail_out?S:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?x:L}function Z(e,t){for(var A,i,a;;){if(e.lookahead<_){if(j(e),e.lookahead<_&&t===l)return x;if(0===e.lookahead)break}if(A=0,e.lookahead>=y&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+y-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=y-1,0!==A&&e.prev_length<e.max_lazy_match&&e.strstart-A<=e.w_size-_&&(e.match_length=q(e,A),e.match_length<=5&&(1===e.strategy||e.match_length===y&&e.strstart-e.match_start>4096)&&(e.match_length=y-1)),e.prev_length>=y&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-y,i=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-y),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+y-1])&e.hash_mask,A=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=y-1,e.strstart++,i&&(M(e,!1),0===e.strm.avail_out))return x}else if(e.match_available){if((i=s._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return x}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<y-1?e.strstart:y-1,t===g?(M(e,!0),0===e.strm.avail_out?S:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?x:L}function H(e,t,A,i,a){this.good_length=e,this.max_lazy=t,this.nice_length=A,this.max_chain=i,this.func=a}function Y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*E),this.dyn_dtree=new a.Buf16(2*(2*f+1)),this.bl_tree=new a.Buf16(2*(2*Q+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(m+1),this.heap=new a.Buf16(2*p+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*p+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=u,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?v:k,e.adler=2===t.wrap?0:1,t.last_flush=l,s._tr_init(t),d):G(e,h)}function P(e){var t,A=K(e);return A===d&&((t=e.state).window_size=2*t.w_size,N(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=y-1,t.match_available=0,t.ins_h=0),A}function z(e,t,A,i,s,r){if(!e)return h;var n=1;if(t===c&&(t=6),i<0?(n=0,i=-i):i>15&&(n=2,i-=16),s<1||s>C||A!==B||i<8||i>15||t<0||t>9||r<0||r>I)return G(e,h);8===i&&(i=9);var o=new Y;return e.state=o,o.strm=e,o.wrap=n,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+y-1)/y),o.window=new a.Buf8(2*o.w_size),o.head=new a.Buf16(o.hash_size),o.prev=new a.Buf16(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new a.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=r,o.method=A,P(e)}i=[new H(0,0,0,0,(function(e,t){var A=65535;for(A>e.pending_buf_size-5&&(A=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&t===l)return x;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+A;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,M(e,!1),0===e.strm.avail_out))return x;if(e.strstart-e.block_start>=e.w_size-_&&(M(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===g?(M(e,!0),0===e.strm.avail_out?S:F):(e.strstart>e.block_start&&(M(e,!1),e.strm.avail_out),x)})),new H(4,4,8,4,J),new H(4,5,16,8,J),new H(4,6,32,32,J),new H(4,4,16,16,Z),new H(8,16,32,32,Z),new H(8,16,128,128,Z),new H(8,32,128,256,Z),new H(32,128,258,1024,Z),new H(32,258,258,4096,Z)],t.deflateInit=function(e,t){return z(e,t,B,15,8,0)},t.deflateInit2=z,t.deflateReset=P,t.deflateResetKeep=K,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?h:(e.state.gzhead=t,d):h},t.deflate=function(e,t){var A,a,r,o;if(!e||!e.state||t>5||t<0)return e?G(e,h):h;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===D&&t!==g)return G(e,0===e.avail_out?-5:h);if(a.strm=e,A=a.last_flush,a.last_flush=t,a.status===v)if(2===a.wrap)e.adler=0,U(a,31),U(a,139),U(a,8),a.gzhead?(U(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),U(a,255&a.gzhead.time),U(a,a.gzhead.time>>8&255),U(a,a.gzhead.time>>16&255),U(a,a.gzhead.time>>24&255),U(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),U(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(U(a,255&a.gzhead.extra.length),U(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=n(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(U(a,0),U(a,0),U(a,0),U(a,0),U(a,0),U(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),U(a,3),a.status=k);else{var c=B+(a.w_bits-8<<4)<<8;c|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(c|=32),c+=31-c%31,a.status=k,O(a,c),0!==a.strstart&&(O(a,e.adler>>>16),O(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(r=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),R(e),r=a.pending,a.pending!==a.pending_buf_size));)U(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),R(e),r=a.pending,a.pending===a.pending_buf_size)){o=1;break}o=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,U(a,o)}while(0!==o);a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),0===o&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){r=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),R(e),r=a.pending,a.pending===a.pending_buf_size)){o=1;break}o=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,U(a,o)}while(0!==o);a.gzhead.hcrc&&a.pending>r&&(e.adler=n(e.adler,a.pending_buf,a.pending-r,r)),0===o&&(a.status=b)}else a.status=b;if(a.status===b&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&R(e),a.pending+2<=a.pending_buf_size&&(U(a,255&e.adler),U(a,e.adler>>8&255),e.adler=0,a.status=k)):a.status=k),0!==a.pending){if(R(e),0===e.avail_out)return a.last_flush=-1,d}else if(0===e.avail_in&&T(t)<=T(A)&&t!==g)return G(e,-5);if(a.status===D&&0!==e.avail_in)return G(e,-5);if(0!==e.avail_in||0!==a.lookahead||t!==l&&a.status!==D){var I=2===a.strategy?function(e,t){for(var A;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(t===l)return x;break}if(e.match_length=0,A=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,A&&(M(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===g?(M(e,!0),0===e.strm.avail_out?S:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?x:L}(a,t):3===a.strategy?function(e,t){for(var A,i,a,r,n=e.window;;){if(e.lookahead<=w){if(j(e),e.lookahead<=w&&t===l)return x;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=y&&e.strstart>0&&(i=n[a=e.strstart-1])===n[++a]&&i===n[++a]&&i===n[++a]){r=e.strstart+w;do{}while(i===n[++a]&&i===n[++a]&&i===n[++a]&&i===n[++a]&&i===n[++a]&&i===n[++a]&&i===n[++a]&&i===n[++a]&&a<r);e.match_length=w-(r-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=y?(A=s._tr_tally(e,1,e.match_length-y),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(A=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),A&&(M(e,!1),0===e.strm.avail_out))return x}return e.insert=0,t===g?(M(e,!0),0===e.strm.avail_out?S:F):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?x:L}(a,t):i[a.level].func(a,t);if(I!==S&&I!==F||(a.status=D),I===x||I===S)return 0===e.avail_out&&(a.last_flush=-1),d;if(I===L&&(1===t?s._tr_align(a):5!==t&&(s._tr_stored_block(a,0,0,!1),3===t&&(N(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),R(e),0===e.avail_out))return a.last_flush=-1,d}return t!==g?d:a.wrap<=0?1:(2===a.wrap?(U(a,255&e.adler),U(a,e.adler>>8&255),U(a,e.adler>>16&255),U(a,e.adler>>24&255),U(a,255&e.total_in),U(a,e.total_in>>8&255),U(a,e.total_in>>16&255),U(a,e.total_in>>24&255)):(O(a,e.adler>>>16),O(a,65535&e.adler)),R(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?d:1)},t.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==v&&69!==t&&73!==t&&91!==t&&t!==b&&t!==k&&t!==D?G(e,h):(e.state=null,t===k?G(e,-3):d):h},t.deflateSetDictionary=function(e,t){var A,i,s,n,o,l,g,c,I=t.length;if(!e||!e.state)return h;if(2===(n=(A=e.state).wrap)||1===n&&A.status!==v||A.lookahead)return h;for(1===n&&(e.adler=r(e.adler,t,I,0)),A.wrap=0,I>=A.w_size&&(0===n&&(N(A.head),A.strstart=0,A.block_start=0,A.insert=0),c=new a.Buf8(A.w_size),a.arraySet(c,t,I-A.w_size,A.w_size,0),t=c,I=A.w_size),o=e.avail_in,l=e.next_in,g=e.input,e.avail_in=I,e.next_in=0,e.input=t,j(A);A.lookahead>=y;){i=A.strstart,s=A.lookahead-(y-1);do{A.ins_h=(A.ins_h<<A.hash_shift^A.window[i+y-1])&A.hash_mask,A.prev[i&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=i,i++}while(--s);A.strstart=i,A.lookahead=y-1,j(A)}return A.strstart+=A.lookahead,A.block_start=A.strstart,A.insert=A.lookahead,A.lookahead=0,A.match_length=A.prev_length=y-1,A.match_available=0,e.next_in=l,e.input=g,e.avail_in=o,A.wrap=n,d},t.deflateInfo=\"pako deflate (from Nodeca project)\"},414:e=>{e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=\"\",this.comment=\"\",this.hcrc=0,this.done=!1}},293:e=>{e.exports=function(e,t){var A,i,a,s,r,n,o,l,g,d,h,c,I,u,B,C,p,f,Q,E,m,y,w,_,v;A=e.state,i=e.next_in,_=e.input,a=i+(e.avail_in-5),s=e.next_out,v=e.output,r=s-(t-e.avail_out),n=s+(e.avail_out-257),o=A.dmax,l=A.wsize,g=A.whave,d=A.wnext,h=A.window,c=A.hold,I=A.bits,u=A.lencode,B=A.distcode,C=(1<<A.lenbits)-1,p=(1<<A.distbits)-1;e:do{I<15&&(c+=_[i++]<<I,I+=8,c+=_[i++]<<I,I+=8),f=u[c&C];t:for(;;){if(c>>>=Q=f>>>24,I-=Q,0===(Q=f>>>16&255))v[s++]=65535&f;else{if(!(16&Q)){if(0==(64&Q)){f=u[(65535&f)+(c&(1<<Q)-1)];continue t}if(32&Q){A.mode=12;break e}e.msg=\"invalid literal/length code\",A.mode=30;break e}E=65535&f,(Q&=15)&&(I<Q&&(c+=_[i++]<<I,I+=8),E+=c&(1<<Q)-1,c>>>=Q,I-=Q),I<15&&(c+=_[i++]<<I,I+=8,c+=_[i++]<<I,I+=8),f=B[c&p];A:for(;;){if(c>>>=Q=f>>>24,I-=Q,!(16&(Q=f>>>16&255))){if(0==(64&Q)){f=B[(65535&f)+(c&(1<<Q)-1)];continue A}e.msg=\"invalid distance code\",A.mode=30;break e}if(m=65535&f,I<(Q&=15)&&(c+=_[i++]<<I,(I+=8)<Q&&(c+=_[i++]<<I,I+=8)),(m+=c&(1<<Q)-1)>o){e.msg=\"invalid distance too far back\",A.mode=30;break e}if(c>>>=Q,I-=Q,m>(Q=s-r)){if((Q=m-Q)>g&&A.sane){e.msg=\"invalid distance too far back\",A.mode=30;break e}if(y=0,w=h,0===d){if(y+=l-Q,Q<E){E-=Q;do{v[s++]=h[y++]}while(--Q);y=s-m,w=v}}else if(d<Q){if(y+=l+d-Q,(Q-=d)<E){E-=Q;do{v[s++]=h[y++]}while(--Q);if(y=0,d<E){E-=Q=d;do{v[s++]=h[y++]}while(--Q);y=s-m,w=v}}}else if(y+=d-Q,Q<E){E-=Q;do{v[s++]=h[y++]}while(--Q);y=s-m,w=v}for(;E>2;)v[s++]=w[y++],v[s++]=w[y++],v[s++]=w[y++],E-=3;E&&(v[s++]=w[y++],E>1&&(v[s++]=w[y++]))}else{y=s-m;do{v[s++]=v[y++],v[s++]=v[y++],v[s++]=v[y++],E-=3}while(E>2);E&&(v[s++]=v[y++],E>1&&(v[s++]=v[y++]))}break}}break}}while(i<a&&s<n);i-=E=I>>3,c&=(1<<(I-=E<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<a?a-i+5:5-(i-a),e.avail_out=s<n?n-s+257:257-(s-n),A.hold=c,A.bits=I}},447:(e,t,A)=>{var i=A(805),a=A(269),s=A(823),r=A(293),n=A(998),o=1,l=2,g=0,d=-2,h=1,c=12,I=30,u=852,B=592;function C(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg=\"\",t.wrap&&(e.adler=1&t.wrap),t.mode=h,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(u),t.distcode=t.distdyn=new i.Buf32(B),t.sane=1,t.back=-1,g):d}function Q(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):d}function E(e,t){var A,i;return e&&e.state?(i=e.state,t<0?(A=0,t=-t):(A=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?d:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=A,i.wbits=t,Q(e))):d}function m(e,t){var A,i;return e?(i=new p,e.state=i,i.window=null,(A=E(e,t))!==g&&(e.state=null),A):d}var y,w,_=!0;function v(e){if(_){var t;for(y=new i.Buf32(512),w=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(n(o,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;n(l,e.lens,0,32,w,0,e.work,{bits:5}),_=!1}e.lencode=y,e.lenbits=9,e.distcode=w,e.distbits=5}function b(e,t,A,a){var s,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new i.Buf8(r.wsize)),a>=r.wsize?(i.arraySet(r.window,t,A-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((s=r.wsize-r.wnext)>a&&(s=a),i.arraySet(r.window,t,A-a,s,r.wnext),(a-=s)?(i.arraySet(r.window,t,A-a,a,0),r.wnext=a,r.whave=r.wsize):(r.wnext+=s,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=s))),0}t.inflateReset=Q,t.inflateReset2=E,t.inflateResetKeep=f,t.inflateInit=function(e){return m(e,15)},t.inflateInit2=m,t.inflate=function(e,t){var A,u,B,p,f,Q,E,m,y,w,_,k,D,x,L,S,F,G,T,N,R,M,U,O,q=0,j=new i.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;(A=e.state).mode===c&&(A.mode=13),f=e.next_out,B=e.output,E=e.avail_out,p=e.next_in,u=e.input,Q=e.avail_in,m=A.hold,y=A.bits,w=Q,_=E,M=g;e:for(;;)switch(A.mode){case h:if(0===A.wrap){A.mode=13;break}for(;y<16;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(2&A.wrap&&35615===m){A.check=0,j[0]=255&m,j[1]=m>>>8&255,A.check=s(A.check,j,2,0),m=0,y=0,A.mode=2;break}if(A.flags=0,A.head&&(A.head.done=!1),!(1&A.wrap)||(((255&m)<<8)+(m>>8))%31){e.msg=\"incorrect header check\",A.mode=I;break}if(8!=(15&m)){e.msg=\"unknown compression method\",A.mode=I;break}if(y-=4,R=8+(15&(m>>>=4)),0===A.wbits)A.wbits=R;else if(R>A.wbits){e.msg=\"invalid window size\",A.mode=I;break}A.dmax=1<<R,e.adler=A.check=1,A.mode=512&m?10:c,m=0,y=0;break;case 2:for(;y<16;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(A.flags=m,8!=(255&A.flags)){e.msg=\"unknown compression method\",A.mode=I;break}if(57344&A.flags){e.msg=\"unknown header flags set\",A.mode=I;break}A.head&&(A.head.text=m>>8&1),512&A.flags&&(j[0]=255&m,j[1]=m>>>8&255,A.check=s(A.check,j,2,0)),m=0,y=0,A.mode=3;case 3:for(;y<32;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.head&&(A.head.time=m),512&A.flags&&(j[0]=255&m,j[1]=m>>>8&255,j[2]=m>>>16&255,j[3]=m>>>24&255,A.check=s(A.check,j,4,0)),m=0,y=0,A.mode=4;case 4:for(;y<16;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.head&&(A.head.xflags=255&m,A.head.os=m>>8),512&A.flags&&(j[0]=255&m,j[1]=m>>>8&255,A.check=s(A.check,j,2,0)),m=0,y=0,A.mode=5;case 5:if(1024&A.flags){for(;y<16;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.length=m,A.head&&(A.head.extra_len=m),512&A.flags&&(j[0]=255&m,j[1]=m>>>8&255,A.check=s(A.check,j,2,0)),m=0,y=0}else A.head&&(A.head.extra=null);A.mode=6;case 6:if(1024&A.flags&&((k=A.length)>Q&&(k=Q),k&&(A.head&&(R=A.head.extra_len-A.length,A.head.extra||(A.head.extra=new Array(A.head.extra_len)),i.arraySet(A.head.extra,u,p,k,R)),512&A.flags&&(A.check=s(A.check,u,k,p)),Q-=k,p+=k,A.length-=k),A.length))break e;A.length=0,A.mode=7;case 7:if(2048&A.flags){if(0===Q)break e;k=0;do{R=u[p+k++],A.head&&R&&A.length<65536&&(A.head.name+=String.fromCharCode(R))}while(R&&k<Q);if(512&A.flags&&(A.check=s(A.check,u,k,p)),Q-=k,p+=k,R)break e}else A.head&&(A.head.name=null);A.length=0,A.mode=8;case 8:if(4096&A.flags){if(0===Q)break e;k=0;do{R=u[p+k++],A.head&&R&&A.length<65536&&(A.head.comment+=String.fromCharCode(R))}while(R&&k<Q);if(512&A.flags&&(A.check=s(A.check,u,k,p)),Q-=k,p+=k,R)break e}else A.head&&(A.head.comment=null);A.mode=9;case 9:if(512&A.flags){for(;y<16;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(m!==(65535&A.check)){e.msg=\"header crc mismatch\",A.mode=I;break}m=0,y=0}A.head&&(A.head.hcrc=A.flags>>9&1,A.head.done=!0),e.adler=A.check=0,A.mode=c;break;case 10:for(;y<32;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}e.adler=A.check=C(m),m=0,y=0,A.mode=11;case 11:if(0===A.havedict)return e.next_out=f,e.avail_out=E,e.next_in=p,e.avail_in=Q,A.hold=m,A.bits=y,2;e.adler=A.check=1,A.mode=c;case c:if(5===t||6===t)break e;case 13:if(A.last){m>>>=7&y,y-=7&y,A.mode=27;break}for(;y<3;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}switch(A.last=1&m,y-=1,3&(m>>>=1)){case 0:A.mode=14;break;case 1:if(v(A),A.mode=20,6===t){m>>>=2,y-=2;break e}break;case 2:A.mode=17;break;case 3:e.msg=\"invalid block type\",A.mode=I}m>>>=2,y-=2;break;case 14:for(m>>>=7&y,y-=7&y;y<32;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if((65535&m)!=(m>>>16^65535)){e.msg=\"invalid stored block lengths\",A.mode=I;break}if(A.length=65535&m,m=0,y=0,A.mode=15,6===t)break e;case 15:A.mode=16;case 16:if(k=A.length){if(k>Q&&(k=Q),k>E&&(k=E),0===k)break e;i.arraySet(B,u,p,k,f),Q-=k,p+=k,E-=k,f+=k,A.length-=k;break}A.mode=c;break;case 17:for(;y<14;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(A.nlen=257+(31&m),m>>>=5,y-=5,A.ndist=1+(31&m),m>>>=5,y-=5,A.ncode=4+(15&m),m>>>=4,y-=4,A.nlen>286||A.ndist>30){e.msg=\"too many length or distance symbols\",A.mode=I;break}A.have=0,A.mode=18;case 18:for(;A.have<A.ncode;){for(;y<3;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.lens[J[A.have++]]=7&m,m>>>=3,y-=3}for(;A.have<19;)A.lens[J[A.have++]]=0;if(A.lencode=A.lendyn,A.lenbits=7,U={bits:A.lenbits},M=n(0,A.lens,0,19,A.lencode,0,A.work,U),A.lenbits=U.bits,M){e.msg=\"invalid code lengths set\",A.mode=I;break}A.have=0,A.mode=19;case 19:for(;A.have<A.nlen+A.ndist;){for(;S=(q=A.lencode[m&(1<<A.lenbits)-1])>>>16&255,F=65535&q,!((L=q>>>24)<=y);){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(F<16)m>>>=L,y-=L,A.lens[A.have++]=F;else{if(16===F){for(O=L+2;y<O;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(m>>>=L,y-=L,0===A.have){e.msg=\"invalid bit length repeat\",A.mode=I;break}R=A.lens[A.have-1],k=3+(3&m),m>>>=2,y-=2}else if(17===F){for(O=L+3;y<O;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}y-=L,R=0,k=3+(7&(m>>>=L)),m>>>=3,y-=3}else{for(O=L+7;y<O;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}y-=L,R=0,k=11+(127&(m>>>=L)),m>>>=7,y-=7}if(A.have+k>A.nlen+A.ndist){e.msg=\"invalid bit length repeat\",A.mode=I;break}for(;k--;)A.lens[A.have++]=R}}if(A.mode===I)break;if(0===A.lens[256]){e.msg=\"invalid code -- missing end-of-block\",A.mode=I;break}if(A.lenbits=9,U={bits:A.lenbits},M=n(o,A.lens,0,A.nlen,A.lencode,0,A.work,U),A.lenbits=U.bits,M){e.msg=\"invalid literal/lengths set\",A.mode=I;break}if(A.distbits=6,A.distcode=A.distdyn,U={bits:A.distbits},M=n(l,A.lens,A.nlen,A.ndist,A.distcode,0,A.work,U),A.distbits=U.bits,M){e.msg=\"invalid distances set\",A.mode=I;break}if(A.mode=20,6===t)break e;case 20:A.mode=21;case 21:if(Q>=6&&E>=258){e.next_out=f,e.avail_out=E,e.next_in=p,e.avail_in=Q,A.hold=m,A.bits=y,r(e,_),f=e.next_out,B=e.output,E=e.avail_out,p=e.next_in,u=e.input,Q=e.avail_in,m=A.hold,y=A.bits,A.mode===c&&(A.back=-1);break}for(A.back=0;S=(q=A.lencode[m&(1<<A.lenbits)-1])>>>16&255,F=65535&q,!((L=q>>>24)<=y);){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(S&&0==(240&S)){for(G=L,T=S,N=F;S=(q=A.lencode[N+((m&(1<<G+T)-1)>>G)])>>>16&255,F=65535&q,!(G+(L=q>>>24)<=y);){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}m>>>=G,y-=G,A.back+=G}if(m>>>=L,y-=L,A.back+=L,A.length=F,0===S){A.mode=26;break}if(32&S){A.back=-1,A.mode=c;break}if(64&S){e.msg=\"invalid literal/length code\",A.mode=I;break}A.extra=15&S,A.mode=22;case 22:if(A.extra){for(O=A.extra;y<O;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.length+=m&(1<<A.extra)-1,m>>>=A.extra,y-=A.extra,A.back+=A.extra}A.was=A.length,A.mode=23;case 23:for(;S=(q=A.distcode[m&(1<<A.distbits)-1])>>>16&255,F=65535&q,!((L=q>>>24)<=y);){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(0==(240&S)){for(G=L,T=S,N=F;S=(q=A.distcode[N+((m&(1<<G+T)-1)>>G)])>>>16&255,F=65535&q,!(G+(L=q>>>24)<=y);){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}m>>>=G,y-=G,A.back+=G}if(m>>>=L,y-=L,A.back+=L,64&S){e.msg=\"invalid distance code\",A.mode=I;break}A.offset=F,A.extra=15&S,A.mode=24;case 24:if(A.extra){for(O=A.extra;y<O;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}A.offset+=m&(1<<A.extra)-1,m>>>=A.extra,y-=A.extra,A.back+=A.extra}if(A.offset>A.dmax){e.msg=\"invalid distance too far back\",A.mode=I;break}A.mode=25;case 25:if(0===E)break e;if(k=_-E,A.offset>k){if((k=A.offset-k)>A.whave&&A.sane){e.msg=\"invalid distance too far back\",A.mode=I;break}k>A.wnext?(k-=A.wnext,D=A.wsize-k):D=A.wnext-k,k>A.length&&(k=A.length),x=A.window}else x=B,D=f-A.offset,k=A.length;k>E&&(k=E),E-=k,A.length-=k;do{B[f++]=x[D++]}while(--k);0===A.length&&(A.mode=21);break;case 26:if(0===E)break e;B[f++]=A.length,E--,A.mode=21;break;case 27:if(A.wrap){for(;y<32;){if(0===Q)break e;Q--,m|=u[p++]<<y,y+=8}if(_-=E,e.total_out+=_,A.total+=_,_&&(e.adler=A.check=A.flags?s(A.check,B,_,f-_):a(A.check,B,_,f-_)),_=E,(A.flags?m:C(m))!==A.check){e.msg=\"incorrect data check\",A.mode=I;break}m=0,y=0}A.mode=28;case 28:if(A.wrap&&A.flags){for(;y<32;){if(0===Q)break e;Q--,m+=u[p++]<<y,y+=8}if(m!==(4294967295&A.total)){e.msg=\"incorrect length check\",A.mode=I;break}m=0,y=0}A.mode=29;case 29:M=1;break e;case I:M=-3;break e;case 31:return-4;default:return d}return e.next_out=f,e.avail_out=E,e.next_in=p,e.avail_in=Q,A.hold=m,A.bits=y,(A.wsize||_!==e.avail_out&&A.mode<I&&(A.mode<27||4!==t))&&b(e,e.output,e.next_out,_-e.avail_out)?(A.mode=31,-4):(w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,A.total+=_,A.wrap&&_&&(e.adler=A.check=A.flags?s(A.check,B,_,e.next_out-_):a(A.check,B,_,e.next_out-_)),e.data_type=A.bits+(A.last?64:0)+(A.mode===c?128:0)+(20===A.mode||15===A.mode?256:0),(0===w&&0===_||4===t)&&M===g&&(M=-5),M)},t.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,g},t.inflateGetHeader=function(e,t){var A;return e&&e.state?0==(2&(A=e.state).wrap)?d:(A.head=t,t.done=!1,g):d},t.inflateSetDictionary=function(e,t){var A,i=t.length;return e&&e.state?0!==(A=e.state).wrap&&11!==A.mode?d:11===A.mode&&a(1,t,i,0)!==A.check?-3:b(e,t,i,i)?(A.mode=31,-4):(A.havedict=1,g):d},t.inflateInfo=\"pako inflate (from Nodeca project)\"},998:(e,t,A)=>{var i=A(805),a=15,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,A,l,g,d,h,c){var I,u,B,C,p,f,Q,E,m,y=c.bits,w=0,_=0,v=0,b=0,k=0,D=0,x=0,L=0,S=0,F=0,G=null,T=0,N=new i.Buf16(16),R=new i.Buf16(16),M=null,U=0;for(w=0;w<=a;w++)N[w]=0;for(_=0;_<l;_++)N[t[A+_]]++;for(k=y,b=a;b>=1&&0===N[b];b--);if(k>b&&(k=b),0===b)return g[d++]=20971520,g[d++]=20971520,c.bits=1,0;for(v=1;v<b&&0===N[v];v++);for(k<v&&(k=v),L=1,w=1;w<=a;w++)if(L<<=1,(L-=N[w])<0)return-1;if(L>0&&(0===e||1!==b))return-1;for(R[1]=0,w=1;w<a;w++)R[w+1]=R[w]+N[w];for(_=0;_<l;_++)0!==t[A+_]&&(h[R[t[A+_]]++]=_);if(0===e?(G=M=h,f=19):1===e?(G=s,T-=257,M=r,U-=257,f=256):(G=n,M=o,f=-1),F=0,_=0,w=v,p=d,D=k,x=0,B=-1,C=(S=1<<k)-1,1===e&&S>852||2===e&&S>592)return 1;for(;;){Q=w-x,h[_]<f?(E=0,m=h[_]):h[_]>f?(E=M[U+h[_]],m=G[T+h[_]]):(E=96,m=0),I=1<<w-x,v=u=1<<D;do{g[p+(F>>x)+(u-=I)]=Q<<24|E<<16|m|0}while(0!==u);for(I=1<<w-1;F&I;)I>>=1;if(0!==I?(F&=I-1,F+=I):F=0,_++,0==--N[w]){if(w===b)break;w=t[A+h[_]]}if(w>k&&(F&C)!==B){for(0===x&&(x=k),p+=v,L=1<<(D=w-x);D+x<b&&!((L-=N[D+x])<=0);)D++,L<<=1;if(S+=1<<D,1===e&&S>852||2===e&&S>592)return 1;g[B=F&C]=k<<24|D<<16|p-d|0}}return 0!==F&&(g[p+F]=w-x<<24|64<<16|0),c.bits=k,0}},674:e=>{e.exports={2:\"need dictionary\",1:\"stream end\",0:\"\",\"-1\":\"file error\",\"-2\":\"stream error\",\"-3\":\"data error\",\"-4\":\"insufficient memory\",\"-5\":\"buffer error\",\"-6\":\"incompatible version\"}},665:(e,t,A)=>{var i=A(805),a=0,s=1;function r(e){for(var t=e.length;--t>=0;)e[t]=0}var n=0,o=29,l=256,g=l+1+o,d=30,h=19,c=2*g+1,I=15,u=16,B=7,C=256,p=16,f=17,Q=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(2*(g+2));r(_);var v=new Array(2*d);r(v);var b=new Array(512);r(b);var k=new Array(256);r(k);var D=new Array(o);r(D);var x,L,S,F=new Array(d);function G(e,t,A,i,a){this.static_tree=e,this.extra_bits=t,this.extra_base=A,this.elems=i,this.max_length=a,this.has_stree=e&&e.length}function T(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?b[e]:b[256+(e>>>7)]}function R(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function M(e,t,A){e.bi_valid>u-A?(e.bi_buf|=t<<e.bi_valid&65535,R(e,e.bi_buf),e.bi_buf=t>>u-e.bi_valid,e.bi_valid+=A-u):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=A)}function U(e,t,A){M(e,A[2*t],A[2*t+1])}function O(e,t){var A=0;do{A|=1&e,e>>>=1,A<<=1}while(--t>0);return A>>>1}function q(e,t,A){var i,a,s=new Array(I+1),r=0;for(i=1;i<=I;i++)s[i]=r=r+A[i-1]<<1;for(a=0;a<=t;a++){var n=e[2*a+1];0!==n&&(e[2*a]=O(s[n]++,n))}}function j(e){var t;for(t=0;t<g;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<h;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*C]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function J(e){e.bi_valid>8?R(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Z(e,t,A,i){var a=2*t,s=2*A;return e[a]<e[s]||e[a]===e[s]&&i[t]<=i[A]}function H(e,t,A){for(var i=e.heap[A],a=A<<1;a<=e.heap_len&&(a<e.heap_len&&Z(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!Z(t,i,e.heap[a],e.depth));)e.heap[A]=e.heap[a],A=a,a<<=1;e.heap[A]=i}function Y(e,t,A){var i,a,s,r,n=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*n]<<8|e.pending_buf[e.d_buf+2*n+1],a=e.pending_buf[e.l_buf+n],n++,0===i?U(e,a,t):(U(e,(s=k[a])+l+1,t),0!==(r=E[s])&&M(e,a-=D[s],r),U(e,s=N(--i),A),0!==(r=m[s])&&M(e,i-=F[s],r))}while(n<e.last_lit);U(e,C,t)}function K(e,t){var A,i,a,s=t.dyn_tree,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,o=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=c,A=0;A<o;A++)0!==s[2*A]?(e.heap[++e.heap_len]=l=A,e.depth[A]=0):s[2*A+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[a]=0,e.opt_len--,n&&(e.static_len-=r[2*a+1]);for(t.max_code=l,A=e.heap_len>>1;A>=1;A--)H(e,s,A);a=o;do{A=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,s,1),i=e.heap[1],e.heap[--e.heap_max]=A,e.heap[--e.heap_max]=i,s[2*a]=s[2*A]+s[2*i],e.depth[a]=(e.depth[A]>=e.depth[i]?e.depth[A]:e.depth[i])+1,s[2*A+1]=s[2*i+1]=a,e.heap[1]=a++,H(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var A,i,a,s,r,n,o=t.dyn_tree,l=t.max_code,g=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,u=t.stat_desc.extra_base,B=t.stat_desc.max_length,C=0;for(s=0;s<=I;s++)e.bl_count[s]=0;for(o[2*e.heap[e.heap_max]+1]=0,A=e.heap_max+1;A<c;A++)(s=o[2*o[2*(i=e.heap[A])+1]+1]+1)>B&&(s=B,C++),o[2*i+1]=s,i>l||(e.bl_count[s]++,r=0,i>=u&&(r=h[i-u]),n=o[2*i],e.opt_len+=n*(s+r),d&&(e.static_len+=n*(g[2*i+1]+r)));if(0!==C){do{for(s=B-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[B]--,C-=2}while(C>0);for(s=B;0!==s;s--)for(i=e.bl_count[s];0!==i;)(a=e.heap[--A])>l||(o[2*a+1]!==s&&(e.opt_len+=(s-o[2*a+1])*o[2*a],o[2*a+1]=s),i--)}}(e,t),q(s,l,e.bl_count)}function P(e,t,A){var i,a,s=-1,r=t[1],n=0,o=7,l=4;for(0===r&&(o=138,l=3),t[2*(A+1)+1]=65535,i=0;i<=A;i++)a=r,r=t[2*(i+1)+1],++n<o&&a===r||(n<l?e.bl_tree[2*a]+=n:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[2*p]++):n<=10?e.bl_tree[2*f]++:e.bl_tree[2*Q]++,n=0,s=a,0===r?(o=138,l=3):a===r?(o=6,l=3):(o=7,l=4))}function z(e,t,A){var i,a,s=-1,r=t[1],n=0,o=7,l=4;for(0===r&&(o=138,l=3),i=0;i<=A;i++)if(a=r,r=t[2*(i+1)+1],!(++n<o&&a===r)){if(n<l)do{U(e,a,e.bl_tree)}while(0!=--n);else 0!==a?(a!==s&&(U(e,a,e.bl_tree),n--),U(e,p,e.bl_tree),M(e,n-3,2)):n<=10?(U(e,f,e.bl_tree),M(e,n-3,3)):(U(e,Q,e.bl_tree),M(e,n-11,7));n=0,s=a,0===r?(o=138,l=3):a===r?(o=6,l=3):(o=7,l=4)}}r(F);var V=!1;function W(e,t,A,a){M(e,(n<<1)+(a?1:0),3),function(e,t,A,a){J(e),a&&(R(e,A),R(e,~A)),i.arraySet(e.pending_buf,e.window,t,A,e.pending),e.pending+=A}(e,t,A,!0)}t._tr_init=function(e){V||(!function(){var e,t,A,i,a,s=new Array(I+1);for(A=0,i=0;i<o-1;i++)for(D[i]=A,e=0;e<1<<E[i];e++)k[A++]=i;for(k[A-1]=i,a=0,i=0;i<16;i++)for(F[i]=a,e=0;e<1<<m[i];e++)b[a++]=i;for(a>>=7;i<d;i++)for(F[i]=a<<7,e=0;e<1<<m[i]-7;e++)b[256+a++]=i;for(t=0;t<=I;t++)s[t]=0;for(e=0;e<=143;)_[2*e+1]=8,e++,s[8]++;for(;e<=255;)_[2*e+1]=9,e++,s[9]++;for(;e<=279;)_[2*e+1]=7,e++,s[7]++;for(;e<=287;)_[2*e+1]=8,e++,s[8]++;for(q(_,g+1,s),e=0;e<d;e++)v[2*e+1]=5,v[2*e]=O(e,5);x=new G(_,E,l+1,g,I),L=new G(v,m,0,d,I),S=new G(new Array(0),y,0,h,B)}(),V=!0),e.l_desc=new T(e.dyn_ltree,x),e.d_desc=new T(e.dyn_dtree,L),e.bl_desc=new T(e.bl_tree,S),e.bi_buf=0,e.bi_valid=0,j(e)},t._tr_stored_block=W,t._tr_flush_block=function(e,t,A,i){var r,n,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,A=4093624447;for(t=0;t<=31;t++,A>>>=1)if(1&A&&0!==e.dyn_ltree[2*t])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<l;t++)if(0!==e.dyn_ltree[2*t])return s;return a}(e)),K(e,e.l_desc),K(e,e.d_desc),o=function(e){var t;for(P(e,e.dyn_ltree,e.l_desc.max_code),P(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),t=h-1;t>=3&&0===e.bl_tree[2*w[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(n=e.static_len+3+7>>>3)<=r&&(r=n)):r=n=A+5,A+4<=r&&-1!==t?W(e,t,A,i):4===e.strategy||n===r?(M(e,2+(i?1:0),3),Y(e,_,v)):(M(e,4+(i?1:0),3),function(e,t,A,i){var a;for(M(e,t-257,5),M(e,A-1,5),M(e,i-4,4),a=0;a<i;a++)M(e,e.bl_tree[2*w[a]+1],3);z(e,e.dyn_ltree,t-1),z(e,e.dyn_dtree,A-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Y(e,e.dyn_ltree,e.dyn_dtree)),j(e),i&&J(e)},t._tr_tally=function(e,t,A){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&A,e.last_lit++,0===t?e.dyn_ltree[2*A]++:(e.matches++,t--,e.dyn_ltree[2*(k[A]+l+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){M(e,2,3),U(e,C,_),function(e){16===e.bi_valid?(R(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},442:e=>{e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=\"\",this.state=null,this.data_type=2,this.adler=0}},418:e=>{e.exports=t},185:t=>{if(void 0===e){var A=new Error(\"Cannot find module 'jsdom'\");throw A.code=\"MODULE_NOT_FOUND\",A}t.exports=e}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var s=i[e]={exports:{}};return A[e](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var A in t)a.o(t,A)&&!a.o(e,A)&&Object.defineProperty(e,A,{enumerable:!0,get:t[A]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var s,r,n={};a.r(n),a.d(n,{Decoder:()=>vA,Ellipse:()=>WA,ExcaliburTiledProperties:()=>bA,FLIPPED_DIAGONALLY_FLAG:()=>GA,FLIPPED_HORIZONTALLY_FLAG:()=>SA,FLIPPED_VERTICALLY_FLAG:()=>FA,FetchLoader:()=>kA,InsertedTile:()=>PA,LoaderCache:()=>UA,PluginObject:()=>YA,Point:()=>zA,Polygon:()=>$A,Polyline:()=>ei,Rectangle:()=>XA,Template:()=>ii,TemplateObject:()=>KA,TemplateResource:()=>ni,Text:()=>VA,Tile:()=>ai,TiledDataComponent:()=>oi,TiledLayerDataComponent:()=>li,TiledMap:()=>cA,TiledParser:()=>pA,TiledResource:()=>wi,TiledTemplate:()=>hA,TiledText:()=>Xt,TiledTile:()=>sA,TiledTileLayer:()=>Kt,TiledTileLayerInfinite:()=>Yt,TiledTileset:()=>dA,TiledTilesetFile:()=>lA,Tileset:()=>si,TilesetResource:()=>ri,byClassCaseInsensitive:()=>xA,byNameCaseInsensitive:()=>DA,byPropertyCaseInsensitive:()=>LA,filenameFromPath:()=>jA,getCanonicalGid:()=>MA,isCSV:()=>zt,isFlippedDiagonally:()=>RA,isFlippedHorizontally:()=>TA,isFlippedVertically:()=>NA,isInfiniteLayer:()=>IA,isTiledTilesetCollectionOfImages:()=>oA,isTiledTilesetEmbedded:()=>uA,isTiledTilesetExternal:()=>BA,isTiledTilesetSingleImage:()=>nA,mapPath:()=>JA,mapProps:()=>qA,needsDecoding:()=>Pt,parseObject:()=>ti,parseObjects:()=>Ai,pathInMap:()=>ZA,pathRelativeToBase:()=>HA}),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const A of e)t[A]=A;return t},e.getValidEnumValues=t=>{const A=e.objectKeys(t).filter((e=>\"number\"!=typeof t[t[e]])),i={};for(const e of A)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys=\"function\"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const A in e)Object.prototype.hasOwnProperty.call(e,A)&&t.push(A);return t},e.find=(e,t)=>{for(const A of e)if(t(A))return A},e.isInteger=\"function\"==typeof Number.isInteger?e=>Number.isInteger(e):e=>\"number\"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=\" | \"){return e.map((e=>\"string\"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>\"bigint\"==typeof t?t.toString():t}(s||(s={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(r||(r={}));const o=s.arrayToEnum([\"string\",\"nan\",\"number\",\"integer\",\"float\",\"boolean\",\"date\",\"bigint\",\"symbol\",\"function\",\"undefined\",\"null\",\"array\",\"object\",\"unknown\",\"promise\",\"void\",\"never\",\"map\",\"set\"]),l=e=>{switch(typeof e){case\"undefined\":return o.undefined;case\"string\":return o.string;case\"number\":return isNaN(e)?o.nan:o.number;case\"boolean\":return o.boolean;case\"function\":return o.function;case\"bigint\":return o.bigint;case\"symbol\":return o.symbol;case\"object\":return Array.isArray(e)?o.array:null===e?o.null:e.then&&\"function\"==typeof e.then&&e.catch&&\"function\"==typeof e.catch?o.promise:\"undefined\"!=typeof Map&&e instanceof Map?o.map:\"undefined\"!=typeof Set&&e instanceof Set?o.set:\"undefined\"!=typeof Date&&e instanceof Date?o.date:o.object;default:return o.unknown}},g=s.arrayToEnum([\"invalid_type\",\"invalid_literal\",\"custom\",\"invalid_union\",\"invalid_union_discriminator\",\"invalid_enum_value\",\"unrecognized_keys\",\"invalid_arguments\",\"invalid_return_type\",\"invalid_date\",\"invalid_string\",\"too_small\",\"too_big\",\"invalid_intersection_types\",\"not_multiple_of\",\"not_finite\"]);class d extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name=\"ZodError\",this.issues=e}format(e){const t=e||function(e){return e.message},A={_errors:[]},i=e=>{for(const a of e.issues)if(\"invalid_union\"===a.code)a.unionErrors.map(i);else if(\"invalid_return_type\"===a.code)i(a.returnTypeError);else if(\"invalid_arguments\"===a.code)i(a.argumentsError);else if(0===a.path.length)A._errors.push(t(a));else{let e=A,i=0;for(;i<a.path.length;){const A=a.path[i];i===a.path.length-1?(e[A]=e[A]||{_errors:[]},e[A]._errors.push(t(a))):e[A]=e[A]||{_errors:[]},e=e[A],i++}}};return i(this),A}static assert(e){if(!(e instanceof d))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},A=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):A.push(e(i));return{formErrors:A,fieldErrors:t}}get formErrors(){return this.flatten()}}d.create=e=>new d(e);const h=(e,t)=>{let A;switch(e.code){case g.invalid_type:A=e.received===o.undefined?\"Required\":`Expected ${e.expected}, received ${e.received}`;break;case g.invalid_literal:A=`Invalid literal value, expected ${JSON.stringify(e.expected,s.jsonStringifyReplacer)}`;break;case g.unrecognized_keys:A=`Unrecognized key(s) in object: ${s.joinValues(e.keys,\", \")}`;break;case g.invalid_union:A=\"Invalid input\";break;case g.invalid_union_discriminator:A=`Invalid discriminator value. Expected ${s.joinValues(e.options)}`;break;case g.invalid_enum_value:A=`Invalid enum value. Expected ${s.joinValues(e.options)}, received '${e.received}'`;break;case g.invalid_arguments:A=\"Invalid function arguments\";break;case g.invalid_return_type:A=\"Invalid function return type\";break;case g.invalid_date:A=\"Invalid date\";break;case g.invalid_string:\"object\"==typeof e.validation?\"includes\"in e.validation?(A=`Invalid input: must include \"${e.validation.includes}\"`,\"number\"==typeof e.validation.position&&(A=`${A} at one or more positions greater than or equal to ${e.validation.position}`)):\"startsWith\"in e.validation?A=`Invalid input: must start with \"${e.validation.startsWith}\"`:\"endsWith\"in e.validation?A=`Invalid input: must end with \"${e.validation.endsWith}\"`:s.assertNever(e.validation):A=\"regex\"!==e.validation?`Invalid ${e.validation}`:\"Invalid\";break;case g.too_small:A=\"array\"===e.type?`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"more than\"} ${e.minimum} element(s)`:\"string\"===e.type?`String must contain ${e.exact?\"exactly\":e.inclusive?\"at least\":\"over\"} ${e.minimum} character(s)`:\"number\"===e.type?`Number must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${e.minimum}`:\"date\"===e.type?`Date must be ${e.exact?\"exactly equal to \":e.inclusive?\"greater than or equal to \":\"greater than \"}${new Date(Number(e.minimum))}`:\"Invalid input\";break;case g.too_big:A=\"array\"===e.type?`Array must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"less than\"} ${e.maximum} element(s)`:\"string\"===e.type?`String must contain ${e.exact?\"exactly\":e.inclusive?\"at most\":\"under\"} ${e.maximum} character(s)`:\"number\"===e.type?`Number must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:\"bigint\"===e.type?`BigInt must be ${e.exact?\"exactly\":e.inclusive?\"less than or equal to\":\"less than\"} ${e.maximum}`:\"date\"===e.type?`Date must be ${e.exact?\"exactly\":e.inclusive?\"smaller than or equal to\":\"smaller than\"} ${new Date(Number(e.maximum))}`:\"Invalid input\";break;case g.custom:A=\"Invalid input\";break;case g.invalid_intersection_types:A=\"Intersection results could not be merged\";break;case g.not_multiple_of:A=`Number must be a multiple of ${e.multipleOf}`;break;case g.not_finite:A=\"Number must be finite\";break;default:A=t.defaultError,s.assertNever(e)}return{message:A}};let c=h;function I(){return c}const u=e=>{const{data:t,path:A,errorMaps:i,issueData:a}=e,s=[...A,...a.path||[]],r={...a,path:s};if(void 0!==a.message)return{...a,path:s,message:a.message};let n=\"\";const o=i.filter((e=>!!e)).slice().reverse();for(const e of o)n=e(r,{data:t,defaultError:n}).message;return{...a,path:s,message:n}};function B(e,t){const A=I(),i=u({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,A,A===h?void 0:h].filter((e=>!!e))});e.common.issues.push(i)}class C{constructor(){this.value=\"valid\"}dirty(){\"valid\"===this.value&&(this.value=\"dirty\")}abort(){\"aborted\"!==this.value&&(this.value=\"aborted\")}static mergeArray(e,t){const A=[];for(const i of t){if(\"aborted\"===i.status)return p;\"dirty\"===i.status&&e.dirty(),A.push(i.value)}return{status:e.value,value:A}}static async mergeObjectAsync(e,t){const A=[];for(const e of t){const t=await e.key,i=await e.value;A.push({key:t,value:i})}return C.mergeObjectSync(e,A)}static mergeObjectSync(e,t){const A={};for(const i of t){const{key:t,value:a}=i;if(\"aborted\"===t.status)return p;if(\"aborted\"===a.status)return p;\"dirty\"===t.status&&e.dirty(),\"dirty\"===a.status&&e.dirty(),\"__proto__\"===t.value||void 0===a.value&&!i.alwaysSet||(A[t.value]=a.value)}return{status:e.value,value:A}}}const p=Object.freeze({status:\"aborted\"}),f=e=>({status:\"dirty\",value:e}),Q=e=>({status:\"valid\",value:e}),E=e=>\"aborted\"===e.status,m=e=>\"dirty\"===e.status,y=e=>\"valid\"===e.status,w=e=>\"undefined\"!=typeof Promise&&e instanceof Promise;function _(e,t,A,i){if(\"a\"===A&&!i)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof t?e!==t||!i:!t.has(e))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===A?i:\"a\"===A?i.call(e):i?i.value:t.get(e)}function v(e,t,A,i,a){if(\"m\"===i)throw new TypeError(\"Private method is not writable\");if(\"a\"===i&&!a)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof t?e!==t||!a:!t.has(e))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===i?a.call(e,A):a?a.value=A:t.set(e,A),A}var b,k,D;\"function\"==typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>\"string\"==typeof e?{message:e}:e||{},e.toString=e=>\"string\"==typeof e?e:null==e?void 0:e.message}(b||(b={}));class x{constructor(e,t,A,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=A,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const L=(e,t)=>{if(y(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error(\"Validation failed but no issues detected.\");return{success:!1,get error(){if(this._error)return this._error;const t=new d(e.common.issues);return this._error=t,this._error}}};function S(e){if(!e)return{};const{errorMap:t,invalid_type_error:A,required_error:i,description:a}=e;if(t&&(A||i))throw new Error('Can\\'t use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.');if(t)return{errorMap:t,description:a};return{errorMap:(t,a)=>{var s,r;const{message:n}=e;return\"invalid_enum_value\"===t.code?{message:null!=n?n:a.defaultError}:void 0===a.data?{message:null!==(s=null!=n?n:i)&&void 0!==s?s:a.defaultError}:\"invalid_type\"!==t.code?{message:a.defaultError}:{message:null!==(r=null!=n?n:A)&&void 0!==r?r:a.defaultError}},description:a}}class F{get description(){return this._def.description}_getType(e){return l(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new C,ctx:{common:e.parent.common,data:e.data,parsedType:l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(w(t))throw new Error(\"Synchronous parse encountered promise.\");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const A=this.safeParse(e,t);if(A.success)return A.data;throw A.error}safeParse(e,t){var A;const i={common:{issues:[],async:null!==(A=null==t?void 0:t.async)&&void 0!==A&&A,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},a=this._parseSync({data:e,path:i.path,parent:i});return L(i,a)}\"~validate\"(e){var t,A;const i={common:{issues:[],async:!!this[\"~standard\"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)};if(!this[\"~standard\"].async)try{const t=this._parseSync({data:e,path:[],parent:i});return y(t)?{value:t.value}:{issues:i.common.issues}}catch(e){(null===(A=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===A?void 0:A.includes(\"encountered\"))&&(this[\"~standard\"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then((e=>y(e)?{value:e.value}:{issues:i.common.issues}))}async parseAsync(e,t){const A=await this.safeParseAsync(e,t);if(A.success)return A.data;throw A.error}async safeParseAsync(e,t){const A={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:l(e)},i=this._parse({data:e,path:A.path,parent:A}),a=await(w(i)?i:Promise.resolve(i));return L(A,a)}refine(e,t){const A=e=>\"string\"==typeof t||void 0===t?{message:t}:\"function\"==typeof t?t(e):t;return this._refinement(((t,i)=>{const a=e(t),s=()=>i.addIssue({code:g.custom,...A(t)});return\"undefined\"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(s(),!1))):!!a||(s(),!1)}))}refinement(e,t){return this._refinement(((A,i)=>!!e(A)||(i.addIssue(\"function\"==typeof t?t(A,i):t),!1)))}_refinement(e){return new Fe({schema:this,typeName:He.ZodEffects,effect:{type:\"refinement\",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this[\"~standard\"]={version:1,vendor:\"zod\",validate:e=>this[\"~validate\"](e)}}optional(){return Ge.create(this,this._def)}nullable(){return Te.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ie.create(this)}promise(){return Se.create(this,this._def)}or(e){return Ce.create([this,e],this._def)}and(e){return Ee.create(this,e,this._def)}transform(e){return new Fe({...S(this._def),schema:this,typeName:He.ZodEffects,effect:{type:\"transform\",transform:e}})}default(e){const t=\"function\"==typeof e?e:()=>e;return new Ne({...S(this._def),innerType:this,defaultValue:t,typeName:He.ZodDefault})}brand(){return new Oe({typeName:He.ZodBranded,type:this,...S(this._def)})}catch(e){const t=\"function\"==typeof e?e:()=>e;return new Re({...S(this._def),innerType:this,catchValue:t,typeName:He.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return qe.create(this,e)}readonly(){return je.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const G=/^c[^\\s-]{8,}$/i,T=/^[0-9a-z]+$/,N=/^[0-9A-HJKMNP-TV-Z]{26}$/i,R=/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i,M=/^[a-z0-9_-]{21}$/i,U=/^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,O=/^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/,q=/^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;let j;const J=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Y=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,K=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,P=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,z=\"((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))\",V=new RegExp(`^${z}$`);function W(e){let t=\"([01]\\\\d|2[0-3]):[0-5]\\\\d:[0-5]\\\\d\";return e.precision?t=`${t}\\\\.\\\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\\\.\\\\d+)?`),t}function X(e){let t=`${z}T${W(e)}`;const A=[];return A.push(e.local?\"Z?\":\"Z\"),e.offset&&A.push(\"([+-]\\\\d{2}:?\\\\d{2})\"),t=`${t}(${A.join(\"|\")})`,new RegExp(`^${t}$`)}function $(e,t){if(!U.test(e))return!1;try{const[A]=e.split(\".\"),i=A.replace(/-/g,\"+\").replace(/_/g,\"/\").padEnd(A.length+(4-A.length%4)%4,\"=\"),a=JSON.parse(atob(i));return\"object\"==typeof a&&null!==a&&(!(!a.typ||!a.alg)&&(!t||a.alg===t))}catch(e){return!1}}function ee(e,t){return!(\"v4\"!==t&&t||!Z.test(e))||!(\"v6\"!==t&&t||!Y.test(e))}class te extends F{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==o.string){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.string,received:t.parsedType}),p}const t=new C;let A;for(const r of this._def.checks)if(\"min\"===r.kind)e.data.length<r.value&&(A=this._getOrReturnCtx(e,A),B(A,{code:g.too_small,minimum:r.value,type:\"string\",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(\"max\"===r.kind)e.data.length>r.value&&(A=this._getOrReturnCtx(e,A),B(A,{code:g.too_big,maximum:r.value,type:\"string\",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if(\"length\"===r.kind){const i=e.data.length>r.value,a=e.data.length<r.value;(i||a)&&(A=this._getOrReturnCtx(e,A),i?B(A,{code:g.too_big,maximum:r.value,type:\"string\",inclusive:!0,exact:!0,message:r.message}):a&&B(A,{code:g.too_small,minimum:r.value,type:\"string\",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if(\"email\"===r.kind)q.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"email\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"emoji\"===r.kind)j||(j=new RegExp(\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\",\"u\")),j.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"emoji\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"uuid\"===r.kind)R.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"uuid\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"nanoid\"===r.kind)M.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"nanoid\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"cuid\"===r.kind)G.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"cuid\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"cuid2\"===r.kind)T.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"cuid2\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"ulid\"===r.kind)N.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"ulid\",code:g.invalid_string,message:r.message}),t.dirty());else if(\"url\"===r.kind)try{new URL(e.data)}catch(i){A=this._getOrReturnCtx(e,A),B(A,{validation:\"url\",code:g.invalid_string,message:r.message}),t.dirty()}else if(\"regex\"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"regex\",code:g.invalid_string,message:r.message}),t.dirty())}else if(\"trim\"===r.kind)e.data=e.data.trim();else if(\"includes\"===r.kind)e.data.includes(r.value,r.position)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if(\"toLowerCase\"===r.kind)e.data=e.data.toLowerCase();else if(\"toUpperCase\"===r.kind)e.data=e.data.toUpperCase();else if(\"startsWith\"===r.kind)e.data.startsWith(r.value)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if(\"endsWith\"===r.kind)e.data.endsWith(r.value)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if(\"datetime\"===r.kind){X(r).test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:\"datetime\",message:r.message}),t.dirty())}else if(\"date\"===r.kind){V.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:\"date\",message:r.message}),t.dirty())}else if(\"time\"===r.kind){new RegExp(`^${W(r)}$`).test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{code:g.invalid_string,validation:\"time\",message:r.message}),t.dirty())}else\"duration\"===r.kind?O.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"duration\",code:g.invalid_string,message:r.message}),t.dirty()):\"ip\"===r.kind?(i=e.data,(\"v4\"!==(a=r.version)&&a||!J.test(i))&&(\"v6\"!==a&&a||!H.test(i))&&(A=this._getOrReturnCtx(e,A),B(A,{validation:\"ip\",code:g.invalid_string,message:r.message}),t.dirty())):\"jwt\"===r.kind?$(e.data,r.alg)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"jwt\",code:g.invalid_string,message:r.message}),t.dirty()):\"cidr\"===r.kind?ee(e.data,r.version)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"cidr\",code:g.invalid_string,message:r.message}),t.dirty()):\"base64\"===r.kind?K.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"base64\",code:g.invalid_string,message:r.message}),t.dirty()):\"base64url\"===r.kind?P.test(e.data)||(A=this._getOrReturnCtx(e,A),B(A,{validation:\"base64url\",code:g.invalid_string,message:r.message}),t.dirty()):s.assertNever(r);var i,a;return{status:t.value,value:e.data}}_regex(e,t,A){return this.refinement((t=>e.test(t)),{validation:t,code:g.invalid_string,...b.errToObj(A)})}_addCheck(e){return new te({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:\"email\",...b.errToObj(e)})}url(e){return this._addCheck({kind:\"url\",...b.errToObj(e)})}emoji(e){return this._addCheck({kind:\"emoji\",...b.errToObj(e)})}uuid(e){return this._addCheck({kind:\"uuid\",...b.errToObj(e)})}nanoid(e){return this._addCheck({kind:\"nanoid\",...b.errToObj(e)})}cuid(e){return this._addCheck({kind:\"cuid\",...b.errToObj(e)})}cuid2(e){return this._addCheck({kind:\"cuid2\",...b.errToObj(e)})}ulid(e){return this._addCheck({kind:\"ulid\",...b.errToObj(e)})}base64(e){return this._addCheck({kind:\"base64\",...b.errToObj(e)})}base64url(e){return this._addCheck({kind:\"base64url\",...b.errToObj(e)})}jwt(e){return this._addCheck({kind:\"jwt\",...b.errToObj(e)})}ip(e){return this._addCheck({kind:\"ip\",...b.errToObj(e)})}cidr(e){return this._addCheck({kind:\"cidr\",...b.errToObj(e)})}datetime(e){var t,A;return\"string\"==typeof e?this._addCheck({kind:\"datetime\",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:\"datetime\",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(A=null==e?void 0:e.local)&&void 0!==A&&A,...b.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:\"date\",message:e})}time(e){return\"string\"==typeof e?this._addCheck({kind:\"time\",precision:null,message:e}):this._addCheck({kind:\"time\",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...b.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:\"duration\",...b.errToObj(e)})}regex(e,t){return this._addCheck({kind:\"regex\",regex:e,...b.errToObj(t)})}includes(e,t){return this._addCheck({kind:\"includes\",value:e,position:null==t?void 0:t.position,...b.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:\"startsWith\",value:e,...b.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:\"endsWith\",value:e,...b.errToObj(t)})}min(e,t){return this._addCheck({kind:\"min\",value:e,...b.errToObj(t)})}max(e,t){return this._addCheck({kind:\"max\",value:e,...b.errToObj(t)})}length(e,t){return this._addCheck({kind:\"length\",value:e,...b.errToObj(t)})}nonempty(e){return this.min(1,b.errToObj(e))}trim(){return new te({...this._def,checks:[...this._def.checks,{kind:\"trim\"}]})}toLowerCase(){return new te({...this._def,checks:[...this._def.checks,{kind:\"toLowerCase\"}]})}toUpperCase(){return new te({...this._def,checks:[...this._def.checks,{kind:\"toUpperCase\"}]})}get isDatetime(){return!!this._def.checks.find((e=>\"datetime\"===e.kind))}get isDate(){return!!this._def.checks.find((e=>\"date\"===e.kind))}get isTime(){return!!this._def.checks.find((e=>\"time\"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>\"duration\"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>\"email\"===e.kind))}get isURL(){return!!this._def.checks.find((e=>\"url\"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>\"emoji\"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>\"uuid\"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>\"nanoid\"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>\"cuid\"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>\"cuid2\"===e.kind))}get isULID(){return!!this._def.checks.find((e=>\"ulid\"===e.kind))}get isIP(){return!!this._def.checks.find((e=>\"ip\"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>\"cidr\"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>\"base64\"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>\"base64url\"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Ae(e,t){const A=(e.toString().split(\".\")[1]||\"\").length,i=(t.toString().split(\".\")[1]||\"\").length,a=A>i?A:i;return parseInt(e.toFixed(a).replace(\".\",\"\"))%parseInt(t.toFixed(a).replace(\".\",\"\"))/Math.pow(10,a)}te.create=e=>{var t;return new te({checks:[],typeName:He.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...S(e)})};class ie extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==o.number){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.number,received:t.parsedType}),p}let t;const A=new C;for(const i of this._def.checks)if(\"int\"===i.kind)s.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{code:g.invalid_type,expected:\"integer\",received:\"float\",message:i.message}),A.dirty());else if(\"min\"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.too_small,minimum:i.value,type:\"number\",inclusive:i.inclusive,exact:!1,message:i.message}),A.dirty())}else if(\"max\"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.too_big,maximum:i.value,type:\"number\",inclusive:i.inclusive,exact:!1,message:i.message}),A.dirty())}else\"multipleOf\"===i.kind?0!==Ae(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),A.dirty()):\"finite\"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),B(t,{code:g.not_finite,message:i.message}),A.dirty()):s.assertNever(i);return{status:A.value,value:e.data}}gte(e,t){return this.setLimit(\"min\",e,!0,b.toString(t))}gt(e,t){return this.setLimit(\"min\",e,!1,b.toString(t))}lte(e,t){return this.setLimit(\"max\",e,!0,b.toString(t))}lt(e,t){return this.setLimit(\"max\",e,!1,b.toString(t))}setLimit(e,t,A,i){return new ie({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:A,message:b.toString(i)}]})}_addCheck(e){return new ie({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:\"int\",message:b.toString(e)})}positive(e){return this._addCheck({kind:\"min\",value:0,inclusive:!1,message:b.toString(e)})}negative(e){return this._addCheck({kind:\"max\",value:0,inclusive:!1,message:b.toString(e)})}nonpositive(e){return this._addCheck({kind:\"max\",value:0,inclusive:!0,message:b.toString(e)})}nonnegative(e){return this._addCheck({kind:\"min\",value:0,inclusive:!0,message:b.toString(e)})}multipleOf(e,t){return this._addCheck({kind:\"multipleOf\",value:e,message:b.toString(t)})}finite(e){return this._addCheck({kind:\"finite\",message:b.toString(e)})}safe(e){return this._addCheck({kind:\"min\",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:b.toString(e)})._addCheck({kind:\"max\",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:b.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>\"int\"===e.kind||\"multipleOf\"===e.kind&&s.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const A of this._def.checks){if(\"finite\"===A.kind||\"int\"===A.kind||\"multipleOf\"===A.kind)return!0;\"min\"===A.kind?(null===t||A.value>t)&&(t=A.value):\"max\"===A.kind&&(null===e||A.value<e)&&(e=A.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ie.create=e=>new ie({checks:[],typeName:He.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...S(e)});class ae extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==o.bigint)return this._getInvalidInput(e);let t;const A=new C;for(const i of this._def.checks)if(\"min\"===i.kind){(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.too_small,type:\"bigint\",minimum:i.value,inclusive:i.inclusive,message:i.message}),A.dirty())}else if(\"max\"===i.kind){(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.too_big,type:\"bigint\",maximum:i.value,inclusive:i.inclusive,message:i.message}),A.dirty())}else\"multipleOf\"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),B(t,{code:g.not_multiple_of,multipleOf:i.value,message:i.message}),A.dirty()):s.assertNever(i);return{status:A.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.bigint,received:t.parsedType}),p}gte(e,t){return this.setLimit(\"min\",e,!0,b.toString(t))}gt(e,t){return this.setLimit(\"min\",e,!1,b.toString(t))}lte(e,t){return this.setLimit(\"max\",e,!0,b.toString(t))}lt(e,t){return this.setLimit(\"max\",e,!1,b.toString(t))}setLimit(e,t,A,i){return new ae({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:A,message:b.toString(i)}]})}_addCheck(e){return new ae({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:\"min\",value:BigInt(0),inclusive:!1,message:b.toString(e)})}negative(e){return this._addCheck({kind:\"max\",value:BigInt(0),inclusive:!1,message:b.toString(e)})}nonpositive(e){return this._addCheck({kind:\"max\",value:BigInt(0),inclusive:!0,message:b.toString(e)})}nonnegative(e){return this._addCheck({kind:\"min\",value:BigInt(0),inclusive:!0,message:b.toString(e)})}multipleOf(e,t){return this._addCheck({kind:\"multipleOf\",value:e,message:b.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ae.create=e=>{var t;return new ae({checks:[],typeName:He.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...S(e)})};class se extends F{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==o.boolean){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.boolean,received:t.parsedType}),p}return Q(e.data)}}se.create=e=>new se({typeName:He.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...S(e)});class re extends F{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==o.date){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.date,received:t.parsedType}),p}if(isNaN(e.data.getTime())){return B(this._getOrReturnCtx(e),{code:g.invalid_date}),p}const t=new C;let A;for(const i of this._def.checks)\"min\"===i.kind?e.data.getTime()<i.value&&(A=this._getOrReturnCtx(e,A),B(A,{code:g.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:\"date\"}),t.dirty()):\"max\"===i.kind?e.data.getTime()>i.value&&(A=this._getOrReturnCtx(e,A),B(A,{code:g.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:\"date\"}),t.dirty()):s.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:\"min\",value:e.getTime(),message:b.toString(t)})}max(e,t){return this._addCheck({kind:\"max\",value:e.getTime(),message:b.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)\"min\"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)\"max\"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}re.create=e=>new re({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:He.ZodDate,...S(e)});class ne extends F{_parse(e){if(this._getType(e)!==o.symbol){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.symbol,received:t.parsedType}),p}return Q(e.data)}}ne.create=e=>new ne({typeName:He.ZodSymbol,...S(e)});class oe extends F{_parse(e){if(this._getType(e)!==o.undefined){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.undefined,received:t.parsedType}),p}return Q(e.data)}}oe.create=e=>new oe({typeName:He.ZodUndefined,...S(e)});class le extends F{_parse(e){if(this._getType(e)!==o.null){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.null,received:t.parsedType}),p}return Q(e.data)}}le.create=e=>new le({typeName:He.ZodNull,...S(e)});class ge extends F{constructor(){super(...arguments),this._any=!0}_parse(e){return Q(e.data)}}ge.create=e=>new ge({typeName:He.ZodAny,...S(e)});class de extends F{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Q(e.data)}}de.create=e=>new de({typeName:He.ZodUnknown,...S(e)});class he extends F{_parse(e){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.never,received:t.parsedType}),p}}he.create=e=>new he({typeName:He.ZodNever,...S(e)});class ce extends F{_parse(e){if(this._getType(e)!==o.undefined){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.void,received:t.parsedType}),p}return Q(e.data)}}ce.create=e=>new ce({typeName:He.ZodVoid,...S(e)});class Ie extends F{_parse(e){const{ctx:t,status:A}=this._processInputParams(e),i=this._def;if(t.parsedType!==o.array)return B(t,{code:g.invalid_type,expected:o.array,received:t.parsedType}),p;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&(B(t,{code:e?g.too_big:g.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:\"array\",inclusive:!0,exact:!0,message:i.exactLength.message}),A.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&(B(t,{code:g.too_small,minimum:i.minLength.value,type:\"array\",inclusive:!0,exact:!1,message:i.minLength.message}),A.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&(B(t,{code:g.too_big,maximum:i.maxLength.value,type:\"array\",inclusive:!0,exact:!1,message:i.maxLength.message}),A.dirty()),t.common.async)return Promise.all([...t.data].map(((e,A)=>i.type._parseAsync(new x(t,e,t.path,A))))).then((e=>C.mergeArray(A,e)));const a=[...t.data].map(((e,A)=>i.type._parseSync(new x(t,e,t.path,A))));return C.mergeArray(A,a)}get element(){return this._def.type}min(e,t){return new Ie({...this._def,minLength:{value:e,message:b.toString(t)}})}max(e,t){return new Ie({...this._def,maxLength:{value:e,message:b.toString(t)}})}length(e,t){return new Ie({...this._def,exactLength:{value:e,message:b.toString(t)}})}nonempty(e){return this.min(1,e)}}function ue(e){if(e instanceof Be){const t={};for(const A in e.shape){const i=e.shape[A];t[A]=Ge.create(ue(i))}return new Be({...e._def,shape:()=>t})}return e instanceof Ie?new Ie({...e._def,type:ue(e.element)}):e instanceof Ge?Ge.create(ue(e.unwrap())):e instanceof Te?Te.create(ue(e.unwrap())):e instanceof me?me.create(e.items.map((e=>ue(e)))):e}Ie.create=(e,t)=>new Ie({type:e,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...S(t)});class Be extends F{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=s.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==o.object){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.object,received:t.parsedType}),p}const{status:t,ctx:A}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),s=[];if(!(this._def.catchall instanceof he&&\"strip\"===this._def.unknownKeys))for(const e in A.data)a.includes(e)||s.push(e);const r=[];for(const e of a){const t=i[e],a=A.data[e];r.push({key:{status:\"valid\",value:e},value:t._parse(new x(A,a,A.path,e)),alwaysSet:e in A.data})}if(this._def.catchall instanceof he){const e=this._def.unknownKeys;if(\"passthrough\"===e)for(const e of s)r.push({key:{status:\"valid\",value:e},value:{status:\"valid\",value:A.data[e]}});else if(\"strict\"===e)s.length>0&&(B(A,{code:g.unrecognized_keys,keys:s}),t.dirty());else if(\"strip\"!==e)throw new Error(\"Internal ZodObject error: invalid unknownKeys value.\")}else{const e=this._def.catchall;for(const t of s){const i=A.data[t];r.push({key:{status:\"valid\",value:t},value:e._parse(new x(A,i,A.path,t)),alwaysSet:t in A.data})}}return A.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of r){const A=await t.key,i=await t.value;e.push({key:A,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>C.mergeObjectSync(t,e))):C.mergeObjectSync(t,r)}get shape(){return this._def.shape()}strict(e){return b.errToObj,new Be({...this._def,unknownKeys:\"strict\",...void 0!==e?{errorMap:(t,A)=>{var i,a,s,r;const n=null!==(s=null===(a=(i=this._def).errorMap)||void 0===a?void 0:a.call(i,t,A).message)&&void 0!==s?s:A.defaultError;return\"unrecognized_keys\"===t.code?{message:null!==(r=b.errToObj(e).message)&&void 0!==r?r:n}:{message:n}}}:{}})}strip(){return new Be({...this._def,unknownKeys:\"strip\"})}passthrough(){return new Be({...this._def,unknownKeys:\"passthrough\"})}extend(e){return new Be({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Be({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Be({...this._def,catchall:e})}pick(e){const t={};return s.objectKeys(e).forEach((A=>{e[A]&&this.shape[A]&&(t[A]=this.shape[A])})),new Be({...this._def,shape:()=>t})}omit(e){const t={};return s.objectKeys(this.shape).forEach((A=>{e[A]||(t[A]=this.shape[A])})),new Be({...this._def,shape:()=>t})}deepPartial(){return ue(this)}partial(e){const t={};return s.objectKeys(this.shape).forEach((A=>{const i=this.shape[A];e&&!e[A]?t[A]=i:t[A]=i.optional()})),new Be({...this._def,shape:()=>t})}required(e){const t={};return s.objectKeys(this.shape).forEach((A=>{if(e&&!e[A])t[A]=this.shape[A];else{let e=this.shape[A];for(;e instanceof Ge;)e=e._def.innerType;t[A]=e}})),new Be({...this._def,shape:()=>t})}keyof(){return De(s.objectKeys(this.shape))}}Be.create=(e,t)=>new Be({shape:()=>e,unknownKeys:\"strip\",catchall:he.create(),typeName:He.ZodObject,...S(t)}),Be.strictCreate=(e,t)=>new Be({shape:()=>e,unknownKeys:\"strict\",catchall:he.create(),typeName:He.ZodObject,...S(t)}),Be.lazycreate=(e,t)=>new Be({shape:e,unknownKeys:\"strip\",catchall:he.create(),typeName:He.ZodObject,...S(t)});class Ce extends F{_parse(e){const{ctx:t}=this._processInputParams(e),A=this._def.options;if(t.common.async)return Promise.all(A.map((async e=>{const A={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:A}),ctx:A}}))).then((function(e){for(const t of e)if(\"valid\"===t.result.status)return t.result;for(const A of e)if(\"dirty\"===A.result.status)return t.common.issues.push(...A.ctx.common.issues),A.result;const A=e.map((e=>new d(e.ctx.common.issues)));return B(t,{code:g.invalid_union,unionErrors:A}),p}));{let e;const i=[];for(const a of A){const A={...t,common:{...t.common,issues:[]},parent:null},s=a._parseSync({data:t.data,path:t.path,parent:A});if(\"valid\"===s.status)return s;\"dirty\"!==s.status||e||(e={result:s,ctx:A}),A.common.issues.length&&i.push(A.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=i.map((e=>new d(e)));return B(t,{code:g.invalid_union,unionErrors:a}),p}}get options(){return this._def.options}}Ce.create=(e,t)=>new Ce({options:e,typeName:He.ZodUnion,...S(t)});const pe=e=>e instanceof be?pe(e.schema):e instanceof Fe?pe(e.innerType()):e instanceof ke?[e.value]:e instanceof xe?e.options:e instanceof Le?s.objectValues(e.enum):e instanceof Ne?pe(e._def.innerType):e instanceof oe?[void 0]:e instanceof le?[null]:e instanceof Ge?[void 0,...pe(e.unwrap())]:e instanceof Te?[null,...pe(e.unwrap())]:e instanceof Oe||e instanceof je?pe(e.unwrap()):e instanceof Re?pe(e._def.innerType):[];class fe extends F{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.object)return B(t,{code:g.invalid_type,expected:o.object,received:t.parsedType}),p;const A=this.discriminator,i=t.data[A],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(B(t,{code:g.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[A]}),p)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,A){const i=new Map;for(const A of t){const t=pe(A.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \\`${e}\\` could not be extracted from all schema options`);for(const a of t){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,A)}}return new fe({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...S(A)})}}function Qe(e,t){const A=l(e),i=l(t);if(e===t)return{valid:!0,data:e};if(A===o.object&&i===o.object){const A=s.objectKeys(t),i=s.objectKeys(e).filter((e=>-1!==A.indexOf(e))),a={...e,...t};for(const A of i){const i=Qe(e[A],t[A]);if(!i.valid)return{valid:!1};a[A]=i.data}return{valid:!0,data:a}}if(A===o.array&&i===o.array){if(e.length!==t.length)return{valid:!1};const A=[];for(let i=0;i<e.length;i++){const a=Qe(e[i],t[i]);if(!a.valid)return{valid:!1};A.push(a.data)}return{valid:!0,data:A}}return A===o.date&&i===o.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Ee extends F{_parse(e){const{status:t,ctx:A}=this._processInputParams(e),i=(e,i)=>{if(E(e)||E(i))return p;const a=Qe(e.value,i.value);return a.valid?((m(e)||m(i))&&t.dirty(),{status:t.value,value:a.data}):(B(A,{code:g.invalid_intersection_types}),p)};return A.common.async?Promise.all([this._def.left._parseAsync({data:A.data,path:A.path,parent:A}),this._def.right._parseAsync({data:A.data,path:A.path,parent:A})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:A.data,path:A.path,parent:A}),this._def.right._parseSync({data:A.data,path:A.path,parent:A}))}}Ee.create=(e,t,A)=>new Ee({left:e,right:t,typeName:He.ZodIntersection,...S(A)});class me extends F{_parse(e){const{status:t,ctx:A}=this._processInputParams(e);if(A.parsedType!==o.array)return B(A,{code:g.invalid_type,expected:o.array,received:A.parsedType}),p;if(A.data.length<this._def.items.length)return B(A,{code:g.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:\"array\"}),p;!this._def.rest&&A.data.length>this._def.items.length&&(B(A,{code:g.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:\"array\"}),t.dirty());const i=[...A.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new x(A,e,A.path,t)):null})).filter((e=>!!e));return A.common.async?Promise.all(i).then((e=>C.mergeArray(t,e))):C.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new me({...this._def,rest:e})}}me.create=(e,t)=>{if(!Array.isArray(e))throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");return new me({items:e,typeName:He.ZodTuple,rest:null,...S(t)})};class ye extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:A}=this._processInputParams(e);if(A.parsedType!==o.object)return B(A,{code:g.invalid_type,expected:o.object,received:A.parsedType}),p;const i=[],a=this._def.keyType,s=this._def.valueType;for(const e in A.data)i.push({key:a._parse(new x(A,e,A.path,e)),value:s._parse(new x(A,A.data[e],A.path,e)),alwaysSet:e in A.data});return A.common.async?C.mergeObjectAsync(t,i):C.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,A){return new ye(t instanceof F?{keyType:e,valueType:t,typeName:He.ZodRecord,...S(A)}:{keyType:te.create(),valueType:e,typeName:He.ZodRecord,...S(t)})}}class we extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:A}=this._processInputParams(e);if(A.parsedType!==o.map)return B(A,{code:g.invalid_type,expected:o.map,received:A.parsedType}),p;const i=this._def.keyType,a=this._def.valueType,s=[...A.data.entries()].map((([e,t],s)=>({key:i._parse(new x(A,e,A.path,[s,\"key\"])),value:a._parse(new x(A,t,A.path,[s,\"value\"]))})));if(A.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const A of s){const i=await A.key,a=await A.value;if(\"aborted\"===i.status||\"aborted\"===a.status)return p;\"dirty\"!==i.status&&\"dirty\"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const A of s){const i=A.key,a=A.value;if(\"aborted\"===i.status||\"aborted\"===a.status)return p;\"dirty\"!==i.status&&\"dirty\"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}we.create=(e,t,A)=>new we({valueType:t,keyType:e,typeName:He.ZodMap,...S(A)});class _e extends F{_parse(e){const{status:t,ctx:A}=this._processInputParams(e);if(A.parsedType!==o.set)return B(A,{code:g.invalid_type,expected:o.set,received:A.parsedType}),p;const i=this._def;null!==i.minSize&&A.data.size<i.minSize.value&&(B(A,{code:g.too_small,minimum:i.minSize.value,type:\"set\",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&A.data.size>i.maxSize.value&&(B(A,{code:g.too_big,maximum:i.maxSize.value,type:\"set\",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function s(e){const A=new Set;for(const i of e){if(\"aborted\"===i.status)return p;\"dirty\"===i.status&&t.dirty(),A.add(i.value)}return{status:t.value,value:A}}const r=[...A.data.values()].map(((e,t)=>a._parse(new x(A,e,A.path,t))));return A.common.async?Promise.all(r).then((e=>s(e))):s(r)}min(e,t){return new _e({...this._def,minSize:{value:e,message:b.toString(t)}})}max(e,t){return new _e({...this._def,maxSize:{value:e,message:b.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}_e.create=(e,t)=>new _e({valueType:e,minSize:null,maxSize:null,typeName:He.ZodSet,...S(t)});class ve extends F{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.function)return B(t,{code:g.invalid_type,expected:o.function,received:t.parsedType}),p;function A(e,A){return u({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,I(),h].filter((e=>!!e)),issueData:{code:g.invalid_arguments,argumentsError:A}})}function i(e,A){return u({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,I(),h].filter((e=>!!e)),issueData:{code:g.invalid_return_type,returnTypeError:A}})}const a={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof Se){const e=this;return Q((async function(...t){const r=new d([]),n=await e._def.args.parseAsync(t,a).catch((e=>{throw r.addIssue(A(t,e)),r})),o=await Reflect.apply(s,this,n);return await e._def.returns._def.type.parseAsync(o,a).catch((e=>{throw r.addIssue(i(o,e)),r}))}))}{const e=this;return Q((function(...t){const r=e._def.args.safeParse(t,a);if(!r.success)throw new d([A(t,r.error)]);const n=Reflect.apply(s,this,r.data),o=e._def.returns.safeParse(n,a);if(!o.success)throw new d([i(n,o.error)]);return o.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ve({...this._def,args:me.create(e).rest(de.create())})}returns(e){return new ve({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,A){return new ve({args:e||me.create([]).rest(de.create()),returns:t||de.create(),typeName:He.ZodFunction,...S(A)})}}class be extends F{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}be.create=(e,t)=>new be({getter:e,typeName:He.ZodLazy,...S(t)});class ke extends F{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return B(t,{received:t.data,code:g.invalid_literal,expected:this._def.value}),p}return{status:\"valid\",value:e.data}}get value(){return this._def.value}}function De(e,t){return new xe({values:e,typeName:He.ZodEnum,...S(t)})}ke.create=(e,t)=>new ke({value:e,typeName:He.ZodLiteral,...S(t)});class xe extends F{constructor(){super(...arguments),k.set(this,void 0)}_parse(e){if(\"string\"!=typeof e.data){const t=this._getOrReturnCtx(e),A=this._def.values;return B(t,{expected:s.joinValues(A),received:t.parsedType,code:g.invalid_type}),p}if(_(this,k,\"f\")||v(this,k,new Set(this._def.values),\"f\"),!_(this,k,\"f\").has(e.data)){const t=this._getOrReturnCtx(e),A=this._def.values;return B(t,{received:t.data,code:g.invalid_enum_value,options:A}),p}return Q(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return xe.create(e,{...this._def,...t})}exclude(e,t=this._def){return xe.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}k=new WeakMap,xe.create=De;class Le extends F{constructor(){super(...arguments),D.set(this,void 0)}_parse(e){const t=s.getValidEnumValues(this._def.values),A=this._getOrReturnCtx(e);if(A.parsedType!==o.string&&A.parsedType!==o.number){const e=s.objectValues(t);return B(A,{expected:s.joinValues(e),received:A.parsedType,code:g.invalid_type}),p}if(_(this,D,\"f\")||v(this,D,new Set(s.getValidEnumValues(this._def.values)),\"f\"),!_(this,D,\"f\").has(e.data)){const e=s.objectValues(t);return B(A,{received:A.data,code:g.invalid_enum_value,options:e}),p}return Q(e.data)}get enum(){return this._def.values}}D=new WeakMap,Le.create=(e,t)=>new Le({values:e,typeName:He.ZodNativeEnum,...S(t)});class Se extends F{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==o.promise&&!1===t.common.async)return B(t,{code:g.invalid_type,expected:o.promise,received:t.parsedType}),p;const A=t.parsedType===o.promise?t.data:Promise.resolve(t.data);return Q(A.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Se.create=(e,t)=>new Se({type:e,typeName:He.ZodPromise,...S(t)});class Fe extends F{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:A}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:e=>{B(A,e),e.fatal?t.abort():t.dirty()},get path(){return A.path}};if(a.addIssue=a.addIssue.bind(a),\"preprocess\"===i.type){const e=i.transform(A.data,a);if(A.common.async)return Promise.resolve(e).then((async e=>{if(\"aborted\"===t.value)return p;const i=await this._def.schema._parseAsync({data:e,path:A.path,parent:A});return\"aborted\"===i.status?p:\"dirty\"===i.status||\"dirty\"===t.value?f(i.value):i}));{if(\"aborted\"===t.value)return p;const i=this._def.schema._parseSync({data:e,path:A.path,parent:A});return\"aborted\"===i.status?p:\"dirty\"===i.status||\"dirty\"===t.value?f(i.value):i}}if(\"refinement\"===i.type){const e=e=>{const t=i.refinement(e,a);if(A.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");return e};if(!1===A.common.async){const i=this._def.schema._parseSync({data:A.data,path:A.path,parent:A});return\"aborted\"===i.status?p:(\"dirty\"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:A.data,path:A.path,parent:A}).then((A=>\"aborted\"===A.status?p:(\"dirty\"===A.status&&t.dirty(),e(A.value).then((()=>({status:t.value,value:A.value}))))))}if(\"transform\"===i.type){if(!1===A.common.async){const e=this._def.schema._parseSync({data:A.data,path:A.path,parent:A});if(!y(e))return e;const s=i.transform(e.value,a);if(s instanceof Promise)throw new Error(\"Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.\");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:A.data,path:A.path,parent:A}).then((e=>y(e)?Promise.resolve(i.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}s.assertNever(i)}}Fe.create=(e,t,A)=>new Fe({schema:e,typeName:He.ZodEffects,effect:t,...S(A)}),Fe.createWithPreprocess=(e,t,A)=>new Fe({schema:t,effect:{type:\"preprocess\",transform:e},typeName:He.ZodEffects,...S(A)});class Ge extends F{_parse(e){return this._getType(e)===o.undefined?Q(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ge.create=(e,t)=>new Ge({innerType:e,typeName:He.ZodOptional,...S(t)});class Te extends F{_parse(e){return this._getType(e)===o.null?Q(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Te.create=(e,t)=>new Te({innerType:e,typeName:He.ZodNullable,...S(t)});class Ne extends F{_parse(e){const{ctx:t}=this._processInputParams(e);let A=t.data;return t.parsedType===o.undefined&&(A=this._def.defaultValue()),this._def.innerType._parse({data:A,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ne.create=(e,t)=>new Ne({innerType:e,typeName:He.ZodDefault,defaultValue:\"function\"==typeof t.default?t.default:()=>t.default,...S(t)});class Re extends F{_parse(e){const{ctx:t}=this._processInputParams(e),A={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:A.data,path:A.path,parent:{...A}});return w(i)?i.then((e=>({status:\"valid\",value:\"valid\"===e.status?e.value:this._def.catchValue({get error(){return new d(A.common.issues)},input:A.data})}))):{status:\"valid\",value:\"valid\"===i.status?i.value:this._def.catchValue({get error(){return new d(A.common.issues)},input:A.data})}}removeCatch(){return this._def.innerType}}Re.create=(e,t)=>new Re({innerType:e,typeName:He.ZodCatch,catchValue:\"function\"==typeof t.catch?t.catch:()=>t.catch,...S(t)});class Me extends F{_parse(e){if(this._getType(e)!==o.nan){const t=this._getOrReturnCtx(e);return B(t,{code:g.invalid_type,expected:o.nan,received:t.parsedType}),p}return{status:\"valid\",value:e.data}}}Me.create=e=>new Me({typeName:He.ZodNaN,...S(e)});const Ue=Symbol(\"zod_brand\");class Oe extends F{_parse(e){const{ctx:t}=this._processInputParams(e),A=t.data;return this._def.type._parse({data:A,path:t.path,parent:t})}unwrap(){return this._def.type}}class qe extends F{_parse(e){const{status:t,ctx:A}=this._processInputParams(e);if(A.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:A.data,path:A.path,parent:A});return\"aborted\"===e.status?p:\"dirty\"===e.status?(t.dirty(),f(e.value)):this._def.out._parseAsync({data:e.value,path:A.path,parent:A})})()}{const e=this._def.in._parseSync({data:A.data,path:A.path,parent:A});return\"aborted\"===e.status?p:\"dirty\"===e.status?(t.dirty(),{status:\"dirty\",value:e.value}):this._def.out._parseSync({data:e.value,path:A.path,parent:A})}}static create(e,t){return new qe({in:e,out:t,typeName:He.ZodPipeline})}}class je extends F{_parse(e){const t=this._def.innerType._parse(e),A=e=>(y(e)&&(e.value=Object.freeze(e.value)),e);return w(t)?t.then((e=>A(e))):A(t)}unwrap(){return this._def.innerType}}function Je(e,t={},A){return e?ge.create().superRefine(((i,a)=>{var s,r;if(!e(i)){const e=\"function\"==typeof t?t(i):\"string\"==typeof t?{message:t}:t,n=null===(r=null!==(s=e.fatal)&&void 0!==s?s:A)||void 0===r||r,o=\"string\"==typeof e?{message:e}:e;a.addIssue({code:\"custom\",...o,fatal:n})}})):ge.create()}je.create=(e,t)=>new je({innerType:e,typeName:He.ZodReadonly,...S(t)});const Ze={object:Be.lazycreate};var He;!function(e){e.ZodString=\"ZodString\",e.ZodNumber=\"ZodNumber\",e.ZodNaN=\"ZodNaN\",e.ZodBigInt=\"ZodBigInt\",e.ZodBoolean=\"ZodBoolean\",e.ZodDate=\"ZodDate\",e.ZodSymbol=\"ZodSymbol\",e.ZodUndefined=\"ZodUndefined\",e.ZodNull=\"ZodNull\",e.ZodAny=\"ZodAny\",e.ZodUnknown=\"ZodUnknown\",e.ZodNever=\"ZodNever\",e.ZodVoid=\"ZodVoid\",e.ZodArray=\"ZodArray\",e.ZodObject=\"ZodObject\",e.ZodUnion=\"ZodUnion\",e.ZodDiscriminatedUnion=\"ZodDiscriminatedUnion\",e.ZodIntersection=\"ZodIntersection\",e.ZodTuple=\"ZodTuple\",e.ZodRecord=\"ZodRecord\",e.ZodMap=\"ZodMap\",e.ZodSet=\"ZodSet\",e.ZodFunction=\"ZodFunction\",e.ZodLazy=\"ZodLazy\",e.ZodLiteral=\"ZodLiteral\",e.ZodEnum=\"ZodEnum\",e.ZodEffects=\"ZodEffects\",e.ZodNativeEnum=\"ZodNativeEnum\",e.ZodOptional=\"ZodOptional\",e.ZodNullable=\"ZodNullable\",e.ZodDefault=\"ZodDefault\",e.ZodCatch=\"ZodCatch\",e.ZodPromise=\"ZodPromise\",e.ZodBranded=\"ZodBranded\",e.ZodPipeline=\"ZodPipeline\",e.ZodReadonly=\"ZodReadonly\"}(He||(He={}));const Ye=te.create,Ke=ie.create,Pe=Me.create,ze=ae.create,Ve=se.create,We=re.create,Xe=ne.create,$e=oe.create,et=le.create,tt=ge.create,At=de.create,it=he.create,at=ce.create,st=Ie.create,rt=Be.create,nt=Be.strictCreate,ot=Ce.create,lt=fe.create,gt=Ee.create,dt=me.create,ht=ye.create,ct=we.create,It=_e.create,ut=ve.create,Bt=be.create,Ct=ke.create,pt=xe.create,ft=Le.create,Qt=Se.create,Et=Fe.create,mt=Ge.create,yt=Te.create,wt=Fe.createWithPreprocess,_t=qe.create,vt={string:e=>te.create({...e,coerce:!0}),number:e=>ie.create({...e,coerce:!0}),boolean:e=>se.create({...e,coerce:!0}),bigint:e=>ae.create({...e,coerce:!0}),date:e=>re.create({...e,coerce:!0})},bt=p;var kt=Object.freeze({__proto__:null,defaultErrorMap:h,setErrorMap:function(e){c=e},getErrorMap:I,makeIssue:u,EMPTY_PATH:[],addIssueToContext:B,ParseStatus:C,INVALID:p,DIRTY:f,OK:Q,isAborted:E,isDirty:m,isValid:y,isAsync:w,get util(){return s},get objectUtil(){return r},ZodParsedType:o,getParsedType:l,ZodType:F,datetimeRegex:X,ZodString:te,ZodNumber:ie,ZodBigInt:ae,ZodBoolean:se,ZodDate:re,ZodSymbol:ne,ZodUndefined:oe,ZodNull:le,ZodAny:ge,ZodUnknown:de,ZodNever:he,ZodVoid:ce,ZodArray:Ie,ZodObject:Be,ZodUnion:Ce,ZodDiscriminatedUnion:fe,ZodIntersection:Ee,ZodTuple:me,ZodRecord:ye,ZodMap:we,ZodSet:_e,ZodFunction:ve,ZodLazy:be,ZodLiteral:ke,ZodEnum:xe,ZodNativeEnum:Le,ZodPromise:Se,ZodEffects:Fe,ZodTransformer:Fe,ZodOptional:Ge,ZodNullable:Te,ZodDefault:Ne,ZodCatch:Re,ZodNaN:Me,BRAND:Ue,ZodBranded:Oe,ZodPipeline:qe,ZodReadonly:je,custom:Je,Schema:F,ZodSchema:F,late:Ze,get ZodFirstPartyTypeKind(){return He},coerce:vt,any:tt,array:st,bigint:ze,boolean:Ve,date:We,discriminatedUnion:lt,effect:Et,enum:pt,function:ut,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Je((t=>t instanceof e),t),intersection:gt,lazy:Bt,literal:Ct,map:ct,nan:Pe,nativeEnum:ft,never:it,null:et,nullable:yt,number:Ke,object:rt,oboolean:()=>Ve().optional(),onumber:()=>Ke().optional(),optional:mt,ostring:()=>Ye().optional(),pipeline:_t,preprocess:wt,promise:Qt,record:ht,set:It,strictObject:nt,string:Ye,symbol:Xe,transformer:Et,tuple:dt,undefined:$e,union:ot,unknown:At,void:at,NEVER:bt,ZodIssueCode:g,quotelessJson:e=>JSON.stringify(e,null,2).replace(/\"([^\"]+)\":/g,\"$1:\"),ZodError:d});const Dt=kt.object({name:kt.string(),type:kt.literal(\"int\"),value:kt.number().int()}),xt=kt.object({name:kt.string(),type:kt.literal(\"bool\"),value:kt.boolean()}),Lt=kt.object({name:kt.string(),type:kt.literal(\"float\"),value:kt.number()}),St=kt.object({name:kt.string(),type:kt.literal(\"string\"),value:kt.string()}),Ft=kt.object({name:kt.string(),type:kt.literal(\"file\"),value:kt.string()}),Gt=kt.object({name:kt.string(),type:kt.literal(\"color\"),value:kt.string()}),Tt=kt.object({name:kt.string(),type:kt.literal(\"object\"),value:kt.number()}),Nt=kt.discriminatedUnion(\"type\",[Dt,xt,Lt,St,Ft,Gt,Tt]),Rt=kt.object({name:kt.string(),type:kt.literal(\"tilelayer\"),class:kt.string().optional(),height:kt.number(),width:kt.number(),x:kt.number(),y:kt.number(),id:kt.number(),opacity:kt.number(),properties:kt.array(Nt).optional(),visible:kt.boolean(),tintcolor:kt.string().optional(),parallaxx:kt.number().optional(),parallaxy:kt.number().optional(),offsetx:kt.number().optional(),offsety:kt.number().optional()}),Mt=Rt.extend({data:kt.array(kt.number()),encoding:kt.literal(\"csv\")}),Ut=Rt.extend({data:kt.array(kt.number()),encoding:kt.literal(\"base64\"),compression:kt.literal(\"gzip\")}),Ot=Rt.extend({data:kt.array(kt.number()),encoding:kt.literal(\"base64\"),compression:kt.literal(\"zlib\")}),qt=Rt.extend({data:kt.array(kt.number()),encoding:kt.literal(\"base64\"),compression:kt.literal(\"zstandard\")}),jt=Rt.extend({data:kt.string(),encoding:kt.literal(\"base64\"),compression:kt.string().optional()}),Jt=kt.object({x:kt.number(),y:kt.number(),width:kt.number(),height:kt.number(),data:kt.string()}),Zt=kt.object({x:kt.number(),y:kt.number(),width:kt.number(),height:kt.number(),data:kt.array(kt.number())}),Ht=kt.union([Jt,Zt]),Yt=Rt.extend({startx:kt.number(),starty:kt.number(),chunks:kt.array(Ht),encoding:kt.string().optional(),compression:kt.string().optional(),data:kt.undefined()}),Kt=kt.union([jt,Mt,Ut,Ot,qt,Yt]);function Pt(e){return\"base64\"===e.encoding}function zt(e){return\"csv\"===e.encoding||Array.isArray(e.data)}const Vt=kt.object({x:kt.number(),y:kt.number()}),Wt=kt.array(Vt),Xt=kt.object({text:kt.string(),color:kt.string().optional(),fontfamily:kt.string().optional(),pixelsize:kt.number().optional(),wrap:kt.boolean().optional(),halign:kt.union([kt.literal(\"left\"),kt.literal(\"center\"),kt.literal(\"right\"),kt.literal(\"justify\")]).optional(),valign:kt.union([kt.literal(\"top\"),kt.literal(\"center\"),kt.literal(\"bottom\")]).optional()}),$t=kt.object({id:kt.number().optional(),name:kt.string().optional(),type:kt.string().optional(),x:kt.number().optional(),y:kt.number().optional(),rotation:kt.number().optional(),height:kt.number().optional(),width:kt.number().optional(),visible:kt.boolean().optional(),gid:kt.number().optional(),text:Xt.optional(),point:kt.boolean().optional(),ellipse:kt.boolean().optional(),polyline:kt.array(Vt).optional(),polygon:Wt.optional(),template:kt.string().optional(),properties:kt.array(Nt).optional()}),eA=kt.object({duration:kt.number(),tileid:kt.number()}),tA=kt.object({name:kt.string(),draworder:kt.string(),type:kt.literal(\"objectgroup\"),class:kt.string().optional(),x:kt.number(),y:kt.number(),id:kt.number(),color:kt.string().optional(),tintcolor:kt.string().optional(),parallaxx:kt.number().optional(),parallaxy:kt.number().optional(),offsetx:kt.number().optional(),offsety:kt.number().optional(),opacity:kt.number(),properties:kt.array(Nt).optional(),visible:kt.boolean(),objects:kt.array($t)}),AA=kt.object({name:kt.string(),x:kt.number(),y:kt.number(),id:kt.number(),type:kt.literal(\"imagelayer\"),class:kt.string().optional(),image:kt.string().optional(),opacity:kt.number(),properties:kt.array(Nt).optional(),visible:kt.boolean(),tintcolor:kt.string().optional(),repeatx:kt.boolean().optional(),repeaty:kt.boolean().optional(),parallaxx:kt.number().optional(),parallaxy:kt.number().optional(),offsetx:kt.number().optional(),offsety:kt.number().optional(),transparentcolor:kt.string().optional()}),iA=kt.union([Kt,AA,tA]),aA=kt.object({draworder:kt.string(),id:kt.number().optional(),name:kt.string(),x:kt.number(),y:kt.number(),opacity:kt.number(),tintcolor:kt.string().optional(),type:kt.literal(\"objectgroup\"),visible:kt.boolean(),objects:kt.array($t),properties:kt.array(Nt).optional()}),sA=kt.object({id:kt.number(),type:kt.string().optional(),animation:kt.array(eA).optional(),objectgroup:aA.optional(),probability:kt.number().optional(),properties:kt.array(Nt).optional(),image:kt.string().optional(),imageheight:kt.number().optional(),imagewidth:kt.number().optional()}),rA=kt.object({name:kt.string(),firstgid:kt.number().optional(),class:kt.string().optional(),objectalignment:kt.union([kt.literal(\"topleft\"),kt.literal(\"top\"),kt.literal(\"topright\"),kt.literal(\"left\"),kt.literal(\"center\"),kt.literal(\"right\"),kt.literal(\"bottomleft\"),kt.literal(\"bottom\"),kt.literal(\"bottomright\")]).optional(),image:kt.string().optional(),imagewidth:kt.number().optional(),imageheight:kt.number().optional(),columns:kt.number(),tileheight:kt.number(),tilewidth:kt.number(),tilecount:kt.number(),grid:kt.object({height:kt.number(),width:kt.number(),orientation:kt.union([kt.literal(\"isometric\"),kt.literal(\"orthogonal\")])}).optional(),tileoffset:Vt.optional(),spacing:kt.number(),margin:kt.number(),tiles:kt.array(sA).optional(),properties:kt.array(Nt).optional()});function nA(e){return!!e.image}function oA(e){return!e.image}const lA=rA.extend({tiledversion:kt.string().optional(),type:kt.literal(\"tileset\"),version:kt.string().optional()}),gA=kt.object({firstgid:kt.number(),source:kt.string()}),dA=kt.union([rA,gA]),hA=kt.object({object:$t.extend({id:kt.number().optional()}),tileset:gA.optional(),type:kt.literal(\"template\")}),cA=kt.object({type:kt.string(),class:kt.string().optional(),tiledversion:kt.string(),version:kt.string(),width:kt.number(),height:kt.number(),tilewidth:kt.number(),tileheight:kt.number(),compressionlevel:kt.number().optional(),infinite:kt.boolean(),nextlayerid:kt.number(),nextobjectid:kt.number(),parallaxoriginx:kt.number().optional(),parallaxoriginy:kt.number().optional(),hexsidelength:kt.number().optional(),staggeraxis:kt.literal(\"y\").or(kt.literal(\"x\")).optional(),staggerindex:kt.literal(\"odd\").or(kt.literal(\"even\")).optional(),orientation:kt.union([kt.literal(\"isometric\"),kt.literal(\"orthogonal\"),kt.literal(\"staggered\"),kt.literal(\"hexagonal\")]),renderorder:kt.union([kt.literal(\"right-down\"),kt.literal(\"right-up\"),kt.literal(\"left-down\"),kt.literal(\"left-up\")]),backgroundcolor:kt.string().optional(),layers:kt.array(iA),tilesets:kt.array(dA),properties:kt.array(Nt).optional()});function IA(e){return!!e.chunks}function uA(e){return!e.source}function BA(e){return!!e.source}class CA{constructor(e,t,A,i){this.x=e,this.y=t,this.width=A,this.height=i}combine(e){const t=this.x+this.width,A=this.y+this.height,i=e.x+e.width,a=e.y+e.height,s=Math.max(t,i),r=Math.max(A,a);return new CA(Math.min(this.x,e.x),Math.min(this.y,e.y),s-Math.min(this.x,e.x),r-Math.min(this.y,e.y))}}class pA{constructor(){this._largestBounds=new CA(0,0,0,0)}_coerceNumber(e){return+e}_coerceBoolean(e){switch(e){case\"0\":case\"false\":return!1;case\"true\":return!0;default:return!!Boolean(e)}}_coerceType(e,t){return\"bool\"===e?this._coerceBoolean(t):\"int\"===e||\"float\"===e||\"object\"===e?this._coerceNumber(t):t}_parsePropertiesNode(e,t){var A;const i=[];if(e)for(let t of e.children){const e=null!==(A=t.getAttribute(\"type\"))&&void 0!==A?A:\"string\";let a=t.getAttribute(\"value\");a||(a=t.innerHTML),i.push({name:t.getAttribute(\"name\"),type:e,value:this._coerceType(e,a)})}t.properties=i}_parseAttributes(e,t){const A=[\"width\",\"height\",\"columns\",\"firstgid\",\"spacing\",\"margin\",\"tilecount\",\"tilewidth\",\"tileheight\",\"opacity\",\"compressionlevel\",\"nextlayerid\",\"nextobjectid\",\"parallaxoriginx\",\"parallaxoriginy\",\"parallaxx\",\"parallaxy\",\"hexsidelength\",\"offsetx\",\"offsety\",\"id\",\"gid\",\"x\",\"y\",\"rotation\",\"probability\"],i=[\"infinite\",\"visible\",\"repeatx\",\"repeaty\"];for(let a of e.attributes)A.indexOf(a.name)>-1?t[a.name]=this._coerceNumber(a.value):i.indexOf(a.name)>-1?t[a.name]=this._coerceBoolean(a.value):t[a.name]=a.value}_parseToDocument(e){if(\"undefined\"!=typeof DOMParser){return(new DOMParser).parseFromString(e,\"application/xml\")}try{const{JSDOM:t}=a(185);return new t(e,{contentType:\"application/xml\",encoding:\"utf-8\"}).window.document}catch(e){}const t=new Error(\"Could not find DOM parser\");throw console.error(t.message,t),t}parseObject(e,t=!0){var A,i;const a={type:\"\",x:0,y:0};e.getAttribute(\"template\")||(a.visible=!0,a.name=\"\",a.rotation=0,a.height=0,a.width=0),this._parseAttributes(e,a);const s=e.querySelector(\"properties\");s&&this._parsePropertiesNode(s,a);const r=e.querySelector(\"text\");if(r){a.text={text:r.textContent};const e=r.getAttribute(\"fontfamily\");e&&(a.text.fontfamily=e);const t=r.getAttribute(\"color\");t&&(a.text.color=t);const A=r.getAttribute(\"pixelsize\");A&&(a.text.pixelsize=this._coerceNumber(A));const i=r.getAttribute(\"wrap\");i&&(a.text.wrap=this._coerceBoolean(i));const s=r.getAttribute(\"valign\");s&&(a.text.valign=s);const n=r.getAttribute(\"halign\");n&&(a.text.halign=n)}e.querySelector(\"point\")&&(a.point=!0);e.querySelector(\"ellipse\")&&(a.ellipse=!0);const n=e.querySelector(\"polygon\");if(n){const e=null===(A=n.getAttribute(\"points\"))||void 0===A?void 0:A.split(\" \");a.polygon=[],e&&e.forEach((e=>{const t=e.split(\",\");a.polygon.push({x:+t[0],y:+t[1]})}))}const o=e.querySelector(\"polyline\");if(o){const e=null===(i=o.getAttribute(\"points\"))||void 0===i?void 0:i.split(\" \");a.polyline=[],e&&e.forEach((e=>{const t=e.split(\",\");a.polyline.push({x:+t[0],y:+t[1]})}))}if(t)try{return $t.parse(a)}catch(e){throw console.error(\"Could not parse object\",a,e),e}return a}parseTileset(e,t=!0){const A={spacing:0,margin:0};if(this._parseAttributes(e,A),A.source)try{return dA.parse(A)}catch(e){console.error(\"Could not parse external tileset\",A,e)}for(let i of e.children)switch(i.tagName){case\"properties\":this._parsePropertiesNode(i,A);break;case\"tileoffset\":{const e={};this._parseAttributes(i,e),A.tileoffset=e;break}case\"grid\":{const e={};this._parseAttributes(i,e),A.grid=e;break}case\"image\":A.image=i.getAttribute(\"source\"),A.imagewidth=this._coerceNumber(i.getAttribute(\"width\")),A.imageheight=this._coerceNumber(i.getAttribute(\"height\"));break;case\"tile\":{A.tiles||(A.tiles=[]);const e={};this._parseAttributes(i,e);for(let A of i.children)switch(A.tagName){case\"image\":e.image=A.getAttribute(\"source\"),e.imagewidth=this._coerceNumber(A.getAttribute(\"width\")),e.imageheight=this._coerceNumber(A.getAttribute(\"height\"));break;case\"objectgroup\":{const i={type:\"objectgroup\",name:\"\",visible:!0,x:0,y:0,opacity:1,objects:[]};this._parseAttributes(A,i),e.objectgroup=i;for(let e of A.children){const A=this.parseObject(e,t);i.objects.push(A)}break}case\"animation\":{const t=[];for(let e of A.children)t.push({duration:this._coerceNumber(e.getAttribute(\"duration\")),tileid:this._coerceNumber(e.getAttribute(\"tileid\"))});e.animation=t;break}case\"properties\":this._parsePropertiesNode(A,e)}if(t)try{A.tiles.push(sA.parse(e))}catch(t){throw console.error(\"Could not parse Tile\",e,t),t}else A.tiles.push(e);break}}if(t)try{return dA.parse(A)}catch(e){throw console.error(\"Could not parse Tileset\",A,e),e}return A}parseTileLayer(e,t,A=!0){var i,a,s,r;const n={type:\"tilelayer\",x:0,y:0,opacity:1,visible:!0};this._parseAttributes(e,n);for(let A of e.children)switch(A.tagName){case\"properties\":this._parsePropertiesNode(A,n);break;case\"data\":{const e=A.getAttribute(\"encoding\");e&&(n.encoding=e);const o=A.getAttribute(\"compression\");if(o&&(n.compression=o),t){n.width=0,n.height=0,n.chunks=[];let e=new CA(0,0,0,0);for(let t of A.children)if(\"chunk\"===t.tagName){const A={};switch(this._parseAttributes(t,A),n.encoding){case\"base64\":A.data=null===(i=t.textContent)||void 0===i?void 0:i.trim();break;case\"csv\":A.data=null===(a=t.textContent)||void 0===a?void 0:a.split(\",\").map((e=>+e))}const s=new CA(A.x,A.y,A.width,A.height);e=e.combine(s),n.chunks.push(A)}n.width=e.width,n.height=e.height,n.startx=e.x,n.starty=e.y,this._largestBounds=this._largestBounds.combine(new CA(n.startx,n.starty,n.width,n.height))}else switch(n.encoding){case\"base64\":n.data=null===(s=A.textContent)||void 0===s?void 0:s.trim();break;case\"csv\":n.data=null===(r=A.textContent)||void 0===r?void 0:r.split(\",\").map((e=>+e))}}}if(A)try{return iA.parse(n)}catch(e){throw console.error(\"Could not parse tiled tile layer\",n,e),e}return n}parseObjectGroup(e,t=!0){const A={type:\"objectgroup\",draworder:\"topdown\",visible:!0,x:0,y:0,opacity:1,objects:[]};this._parseAttributes(e,A);for(let i of e.children)switch(i.tagName){case\"properties\":this._parsePropertiesNode(i,A);break;case\"object\":{const e=this.parseObject(i,t);A.objects.push(e);break}}if(t)try{return iA.parse(A)}catch(e){throw console.error(\"Could not parse object group\",A,e),e}return A}parseImageLayer(e,t=!0){const A={type:\"imagelayer\",visible:!0,x:0,y:0,opacity:1},i=e.querySelector(\"image\");A.image=null==i?void 0:i.getAttribute(\"source\");const a=e.querySelector(\"properties\");a&&this._parsePropertiesNode(a,A);const s=null==i?void 0:i.getAttribute(\"trans\");if(s&&(A.transparentcolor=\"#\"+s),this._parseAttributes(e,A),t)try{return iA.parse(A)}catch(e){throw console.error(\"Could not parse layer\",A,e),e}return A}parseExternalTemplate(e,t=!0){const A=this._parseToDocument(e).querySelector(\"template\"),i={type:\"template\"},a=A.querySelector(\"object\");a&&(i.object=this.parseObject(a,t));const s=A.querySelector(\"tileset\");if(s&&(i.tileset=this.parseTileset(s,t)),t)try{return hA.parse(i)}catch(e){throw console.error(\"Could not parse template\",i,e),e}return i}parseExternalTileset(e,t=!0){const A=this._parseToDocument(e).querySelector(\"tileset\"),i=this.parseTileset(A,t);if(i.type=\"tileset\",this._parseAttributes(A,i),t)try{return lA.parse(i)}catch(e){throw console.error(\"Could not parse tileset file\",i,e),e}return i}parse(e,t=!0){const A=this._parseToDocument(e).querySelector(\"map\"),i={type:\"map\",compressionlevel:-1,layers:[],tilesets:[]};this._parseAttributes(A,i);const a=(e,t=!0)=>{switch(e.tagName){case\"group\":for(let A of e.children)a(A,t);break;case\"layer\":{const A=this.parseTileLayer(e,i.infinite,t);i.layers.push(A);break}case\"properties\":this._parsePropertiesNode(e,i);break;case\"tileset\":{const A=this.parseTileset(e,t);i.tilesets.push(A);break}case\"objectgroup\":{const A=this.parseObjectGroup(e,t);i.layers.push(A);break}case\"imagelayer\":{const A=this.parseImageLayer(e,t);i.layers.push(A);break}}};for(let e of A.children)a(e,t);if(t)try{return cA.parse(i)}catch(e){throw console.error(\"Could not parse Tiled map\",e),e}return i}}var fA=a(668);let QA,EA,mA;const yA={env:{emscripten_notify_memory_growth:function(e){mA=new Uint8Array(EA.exports.memory.buffer)}}};class wA{init(){return QA||(QA=\"undefined\"!=typeof fetch?fetch(\"data:application/wasm;base64,\"+_A).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,yA))).then(this._init):WebAssembly.instantiate(Buffer.from(_A,\"base64\"),yA).then(this._init),QA)}_init(e){EA=e.instance,yA.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!EA)throw new Error(\"ZSTDDecoder: Await .init() before decoding.\");const A=e.byteLength,i=EA.exports.malloc(A);mA.set(e,i),t=t||Number(EA.exports.ZSTD_findDecompressedSize(i,A));const a=EA.exports.malloc(t),s=EA.exports.ZSTD_decompress(a,t,i,A),r=mA.slice(a,a+s);return EA.exports.free(i),EA.exports.free(a),r}}const _A=\"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IAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQh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ASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigC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C0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdB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IAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY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wOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEE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\";class vA{static decode(e,t){var A,i,a,s,r,n;if(e.length%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var o=\"+\".charCodeAt(0),l=\"/\".charCodeAt(0),g=\"0\".charCodeAt(0),d=\"a\".charCodeAt(0),h=\"A\".charCodeAt(0),c=\"-\".charCodeAt(0),I=\"_\".charCodeAt(0);function u(e){var t=e.charCodeAt(0);if(t===o||t===c)return 62;if(t===l||t===I)return 63;if(t<g)return-1;if(t<g+10)return t-g+26+26;if(t<h+26)return t-h;if(t<d+26)return t-d+26;throw Error(\"Could not decode elt\")}var B=e.length;r=\"=\"===e.charAt(B-2)?2:\"=\"===e.charAt(B-1)?1:0,n=new Uint8Array(3*e.length/4-r),a=r>0?e.length-4:e.length;var C=0;function p(e){n[C++]=e}for(A=0,i=0;A<a;A+=4,i+=3)p((16711680&(s=u(e.charAt(A))<<18|u(e.charAt(A+1))<<12|u(e.charAt(A+2))<<6|u(e.charAt(A+3))))>>16),p((65280&s)>>8),p(255&s);return 2===r?p(255&(s=u(e.charAt(A))<<2|u(e.charAt(A+1))>>4)):1===r&&(p((s=u(e.charAt(A))<<10|u(e.charAt(A+1))<<4|u(e.charAt(A+2))>>2)>>8&255),p(255&s)),new Promise((e=>{const i=function(e){for(var t=0,A=e.length-1;A>=0;A--)t=256*t+1*e[A];return t};if(\"zlib\"===t||\"gzip\"===t){var a=(n=(0,fA.inflate)(n)).length/4,s=new Array(a);for(A=0;A<a;A++)s[A]=i(n.slice(4*A,4*A+4));e(s)}if(\"zstd\"===t){const t=new wA;t.init().then((()=>{var a=(n=t.decode(n)).length/4,s=new Array(a);for(A=0;A<a;A++)s[A]=i(n.slice(4*A,4*A+4));e(s)}))}if(!t){a=n.length/4,s=new Array(a);for(A=0;A<a;A++)s[A]=i(n.slice(4*A,4*A+4));e(s)}}))}}const bA={TileData:{Tiled:\"ex-tiled\"},ZIndex:{ZIndex:\"zindex\"},Camera:{Camera:\"camera\",Zoom:\"zoom\"},Animation:{Strategy:\"animationstrategy\"},Layer:{Solid:\"solid\"},Collision:{Type:\"collisiontype\"}},kA=async(e,t)=>{const A=await fetch(e);switch(t.toLowerCase()){case\"xml\":default:return await A.text();case\"json\":return await A.json()}},DA=e=>t=>(null==t?void 0:t.name)&&e?0===t.name.toLocaleLowerCase().localeCompare(e.toLocaleLowerCase()):(null==t?void 0:t.name)===e,xA=e=>t=>(null==t?void 0:t.class)&&e?0===t.class.toLocaleLowerCase().localeCompare(e.toLocaleLowerCase()):(null==t?void 0:t.class)===e,LA=(e,t)=>A=>{const i=(e=>{const t=new Map;for(let[A,i]of e){let e=i;\"string\"==typeof i&&(e=i.toLocaleLowerCase()),t.set(A.toLocaleLowerCase(),e)}return t})(A.properties);if(void 0!==t){let A=t;return\"string\"==typeof t&&(A=t.toLocaleLowerCase()),i.get(e.toLocaleLowerCase())===A}return i.has(e.toLocaleLowerCase())},SA=2147483648,FA=1073741824,GA=536870912,TA=e=>!!(e&SA),NA=e=>!!(e&FA),RA=e=>!!(e&GA),MA=e=>e&~(SA|FA|GA);class UA{constructor(e){this.type=e,this._loaded=!1,this.cache=new Map}getOrAdd(...e){let t=this.cache.get(e.join(\"+\"));return t||(t=new this.type(...e),this.cache.set(e.join(\"+\"),t),t)}values(){if(this._loaded)return Array.from(this.cache.values());throw new Error(\"Read through cache not yet loaded! No values to return!\")}async load(){const e=Array.from(this.cache.entries()),t=await Promise.allSettled(e.map((e=>e[1].load())));let A=0;for(let i=0;i<t.length;i++){const a=t[i];\"rejected\"===a.status&&(console.error(`Error loading resource at ${e[i][0]}, is your pathMap correct? or your Tiled map corrupted?`,a.reason),A++)}if(A)throw new Error(`Error loading ${A} resources`);this._loaded=!0}}var OA=a(418);function qA(e,t){try{if(t)for(const A of t){let t=A.value;\"string\"==typeof A.value&&(t=A.value.toLocaleLowerCase()),e.properties.set(A.name.toLocaleLowerCase(),t)}}catch(t){console.error(`Unable to map properties onto ${e}`,t)}}function jA(e){const t=e.match(/[^/\\\\&\\?]+\\.\\w{2,4}(?=([\\#\\?&].*$|$))/gi);if(t){return t[0]}throw new Error(`Could not locate filename from path: ${e}`)}function JA(e,t){for(const{path:A,output:i}of t)if(\"string\"==typeof A){if(e.includes(A))return i}else{const t=e.match(A);if(t)return i.replace(\"[match]\",t[0])}return e}function ZA(e,t){if(!t)return!1;for(const{path:A,output:i}of t)if(\"string\"==typeof A){if(e.includes(A))return!0}else{if(e.match(A))return!0}return!1}function HA(e,t,A){if(ZA(t,A)&&A)return JA(t,A);if(0===t.indexOf(\"/\"))return t;const i=e.split(\"/\"),a=t.split(\"/\");return i[i.length-1].includes(\".\")&&i.pop(),i.concat(a).join(\"/\")}class YA{constructor(e){var t,A,i;this.properties=new Map,this.tiledObject=e.tiledObject,this.name=this.tiledObject.name,this.class=this.tiledObject.type,this.id=null!==(t=this.tiledObject.id)&&void 0!==t?t:-1,this.x=null!==(A=this.tiledObject.x)&&void 0!==A?A:0,this.y=null!==(i=this.tiledObject.y)&&void 0!==i?i:0}}class KA extends YA{constructor(e,t){if(super({tiledObject:e}),!e.template)throw new Error(\"Invalid template\");if(this.source=e.template,this.tiledTemplate=e,this.template=t,t.object){this.name=this.name||t.object.name,this.class=this.class||t.object.class;for(const[e,A]of t.object.properties.entries())this.properties.has(e)||this.properties.set(e,A)}if(t.tileset&&t.object.tiledObject.gid){const e=t.tileset.getTileByGid(t.object.tiledObject.gid);if(e){this.class=this.class||e.class;for(const[t,A]of e.properties.entries())this.properties.has(t)||this.properties.set(t,A)}}}}class PA extends YA{constructor(e,t,A,i){super({tiledObject:e}),this.gid=t,this.width=A,this.height=i}}class zA extends YA{}class VA extends YA{constructor(e,t,A,i){var a,s,r;super({tiledObject:e}),this.font=new OA.Font({family:null!==(a=t.fontfamily)&&void 0!==a?a:\"sans-serif\",color:t.color?OA.Color.fromHex(t.color):OA.Color.Black,size:null!==(s=t.pixelsize)&&void 0!==s?s:16,unit:OA.FontUnit.Px,textAlign:this._textAlignFromTiled(t.halign),baseAlign:this._textBaselineFromTiled(t.valign),quality:i});const n=null!==(r=t.wrap)&&void 0!==r&&r;this.text=new OA.Text({text:t.text,font:this.font,...n?{maxWidth:A+10}:{}})}_textBaselineFromTiled(e){switch(e){case\"bottom\":return OA.BaseAlign.Bottom;case\"center\":return OA.BaseAlign.Middle;default:return OA.BaseAlign.Top}}_textAlignFromTiled(e){switch(e){case\"left\":default:return OA.TextAlign.Left;case\"center\":return OA.TextAlign.Center;case\"right\":return OA.TextAlign.Right;case\"justify\":return OA.TextAlign.Start}}}class WA extends YA{constructor(e,t,A){super({tiledObject:e}),this.width=t,this.height=A}}class XA extends YA{constructor(e,t,A,i){super({tiledObject:e}),this.width=t,this.height=A,this.anchor=i}}class $A extends YA{constructor(e,t){super({tiledObject:e}),this.points=[],this.localPoints=[],this.localPoints=t.map((e=>(0,OA.vec)(e.x,e.y))),this.points=t.map((e=>(0,OA.vec)(e.x,e.y).add((0,OA.vec)(this.x,this.y))))}}class ei extends YA{constructor(e,t){super({tiledObject:e}),this.points=[],this.points=t.map((e=>(0,OA.vec)(e.x,e.y)))}}function ti(e,t){var A,i,a,s;let r;if(e.point)r=new zA({tiledObject:e});else if(e.ellipse)e.width&&e.height?(r=new WA(e,e.width,e.height),r.x+=e.width/2,r.y+=e.height/2):r=new WA(e,20,20);else if(e.polygon)r=new $A(e,e.polygon);else if(e.polyline)r=new ei(e,e.polyline);else if(e.text)r=new VA(e,e.text,null!==(A=e.width)&&void 0!==A?A:0,null!==(i=null==t?void 0:t.textQuality)&&void 0!==i?i:4);else if(e.gid){r=new PA(e,e.gid,null!==(a=e.width)&&void 0!==a?a:0,null!==(s=e.height)&&void 0!==s?s:0);const A=null==t?void 0:t.getTilesetForTileGid(e.gid);let i=e.type;if(A){const t=null==A?void 0:A.getTileByGid(e.gid);if(i=i||(null==t?void 0:t.class),null==t?void 0:t.properties)for(const[e,A]of t.properties.entries())r.properties.has(e)||r.properties.set(e,A)}r.class=i}else if(e.template&&t){const A=t.templates.find((t=>jA(t.templatePath)===jA(e.template)));if(!A)throw new Error(`Template object id ${e.id} with name ${e.name} is missing a loaded template file, there should be one loaded from ${e.template}! Is your tiled map or template corrupted?`);r=new KA(e,A)}else r=e.width&&e.height?new XA(e,e.width,e.height,OA.Vector.Zero):new XA(e,20,20,OA.Vector.Half);return qA(r,e.properties),r}function Ai(e,t){const A=[];for(const i of e.objects){let e=ti(i,t);A.push(e)}return A}class ii{constructor(e){const{templatePath:t,object:A,tiledTemplate:i,tileset:a}=e;this.templatePath=t,this.object=A,this.tiledTemplate=i,this.tileset=a}}class ai{constructor(e){this.objects=[],this.colliders=[],this.animation=[],this.properties=new Map;const{id:t,tileset:A,tiledTile:i}=e;this.id=t,this.tileset=A,this.tiledTile=i,this.class=i.type,qA(this,i.properties),i.objectgroup&&i.objectgroup.objects&&(this.objects=Ai(i.objectgroup)),i.animation&&(this.animation=i.animation)}}class si{constructor(e){var t,A,i,a,s,r,n,o,l,g;this.firstGid=-1,this.tileCount=0,this.tileWidth=0,this.tileHeight=0,this.tileOffset=(0,OA.vec)(0,0),this.tiles=[],this.objectalignment=\"bottomleft\",this.orientation=\"orthogonal\",this.properties=new Map;const{name:d,tiledTileset:h,image:c,tileToImage:I,firstGid:u}=e;if(this.name=d,this.tiledTileset=h,this.firstGid=u,nA(h)){qA(this,h.properties);const e=h.spacing,o=Math.floor((h.imagewidth+e)/(h.tilewidth+e)),l=Math.floor((h.imageheight+e)/(h.tileheight+e));if(this.class=h.class,this.orientation=null!==(A=null===(t=h.grid)||void 0===t?void 0:t.orientation)&&void 0!==A?A:\"orthogonal\",this.horizontalFlipTransform=OA.AffineMatrix.identity().translate(h.tilewidth,0).scale(-1,1),this.verticalFlipTransform=OA.AffineMatrix.identity().translate(0,h.tileheight).scale(1,-1),this.diagonalFlipTransform=OA.AffineMatrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),this.objectalignment=null!==(i=h.objectalignment)&&void 0!==i?i:\"orthogonal\"===this.orientation?\"bottomleft\":\"bottom\",c&&(this.spritesheet=OA.SpriteSheet.fromImageSource({image:c,grid:{rows:l,columns:o,spriteWidth:h.tilewidth,spriteHeight:h.tileheight},spacing:{originOffset:{x:null!==(a=h.margin)&&void 0!==a?a:0,y:null!==(s=h.margin)&&void 0!==s?s:0},margin:{x:null!==(r=h.spacing)&&void 0!==r?r:0,y:null!==(n=h.spacing)&&void 0!==n?n:0}}})),this.tileCount=h.tilecount,this.tileWidth=h.tilewidth,this.tileHeight=h.tileheight,h.tileoffset&&(this.tileOffset=(0,OA.vec)(h.tileoffset.x,h.tileoffset.y)),h.tiles)for(const e of h.tiles)this.tiles.push(new ai({id:e.id,tileset:this,tiledTile:e,image:c}))}if(oA(h)&&void 0!==h.firstgid){this.horizontalFlipTransform=OA.AffineMatrix.identity().translate(h.tilewidth,0).scale(-1,1),this.verticalFlipTransform=OA.AffineMatrix.identity().translate(0,h.tileheight).scale(1,-1),this.diagonalFlipTransform=OA.AffineMatrix.identity().translate(0,0).rotate(-Math.PI/2).scale(-1,1),this.objectalignment=null!==(o=h.objectalignment)&&void 0!==o?o:\"orthogonal\"===this.orientation?\"bottomleft\":\"bottom\",this.orientation=null!==(g=null===(l=h.grid)||void 0===l?void 0:l.orientation)&&void 0!==g?g:\"orthogonal\",this.tileCount=h.tilecount,this.tileWidth=h.tilewidth,this.tileHeight=h.tileheight,h.tileoffset&&(this.tileOffset=(0,OA.vec)(h.tileoffset.x,h.tileoffset.y));let e=[];if(h.tiles)for(const t of h.tiles){const A=null==I?void 0:I.get(t);A&&e.push(A.toSprite()),this.tiles.push(new ai({id:t.id,tileset:this,tiledTile:t,image:A}))}I&&(this.spritesheet=new OA.SpriteSheet({sprites:e}))}}getTilesetAlignmentAnchor(e){switch(null!=e?e:this.objectalignment){case\"topleft\":return(0,OA.vec)(0,0);case\"top\":return(0,OA.vec)(.5,0);case\"topright\":return(0,OA.vec)(1,0);case\"left\":return(0,OA.vec)(0,.5);case\"center\":return(0,OA.vec)(.5,.5);case\"right\":return(0,OA.vec)(1,.5);case\"bottomleft\":default:return(0,OA.vec)(0,1);case\"bottom\":return(0,OA.vec)(.5,1);case\"bottomright\":return(0,OA.vec)(1,1)}}getTileByGid(e){const t=MA(e)-this.firstGid;return this.tiles.find((e=>e.id===t))}getTilesByClassName(e){return this.tiles.filter(xA(e))}getTilesByProperty(e,t){return this.tiles.filter(LA(e,t))}getSpriteForGid(e){const t=TA(e),A=NA(e),i=RA(e),a=MA(e),s=a-this.firstGid;if(this.spritesheet){let e=this.spritesheet.sprites[s];return(i||t||A)&&(e=e.clone()),i&&(e.rotation=-Math.PI/2,e.scale=(0,OA.vec)(-1,1)),t&&(e.scale=(0,OA.vec)((i?1:-1)*e.scale.x,(i?-1:1)*e.scale.y)),A&&(e.scale=(0,OA.vec)((i?-1:1)*e.scale.x,(i?1:-1)*e.scale.y)),e}throw new Error(`Tileset: [${this.name}] Could not find sprite for gid: [${e}] normalized gid: [${a}]`)}_isometricTiledCoordToWorld(e){const t=this.tileWidth,A=this.tileHeight/2,i=e.y/A,a=e.x/A;return(0,OA.vec)((a-i)*t/2+0,(a+i)*A/2)}getCollidersForGid(e,t){let{anchor:A,scale:i,orientationOverride:a,offset:s}={anchor:OA.Vector.Zero,scale:OA.Vector.One,offset:OA.Vector.Zero,orientationOverride:void 0,...t};const r=null!=a?a:this.orientation,n=this.getTileByGid(e),o=[];if(n&&n.objects)for(let t of n.objects){if(t instanceof $A){let A=t.points.map((e=>e.scale(i)));A=this._applyFlipsToPoints(A,e),\"isometric\"===r&&(A=A.map((e=>this._isometricTiledCoordToWorld(e)))),A=A.map((e=>e.add(s)));let a=OA.Shape.Polygon(A,OA.Vector.Zero,!0);a.isConvex()?o.push(a):o.push(a.triangulate())}if(t instanceof XA){let a=OA.BoundingBox.fromDimension(t.width*i.x,t.height*i.y,A).getPoints().map((e=>e.add((0,OA.vec)(t.x,t.y))));\"isometric\"===r&&(a=a.map((e=>this._isometricTiledCoordToWorld(e)))),a=this._applyFlipsToPoints(a,e),a=a.map((e=>e.add(s)));const n=OA.Shape.Polygon(a);o.push(n)}if(t instanceof WA){let e=(0,OA.vec)(t.x,t.y);\"isometric\"===r&&(e=this._isometricTiledCoordToWorld(e)),e=e.add(s);const A=Math.min(t.width/2,t.height/2),a=OA.Shape.Circle(A,e.scale(i));o.push(a)}}return o}_applyFlipsToPoints(e,t){const A=TA(t),i=NA(t);return RA(t)&&(e=e.map((e=>this.diagonalFlipTransform.multiply(e)))),A&&(e=e.map((e=>this.horizontalFlipTransform.multiply(e)))),i&&(e=e.map((e=>this.verticalFlipTransform.multiply(e)))),e}getAnimationForGid(e){var t;const A=this.getTileByGid(e);if(A&&(null===(t=A.animation)||void 0===t?void 0:t.length)){let e=[];for(let t of A.animation)e.push({graphic:this.getSpriteForGid(t.tileid+this.firstGid),duration:t.duration});return new OA.Animation({frames:e,strategy:OA.AnimationStrategy.Loop})}return null}}class ri{constructor(e,t,A){this.path=e,this.strict=!0,this.headless=!1,this.orientation=\"orthogonal\",this.fileLoader=kA;const{fileLoader:i,parser:a,pathMap:s,imageLoader:r,strict:n,headless:o,orientation:l}={...A};this.headless=null!=o?o:this.headless,this.orientation=null!=l?l:this.orientation,this.strict=null!=n?n:this.strict,this.fileLoader=null!=i?i:this.fileLoader,this.imageLoader=null!=r?r:new UA(OA.ImageSource),this.parser=null!=a?a:new pA,this.firstGid=t,this.pathMap=s}async load(){const e=this.path.includes(\".tsx\")?\"xml\":\"json\";try{const t=await this.fileLoader(this.path,e);let A;if(A=\"json\"===e?this.strict?lA.parse(t):t:this.parser.parseExternalTileset(t,this.strict),nA(A)){const e=HA(this.path,A.image,this.pathMap),t=this.headless?void 0:this.imageLoader.getOrAdd(e);this.data=new si({name:A.name,tiledTileset:A,firstGid:this.firstGid,image:t})}if(oA(A)){const e=this.headless?void 0:new Map;if(e){const t=[];if(A.tiles)for(let i of A.tiles)if(i.image){const A=HA(this.path,i.image,this.pathMap),a=this.imageLoader.getOrAdd(A);e.set(i,a),t.push(a)}}A.firstgid=this.firstGid,this.data=new si({name:A.name,tiledTileset:A,firstGid:this.firstGid,tileToImage:e})}if(this.headless||await this.imageLoader.load(),this.data)return this.data}catch(e){throw console.error(`Could not load tileset at path ${this.path}`),e}throw new Error(`No tileset at path ${this.path}`)}isLoaded(){return!!this.data}}class ni{constructor(e,t){this.templatePath=e,this.headless=!1,this.strict=!0,this.fileLoader=kA;const{fileLoader:A,parser:i,pathMap:a,imageLoader:s,strict:r,headless:n}={...t};this.headless=null!=n?n:this.headless,this.strict=null!=r?r:this.strict,this.fileLoader=null!=A?A:this.fileLoader,this.imageLoader=null!=s?s:new UA(OA.ImageSource),this.parser=null!=i?i:new pA,this.pathMap=a}isLoaded(){return!!this.data}async load(){const e=this.templatePath.includes(\".tx\")?\"xml\":\"json\";try{const t=await this.fileLoader(this.templatePath,e);let A;A=\"xml\"===e?this.parser.parseExternalTemplate(t,this.strict):this.strict?hA.parse(t):t;const i=A,a=ti(A.object);let s;if(A.tileset){const e=HA(this.templatePath,A.tileset.source,this.pathMap),t=new ri(e,A.tileset.firstgid,{headless:this.headless,strict:this.strict,fileLoader:this.fileLoader,imageLoader:this.imageLoader,parser:this.parser,pathMap:this.pathMap});s=await t.load()}return this.data=new ii({templatePath:this.templatePath,tiledTemplate:i,object:a,tileset:s})}catch(e){throw console.error(`Could not load template at ${this.templatePath}, check to see if your pathMap is correct or if you're Tiled map is corrupted`),e}}}class oi extends OA.Component{constructor(e){super();const{tiledObject:t}=e;this.tiledObject=t}}class li extends OA.Component{constructor(e){super();const{tiledTileLayer:t}=e;this.tiledTileLayer=t}}class gi{constructor(e,t,A){this.tiledTileLayer=e,this.resource=t,this.order=A,this.logger=OA.Logger.getInstance(),this.width=0,this.height=0,this.properties=new Map,this.data=[],this._gidToTileInfo=new Map,this.name=e.name,this.class=e.class,this.width=e.width,this.height=e.height,qA(this,e.properties)}getTilesByGid(e){var t;return null!==(t=this._gidToTileInfo.get(e))&&void 0!==t?t:[]}getTilesByClassName(e){return this.isometricMap.tiles.filter((t=>{const A=t.data.get(bA.TileData.Tiled);return!!A&&xA(e)(A)})).map((e=>({exTile:e,tiledTile:e.data.get(bA.TileData.Tiled)})))}getTilesByProperty(e,t){return this.isometricMap.tiles.filter((A=>{const i=A.data.get(bA.TileData.Tiled);return!!i&&LA(e,t)(i)})).map((e=>({exTile:e,tiledTile:e.data.get(bA.TileData.Tiled)})))}getTileByPoint(e){if(!this.isometricMap)return this.logger.warn(\"IsometricMap has not yet been loaded! getTileByPoint() will only return null\"),null;if(this.isometricMap){const t=this.isometricMap.getTileByPoint(e);if(!t)return null;const A=this.isometricMap.tiles.indexOf(t),i=MA(this.data[A]);if(i<=0)return null;return{tiledTile:this.resource.getTilesetForTileGid(i).getTileByGid(i),exTile:t}}return null}_recordTileData(e,t){let A=this._gidToTileInfo.get(e),i=this.resource.getTilesetForTileGid(e).getTileByGid(e);A?A.push({exTile:t,tiledTile:i}):A=[{exTile:t,tiledTile:i}],this._gidToTileInfo.set(e,A),t.data.set(bA.TileData.Tiled,i)}updateTile(e,t,A,i,a){this._recordTileData(t,e),this.resource.useExcaliburWiring&&a&&(e.solid=!0);const s=e.get(OA.IsometricEntityComponent);s&&(s.elevation=this.order);const r=this.resource.getTilesetForTileGid(t);let n=r.getSpriteForGid(t);A&&(n=n.clone(),n.tint=i),e.addGraphic(n,{offset:r.tileOffset});let o=e.pos;if(\"orthogonal\"===r.orientation)o=(0,OA.vec)(0,0);else{const e=this.resource.map.tilewidth/2,t=this.resource.map.tileheight;o=(0,OA.vec)(e,t)}const l=r.getCollidersForGid(t,{offset:o});for(let t of l)e.addCollider(t);let g=r.getAnimationForGid(t);if(g&&(A&&(g=g.clone(),g.tint=i),e.clearGraphics(),e.addGraphic(g,{offset:r.tileOffset}),this.resource.useExcaliburWiring)){const e=r.getTileByGid(t),A=null==e?void 0:e.properties.get(bA.Animation.Strategy);if(A&&\"string\"==typeof A)switch(A.toLowerCase()){case OA.AnimationStrategy.End.toLowerCase():g.strategy=OA.AnimationStrategy.End;break;case OA.AnimationStrategy.Freeze.toLowerCase():g.strategy=OA.AnimationStrategy.Freeze;break;case OA.AnimationStrategy.Loop.toLowerCase():g.strategy=OA.AnimationStrategy.Loop;break;case OA.AnimationStrategy.PingPong.toLowerCase():g.strategy=OA.AnimationStrategy.PingPong;break;default:this.logger.warn(`Unknown animation strategy in tileset ${r.name} on tile gid ${t}: ${A}`)}}}async load(){var e,t,A,i;const a=this.tiledTileLayer,s=!!this.properties.get(bA.Layer.Solid),r=(this.tiledTileLayer.opacity,!!this.tiledTileLayer.tintcolor),n=this.tiledTileLayer.tintcolor?OA.Color.fromHex(this.tiledTileLayer.tintcolor):OA.Color.Transparent,o=(0,OA.vec)(null!==(e=a.offsetx)&&void 0!==e?e:0,null!==(t=a.offsety)&&void 0!==t?t:0);this.tiledTileLayer.data&&Pt(this.tiledTileLayer)?this.data=await vA.decode(this.tiledTileLayer.data,this.tiledTileLayer.compression):this.tiledTileLayer.data&&zt(this.tiledTileLayer)&&(this.data=this.tiledTileLayer.data);let l=this.order,g=this.properties.get(bA.ZIndex.ZIndex);if(\"number\"==typeof g&&(l=g),this.resource.map.infinite&&IA(this.tiledTileLayer)){const e=this.resource.isometricTiledCoordToWorld(this.tiledTileLayer.startx,this.tiledTileLayer.starty),t=(0,OA.vec)(e.x*this.resource.map.tilewidth,e.y*this.resource.map.tileheight);this.isometricMap=new OA.IsometricMap({name:this.name,pos:o.add(t),tileHeight:this.resource.map.tileheight,tileWidth:this.resource.map.tilewidth,columns:a.width,rows:a.height,elevation:l})}else this.isometricMap=new OA.IsometricMap({name:this.name,pos:o,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight,columns:a.width,rows:a.height,elevation:l});if(this.isometricMap.visible=this.tiledTileLayer.visible,this.isometricMap.opacity=this.tiledTileLayer.opacity,this.isometricMap.addComponent(new li({tiledTileLayer:a})),a.parallaxx||a.parallaxy){const e=(0,OA.vec)(null!==(A=a.parallaxx)&&void 0!==A?A:1,null!==(i=a.parallaxy)&&void 0!==i?i:1);this.isometricMap.addComponent(new OA.ParallaxComponent(e))}if(this.resource.map.infinite&&IA(this.tiledTileLayer)){const e=this.tiledTileLayer;for(let t of this.tiledTileLayer.chunks){let A=[];Pt(this.tiledTileLayer)?A=await vA.decode(t.data,e.compression):zt(this.tiledTileLayer)&&(A=t.data);for(let e=0;e<A.length;e++){const i=A[e];if(0!=i){const A=e%t.width+(t.x-this.tiledTileLayer.startx),o=Math.floor(e/t.width)+(t.y-this.tiledTileLayer.starty),l=this.isometricMap.tiles[A+o*a.width];this.updateTile(l,i,r,n,s)}}}}else for(let e=0;e<this.data.length;e++){let t=this.data[e];if(0!==t){const A=this.isometricMap.tiles[e];this.updateTile(A,t,r,n,s)}}}}class di{getTilesByGid(e){var t;return null!==(t=this._gidToTileInfo.get(e))&&void 0!==t?t:[]}getTilesByClassName(e){return this.tilemap.tiles.filter((t=>{const A=t.data.get(bA.TileData.Tiled);return!!A&&xA(e)(A)})).map((e=>({exTile:e,tiledTile:e.data.get(bA.TileData.Tiled)})))}getTilesByProperty(e,t){return this.tilemap.tiles.filter((A=>{const i=A.data.get(bA.TileData.Tiled);return!!i&&LA(e,t)(i)})).map((e=>({exTile:e,tiledTile:e.data.get(bA.TileData.Tiled)})))}getTileByPoint(e){if(!this.tilemap)return this.logger.warn(\"Tilemap has not yet been loaded! getTileByPoint() will only return null\"),null;if(this.tilemap){const t=this.tilemap.getTileByPoint(e);if(!t)return null;const A=this.tilemap.tiles.indexOf(t),i=MA(this.data[A]);if(i<=0)return null;return{tiledTile:this.resource.getTilesetForTileGid(i).getTileByGid(i),exTile:t}}return null}getTileByCoordinate(e,t){if(!this.tilemap)return this.logger.warn(\"Tilemap has not yet been loaded! getTileByCoordinate() will only return null\"),null;if(this.tilemap){const A=this.tilemap.getTile(e,t),i=this.tilemap.tiles.indexOf(A),a=MA(this.data[i]);if(a<=0)return null;return{tiledTile:this.resource.getTilesetForTileGid(a).getTileByGid(a),exTile:A}}return null}constructor(e,t,A){this.tiledTileLayer=e,this.resource=t,this.order=A,this.logger=OA.Logger.getInstance(),this.width=0,this.height=0,this.properties=new Map,this.data=[],this._gidToTileInfo=new Map,this.name=e.name,this.class=e.class,this.width=e.width,this.height=e.height,qA(this,e.properties)}_recordTileData(e,t){let A=this._gidToTileInfo.get(e),i=this.resource.getTilesetForTileGid(e).getTileByGid(e);A?A.push({exTile:t,tiledTile:i}):A=[{exTile:t,tiledTile:i}],this._gidToTileInfo.set(e,A),t.data.set(bA.TileData.Tiled,i)}updateTile(e,t,A,i,a){this._recordTileData(t,e),this.resource.useExcaliburWiring&&a&&(e.solid=!0);const s=this.resource.getTilesetForTileGid(t),r=this.resource.headless;if(!r){let a=s.getSpriteForGid(t);A&&(a=a.clone(),a.tint=i),e.addGraphic(a,{offset:s.tileOffset})}const n=s.getCollidersForGid(t);for(let t of n)e.addCollider(t);let o=r?null:s.getAnimationForGid(t);if(o&&(A&&(o=o.clone(),o.tint=i),e.clearGraphics(),e.addGraphic(o,{offset:s.tileOffset}),this.resource.useExcaliburWiring)){const e=s.getTileByGid(t),A=null==e?void 0:e.properties.get(bA.Animation.Strategy);if(A&&\"string\"==typeof A)switch(A.toLowerCase()){case OA.AnimationStrategy.End.toLowerCase():o.strategy=OA.AnimationStrategy.End;break;case OA.AnimationStrategy.Freeze.toLowerCase():o.strategy=OA.AnimationStrategy.Freeze;break;case OA.AnimationStrategy.Loop.toLowerCase():o.strategy=OA.AnimationStrategy.Loop;break;case OA.AnimationStrategy.PingPong.toLowerCase():o.strategy=OA.AnimationStrategy.PingPong;break;default:this.logger.warn(`Unknown animation strategy in tileset ${s.name} on tile gid ${t}: ${A}`)}}}async load(){var e,t,A,i;const a=this.tiledTileLayer.opacity,s=!!this.tiledTileLayer.tintcolor,r=this.tiledTileLayer.tintcolor?OA.Color.fromHex(this.tiledTileLayer.tintcolor):OA.Color.Transparent,n=!!this.properties.get(bA.Layer.Solid),o=this.tiledTileLayer,l=(0,OA.vec)(null!==(e=o.offsetx)&&void 0!==e?e:0,null!==(t=o.offsety)&&void 0!==t?t:0);if(this.tiledTileLayer.data&&Pt(this.tiledTileLayer)?this.data=await vA.decode(this.tiledTileLayer.data,this.tiledTileLayer.compression):this.tiledTileLayer.data&&zt(this.tiledTileLayer)&&(this.data=this.tiledTileLayer.data),this.resource.map.infinite&&IA(this.tiledTileLayer)){const e=(0,OA.vec)(this.tiledTileLayer.startx*this.resource.map.tilewidth,this.tiledTileLayer.starty*this.resource.map.tileheight);this.tilemap=new OA.TileMap({name:this.name,pos:l.add(e),tileHeight:this.resource.map.tileheight,tileWidth:this.resource.map.tilewidth,columns:o.width,rows:o.height})}else this.tilemap=new OA.TileMap({name:this.name,pos:l,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight,columns:o.width,rows:o.height});this.tilemap.addComponent(new li({tiledTileLayer:o}));const g=this.tilemap.get(OA.TransformComponent);if(g){g.z=this.order;let e=this.properties.get(bA.ZIndex.ZIndex);\"number\"==typeof e&&(g.z=e)}const d=this.tilemap.get(OA.GraphicsComponent);if(d&&(d.visible=this.tiledTileLayer.visible,d.opacity=a),o.parallaxx||o.parallaxy){const e=(0,OA.vec)(null!==(A=o.parallaxx)&&void 0!==A?A:1,null!==(i=o.parallaxy)&&void 0!==i?i:1);this.tilemap.addComponent(new OA.ParallaxComponent(e))}if(this.resource.map.infinite&&IA(this.tiledTileLayer)){const e=this.tiledTileLayer;for(let t of this.tiledTileLayer.chunks){let A=[];Pt(this.tiledTileLayer)?A=await vA.decode(t.data,e.compression):zt(this.tiledTileLayer)&&(A=t.data);for(let e=0;e<A.length;e++){const i=A[e];if(0!=i){const A=e%t.width+(t.x-this.tiledTileLayer.startx),a=Math.floor(e/t.width)+(t.y-this.tiledTileLayer.starty),l=this.tilemap.tiles[A+a*o.width];this.updateTile(l,i,s,r,n)}}}}else for(let e=0;e<this.data.length;e++){let t=this.data[e];if(0!==t){const A=this.tilemap.tiles[e];this.updateTile(A,t,s,r,n)}}}}class hi{constructor(e,t,A){this.tiledObjectLayer=e,this.resource=t,this.order=A,this.logger=OA.Logger.getInstance(),this.properties=new Map,this.objects=[],this.entities=[],this._objectToEntity=new Map,this._entityToObject=new Map,this._loaded=!1,this.name=e.name,this.class=e.class,qA(this,e.properties)}_logLoadedWarning(e){this.logger.warn(`ObjectLayer ${this.name} is not yet loaded, ${e}() will always be empty!`)}getObjectsByName(e){return this._loaded||this._logLoadedWarning(\"getObjectsByName\"),this.objects.filter(DA(e))}getEntitiesByName(e){return this._loaded||this._logLoadedWarning(\"getEntitiesByName\"),this.entities.filter(DA(e))}getEntityByObject(e){return this._loaded||this._logLoadedWarning(\"getEntityByObject\"),this._objectToEntity.get(e)}getObjectByEntity(e){return this._loaded||this._logLoadedWarning(\"getObjectByEntity\"),this._entityToObject.get(e)}getObjectsByProperty(e,t){return this._loaded||this._logLoadedWarning(\"getObjectsByProperty\"),this.objects.filter(LA(e,t))}getEntitiesByProperty(e,t){return this._loaded||this._logLoadedWarning(\"getEntitiesByProperty\"),this.getObjectsByProperty(e,t).map((e=>this._objectToEntity.get(e))).filter((e=>!!e))}getObjectsByClassName(e){return this._loaded||this._logLoadedWarning(\"getObjectsByClassName\"),this.objects.filter(xA(e))}getEntitiesByClassName(e){return this._loaded||this._logLoadedWarning(\"getEntitiesByClassName\"),this.getObjectsByClassName(e).map((e=>this._objectToEntity.get(e))).filter((e=>!!e))}getTemplates(){return this._loaded||this._logLoadedWarning(\"getTemplates\"),this.objects.filter((e=>e instanceof KA))}runFactory(e){var t,A,i,a;const s=(0,OA.vec)(null!==(t=this.tiledObjectLayer.offsetx)&&void 0!==t?t:0,null!==(A=this.tiledObjectLayer.offsety)&&void 0!==A?A:0),r=this.objects.slice();for(let t of r){let A=t.class;if(t instanceof KA&&(A=A||t.template.object.class),e!==A)continue;let r=(0,OA.vec)((null!==(i=t.x)&&void 0!==i?i:0)+s.x,(null!==(a=t.y)&&void 0!==a?a:0)+s.y);\"isometric\"===this.resource.map.orientation&&(r=this.resource.isometricTiledCoordToWorld(r.x,r.y));const n=this.resource.factories.get(e);if(n){const e=n({worldPos:r,name:t.name,class:A,layer:this,object:t,properties:t.properties});e&&this._recordObjectEntityMapping(t,e)}}}_actorFromObject(e,t,A){var i,a,s,r,n,o;const l=this.resource.headless,g=!!this.tiledObjectLayer.tintcolor,d=this.tiledObjectLayer.tintcolor?OA.Color.fromHex(this.tiledObjectLayer.tintcolor):OA.Color.White;if(e instanceof PA&&A){const h=\"isometric\"===this.resource.map.orientation&&\"orthogonal\"===A.orientation?\"bottom\":void 0,c=A.getTilesetAlignmentAnchor(h);t.anchor=c;const I=(null!==(i=e.tiledObject.width)&&void 0!==i?i:this.resource.map.tilewidth)/this.resource.map.tilewidth,u=(null!==(a=e.tiledObject.width)&&void 0!==a?a:this.resource.map.tilewidth)/this.resource.map.tilewidth,B=(0,OA.vec)(I,u);if(!l){const i=A.getSpriteForGid(e.gid).clone();i.destSize.width=null!==(s=e.tiledObject.width)&&void 0!==s?s:i.width,i.destSize.height=null!==(r=e.tiledObject.height)&&void 0!==r?r:i.height,g&&(i.tint=d),t.graphics.use(i),t.graphics.offset=A.tileOffset;const a=A.getAnimationForGid(e.gid);if(a){const e=a.clone();e.scale=B,g&&(e.tint=d),t.graphics.use(e),t.graphics.offset=A.tileOffset}}const C=null!==(n=e.tiledObject.width)&&void 0!==n?n:0,p=null!==(o=e.tiledObject.height)&&void 0!==o?o:0,f=-C*c.x,Q=-p*c.y,E=this.resource.map.tilewidth/2,m=this.resource.map.tileheight;let y=(0,OA.vec)(f,Q);\"isometric\"===this.resource.map.orientation&&(y=(0,OA.vec)(f+E,Q+m),\"orthogonal\"===A.orientation&&(y=y.sub((0,OA.vec)(E,m))));const w=A.getCollidersForGid(e.gid,{anchor:OA.Vector.Zero,scale:B,offset:y});if(w.length)t.collider.useCompositeCollider(w);else{let A=e.width,i=e.height;if(\"isometric\"===this.resource.map.orientation){const t=e.height/2;A=t,i=t}let a=OA.Shape.Box(A,i,\"isometric\"===this.resource.map.orientation?(0,OA.vec)(1,1):(0,OA.vec)(0,1));\"isometric\"===this.resource.map.orientation&&(a.points=a.points.map((e=>this.resource.isometricTiledCoordToWorld(e.x,e.y)))),t.collider.set(a)}}if(e instanceof VA&&t.graphics.use(e.text),e instanceof $A){let A=(0,OA.vec)(e.x,e.y),i=e.localPoints;\"isometric\"===this.resource.map.orientation&&(A=this.resource.isometricTiledCoordToWorld(A.x,A.y),i=i.map((e=>this.resource.isometricTiledCoordToWorld(e.x,e.y)))),t.anchor=(0,OA.vec)(0,1),t.pos=A;const a=OA.Shape.Polygon(i,OA.Vector.Zero,!0);a.isConvex()?t.collider.set(a):t.collider.set(a.triangulate())}if(e instanceof XA){t.anchor=e.anchor;let A=OA.Shape.Box(e.width,e.height,e.anchor);\"isometric\"===this.resource.map.orientation&&(A.points=A.points.map((e=>this.resource.isometricTiledCoordToWorld(e.x,e.y)))),t.collider.set(A)}e instanceof WA&&t.collider.useCircleCollider(Math.min(e.width,e.height)/2)}async load(){var e,t,A,i,a;const s=this.tiledObjectLayer.opacity,r=(0,OA.vec)(null!==(e=this.tiledObjectLayer.offsetx)&&void 0!==e?e:0,null!==(t=this.tiledObjectLayer.offsety)&&void 0!==t?t:0),n=Ai(this.tiledObjectLayer,this.resource);for(let e of n){let t=(0,OA.vec)((null!==(A=e.x)&&void 0!==A?A:0)+r.x,(null!==(i=e.y)&&void 0!==i?i:0)+r.y);\"isometric\"===this.resource.map.orientation&&(t=this.resource.isometricTiledCoordToWorld(t.x,t.y));let n,o=e.class;if(e instanceof KA&&(o=o||e.template.object.class),o){const A=this.resource.factories.get(o);if(A){const i=A({worldPos:t,name:e.name,class:o,layer:this,object:e,properties:e.properties});i&&this._recordObjectEntityMapping(e,i);continue}}let l=this.properties.get(bA.ZIndex.ZIndex);\"number\"==typeof l&&(n=l);const g=new OA.Actor({name:e.tiledObject.name,pos:t,anchor:OA.Vector.Zero,rotation:(0,OA.toRadians)(null!==(a=e.tiledObject.rotation)&&void 0!==a?a:0),z:n}),d=g.get(OA.GraphicsComponent);if(d&&(d.visible=this.tiledObjectLayer.visible&&(void 0===e.tiledObject.visible||!!e.tiledObject.visible),d.opacity=s),\"isometric\"===this.resource.map.orientation){const e=new OA.IsometricEntityComponent({rows:this.resource.map.height,columns:this.resource.map.width,tileWidth:this.resource.map.tilewidth,tileHeight:this.resource.map.tileheight});e.elevation=null!=n?n:this.order,g.addComponent(e)}if(this.resource.useExcaliburWiring){const t=e.properties.get(bA.Collision.Type);if(t&&\"string\"==typeof t)switch(t.toLowerCase()){case OA.CollisionType.Active.toLowerCase():g.body.collisionType=OA.CollisionType.Active;break;case OA.CollisionType.Fixed.toLowerCase():g.body.collisionType=OA.CollisionType.Fixed;break;case OA.CollisionType.Passive.toLowerCase():g.body.collisionType=OA.CollisionType.Passive;break;case OA.CollisionType.PreventCollision.toLowerCase():g.body.collisionType=OA.CollisionType.PreventCollision;break;default:this.logger.warn(`Unknown collision type in layer ${this.name}, for object id ${e.id} and name ${e.name}: ${t}`)}}if(e instanceof KA){const t=e.template.tileset;e.template.object&&this._actorFromObject(e.template.object,g,t)}else{let t;e instanceof PA&&(t=this.resource.getTilesetForTileGid(e.gid)),this._actorFromObject(e,g,t)}this._recordObjectEntityMapping(e,g)}this._loaded=!0}_recordObjectEntityMapping(e,t){t.addComponent(new oi({tiledObject:e})),this.objects.push(e),this.entities.push(t),this._objectToEntity.set(e,t),this._entityToObject.set(t,e)}}const ci=/^[v^~<>=]*?(\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+))?(?:-([\\da-z\\-]+(?:\\.[\\da-z\\-]+)*))?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i,Ii=e=>{if(\"string\"!=typeof e)throw new TypeError(\"Invalid argument expected string\");const t=e.match(ci);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},ui=e=>\"*\"===e||\"x\"===e||\"X\"===e,Bi=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},Ci=(e,t)=>{if(ui(e)||ui(t))return 0;const[A,i]=((e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t])(Bi(e),Bi(t));return A>i?1:A<i?-1:0},pi=(e,t)=>{for(let A=0;A<Math.max(e.length,t.length);A++){const i=Ci(e[A]||\"0\",t[A]||\"0\");if(0!==i)return i}return 0},fi=(e,t,A)=>{mi(A);const i=((e,t)=>{const A=Ii(e),i=Ii(t),a=A.pop(),s=i.pop(),r=pi(A,i);return 0!==r?r:a&&s?pi(a.split(\".\"),s.split(\".\")):a||s?a?-1:1:0})(e,t);return Qi[A].includes(i)},Qi={\">\":[1],\">=\":[0,1],\"=\":[0],\"<=\":[-1,0],\"<\":[-1],\"!=\":[-1,1]},Ei=Object.keys(Qi),mi=e=>{if(\"string\"!=typeof e)throw new TypeError(\"Invalid operator type, expected string but got \"+typeof e);if(-1===Ei.indexOf(e))throw new Error(`Invalid operator, expected one of ${Ei.join(\"|\")}`)};class yi{constructor(e,t,A){this.tiledImageLayer=e,this.resource=t,this.order=A,this.properties=new Map,this.image=null,this.imageActor=null,this.name=e.name,this.class=e.class,qA(this,e.properties),e.image&&(this.image=new OA.ImageSource(HA(this.resource.path,e.image,this.resource.pathMap)))}async load(){var e,t,A,i;const a=this.tiledImageLayer.opacity,s=!!this.tiledImageLayer.tintcolor,r=this.tiledImageLayer.tintcolor?OA.Color.fromHex(this.tiledImageLayer.tintcolor):OA.Color.White,n=(0,OA.vec)(null!==(e=this.tiledImageLayer.offsetx)&&void 0!==e?e:0,null!==(t=this.tiledImageLayer.offsety)&&void 0!==t?t:0),o=null!==(A=this.tiledImageLayer.parallaxx)&&void 0!==A?A:1,l=null!==(i=this.tiledImageLayer.parallaxy)&&void 0!==i?i:1;if(this.image){this.resource.headless||await this.image.load(),this.imageActor=new OA.Actor({name:this.tiledImageLayer.name,pos:n,anchor:OA.Vector.Zero,z:this.order}),this.imageActor.addComponent(new OA.ParallaxComponent((0,OA.vec)(o,l)));const e=this.image.toSprite();this.imageActor.graphics.use(e),this.imageActor.graphics.visible=this.tiledImageLayer.visible,this.imageActor.graphics.opacity=a,s&&(e.tint=r)}}}class wi{constructor(e,t){this.path=e,this.logger=OA.Logger.getInstance(),this.tilesets=[],this.templates=[],this.layers=[],this.mapFormat=\"TMX\",this.strict=!0,this.factories=new Map,this.parser=new pA,this.fileLoader=kA,this.startZIndex=0,this.textQuality=4,this.useExcaliburWiring=!0,this.useMapBackgroundColor=!1,this.useTilemapCameraStrategy=!1,this.headless=!1,this._imageLoader=new UA(OA.ImageSource),this._tilesetLoader=new UA(ri),this._templateLoader=new UA(ni);const{mapFormatOverride:A,textQuality:i,entityClassNameFactories:a,useExcaliburWiring:s,useTilemapCameraStrategy:r,useMapBackgroundColor:n,pathMap:o,fileLoader:l,strict:g,headless:d,startZIndex:h}={...t};this.strict=null!=g?g:this.strict,this.headless=null!=d?d:this.headless,this.useExcaliburWiring=null!=s?s:this.useExcaliburWiring,this.useTilemapCameraStrategy=null!=r?r:this.useTilemapCameraStrategy,this.useMapBackgroundColor=null!=n?n:this.useMapBackgroundColor,this.textQuality=null!=i?i:this.textQuality,this.startZIndex=null!=h?h:this.startZIndex,this.fileLoader=null!=l?l:this.fileLoader,this.pathMap=o;for(const e in a)this.registerEntityFactory(e,a[e]);this.mapFormat=null!=A?A:e.includes(\".tmx\")?\"TMX\":\"TMJ\"}registerEntityFactory(e,t){if(this.factories.has(e)&&console.warn(`Another factory has already been registered for tiled class/type \"${e}\", this is probably a bug.`),this.factories.set(e,t),this.isLoaded())for(let t of this.getObjectLayers())t.runFactory(e)}unregisterEntityFactory(e){this.factories.has(e)||console.warn(`No factory has been registered for tiled class/type \"${e}\", cannot unregister!`),this.factories.delete(e)}getTilesetForTileGid(e){const t=MA(e);if(this.tilesets)for(let e of this.tilesets)if(t>=e.firstGid&&t<=e.firstGid+e.tileCount-1)return e;throw Error(`No tileset exists for tiled gid [${e}] normalized [${t}]!`)}getTilesetByName(e){return this.tilesets.filter(DA(e))}getTilesetByClassName(e){return this.tilesets.filter(xA(e))}getTilesetByProperty(e,t){return this.tilesets.filter(LA(e,t))}getTileMetadataByClassName(e){let t=[];for(let A of this.tilesets)t=t.concat(A.tiles.filter(xA(e)));return t}getTileMetadataByProperty(e,t){let A=[];for(let i of this.tilesets)A=A.concat(i.tiles.filter(LA(e,t)));return A}getTilesByGid(e){if(\"orthogonal\"===this.map.orientation){let t=[];for(let A of this.getTileLayers())t=t.concat(A.getTilesByGid(e));return t}{let t=[];for(let A of this.getIsoTileLayers())t=t.concat(A.getTilesByGid(e));return t}}getTilesByClassName(e){if(\"orthogonal\"===this.map.orientation){let t=[];for(let A of this.getTileLayers())t=t.concat(A.getTilesByClassName(e));return t}{let t=[];for(let A of this.getIsoTileLayers())t=t.concat(A.getTilesByClassName(e));return t}}getTilesByProperty(e,t){if(\"orthogonal\"===this.map.orientation){let A=[];for(let i of this.getTileLayers())A=A.concat(i.getTilesByProperty(e,t));return A}{let A=[];for(let i of this.getIsoTileLayers())A=A.concat(i.getTilesByProperty(e,t));return A}}getTileByPoint(e,t){if(\"isometric\"===this.map.orientation){const A=this.getIsoTileLayers().find(DA(e));if(A)return A.getTileByPoint(t)}else{const A=this.getTileLayers().find(DA(e));if(A)return A.getTileByPoint(t)}return null}getTilesByPoint(e){if(\"orthogonal\"===this.map.orientation){let t=[];for(let A of this.getTileLayers()){const i=A.getTileByPoint(e);i&&t.push(i)}return t}{let t=[];for(let A of this.getIsoTileLayers()){const i=A.getTileByPoint(e);i&&t.push(i)}return t}}getObjectsByName(e){let t=[];for(let A of this.getObjectLayers())t=t.concat(A.getObjectsByName(e));return t}getEntitiesByName(e){let t=[];for(let A of this.getObjectLayers())t=t.concat(A.getEntitiesByName(e));return t}getEntityByObject(e){for(let t of this.getObjectLayers()){const A=t.getEntityByObject(e);if(A)return A}}getObjectByEntity(e){for(let t of this.getObjectLayers()){const A=t.getObjectByEntity(e);if(A)return A}}getObjectsByProperty(e,t){let A=[];for(let i of this.getObjectLayers())A=A.concat(i.getObjectsByProperty(e,t));return A}getEntitiesByProperty(e,t){let A=[];for(let i of this.getObjectLayers())A=A.concat(i.getEntitiesByProperty(e,t));return A}getObjectsByClassName(e){let t=[];for(let A of this.getObjectLayers())t=t.concat(A.getObjectsByClassName(e));return t}getEntitiesByClassName(e){let t=[];for(let A of this.getObjectLayers())t=t.concat(A.getEntitiesByClassName(e));return t}getTileByCoordinate(e,t,A){const i=this.getTileLayers().find(DA(e));return i?i.getTileByCoordinate(t,A):null}getImageLayers(e){const t=this.layers.filter((e=>e instanceof yi));return e?t.filter(DA(e)):t}getTileLayers(e){const t=this.layers.filter((e=>e instanceof di));return e?t.filter(DA(e)):t}getIsoTileLayers(e){const t=this.layers.filter((e=>e instanceof gi));return e?t.filter(DA(e)):t}getObjectLayers(e){const t=this.layers.filter((e=>e instanceof hi));return e?t.filter(DA(e)):t}getLayersByName(e){return this.layers.filter(DA(e))}getLayersByClassName(e){return this.layers.filter(xA(e))}getLayersByProperty(e,t){return this.layers.filter(LA(e,t))}_parseMap(e){return\"TMX\"===this.mapFormat?this.parser.parse(e,this.strict):e}async load(){var e;const t=await this.fileLoader(this.path,\"TMX\"===this.mapFormat?\"xml\":\"json\");let A;if(this.strict)try{A=this._parseMap(t)}catch(e){throw console.error(`Could not parse tiled map from location ${this.path}, attempted to interpret as ${this.mapFormat}.\\nExcalibur only supports the latest version of Tiled formats as of the plugin's release.`),console.error(\"Is your map file corrupted or being interpreted as the wrong type?\"),e}else A=this._parseMap(t);fi(wi.supportedTiledVersion,null!==(e=A.tiledversion)&&void 0!==e?e:\"0.0.0\",\">\")&&console.warn(`The excalibur tiled plugin officially supports ${wi.supportedTiledVersion}+, the current map has tiled version ${A.tiledversion}`),this.map=A,this._collectTilesets(),this._collectTemplates(),await Promise.all([this._tilesetLoader.load(),this.headless?Promise.resolve():this._imageLoader.load(),this._templateLoader.load()]),this.tilesets=[...this.tilesets,...this._tilesetLoader.values().map((e=>e.data))],this.templates=this._templateLoader.values().map((e=>e.data));let i=[],a=this.startZIndex;for(const e of this.map.layers){if(\"tilelayer\"===e.type){if(\"isometric\"===this.map.orientation){const t=new gi(e,this,a);i.push(t)}if(\"orthogonal\"===this.map.orientation){const t=new di(e,this,a);i.push(t)}}if(\"objectgroup\"===e.type){const t=new hi(e,this,a);i.push(t)}if(\"imagelayer\"===e.type){const t=new yi(e,this,a);i.push(t)}a++}await Promise.all(i.map((e=>e.load()))),this.layers=i}_collectTilesets(){for(const e of this.map.tilesets){if(uA(e)){if(nA(e)){const t=HA(this.path,e.image,this.pathMap),A=this._imageLoader.getOrAdd(t),i=new si({name:e.name,tiledTileset:e,image:A,firstGid:e.firstgid});this.tilesets.push(i)}if(oA(e)){const t=new Map;if(e.tiles)for(let A of e.tiles)if(A.image){const e=HA(this.path,A.image,this.pathMap),i=this._imageLoader.getOrAdd(e);t.set(A,i)}const A=new si({name:e.name,tiledTileset:e,tileToImage:t,firstGid:e.firstgid});this.tilesets.push(A)}}if(BA(e)){const t=HA(this.path,e.source,this.pathMap);this._tilesetLoader.getOrAdd(t,e.firstgid,{strict:this.strict,headless:this.headless,parser:this.parser,fileLoader:this.fileLoader,imageLoader:this._imageLoader,pathMap:this.pathMap})}}}_collectTemplates(){let e=[];for(const t of this.map.layers)if(\"objectgroup\"===t.type){let A=t.objects.filter((e=>e.template)).map((e=>e.template));e=e.concat(A)}const t=e.filter(((e,t,A)=>A.findIndex((t=>t===e))===t));for(const e of t){const t=HA(this.path,e,this.pathMap);this._templateLoader.getOrAdd(t,{strict:this.strict,headless:this.headless,parser:this.parser,fileLoader:this.fileLoader,imageLoader:this._imageLoader,pathMap:this.pathMap})}}addToScene(e,t){if(!this.isLoaded())return void this.logger.warn(`TiledResource ${this.path} is not loaded! Nothing will be wired into excalibur!`);const A={pos:(0,OA.vec)(0,0)},{pos:i}={...A,...t};for(const t of this.layers){if(t instanceof di&&(t.tilemap.pos=t.tilemap.pos.add(i),e.add(t.tilemap)),t instanceof gi&&e.add(t.isometricMap),t instanceof hi)for(const A of t.entities){const t=A.get(OA.TransformComponent);t&&(t.pos=t.pos.add(i)),e.add(A)}t instanceof yi&&t.imageActor&&(t.imageActor.pos=t.imageActor.pos.add(i),e.add(t.imageActor))}if(this.useExcaliburWiring){const t=this.getObjectsByProperty(bA.Camera.Camera,!0);if(t&&t.length){const A=t[0];let i=1;const a=A.properties.get(bA.Camera.Zoom);a&&\"number\"==typeof a&&(i=a),\"isometric\"===this.map.orientation?e.camera.pos=this.isometricTiledCoordToWorld(A.x,A.y):e.camera.pos=(0,OA.vec)(A.x,A.y),e.camera.zoom=i}}if(this.useTilemapCameraStrategy){const t=this.getTileLayers()[0];if(t){const A=OA.BoundingBox.fromDimension(this.map.width*this.map.tilewidth,this.map.height*this.map.tileheight,OA.Vector.Zero,i.add(t.tilemap.pos));e.camera.strategy.limitCameraBounds(A)}}this.useMapBackgroundColor&&this.map.backgroundcolor&&(e.backgroundColor=OA.Color.fromHex(this.map.backgroundcolor))}isometricTiledCoordToWorld(e,t){const A=this.map.tilewidth,i=this.map.tileheight,a=t/i,s=e/i;return(0,OA.vec)((s-a)*A/2+0,(s+a)*i/2)}isLoaded(){return!!this.map}}return wi.supportedTiledVersion=\"1.10.1\",n})()));\n//# sourceMappingURL=excalibur-tiled.min.js.map","/*!\n * excalibur - 0.30.2 - 2024-12-25\n * https://github.com/excaliburjs/Excalibur\n * Copyright (c) 2024 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>\n * Licensed BSD-2-Clause\n * @preserve\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ex\"] = factory();\n\telse\n\t\troot[\"ex\"] = factory();\n})(self, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 851:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(935);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/* Buttons styles start */\r\n\r\nbutton#excalibur-play {\r\n  display: inline-block;\r\n  position: relative;\r\n  z-index: 999;\r\n  border-radius: 6px;\r\n  border: none;\r\n  /*border: 3px solid;\r\n    border-color: white;\r\n    box-shadow: 0 0 10px #ccc;*/\r\n  padding: 1rem 1.5rem 1rem 4rem;\r\n  margin: 0;\r\n  text-decoration: none;\r\n  background: #00b233;\r\n  color: #ffffff;\r\n  font-family: sans-serif;\r\n  font-size: 2rem;\r\n  white-space: nowrap;\r\n  line-height: 1;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  transition:\r\n    background 250ms ease-in-out,\r\n    transform 150ms ease;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n\r\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\r\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\r\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\r\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\r\n  animation: excalibur-button-fadein 200ms;\r\n}\r\n\r\n/*\r\nbutton#excalibur-play {\r\n  display: none;\r\n}*/\r\n\r\nbutton#excalibur-play:after {\r\n  position: absolute;\r\n  content: '';\r\n  border: 8px solid;\r\n  border-color: transparent transparent transparent white;\r\n  left: 35px;\r\n  top: 24px;\r\n  width: 0;\r\n  height: 0;\r\n}\r\n\r\nbutton#excalibur-play:before {\r\n  position: absolute;\r\n  content: '';\r\n  border: 3px solid;\r\n  left: 19px;\r\n  top: 14px;\r\n  border-radius: 20px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\nbutton#excalibur-play:hover,\r\nbutton#excalibur-play:focus {\r\n  background: #00982c;\r\n}\r\n\r\nbutton#excalibur-play:focus {\r\n  outline: 1px solid #fff;\r\n  outline-offset: -4px;\r\n}\r\n\r\nbutton#excalibur-play:active {\r\n  transform: scale(0.99);\r\n}\r\n\r\n@keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Firefox < 16 */\r\n@-moz-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Safari, Chrome and Opera > 12.1 */\r\n@-webkit-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Internet Explorer */\r\n@-ms-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* Opera < 12.1 */\r\n@-o-keyframes excalibur-button-fadein {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./Director/Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,mBAAmB;EACnB,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB;;wBAEsB;EACtB,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\r\\n\\r\\nbutton#excalibur-play {\\r\\n  display: inline-block;\\r\\n  position: relative;\\r\\n  z-index: 999;\\r\\n  border-radius: 6px;\\r\\n  border: none;\\r\\n  /*border: 3px solid;\\r\\n    border-color: white;\\r\\n    box-shadow: 0 0 10px #ccc;*/\\r\\n  padding: 1rem 1.5rem 1rem 4rem;\\r\\n  margin: 0;\\r\\n  text-decoration: none;\\r\\n  background: #00b233;\\r\\n  color: #ffffff;\\r\\n  font-family: sans-serif;\\r\\n  font-size: 2rem;\\r\\n  white-space: nowrap;\\r\\n  line-height: 1;\\r\\n  cursor: pointer;\\r\\n  text-align: center;\\r\\n  transition:\\r\\n    background 250ms ease-in-out,\\r\\n    transform 150ms ease;\\r\\n  -webkit-appearance: none;\\r\\n  -moz-appearance: none;\\r\\n\\r\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\r\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\r\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\r\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\r\\n  animation: excalibur-button-fadein 200ms;\\r\\n}\\r\\n\\r\\n/*\\r\\nbutton#excalibur-play {\\r\\n  display: none;\\r\\n}*/\\r\\n\\r\\nbutton#excalibur-play:after {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 8px solid;\\r\\n  border-color: transparent transparent transparent white;\\r\\n  left: 35px;\\r\\n  top: 24px;\\r\\n  width: 0;\\r\\n  height: 0;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:before {\\r\\n  position: absolute;\\r\\n  content: '';\\r\\n  border: 3px solid;\\r\\n  left: 19px;\\r\\n  top: 14px;\\r\\n  border-radius: 20px;\\r\\n  width: 30px;\\r\\n  height: 30px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:hover,\\r\\nbutton#excalibur-play:focus {\\r\\n  background: #00982c;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:focus {\\r\\n  outline: 1px solid #fff;\\r\\n  outline-offset: -4px;\\r\\n}\\r\\n\\r\\nbutton#excalibur-play:active {\\r\\n  transform: scale(0.99);\\r\\n}\\r\\n\\r\\n@keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Firefox < 16 */\\r\\n@-moz-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Safari, Chrome and Opera > 12.1 */\\r\\n@-webkit-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Internet Explorer */\\r\\n@-ms-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\\r\\n/* Opera < 12.1 */\\r\\n@-o-keyframes excalibur-button-fadein {\\r\\n  from {\\r\\n    opacity: 0;\\r\\n  }\\r\\n  to {\\r\\n    opacity: 1;\\r\\n  }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 296:\n/***/ ((module, __webpack_exports__, __webpack_require__) => {\n\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(935);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `#ex-toast-container {\r\n  position: absolute;\r\n  height: 0;\r\n  min-width: 50%;\r\n  left: 50%;\r\n  top: 0;\r\n}\r\n\r\n.ex-toast-message {\r\n  left: -50%;\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n\r\n  padding: 10px;\r\n  margin-top: 5px;\r\n  font-size: 18px;\r\n  font-family: sans-serif;\r\n  border-radius: 6px;\r\n  border: 3px solid #b7b779;\r\n  background-color: rgb(253, 253, 192);\r\n}\r\n\r\n.ex-toast-message button {\r\n  align-self: flex-start;\r\n}\r\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./Util/Toaster.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,kBAAkB;EAClB,SAAS;EACT,cAAc;EACd,SAAS;EACT,MAAM;AACR;;AAEA;EACE,UAAU;EACV,kBAAkB;EAClB,aAAa;EACb,8BAA8B;;EAE9B,aAAa;EACb,eAAe;EACf,eAAe;EACf,uBAAuB;EACvB,kBAAkB;EAClB,yBAAyB;EACzB,oCAAoC;AACtC;;AAEA;EACE,sBAAsB;AACxB\",\"sourcesContent\":[\"#ex-toast-container {\\r\\n  position: absolute;\\r\\n  height: 0;\\r\\n  min-width: 50%;\\r\\n  left: 50%;\\r\\n  top: 0;\\r\\n}\\r\\n\\r\\n.ex-toast-message {\\r\\n  left: -50%;\\r\\n  position: relative;\\r\\n  display: flex;\\r\\n  justify-content: space-between;\\r\\n\\r\\n  padding: 10px;\\r\\n  margin-top: 5px;\\r\\n  font-size: 18px;\\r\\n  font-family: sans-serif;\\r\\n  border-radius: 6px;\\r\\n  border: 3px solid #b7b779;\\r\\n  background-color: rgb(253, 253, 192);\\r\\n}\\r\\n\\r\\n.ex-toast-message button {\\r\\n  align-self: flex-start;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n/***/ }),\n\n/***/ 935:\n/***/ ((module) => {\n\n\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n/***/ }),\n\n/***/ 1:\n/***/ ((module) => {\n\n\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\nvar __webpack_exports__ = {};\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  ActionCompleteEvent: () => (/* reexport */ ActionCompleteEvent),\n  ActionContext: () => (/* reexport */ ActionContext),\n  ActionQueue: () => (/* reexport */ ActionQueue),\n  ActionSequence: () => (/* reexport */ ActionSequence),\n  ActionStartEvent: () => (/* reexport */ ActionStartEvent),\n  ActionsComponent: () => (/* reexport */ ActionsComponent),\n  ActionsSystem: () => (/* reexport */ ActionsSystem),\n  ActivateEvent: () => (/* reexport */ ActivateEvent),\n  Actor: () => (/* reexport */ Actor),\n  ActorEvents: () => (/* reexport */ ActorEvents),\n  AddEvent: () => (/* reexport */ AddEvent),\n  AddedComponent: () => (/* reexport */ AddedComponent),\n  AffineMatrix: () => (/* reexport */ AffineMatrix),\n  Animation: () => (/* reexport */ Animation),\n  AnimationDirection: () => (/* reexport */ AnimationDirection),\n  AnimationEvents: () => (/* reexport */ AnimationEvents),\n  AnimationStrategy: () => (/* reexport */ AnimationStrategy),\n  ArcadeSolver: () => (/* reexport */ ArcadeSolver),\n  AudioContextFactory: () => (/* reexport */ AudioContextFactory),\n  Axes: () => (/* reexport */ Axes),\n  Axis: () => (/* reexport */ Axis),\n  BaseAlign: () => (/* reexport */ BaseAlign),\n  BezierCurve: () => (/* reexport */ BezierCurve),\n  Blink: () => (/* reexport */ Blink),\n  BodyComponent: () => (/* reexport */ BodyComponent),\n  BoundingBox: () => (/* reexport */ BoundingBox),\n  BrowserComponent: () => (/* reexport */ BrowserComponent),\n  BrowserEvents: () => (/* reexport */ BrowserEvents),\n  Buttons: () => (/* reexport */ Buttons),\n  Camera: () => (/* reexport */ Camera),\n  CameraEvents: () => (/* reexport */ CameraEvents),\n  Canvas: () => (/* reexport */ Canvas),\n  Circle: () => (/* reexport */ Circle),\n  CircleCollider: () => (/* reexport */ CircleCollider),\n  Clock: () => (/* reexport */ Clock),\n  ClosestLineJumpTable: () => (/* reexport */ ClosestLineJumpTable),\n  Collider: () => (/* reexport */ Collider),\n  ColliderComponent: () => (/* reexport */ ColliderComponent),\n  CollisionContact: () => (/* reexport */ CollisionContact),\n  CollisionEndEvent: () => (/* reexport */ CollisionEndEvent),\n  CollisionGroup: () => (/* reexport */ CollisionGroup),\n  CollisionGroupManager: () => (/* reexport */ CollisionGroupManager),\n  CollisionJumpTable: () => (/* reexport */ CollisionJumpTable),\n  CollisionPostSolveEvent: () => (/* reexport */ CollisionPostSolveEvent),\n  CollisionPreSolveEvent: () => (/* reexport */ CollisionPreSolveEvent),\n  CollisionStartEvent: () => (/* reexport */ CollisionStartEvent),\n  CollisionSystem: () => (/* reexport */ CollisionSystem),\n  CollisionType: () => (/* reexport */ CollisionType),\n  Color: () => (/* reexport */ Color),\n  ColorBlindFlags: () => (/* reexport */ ColorBlindFlags),\n  ColorBlindnessMode: () => (/* reexport */ ColorBlindnessMode),\n  ColorBlindnessPostProcessor: () => (/* reexport */ ColorBlindnessPostProcessor),\n  Component: () => (/* reexport */ Component),\n  CompositeCollider: () => (/* reexport */ CompositeCollider),\n  ConsoleAppender: () => (/* reexport */ ConsoleAppender),\n  ContactConstraintPoint: () => (/* reexport */ ContactConstraintPoint),\n  ContactEndEvent: () => (/* reexport */ ContactEndEvent),\n  ContactSolveBias: () => (/* reexport */ ContactSolveBias),\n  ContactStartEvent: () => (/* reexport */ ContactStartEvent),\n  CoordPlane: () => (/* reexport */ CoordPlane),\n  CrossFade: () => (/* reexport */ CrossFade),\n  CurveBy: () => (/* reexport */ CurveBy),\n  CurveTo: () => (/* reexport */ CurveTo),\n  DeactivateEvent: () => (/* reexport */ DeactivateEvent),\n  Debug: () => (/* reexport */ Debug),\n  DebugConfig: () => (/* reexport */ DebugConfig),\n  DebugGraphicsComponent: () => (/* reexport */ DebugGraphicsComponent),\n  DebugSystem: () => (/* reexport */ DebugSystem),\n  DebugText: () => (/* reexport */ DebugText),\n  DefaultAntialiasOptions: () => (/* reexport */ DefaultAntialiasOptions),\n  DefaultGarbageCollectionOptions: () => (/* reexport */ DefaultGarbageCollectionOptions),\n  DefaultLoader: () => (/* reexport */ DefaultLoader),\n  DefaultPixelArtOptions: () => (/* reexport */ DefaultPixelArtOptions),\n  DegreeOfFreedom: () => (/* reexport */ DegreeOfFreedom),\n  Delay: () => (/* reexport */ Delay),\n  Detector: () => (/* reexport */ Detector),\n  Die: () => (/* reexport */ Die),\n  Direction: () => (/* reexport */ Direction),\n  Director: () => (/* reexport */ Director),\n  DirectorEvents: () => (/* reexport */ DirectorEvents),\n  DisplayMode: () => (/* reexport */ DisplayMode),\n  DynamicTree: () => (/* reexport */ DynamicTree),\n  DynamicTreeCollisionProcessor: () => (/* reexport */ DynamicTreeCollisionProcessor),\n  EX_VERSION: () => (/* binding */ EX_VERSION),\n  EaseBy: () => (/* reexport */ EaseBy),\n  EaseTo: () => (/* reexport */ EaseTo),\n  EasingFunctions: () => (/* reexport */ EasingFunctions),\n  EdgeCollider: () => (/* reexport */ EdgeCollider),\n  ElasticToActorStrategy: () => (/* reexport */ ElasticToActorStrategy),\n  EmitterType: () => (/* reexport */ EmitterType),\n  Engine: () => (/* reexport */ Engine),\n  EngineEvents: () => (/* reexport */ EngineEvents),\n  EnterTriggerEvent: () => (/* reexport */ EnterTriggerEvent),\n  EnterViewPortEvent: () => (/* reexport */ EnterViewPortEvent),\n  Entity: () => (/* reexport */ Entity),\n  EntityEvents: () => (/* reexport */ EntityEvents),\n  EntityManager: () => (/* reexport */ EntityManager),\n  EventEmitter: () => (/* reexport */ EventEmitter),\n  EventTypes: () => (/* reexport */ EventTypes),\n  Events: () => (/* reexport */ Events_namespaceObject),\n  ExResponse: () => (/* reexport */ ExResponse),\n  ExcaliburGraphicsContext2DCanvas: () => (/* reexport */ ExcaliburGraphicsContext2DCanvas),\n  ExcaliburGraphicsContextWebGL: () => (/* reexport */ ExcaliburGraphicsContextWebGL),\n  ExitTriggerEvent: () => (/* reexport */ ExitTriggerEvent),\n  ExitViewPortEvent: () => (/* reexport */ ExitViewPortEvent),\n  Fade: () => (/* reexport */ Fade),\n  FadeInOut: () => (/* reexport */ FadeInOut),\n  Flags: () => (/* reexport */ Flags),\n  Flash: () => (/* reexport */ Flash),\n  Follow: () => (/* reexport */ Follow),\n  Font: () => (/* reexport */ Font),\n  FontCache: () => (/* reexport */ FontCache),\n  FontSource: () => (/* reexport */ FontSource),\n  FontStyle: () => (/* reexport */ FontStyle),\n  FontUnit: () => (/* reexport */ FontUnit),\n  FpsSampler: () => (/* reexport */ FpsSampler),\n  FrameStats: () => (/* reexport */ FrameStats),\n  Future: () => (/* reexport */ Future),\n  GameEvent: () => (/* reexport */ GameEvent),\n  GameStartEvent: () => (/* reexport */ GameStartEvent),\n  GameStopEvent: () => (/* reexport */ GameStopEvent),\n  Gamepad: () => (/* reexport */ Gamepad),\n  GamepadAxisEvent: () => (/* reexport */ GamepadAxisEvent),\n  GamepadButtonEvent: () => (/* reexport */ GamepadButtonEvent),\n  GamepadConnectEvent: () => (/* reexport */ GamepadConnectEvent),\n  GamepadDisconnectEvent: () => (/* reexport */ GamepadDisconnectEvent),\n  Gamepads: () => (/* reexport */ Gamepads),\n  GarbageCollector: () => (/* reexport */ GarbageCollector),\n  Gif: () => (/* reexport */ Gif),\n  GifParser: () => (/* reexport */ GifParser),\n  GlobalCoordinates: () => (/* reexport */ GlobalCoordinates),\n  GpuParticleEmitter: () => (/* reexport */ GpuParticleEmitter),\n  GpuParticleRenderer: () => (/* reexport */ GpuParticleRenderer),\n  Graphic: () => (/* reexport */ Graphic),\n  GraphicsComponent: () => (/* reexport */ GraphicsComponent),\n  GraphicsGroup: () => (/* reexport */ GraphicsGroup),\n  GraphicsSystem: () => (/* reexport */ GraphicsSystem),\n  HashColliderProxy: () => (/* reexport */ HashColliderProxy),\n  HashGridCell: () => (/* reexport */ HashGridCell),\n  HashGridProxy: () => (/* reexport */ HashGridProxy),\n  HiddenEvent: () => (/* reexport */ HiddenEvent),\n  HorizontalFirst: () => (/* reexport */ HorizontalFirst),\n  ImageFiltering: () => (/* reexport */ ImageFiltering),\n  ImageSource: () => (/* reexport */ ImageSource),\n  ImageSourceAttributeConstants: () => (/* reexport */ ImageSourceAttributeConstants),\n  ImageWrapping: () => (/* reexport */ ImageWrapping),\n  InitializeEvent: () => (/* reexport */ InitializeEvent),\n  InputHost: () => (/* reexport */ InputHost),\n  InputMapper: () => (/* reexport */ InputMapper),\n  IsometricEntityComponent: () => (/* reexport */ IsometricEntityComponent),\n  IsometricEntitySystem: () => (/* reexport */ IsometricEntitySystem),\n  IsometricMap: () => (/* reexport */ IsometricMap),\n  IsometricTile: () => (/* reexport */ IsometricTile),\n  KeyEvent: () => (/* reexport */ KeyEvent),\n  Keyboard: () => (/* reexport */ Keyboard),\n  Keys: () => (/* reexport */ Keys),\n  KillEvent: () => (/* reexport */ KillEvent),\n  Label: () => (/* reexport */ Label),\n  LimitCameraBoundsStrategy: () => (/* reexport */ LimitCameraBoundsStrategy),\n  Line: () => (/* reexport */ Line),\n  LineSegment: () => (/* reexport */ LineSegment),\n  Loader: () => (/* reexport */ Loader),\n  LoaderEvents: () => (/* reexport */ LoaderEvents),\n  LockCameraToActorAxisStrategy: () => (/* reexport */ LockCameraToActorAxisStrategy),\n  LockCameraToActorStrategy: () => (/* reexport */ LockCameraToActorStrategy),\n  LogLevel: () => (/* reexport */ LogLevel),\n  Logger: () => (/* reexport */ Logger),\n  Material: () => (/* reexport */ Material),\n  Matrix: () => (/* reexport */ Matrix),\n  MatrixLocations: () => (/* reexport */ MatrixLocations),\n  MediaEvent: () => (/* reexport */ MediaEvent),\n  Meet: () => (/* reexport */ Meet),\n  MotionComponent: () => (/* reexport */ MotionComponent),\n  MotionSystem: () => (/* reexport */ MotionSystem),\n  MoveBy: () => (/* reexport */ MoveBy),\n  MoveByWithOptions: () => (/* reexport */ MoveByWithOptions),\n  MoveTo: () => (/* reexport */ MoveTo),\n  MoveToWithOptions: () => (/* reexport */ MoveToWithOptions),\n  NativePointerButton: () => (/* reexport */ NativePointerButton),\n  NativeSoundEvent: () => (/* reexport */ NativeSoundEvent),\n  NativeSoundProcessedEvent: () => (/* reexport */ NativeSoundProcessedEvent),\n  NineSlice: () => (/* reexport */ NineSlice),\n  NineSliceStretch: () => (/* reexport */ NineSliceStretch),\n  None: () => (/* reexport */ None),\n  Observable: () => (/* reexport */ Observable),\n  OffscreenSystem: () => (/* reexport */ OffscreenSystem),\n  Pair: () => (/* reexport */ Pair),\n  ParallaxComponent: () => (/* reexport */ ParallaxComponent),\n  ParallelActions: () => (/* reexport */ ParallelActions),\n  Particle: () => (/* reexport */ Particle),\n  ParticleEmitter: () => (/* reexport */ ParticleEmitter),\n  ParticleRenderer: () => (/* reexport */ ParticleRenderer),\n  ParticleTransform: () => (/* reexport */ ParticleTransform),\n  PhysicsStats: () => (/* reexport */ PhysicsStats),\n  PhysicsWorld: () => (/* reexport */ PhysicsWorld),\n  PointerAbstraction: () => (/* reexport */ PointerAbstraction),\n  PointerButton: () => (/* reexport */ PointerButton),\n  PointerComponent: () => (/* reexport */ PointerComponent),\n  PointerEvent: () => (/* reexport */ PointerEvent),\n  PointerEventReceiver: () => (/* reexport */ PointerEventReceiver),\n  PointerScope: () => (/* reexport */ PointerScope),\n  PointerSystem: () => (/* reexport */ PointerSystem),\n  PointerType: () => (/* reexport */ PointerType),\n  Polygon: () => (/* reexport */ Polygon),\n  PolygonCollider: () => (/* reexport */ PolygonCollider),\n  Pool: () => (/* reexport */ Pool),\n  PostCollisionEvent: () => (/* reexport */ PostCollisionEvent),\n  PostDebugDrawEvent: () => (/* reexport */ PostDebugDrawEvent),\n  PostDrawEvent: () => (/* reexport */ PostDrawEvent),\n  PostFrameEvent: () => (/* reexport */ PostFrameEvent),\n  PostKillEvent: () => (/* reexport */ PostKillEvent),\n  PostTransformDrawEvent: () => (/* reexport */ PostTransformDrawEvent),\n  PostUpdateEvent: () => (/* reexport */ PostUpdateEvent),\n  PreCollisionEvent: () => (/* reexport */ PreCollisionEvent),\n  PreDebugDrawEvent: () => (/* reexport */ PreDebugDrawEvent),\n  PreDrawEvent: () => (/* reexport */ PreDrawEvent),\n  PreFrameEvent: () => (/* reexport */ PreFrameEvent),\n  PreKillEvent: () => (/* reexport */ PreKillEvent),\n  PreLoadEvent: () => (/* reexport */ PreLoadEvent),\n  PreTransformDrawEvent: () => (/* reexport */ PreTransformDrawEvent),\n  PreUpdateEvent: () => (/* reexport */ PreUpdateEvent),\n  Projection: () => (/* reexport */ Projection),\n  QuadIndexBuffer: () => (/* reexport */ QuadIndexBuffer),\n  QuadTree: () => (/* reexport */ QuadTree),\n  Query: () => (/* reexport */ Query),\n  QueryManager: () => (/* reexport */ QueryManager),\n  RadiusAroundActorStrategy: () => (/* reexport */ RadiusAroundActorStrategy),\n  Random: () => (/* reexport */ Random),\n  Raster: () => (/* reexport */ Raster),\n  Ray: () => (/* reexport */ Ray),\n  RealisticSolver: () => (/* reexport */ RealisticSolver),\n  Rectangle: () => (/* reexport */ Rectangle),\n  RemoveEvent: () => (/* reexport */ RemoveEvent),\n  RemovedComponent: () => (/* reexport */ RemovedComponent),\n  Repeat: () => (/* reexport */ Repeat),\n  RepeatForever: () => (/* reexport */ RepeatForever),\n  Resolution: () => (/* reexport */ Resolution),\n  Resource: () => (/* reexport */ Resource),\n  ResourceEvents: () => (/* reexport */ ResourceEvents),\n  RotateBy: () => (/* reexport */ RotateBy),\n  RotateByWithOptions: () => (/* reexport */ RotateByWithOptions),\n  RotateTo: () => (/* reexport */ RotateTo),\n  RotateToWithOptions: () => (/* reexport */ RotateToWithOptions),\n  RotationType: () => (/* reexport */ RotationType),\n  ScaleBy: () => (/* reexport */ ScaleBy),\n  ScaleByWithOptions: () => (/* reexport */ ScaleByWithOptions),\n  ScaleTo: () => (/* reexport */ ScaleTo),\n  ScaleToWithOptions: () => (/* reexport */ ScaleToWithOptions),\n  Scene: () => (/* reexport */ Scene),\n  SceneEvents: () => (/* reexport */ SceneEvents),\n  Screen: () => (/* reexport */ Screen),\n  ScreenAppender: () => (/* reexport */ ScreenAppender),\n  ScreenElement: () => (/* reexport */ ScreenElement),\n  ScreenEvents: () => (/* reexport */ ScreenEvents),\n  ScreenShader: () => (/* reexport */ ScreenShader),\n  ScrollPreventionMode: () => (/* reexport */ ScrollPreventionMode),\n  Semaphore: () => (/* reexport */ Semaphore),\n  SeparatingAxis: () => (/* reexport */ SeparatingAxis),\n  SeparationInfo: () => (/* reexport */ SeparationInfo),\n  Shader: () => (/* reexport */ Shader),\n  Shape: () => (/* reexport */ Shape),\n  Side: () => (/* reexport */ Side),\n  Slide: () => (/* reexport */ Slide),\n  SolverStrategy: () => (/* reexport */ SolverStrategy),\n  Sound: () => (/* reexport */ Sound),\n  SoundEvents: () => (/* reexport */ SoundEvents),\n  SparseHashGrid: () => (/* reexport */ SparseHashGrid),\n  SparseHashGridCollisionProcessor: () => (/* reexport */ SparseHashGridCollisionProcessor),\n  SpatialPartitionStrategy: () => (/* reexport */ SpatialPartitionStrategy),\n  Sprite: () => (/* reexport */ Sprite),\n  SpriteFont: () => (/* reexport */ SpriteFont),\n  SpriteSheet: () => (/* reexport */ SpriteSheet),\n  StandardClock: () => (/* reexport */ StandardClock),\n  StateMachine: () => (/* reexport */ StateMachine),\n  StrategyContainer: () => (/* reexport */ StrategyContainer),\n  Stream: () => (/* reexport */ Stream),\n  System: () => (/* reexport */ System),\n  SystemManager: () => (/* reexport */ SystemManager),\n  SystemPriority: () => (/* reexport */ SystemPriority),\n  SystemType: () => (/* reexport */ SystemType),\n  TagQuery: () => (/* reexport */ TagQuery),\n  TestClock: () => (/* reexport */ TestClock),\n  Text: () => (/* reexport */ Text),\n  TextAlign: () => (/* reexport */ TextAlign),\n  TextureLoader: () => (/* reexport */ TextureLoader),\n  Tile: () => (/* reexport */ Tile),\n  TileMap: () => (/* reexport */ TileMap),\n  TileMapEvents: () => (/* reexport */ TileMapEvents),\n  TiledAnimation: () => (/* reexport */ TiledAnimation),\n  TiledSprite: () => (/* reexport */ TiledSprite),\n  Timer: () => (/* reexport */ Timer),\n  Toaster: () => (/* reexport */ Toaster),\n  Transform: () => (/* reexport */ transform_Transform),\n  TransformComponent: () => (/* reexport */ TransformComponent),\n  Transition: () => (/* reexport */ Transition),\n  TreeNode: () => (/* reexport */ TreeNode),\n  Trigger: () => (/* reexport */ Trigger),\n  TriggerEvents: () => (/* reexport */ TriggerEvents),\n  TwoPI: () => (/* reexport */ TwoPI),\n  Util: () => (/* reexport */ Util_Index_namespaceObject),\n  Vector: () => (/* reexport */ Vector),\n  VectorView: () => (/* reexport */ VectorView),\n  VertexBuffer: () => (/* reexport */ VertexBuffer),\n  VertexLayout: () => (/* reexport */ VertexLayout),\n  VerticalFirst: () => (/* reexport */ VerticalFirst),\n  VisibleEvent: () => (/* reexport */ VisibleEvent),\n  WebAudio: () => (/* reexport */ WebAudio),\n  WebAudioInstance: () => (/* reexport */ WebAudioInstance),\n  WheelDeltaMode: () => (/* reexport */ WheelDeltaMode),\n  WheelEvent: () => (/* reexport */ WheelEvent),\n  World: () => (/* reexport */ World),\n  approximatelyEqual: () => (/* reexport */ approximatelyEqual),\n  assert: () => (/* reexport */ assert),\n  canonicalizeAngle: () => (/* reexport */ canonicalizeAngle),\n  clamp: () => (/* reexport */ clamp),\n  coroutine: () => (/* reexport */ coroutine),\n  createId: () => (/* reexport */ createId),\n  frac: () => (/* reexport */ frac),\n  getDefaultPhysicsConfig: () => (/* reexport */ getDefaultPhysicsConfig),\n  hasGraphicsTick: () => (/* reexport */ hasGraphicsTick),\n  hasOnAdd: () => (/* reexport */ hasOnAdd),\n  hasOnInitialize: () => (/* reexport */ hasOnInitialize),\n  hasOnPostUpdate: () => (/* reexport */ hasOnPostUpdate),\n  hasOnPreUpdate: () => (/* reexport */ hasOnPreUpdate),\n  hasOnRemove: () => (/* reexport */ hasOnRemove),\n  hasPostDraw: () => (/* reexport */ hasPostDraw),\n  hasPreDraw: () => (/* reexport */ hasPreDraw),\n  has_add: () => (/* reexport */ has_add),\n  has_initialize: () => (/* reexport */ has_initialize),\n  has_postupdate: () => (/* reexport */ has_postupdate),\n  has_preupdate: () => (/* reexport */ has_preupdate),\n  has_remove: () => (/* reexport */ has_remove),\n  inverseLerp: () => (/* reexport */ inverseLerp),\n  inverseLerpVector: () => (/* reexport */ inverseLerpVector),\n  isActor: () => (/* reexport */ isActor),\n  isAddedComponent: () => (/* reexport */ isAddedComponent),\n  isComponentCtor: () => (/* reexport */ isComponentCtor),\n  isLoaderConstructor: () => (/* reexport */ isLoaderConstructor),\n  isMoveByOptions: () => (/* reexport */ isMoveByOptions),\n  isMoveToOptions: () => (/* reexport */ isMoveToOptions),\n  isRemovedComponent: () => (/* reexport */ isRemovedComponent),\n  isRotateByOptions: () => (/* reexport */ isRotateByOptions),\n  isRotateToOptions: () => (/* reexport */ isRotateToOptions),\n  isScaleByOptions: () => (/* reexport */ isScaleByOptions),\n  isScaleToOptions: () => (/* reexport */ isScaleToOptions),\n  isSceneConstructor: () => (/* reexport */ isSceneConstructor),\n  isScreenElement: () => (/* reexport */ isScreenElement),\n  isSystemConstructor: () => (/* reexport */ isSystemConstructor),\n  lerp: () => (/* reexport */ lerp),\n  lerpAngle: () => (/* reexport */ lerpAngle),\n  lerpVector: () => (/* reexport */ lerpVector),\n  maxMessages: () => (/* reexport */ maxMessages),\n  nextActionId: () => (/* reexport */ nextActionId),\n  obsolete: () => (/* reexport */ obsolete),\n  parseImageFiltering: () => (/* reexport */ parseImageFiltering),\n  parseImageWrapping: () => (/* reexport */ parseImageWrapping),\n  pixelSnapEpsilon: () => (/* reexport */ pixelSnapEpsilon),\n  randomInRange: () => (/* reexport */ randomInRange),\n  randomIntInRange: () => (/* reexport */ randomIntInRange),\n  range: () => (/* reexport */ range),\n  remap: () => (/* reexport */ remap),\n  remapVector: () => (/* reexport */ remapVector),\n  resetObsoleteCounter: () => (/* reexport */ resetObsoleteCounter),\n  sign: () => (/* reexport */ sign),\n  toDegrees: () => (/* reexport */ toDegrees),\n  toRadians: () => (/* reexport */ toRadians),\n  vec: () => (/* reexport */ vec),\n  webgl: () => (/* reexport */ webgl_util_namespaceObject)\n});\n\n// NAMESPACE OBJECT: ./Graphics/Context/webgl-util.ts\nvar webgl_util_namespaceObject = {};\n__webpack_require__.r(webgl_util_namespaceObject);\n__webpack_require__.d(webgl_util_namespaceObject, {\n  getAttributeComponentSize: () => (getAttributeComponentSize),\n  getAttributePointerType: () => (getAttributePointerType),\n  getGLTypeFromSource: () => (getGLTypeFromSource),\n  getGlTypeSizeBytes: () => (getGlTypeSizeBytes),\n  getMaxShaderComplexity: () => (getMaxShaderComplexity),\n  isAttributeInSource: () => (isAttributeInSource)\n});\n\n// NAMESPACE OBJECT: ./Util/DrawUtil.ts\nvar DrawUtil_namespaceObject = {};\n__webpack_require__.r(DrawUtil_namespaceObject);\n__webpack_require__.d(DrawUtil_namespaceObject, {\n  circle: () => (circle),\n  line: () => (line),\n  point: () => (point),\n  roundRect: () => (roundRect),\n  vector: () => (vector)\n});\n\n// NAMESPACE OBJECT: ./Events.ts\nvar Events_namespaceObject = {};\n__webpack_require__.r(Events_namespaceObject);\n__webpack_require__.d(Events_namespaceObject, {\n  ActionCompleteEvent: () => (ActionCompleteEvent),\n  ActionStartEvent: () => (ActionStartEvent),\n  ActivateEvent: () => (ActivateEvent),\n  AddEvent: () => (AddEvent),\n  CollisionEndEvent: () => (CollisionEndEvent),\n  CollisionPostSolveEvent: () => (CollisionPostSolveEvent),\n  CollisionPreSolveEvent: () => (CollisionPreSolveEvent),\n  CollisionStartEvent: () => (CollisionStartEvent),\n  ContactEndEvent: () => (ContactEndEvent),\n  ContactStartEvent: () => (ContactStartEvent),\n  DeactivateEvent: () => (DeactivateEvent),\n  EnterTriggerEvent: () => (EnterTriggerEvent),\n  EnterViewPortEvent: () => (EnterViewPortEvent),\n  EventTypes: () => (EventTypes),\n  ExitTriggerEvent: () => (ExitTriggerEvent),\n  ExitViewPortEvent: () => (ExitViewPortEvent),\n  GameEvent: () => (GameEvent),\n  GameStartEvent: () => (GameStartEvent),\n  GameStopEvent: () => (GameStopEvent),\n  GamepadAxisEvent: () => (GamepadAxisEvent),\n  GamepadButtonEvent: () => (GamepadButtonEvent),\n  GamepadConnectEvent: () => (GamepadConnectEvent),\n  GamepadDisconnectEvent: () => (GamepadDisconnectEvent),\n  HiddenEvent: () => (HiddenEvent),\n  InitializeEvent: () => (InitializeEvent),\n  KillEvent: () => (KillEvent),\n  PostCollisionEvent: () => (PostCollisionEvent),\n  PostDebugDrawEvent: () => (PostDebugDrawEvent),\n  PostDrawEvent: () => (PostDrawEvent),\n  PostFrameEvent: () => (PostFrameEvent),\n  PostKillEvent: () => (PostKillEvent),\n  PostTransformDrawEvent: () => (PostTransformDrawEvent),\n  PostUpdateEvent: () => (PostUpdateEvent),\n  PreCollisionEvent: () => (PreCollisionEvent),\n  PreDebugDrawEvent: () => (PreDebugDrawEvent),\n  PreDrawEvent: () => (PreDrawEvent),\n  PreFrameEvent: () => (PreFrameEvent),\n  PreKillEvent: () => (PreKillEvent),\n  PreTransformDrawEvent: () => (PreTransformDrawEvent),\n  PreUpdateEvent: () => (PreUpdateEvent),\n  RemoveEvent: () => (RemoveEvent),\n  VisibleEvent: () => (VisibleEvent)\n});\n\n// NAMESPACE OBJECT: ./Util/Index.ts\nvar Util_Index_namespaceObject = {};\n__webpack_require__.r(Util_Index_namespaceObject);\n__webpack_require__.d(Util_Index_namespaceObject, {\n  ConsoleAppender: () => (ConsoleAppender),\n  DrawUtil: () => (DrawUtil_namespaceObject),\n  EasingFunctions: () => (EasingFunctions),\n  LogLevel: () => (LogLevel),\n  Logger: () => (Logger),\n  Observable: () => (Observable),\n  ScreenAppender: () => (ScreenAppender),\n  addItemToArray: () => (addItemToArray),\n  contains: () => (contains),\n  delay: () => (delay),\n  fail: () => (fail),\n  getPosition: () => (getPosition),\n  isObject: () => (isObject),\n  mergeDeep: () => (mergeDeep),\n  omit: () => (omit),\n  removeItemFromArray: () => (removeItemFromArray)\n});\n\n;// ./Polyfill.ts\n/**\n * Polyfill adding function\n */\nfunction polyfill() {\n    /* istanbul ignore next */\n    if (typeof window === 'undefined') {\n        window = {\n            audioContext: function () {\n                return;\n            }\n        };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\n        window.requestAnimationFrame =\n            window.webkitRequestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                function (callback) {\n                    window.setInterval(callback, 1000 / 60);\n                };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\n        window.cancelAnimationFrame =\n            window.webkitCancelAnimationFrame ||\n                window.mozCancelAnimationFrame ||\n                function () {\n                    return;\n                };\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.AudioContext) {\n        if (window.webkitAudioContext) {\n            const ctx = window.webkitAudioContext;\n            const replaceMe = ctx.prototype.decodeAudioData;\n            window.webkitAudioContext.prototype.decodeAudioData = function (arrayBuffer) {\n                return new Promise((resolve, reject) => {\n                    replaceMe.call(this, arrayBuffer, resolve, reject);\n                });\n            };\n        }\n        window.AudioContext =\n            window.AudioContext ||\n                window.webkitAudioContext ||\n                window.mozAudioContext ||\n                window.msAudioContext ||\n                window.oAudioContext;\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.devicePixelRatio) {\n        window.devicePixelRatio = window.devicePixelRatio || 1;\n    }\n    /* istanbul ignore next */\n    if (typeof window !== 'undefined' && !window.requestIdleCallback) {\n        // Adapted from https://developer.chrome.com/blog/using-requestidlecallback#checking_for_requestidlecallback\n        window.requestIdleCallback =\n            window.requestIdleCallback ||\n                function (cb) {\n                    const start = Date.now();\n                    return setTimeout(function () {\n                        cb({\n                            didTimeout: false,\n                            timeRemaining: function () {\n                                return Math.max(0, 50 - (Date.now() - start));\n                            }\n                        });\n                    }, 1);\n                };\n        window.cancelIdleCallback =\n            window.cancelIdleCallback ||\n                function (id) {\n                    clearTimeout(id);\n                };\n    }\n}\n\n;// ./Flags.ts\n/**\n * Flags is a feature flag implementation for Excalibur. They can only be operated **before {@apilink Engine} construction**\n * after which they are frozen and are read-only.\n *\n * Flags are used to enable experimental or preview features in Excalibur.\n */\nclass Flags {\n    /**\n     * Force excalibur to load the Canvas 2D graphics context fallback\n     * @warning not all features of excalibur are supported in the Canvas 2D fallback\n     */\n    static useCanvasGraphicsContext() {\n        Flags.enable('use-canvas-context');\n    }\n    /**\n     * Force excalibur to use the less optimized image renderer\n     */\n    static useLegacyImageRenderer() {\n        Flags.enable('use-legacy-image-renderer');\n    }\n    /**\n     * Freeze all flag modifications making them readonly\n     */\n    static freeze() {\n        Flags._FROZEN = true;\n    }\n    /**\n     * Resets internal flag state, not meant to be called by users. Only used for testing.\n     *\n     * Calling this in your game is UNSUPPORTED\n     * @internal\n     */\n    static _reset() {\n        Flags._FROZEN = false;\n        Flags._FLAGS = {};\n    }\n    /**\n     * Enable a specific feature flag by name. **Note: can only be set before {@apilink Engine} constructor time**\n     * @param flagName\n     */\n    static enable(flagName) {\n        if (this._FROZEN) {\n            throw Error('Feature flags can only be enabled before Engine constructor time');\n        }\n        Flags._FLAGS[flagName] = true;\n    }\n    /**\n     * Disable a specific feature flag by name. **Note: can only be set before {@apilink Engine} constructor time**\n     * @param flagName\n     */\n    static disable(flagName) {\n        if (this._FROZEN) {\n            throw Error('Feature flags can only be disabled before Engine constructor time');\n        }\n        Flags._FLAGS[flagName] = false;\n    }\n    /**\n     * Check if a flag is enabled. If the flag is disabled or does not exist `false` is returned\n     * @param flagName\n     */\n    static isEnabled(flagName) {\n        return !!Flags._FLAGS[flagName];\n    }\n    /**\n     * Show a list of currently known flags\n     */\n    static show() {\n        return Object.keys(Flags._FLAGS);\n    }\n}\nFlags._FROZEN = false;\nFlags._FLAGS = {};\n\n;// ./Id.ts\n/**\n * Create a branded ID type from a number\n */\nfunction createId(type, value) {\n    return { type, value };\n}\n\n;// ./Util/Future.ts\n/**\n * Future is a wrapper around a native browser Promise to allow resolving/rejecting at any time\n */\nclass Future {\n    constructor() {\n        this._isCompleted = false;\n        this.promise = new Promise((resolve, reject) => {\n            this._resolver = resolve;\n            this._rejecter = reject;\n        });\n    }\n    get isCompleted() {\n        return this._isCompleted;\n    }\n    resolve(value) {\n        if (this._isCompleted) {\n            return;\n        }\n        this._isCompleted = true;\n        this._resolver(value);\n    }\n    reject(error) {\n        if (this._isCompleted) {\n            return;\n        }\n        this._isCompleted = true;\n        this._rejecter(error);\n    }\n}\n\n;// ./EventEmitter.ts\n/**\n * Excalibur's typed event emitter, this allows events to be sent with any string to Type mapping\n */\nclass EventEmitter {\n    constructor() {\n        this._paused = false;\n        this._empty = true;\n        this._listeners = {};\n        this._listenersOnce = {};\n        this._pipes = [];\n    }\n    /**\n     * Removes all listeners and pipes\n     */\n    clear() {\n        this._listeners = {};\n        this._listenersOnce = {};\n        this._pipes.length = 0;\n        this._empty = true;\n    }\n    on(eventName, handler) {\n        var _a;\n        this._empty = false;\n        this._listeners[eventName] = (_a = this._listeners[eventName]) !== null && _a !== void 0 ? _a : [];\n        this._listeners[eventName].push(handler);\n        return {\n            close: () => this.off(eventName, handler)\n        };\n    }\n    once(eventName, handler) {\n        var _a;\n        this._empty = false;\n        this._listenersOnce[eventName] = (_a = this._listenersOnce[eventName]) !== null && _a !== void 0 ? _a : [];\n        this._listenersOnce[eventName].push(handler);\n        return {\n            close: () => this.off(eventName, handler)\n        };\n    }\n    off(eventName, handler) {\n        var _a, _b;\n        if (handler) {\n            const newListeners = (_a = this._listeners[eventName]) === null || _a === void 0 ? void 0 : _a.filter((h) => h !== handler);\n            this._listeners[eventName] = newListeners;\n            const newOnceListeners = (_b = this._listenersOnce[eventName]) === null || _b === void 0 ? void 0 : _b.filter((h) => h !== handler);\n            this._listenersOnce[eventName] = newOnceListeners;\n        }\n        else {\n            delete this._listeners[eventName];\n        }\n    }\n    emit(eventName, event) {\n        if (this._empty) {\n            return;\n        }\n        if (this._paused) {\n            return;\n        }\n        const listeners = this._listeners[eventName];\n        if (listeners) {\n            for (let i = 0; i < listeners.length; i++) {\n                listeners[i](event);\n            }\n        }\n        const onces = this._listenersOnce[eventName];\n        this._listenersOnce[eventName] = [];\n        if (onces) {\n            for (let i = 0; i < onces.length; i++) {\n                onces[i](event);\n            }\n        }\n        for (let i = 0; i < this._pipes.length; i++) {\n            this._pipes[i].emit(eventName, event);\n        }\n    }\n    /**\n     * Replay events from this emitter to another\n     * @param emitter\n     */\n    pipe(emitter) {\n        if (this === emitter) {\n            throw Error('Cannot pipe to self');\n        }\n        this._empty = false;\n        this._pipes.push(emitter);\n        return {\n            close: () => {\n                const i = this._pipes.indexOf(emitter);\n                if (i > -1) {\n                    this._pipes.splice(i, 1);\n                }\n            }\n        };\n    }\n    /**\n     * Remove any piped emitters\n     * @param emitter\n     */\n    unpipe(emitter) {\n        const i = this._pipes.indexOf(emitter);\n        if (i > -1) {\n            this._pipes.splice(i, 1);\n        }\n    }\n    /**\n     * Paused event emitters do not emit events\n     */\n    pause() {\n        this._paused = true;\n    }\n    /**\n     * Unpaused event emitter do emit events\n     */\n    unpause() {\n        this._paused = false;\n    }\n}\n\n;// ./Input/PointerScope.ts\n/**\n * Determines the scope of handling mouse/touch events.\n */\nvar PointerScope;\n(function (PointerScope) {\n    /**\n     * Handle events on the `canvas` element only. Events originating outside the\n     * `canvas` will not be handled.\n     */\n    PointerScope[\"Canvas\"] = \"Canvas\";\n    /**\n     * Handles events on the entire document. All events will be handled by Excalibur.\n     */\n    PointerScope[\"Document\"] = \"Document\";\n})(PointerScope || (PointerScope = {}));\n\n;// ./Math/rotation-type.ts\n/**\n * An enum that describes the strategies that rotation actions can use\n */\nvar RotationType;\n(function (RotationType) {\n    /**\n     * Rotation via `ShortestPath` will use the smallest angle\n     * between the starting and ending points. This strategy is the default behavior.\n     */\n    RotationType[\"ShortestPath\"] = \"shortest-path\";\n    /**\n     * Rotation via `LongestPath` will use the largest angle\n     * between the starting and ending points.\n     */\n    RotationType[\"LongestPath\"] = \"longest-path\";\n    /**\n     * Rotation via `Clockwise` will travel in a clockwise direction,\n     * regardless of the starting and ending points.\n     */\n    RotationType[\"Clockwise\"] = \"clockwise\";\n    /**\n     * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\n     * regardless of the starting and ending points.\n     */\n    RotationType[\"CounterClockwise\"] = \"counter-clockwise\";\n})(RotationType || (RotationType = {}));\n\n;// ./Math/Random.ts\n/**\n * @module\n * Pseudo-Random Utility\n *\n * A pseudo-random utility to add seeded random support for help in\n * generating things like terrain or reproducible randomness. Uses the\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\n */\n/**\n * 32-bit mask\n */\nconst BITMASK32 = 0xffffffff;\n/**\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\n * of numbers each time it is called.\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\n *\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\n */\nclass Random {\n    /**\n     * If no seed is specified, the Date.now() is used\n     */\n    constructor(seed) {\n        this.seed = seed;\n        // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\n        this._lowerMask = 0x7fffffff; // 31 bits same as _r\n        this._upperMask = 0x80000000; // 34 high bits\n        // Word size, 64 bits\n        this._w = 32;\n        // Degree of recurrence\n        this._n = 624;\n        // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\n        this._m = 397;\n        // coefficients of teh rational normal form twist matrix\n        this._a = 0x9908b0df;\n        // tempering bit shifts and masks\n        this._u = 11;\n        this._s = 7;\n        this._b = 0x9d2c5680;\n        this._t = 15;\n        this._c = 0xefc60000;\n        this._l = 18;\n        this._f = 1812433253;\n        this._mt = new Array(this._n);\n        // need to mask to support higher bit machines\n        this._mt[0] = (seed || Date.now()) >>> 0;\n        for (let i = 1; i < this._n; i++) {\n            const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\n            // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\n            this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\n        }\n        this._index = this._n;\n    }\n    /**\n     * Apply the twist\n     */\n    _twist() {\n        const mag01 = [0x0, this._a];\n        let y = 0, i = 0;\n        for (; i < this._n - this._m; i++) {\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n            this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        }\n        for (; i < this._n - 1; i++) {\n            y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n            this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        }\n        y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\n        this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n        this._index = 0;\n    }\n    /**\n     * Return next 32 bit integer number in sequence\n     */\n    nextInt() {\n        if (this._index >= this._n) {\n            this._twist();\n        }\n        let y = this._mt[this._index++];\n        y ^= y >>> this._u;\n        y ^= (y << this._s) & this._b;\n        y ^= (y << this._t) & this._c;\n        y ^= y >>> this._l;\n        return y >>> 0;\n    }\n    /**\n     * Return a random floating point number between [0, 1)\n     */\n    next() {\n        return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\n    }\n    /**\n     * Return a random floating point in range [min, max) min is included, max is not included\n     */\n    floating(min, max) {\n        return (max - min) * this.next() + min;\n    }\n    /**\n     * Return a random integer in range [min, max] min is included, max is included.\n     * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\n     */\n    integer(min, max) {\n        return Math.floor((max - min + 1) * this.next() + min);\n    }\n    /**\n     * Returns true or false randomly with 50/50 odds by default.\n     * By default the likelihood of returning a true is .5 (50%).\n     * @param likelihood takes values between [0, 1]\n     */\n    bool(likelihood = 0.5) {\n        return this.next() <= likelihood;\n    }\n    /**\n     * Returns one element from an array at random\n     */\n    pickOne(array) {\n        return array[this.integer(0, array.length - 1)];\n    }\n    /**\n     * Returns a new array random picking elements from the original\n     * @param array Original array to pick from\n     * @param numPicks can be any positive number\n     * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\n     * just that it is possible)\n     */\n    pickSet(array, numPicks, allowDuplicates = false) {\n        if (allowDuplicates) {\n            return this._pickSetWithDuplicates(array, numPicks);\n        }\n        else {\n            return this._pickSetWithoutDuplicates(array, numPicks);\n        }\n    }\n    /**\n     * Returns a new array randomly picking elements in the original (not reused)\n     * @param array Array to pick elements out of\n     * @param numPicks must be less than or equal to the number of elements in the array.\n     */\n    _pickSetWithoutDuplicates(array, numPicks) {\n        if (numPicks > array.length || numPicks < 0) {\n            throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\n        }\n        if (numPicks === array.length) {\n            return array;\n        }\n        const result = new Array(numPicks);\n        let currentPick = 0;\n        const tempArray = array.slice(0);\n        while (currentPick < numPicks) {\n            const index = this.integer(0, tempArray.length - 1);\n            result[currentPick++] = tempArray[index];\n            tempArray.splice(index, 1);\n        }\n        return result;\n    }\n    /**\n     * Returns a new array random picking elements from the original allowing duplicates\n     * @param array Array to pick elements out of\n     * @param numPicks can be any positive number\n     */\n    _pickSetWithDuplicates(array, numPicks) {\n        // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\n        if (numPicks < 0) {\n            throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\n        }\n        const result = new Array(numPicks);\n        for (let i = 0; i < numPicks; i++) {\n            result[i] = this.pickOne(array);\n        }\n        return result;\n    }\n    /**\n     * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\n     * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n     */\n    shuffle(array) {\n        const tempArray = array.slice(0);\n        let swap;\n        for (let i = 0; i < tempArray.length - 2; i++) {\n            const randomIndex = this.integer(i, tempArray.length - 1);\n            swap = tempArray[i];\n            tempArray[i] = tempArray[randomIndex];\n            tempArray[randomIndex] = swap;\n        }\n        return tempArray;\n    }\n    /**\n     * Generate a list of random integer numbers\n     * @param length the length of the final array\n     * @param min the minimum integer number to generate inclusive\n     * @param max the maximum integer number to generate inclusive\n     */\n    range(length, min, max) {\n        const result = new Array(length);\n        for (let i = 0; i < length; i++) {\n            result[i] = this.integer(min, max);\n        }\n        return result;\n    }\n    /**\n     * Returns the result of a d4 dice roll\n     */\n    d4() {\n        return this.integer(1, 4);\n    }\n    /**\n     * Returns the result of a d6 dice roll\n     */\n    d6() {\n        return this.integer(1, 6);\n    }\n    /**\n     * Returns the result of a d8 dice roll\n     */\n    d8() {\n        return this.integer(1, 8);\n    }\n    /**\n     * Returns the result of a d10 dice roll\n     */\n    d10() {\n        return this.integer(1, 10);\n    }\n    /**\n     * Returns the result of a d12 dice roll\n     */\n    d12() {\n        return this.integer(1, 12);\n    }\n    /**\n     * Returns the result of a d20 dice roll\n     */\n    d20() {\n        return this.integer(1, 20);\n    }\n}\n\n;// ./Math/util.ts\n\n/**\n * Two PI constant\n */\nconst TwoPI = Math.PI * 2;\n/**\n * Returns the fractional part of a number\n * @param x\n */\nfunction frac(x) {\n    if (x >= 0) {\n        return x - Math.floor(x);\n    }\n    else {\n        return x - Math.ceil(x);\n    }\n}\n/**\n * Returns the sign of a number, if 0 returns 0\n */\nfunction sign(val) {\n    if (val === 0) {\n        return 0;\n    }\n    return val < 0 ? -1 : 1;\n}\n/**\n * Clamps a value between a min and max inclusive\n */\nfunction clamp(val, min, max) {\n    return Math.min(Math.max(min, val), max);\n}\n/**\n * Approximately equals\n */\nfunction approximatelyEqual(val1, val2, tolerance) {\n    // https://dev.to/alldanielscott/how-to-compare-numbers-correctly-in-javascript-1l4i\n    return Math.abs(val1 - val2) < tolerance;\n}\n/**\n * Convert an angle to be the equivalent in the range [0, 2PI)\n */\nfunction canonicalizeAngle(angle) {\n    let tmpAngle = angle;\n    if (angle >= TwoPI) {\n        while (tmpAngle >= TwoPI) {\n            tmpAngle -= TwoPI;\n        }\n    }\n    if (angle < 0) {\n        while (tmpAngle < 0) {\n            tmpAngle += TwoPI;\n        }\n    }\n    return tmpAngle;\n}\n/**\n * Convert radians to degrees\n */\nfunction toDegrees(radians) {\n    return (180 / Math.PI) * radians;\n}\n/**\n * Convert degrees to radians\n */\nfunction toRadians(degrees) {\n    return (degrees / 180) * Math.PI;\n}\n/**\n * Generate a range of numbers\n * For example: range(0, 5) -> [0, 1, 2, 3, 4, 5]\n * @param from inclusive\n * @param to inclusive\n */\nconst range = (from, to) => Array.from(new Array(to - from + 1), (_x, i) => i + from);\n/**\n * Find a random floating point number in range\n */\nfunction randomInRange(min, max, random = new Random()) {\n    return random ? random.floating(min, max) : min + Math.random() * (max - min);\n}\n/**\n * Find a random integer in a range\n */\nfunction randomIntInRange(min, max, random = new Random()) {\n    return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\n}\n\n;// ./Math/vector.ts\n\n\n/**\n * A 2D vector on a plane.\n */\nclass Vector {\n    /**\n     * A (0, 0) vector\n     */\n    static get Zero() {\n        return new Vector(0, 0);\n    }\n    /**\n     * A (1, 1) vector\n     */\n    static get One() {\n        return new Vector(1, 1);\n    }\n    /**\n     * A (0.5, 0.5) vector\n     */\n    static get Half() {\n        return new Vector(0.5, 0.5);\n    }\n    /**\n     * A unit vector pointing up (0, -1)\n     */\n    static get Up() {\n        return new Vector(0, -1);\n    }\n    /**\n     * A unit vector pointing down (0, 1)\n     */\n    static get Down() {\n        return new Vector(0, 1);\n    }\n    /**\n     * A unit vector pointing left (-1, 0)\n     */\n    static get Left() {\n        return new Vector(-1, 0);\n    }\n    /**\n     * A unit vector pointing right (1, 0)\n     */\n    static get Right() {\n        return new Vector(1, 0);\n    }\n    /**\n     * Returns a vector of unit length in the direction of the specified angle in Radians.\n     * @param angle The angle to generate the vector\n     */\n    static fromAngle(angle) {\n        return new Vector(Math.cos(angle), Math.sin(angle));\n    }\n    /**\n     * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\n     */\n    static isValid(vec) {\n        if (vec === null || vec === undefined) {\n            return false;\n        }\n        if (isNaN(vec.x) || isNaN(vec.y)) {\n            return false;\n        }\n        if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Calculates distance between two Vectors\n     * @param vec1\n     * @param vec2\n     */\n    static distance(vec1, vec2) {\n        return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\n    }\n    static min(vec1, vec2) {\n        return new Vector(Math.min(vec1.x, vec2.x), Math.min(vec1.y, vec2.y));\n    }\n    static max(vec1, vec2) {\n        return new Vector(Math.max(vec1.x, vec2.x), Math.max(vec1.y, vec2.y));\n    }\n    /**\n     * @param x  X component of the Vector\n     * @param y  Y component of the Vector\n     */\n    constructor(x, y) {\n        this._x = 0;\n        this._y = 0;\n        this._x = x;\n        this._y = y;\n    }\n    /**\n     * Get the x component of the vector\n     */\n    get x() {\n        return this._x;\n    }\n    /**\n     * Set the x component, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n     */\n    set x(val) {\n        this._x = val;\n    }\n    /**\n     * Get the y component of the vector\n     */\n    get y() {\n        return this._y;\n    }\n    /**\n     * Set the y component, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n     */\n    set y(val) {\n        this._y = val;\n    }\n    /**\n     * Sets the x and y components at once, THIS MUTATES the current vector. It is usually better to create a new vector.\n     * @warning **Be very careful using this, mutating vectors can cause hard to find bugs**\n     */\n    setTo(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    /**\n     * Compares this point against another and tests for equality\n     * @param vector The other point to compare to\n     * @param tolerance Amount of euclidean distance off we are willing to tolerate\n     */\n    equals(vector, tolerance = Vector.EQUALS_EPSILON) {\n        return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\n    }\n    /**\n     * The distance to another vector. If no other Vector is specified, this will return the {@apilink magnitude}.\n     * @param v  The other vector. Leave blank to use origin vector.\n     */\n    distance(v) {\n        if (!v) {\n            return Math.sqrt(this.x * this.x + this.y * this.y);\n        }\n        const deltaX = this.x - v.x;\n        const deltaY = this.y - v.y;\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    }\n    squareDistance(v) {\n        if (!v) {\n            v = Vector.Zero;\n        }\n        const deltaX = this.x - v.x;\n        const deltaY = this.y - v.y;\n        return deltaX * deltaX + deltaY * deltaY;\n    }\n    /**\n     * Clamps the current vector's magnitude mutating it\n     * @param magnitude\n     */\n    clampMagnitude(magnitude) {\n        const size = this.magnitude;\n        const newSize = clamp(size, 0, magnitude);\n        this.magnitude = newSize;\n        return this;\n    }\n    /**\n     * The size (magnitude) of the Vector\n     * @deprecated Will be removed in v1, use Vector.magnitude\n     */\n    get size() {\n        return this.distance();\n    }\n    /**\n     * Setting the size mutates the current vector\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\n     * @deprecated Will be removed in v1, use Vector.magnitude\n     */\n    set size(newLength) {\n        const v = this.normalize().scale(newLength);\n        this.setTo(v.x, v.y);\n    }\n    /**\n     * The magnitude (length) of the Vector\n     */\n    get magnitude() {\n        return this.distance();\n    }\n    /**\n     * Setting the size mutates the current vector\n     * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\n     */\n    set magnitude(newMagnitude) {\n        this.normalize().scale(newMagnitude, this);\n    }\n    /**\n     * Normalizes a non-zero vector to have a magnitude of 1. Zero vectors return a new zero vector.\n     */\n    normalize() {\n        const distance = this.distance();\n        if (distance === 0) {\n            return Vector.Zero;\n        }\n        return new Vector(this.x / distance, this.y / distance);\n    }\n    /**\n     * Returns the average (midpoint) between the current point and the specified\n     */\n    average(vec) {\n        return this.add(vec).scale(0.5);\n    }\n    scale(sizeOrScale, dest) {\n        const result = dest || new Vector(0, 0);\n        if (sizeOrScale instanceof Vector) {\n            result.x = this.x * sizeOrScale.x;\n            result.y = this.y * sizeOrScale.y;\n        }\n        else {\n            result.x = this.x * sizeOrScale;\n            result.y = this.y * sizeOrScale;\n        }\n        return result;\n    }\n    /**\n     * Adds one vector to another\n     * @param v The vector to add\n     * @param dest Optionally copy the result into a provided vector\n     */\n    add(v, dest) {\n        if (dest) {\n            dest.x = this.x + v.x;\n            dest.y = this.y + v.y;\n            return dest;\n        }\n        return new Vector(this.x + v.x, this.y + v.y);\n    }\n    /**\n     * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\n     * @param v The vector to subtract\n     */\n    sub(v, dest) {\n        const result = dest || new Vector(0, 0);\n        const x = this.x - v.x;\n        const y = this.y - v.y;\n        result.x = x;\n        result.y = y;\n        return result;\n    }\n    /**\n     * Adds one vector to this one modifying the original\n     * @param v The vector to add\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    addEqual(v) {\n        this.setTo(this.x + v.x, this.y + v.y);\n        return this;\n    }\n    /**\n     * Subtracts a vector from this one modifying the original\n     * @param v The vector to subtract\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    subEqual(v) {\n        this.setTo(this.x - v.x, this.y - v.y);\n        return this;\n    }\n    /**\n     * Scales this vector by a factor of size and modifies the original\n     * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n     */\n    scaleEqual(size) {\n        this.setTo(this.x * size, this.y * size);\n        return this;\n    }\n    /**\n     * Performs a dot product with another vector\n     * @param v  The vector to dot\n     */\n    dot(v) {\n        return this.x * v.x + this.y * v.y;\n    }\n    cross(v) {\n        if (v instanceof Vector) {\n            return this.x * v.y - this.y * v.x;\n        }\n        else if (typeof v === 'number') {\n            return new Vector(v * this.y, -v * this.x);\n        }\n    }\n    static cross(num, vec) {\n        return new Vector(-num * vec.y, num * vec.x);\n    }\n    /**\n     * Returns the perpendicular vector to this one\n     */\n    perpendicular() {\n        return new Vector(this.y, -this.x);\n    }\n    /**\n     * Returns the normal vector to this one, same as the perpendicular of length 1\n     */\n    normal() {\n        return this.perpendicular().normalize();\n    }\n    /**\n     * Negate the current vector\n     */\n    negate() {\n        return this.scale(-1);\n    }\n    /**\n     * Returns the angle of this vector, in range [0, 2*PI)\n     */\n    toAngle() {\n        return canonicalizeAngle(Math.atan2(this.y, this.x));\n    }\n    /**\n     * Returns the difference in radians between the angle of this vector and given angle,\n     * using the given rotation type.\n     * @param angle in radians to which the vector has to be rotated, using {@apilink rotate}\n     * @param rotationType what {@apilink RotationType} to use for the rotation\n     * @returns the angle by which the vector needs to be rotated to match the given angle\n     */\n    angleBetween(angle, rotationType) {\n        const startAngleRadians = this.toAngle();\n        const endAngleRadians = canonicalizeAngle(angle);\n        let rotationClockwise = 0;\n        let rotationAntiClockwise = 0;\n        if (endAngleRadians > startAngleRadians) {\n            rotationClockwise = endAngleRadians - startAngleRadians;\n        }\n        else {\n            rotationClockwise = (TwoPI - startAngleRadians + endAngleRadians) % TwoPI;\n        }\n        rotationAntiClockwise = (rotationClockwise - TwoPI) % TwoPI;\n        switch (rotationType) {\n            case RotationType.ShortestPath:\n                if (Math.abs(rotationClockwise) < Math.abs(rotationAntiClockwise)) {\n                    return rotationClockwise;\n                }\n                else {\n                    return rotationAntiClockwise;\n                }\n            case RotationType.LongestPath:\n                if (Math.abs(rotationClockwise) > Math.abs(rotationAntiClockwise)) {\n                    return rotationClockwise;\n                }\n                else {\n                    return rotationAntiClockwise;\n                }\n            case RotationType.Clockwise:\n                return rotationClockwise;\n            case RotationType.CounterClockwise:\n                return rotationAntiClockwise;\n        }\n    }\n    /**\n     * Rotates the current vector around a point by a certain angle in radians.\n     * Positive angle means rotation clockwise.\n     */\n    rotate(angle, anchor, dest) {\n        const result = dest || new Vector(0, 0);\n        if (!anchor) {\n            anchor = new Vector(0, 0);\n        }\n        const sinAngle = Math.sin(angle);\n        const cosAngle = Math.cos(angle);\n        const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\n        const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\n        result.x = x;\n        result.y = y;\n        return result;\n    }\n    /**\n     * Creates new vector that has the same values as the previous.\n     */\n    clone(dest) {\n        const v = dest !== null && dest !== void 0 ? dest : new Vector(0, 0);\n        v.x = this.x;\n        v.y = this.y;\n        return v;\n    }\n    /**\n     * Returns a string representation of the vector.\n     */\n    toString(fixed) {\n        if (fixed) {\n            return `(${this.x.toFixed(fixed)}, ${this.y.toFixed(fixed)})`;\n        }\n        return `(${this.x}, ${this.y})`;\n    }\n}\n/**\n * Get or set the vector equals epsilon, by default 0.001 meaning vectors within that tolerance on x or y will be considered equal.\n */\nVector.EQUALS_EPSILON = 0.001;\n/**\n * Shorthand for creating new Vectors - returns a new Vector instance with the\n * provided X and Y components.\n * @param x  X component of the Vector\n * @param y  Y component of the Vector\n */\nfunction vec(x, y) {\n    return new Vector(x, y);\n}\n\n;// ./Color.ts\n/**\n * Provides standard colors (e.g. {@apilink Color.Black})\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\n * useful color operations like {@apilink Color.lighten}, {@apilink Color.darken}, and more.\n */\nclass Color {\n    /**\n     * Creates a new instance of Color from an r, g, b, a\n     * @param r  The red component of color (0-255)\n     * @param g  The green component of color (0-255)\n     * @param b  The blue component of color (0-255)\n     * @param a  The alpha component of color (0-1.0)\n     */\n    constructor(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a != null ? a : 1;\n    }\n    /**\n     * Creates a new instance of Color from an r, g, b, a\n     * @param r  The red component of color (0-255)\n     * @param g  The green component of color (0-255)\n     * @param b  The blue component of color (0-255)\n     * @param a  The alpha component of color (0-1.0)\n     */\n    static fromRGB(r, g, b, a) {\n        return new Color(r, g, b, a);\n    }\n    /**\n     * Creates a new instance of Color from a rgb string\n     * @param string  CSS color string of the form rgba(255, 255, 255, 1) or rgb(255, 255, 255)\n     */\n    static fromRGBString(string) {\n        const rgbaRegEx = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/i;\n        let match = null;\n        if ((match = string.match(rgbaRegEx))) {\n            const r = parseInt(match[1], 10);\n            const g = parseInt(match[2], 10);\n            const b = parseInt(match[3], 10);\n            let a = 1;\n            if (match[4]) {\n                a = parseFloat(match[4]);\n            }\n            return new Color(r, g, b, a);\n        }\n        else {\n            throw new Error('Invalid rgb/a string: ' + string);\n        }\n    }\n    /**\n     * Creates a new instance of Color from a hex string\n     * @param hex  CSS color string of the form #ffffff, the alpha component is optional\n     */\n    static fromHex(hex) {\n        const hexRegEx = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\n        let match = null;\n        if ((match = hex.match(hexRegEx))) {\n            const r = parseInt(match[1], 16);\n            const g = parseInt(match[2], 16);\n            const b = parseInt(match[3], 16);\n            let a = 1;\n            if (match[4]) {\n                a = parseInt(match[4], 16) / 255;\n            }\n            return new Color(r, g, b, a);\n        }\n        else {\n            throw new Error('Invalid hex string: ' + hex);\n        }\n    }\n    /**\n     * Creates a new instance of Color from hsla values\n     * @param h  Hue is represented [0-1]\n     * @param s  Saturation is represented [0-1]\n     * @param l  Luminance is represented [0-1]\n     * @param a  Alpha is represented [0-1]\n     */\n    static fromHSL(h, s, l, a = 1.0) {\n        const temp = new HSLColor(h, s, l, a);\n        return temp.toRGBA();\n    }\n    /**\n     * Lightens the current color by a specified amount\n     * @param factor  The amount to lighten by [0-1]\n     */\n    lighten(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.l += (1 - temp.l) * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Darkens the current color by a specified amount\n     * @param factor  The amount to darken by [0-1]\n     */\n    darken(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.l -= temp.l * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Saturates the current color by a specified amount\n     * @param factor  The amount to saturate by [0-1]\n     */\n    saturate(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.s += temp.s * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Desaturates the current color by a specified amount\n     * @param factor  The amount to desaturate by [0-1]\n     */\n    desaturate(factor = 0.1) {\n        const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n        temp.s -= temp.s * factor;\n        return temp.toRGBA();\n    }\n    /**\n     * Multiplies a color by another, results in a darker color\n     * @param color  The other color\n     */\n    multiply(color) {\n        const newR = (((color.r / 255) * this.r) / 255) * 255;\n        const newG = (((color.g / 255) * this.g) / 255) * 255;\n        const newB = (((color.b / 255) * this.b) / 255) * 255;\n        const newA = color.a * this.a;\n        return new Color(newR, newG, newB, newA);\n    }\n    /**\n     * Screens a color by another, results in a lighter color\n     * @param color  The other color\n     */\n    screen(color) {\n        const color1 = color.invert();\n        const color2 = color.invert();\n        return color1.multiply(color2).invert();\n    }\n    /**\n     * Inverts the current color\n     */\n    invert() {\n        return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\n    }\n    /**\n     * Averages the current color with another\n     * @param color  The other color\n     */\n    average(color) {\n        const newR = (color.r + this.r) / 2;\n        const newG = (color.g + this.g) / 2;\n        const newB = (color.b + this.b) / 2;\n        const newA = (color.a + this.a) / 2;\n        return new Color(newR, newG, newB, newA);\n    }\n    equal(color) {\n        return this.toString() === color.toString();\n    }\n    /**\n     * Returns a CSS string representation of a color.\n     * @param format Color representation, accepts: rgb, hsl, or hex\n     */\n    toString(format = 'rgb') {\n        switch (format) {\n            case 'rgb':\n                return this.toRGBA();\n            case 'hsl':\n                return this.toHSLA();\n            case 'hex':\n                return this.toHex();\n            default:\n                throw new Error('Invalid Color format');\n        }\n    }\n    /**\n     * Returns Hex Value of a color component\n     * @param c color component\n     * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n     */\n    _componentToHex(c) {\n        // Handle negative and fractional numbers\n        const hex = Math.max(Math.round(c), 0).toString(16);\n        return hex.length === 1 ? '0' + hex : hex;\n    }\n    /**\n     * Return Hex representation of a color.\n     */\n    toHex() {\n        let hexRepresentation = '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\n        if (this.a !== 1) {\n            hexRepresentation += this._componentToHex(this.a * 255);\n        }\n        return hexRepresentation;\n    }\n    /**\n     * Return RGBA representation of a color.\n     */\n    toRGBA() {\n        const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\n        if (this.a !== undefined || this.a !== null) {\n            return 'rgba(' + result + ', ' + String(this.a) + ')';\n        }\n        return 'rgb(' + result + ')';\n    }\n    /**\n     * Return HSLA representation of a color.\n     */\n    toHSLA() {\n        return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\n    }\n    /**\n     * Returns a CSS string representation of a color.\n     */\n    fillStyle() {\n        return this.toString();\n    }\n    /**\n     * Returns a clone of the current color.\n     */\n    clone(dest) {\n        const result = dest || new Color(this.r, this.g, this.b, this.a);\n        result.r = this.r;\n        result.g = this.g;\n        result.b = this.b;\n        result.a = this.a;\n        return result;\n    }\n    /**\n     * Black (#000000)\n     */\n    static get Black() {\n        return Color.fromHex('#000000');\n    }\n    /**\n     * White (#FFFFFF)\n     */\n    static get White() {\n        return Color.fromHex('#FFFFFF');\n    }\n    /**\n     * Gray (#808080)\n     */\n    static get Gray() {\n        return Color.fromHex('#808080');\n    }\n    /**\n     * Light gray (#D3D3D3)\n     */\n    static get LightGray() {\n        return Color.fromHex('#D3D3D3');\n    }\n    /**\n     * Dark gray (#A9A9A9)\n     */\n    static get DarkGray() {\n        return Color.fromHex('#A9A9A9');\n    }\n    /**\n     * Yellow (#FFFF00)\n     */\n    static get Yellow() {\n        return Color.fromHex('#FFFF00');\n    }\n    /**\n     * Orange (#FFA500)\n     */\n    static get Orange() {\n        return Color.fromHex('#FFA500');\n    }\n    /**\n     * Red (#FF0000)\n     */\n    static get Red() {\n        return Color.fromHex('#FF0000');\n    }\n    /**\n     * Vermilion (#FF5B31)\n     */\n    static get Vermilion() {\n        return Color.fromHex('#FF5B31');\n    }\n    /**\n     * Rose (#FF007F)\n     */\n    static get Rose() {\n        return Color.fromHex('#FF007F');\n    }\n    /**\n     * Pink (#FFC0CB)\n     */\n    static get Pink() {\n        return Color.fromHex('#FFC0CB');\n    }\n    /**\n     * Magenta (#FF00FF)\n     */\n    static get Magenta() {\n        return Color.fromHex('#FF00FF');\n    }\n    /**\n     * Violet (#7F00FF)\n     */\n    static get Violet() {\n        return Color.fromHex('#7F00FF');\n    }\n    /**\n     * Purple (#800080)\n     */\n    static get Purple() {\n        return Color.fromHex('#800080');\n    }\n    /**\n     * Blue (#0000FF)\n     */\n    static get Blue() {\n        return Color.fromHex('#0000FF');\n    }\n    /**\n     * Azure (#007FFF)\n     */\n    static get Azure() {\n        return Color.fromHex('#007FFF');\n    }\n    /**\n     * Cyan (#00FFFF)\n     */\n    static get Cyan() {\n        return Color.fromHex('#00FFFF');\n    }\n    /**\n     * Viridian (#59978F)\n     */\n    static get Viridian() {\n        return Color.fromHex('#59978F');\n    }\n    /**\n     * Teal (#008080)\n     */\n    static get Teal() {\n        return Color.fromHex('#008080');\n    }\n    /**\n     * Green (#00FF00)\n     */\n    static get Green() {\n        return Color.fromHex('#00FF00');\n    }\n    /**\n     * Chartreuse (#7FFF00)\n     */\n    static get Chartreuse() {\n        return Color.fromHex('#7FFF00');\n    }\n    /**\n     * Transparent (#FFFFFF00)\n     */\n    static get Transparent() {\n        return Color.fromHex('#FFFFFF00');\n    }\n    /**\n     * ExcaliburBlue (#176BAA)\n     */\n    static get ExcaliburBlue() {\n        return Color.fromHex('#176BAA');\n    }\n    /**\n     * Brown (#964B00)\n     */\n    static get Brown() {\n        return Color.fromHex('#964B00');\n    }\n}\n/**\n * Internal HSL Color representation\n *\n * http://en.wikipedia.org/wiki/HSL_and_HSV\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nclass HSLColor {\n    constructor(h, s, l, a) {\n        this.h = h;\n        this.s = s;\n        this.l = l;\n        this.a = a;\n    }\n    static hue2rgb(p, q, t) {\n        if (t < 0) {\n            t += 1;\n        }\n        if (t > 1) {\n            t -= 1;\n        }\n        if (t < 1 / 6) {\n            return p + (q - p) * 6 * t;\n        }\n        if (t < 1 / 2) {\n            return q;\n        }\n        if (t < 2 / 3) {\n            return p + (q - p) * (2 / 3 - t) * 6;\n        }\n        return p;\n    }\n    static fromRGBA(r, g, b, a) {\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        const max = Math.max(r, g, b), min = Math.min(r, g, b);\n        let h, s;\n        const l = (max + min) / 2;\n        if (max === min) {\n            h = s = 0; // achromatic\n        }\n        else {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        return new HSLColor(h, s, l, a);\n    }\n    toRGBA() {\n        let r, g, b;\n        if (this.s === 0) {\n            r = g = b = this.l; // achromatic\n        }\n        else {\n            const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\n            const p = 2 * this.l - q;\n            r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\n            g = HSLColor.hue2rgb(p, q, this.h);\n            b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\n        }\n        return new Color(r * 255, g * 255, b * 255, this.a);\n    }\n    toString() {\n        const h = this.h.toFixed(0), s = this.s.toFixed(0), l = this.l.toFixed(0), a = this.a.toFixed(0);\n        return `hsla(${h}, ${s}, ${l}, ${a})`;\n    }\n}\n\n;// ./Util/Log.ts\n/* eslint-disable no-console */\n\n\n/**\n * Logging level that Excalibur will tag\n */\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"Debug\"] = 0] = \"Debug\";\n    LogLevel[LogLevel[\"Info\"] = 1] = \"Info\";\n    LogLevel[LogLevel[\"Warn\"] = 2] = \"Warn\";\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\n    LogLevel[LogLevel[\"Fatal\"] = 4] = \"Fatal\";\n})(LogLevel || (LogLevel = {}));\n/**\n * Static singleton that represents the logging facility for Excalibur.\n * Excalibur comes built-in with a {@apilink ConsoleAppender} and {@apilink ScreenAppender}.\n * Derive from {@apilink Appender} to create your own logging appenders.\n */\nclass Logger {\n    constructor() {\n        this._appenders = [];\n        /**\n         * Gets or sets the default logging level. Excalibur will only log\n         * messages if equal to or above this level. Default: {@apilink LogLevel.Info}\n         */\n        this.defaultLevel = LogLevel.Info;\n        this._logOnceSet = new Set();\n        if (Logger._INSTANCE) {\n            throw new Error('Logger is a singleton');\n        }\n        Logger._INSTANCE = this;\n        // Default console appender\n        Logger._INSTANCE.addAppender(new ConsoleAppender());\n        return Logger._INSTANCE;\n    }\n    /**\n     * Gets the current static instance of Logger\n     */\n    static getInstance() {\n        if (Logger._INSTANCE == null) {\n            Logger._INSTANCE = new Logger();\n        }\n        return Logger._INSTANCE;\n    }\n    /**\n     * Adds a new {@apilink Appender} to the list of appenders to write to\n     */\n    addAppender(appender) {\n        this._appenders.push(appender);\n    }\n    /**\n     * Clears all appenders from the logger\n     */\n    clearAppenders() {\n        this._appenders.length = 0;\n    }\n    /**\n     * Logs a message at a given LogLevel\n     * @param level  The LogLevel`to log the message at\n     * @param args   An array of arguments to write to an appender\n     */\n    _log(level, args) {\n        if (level == null) {\n            level = this.defaultLevel;\n        }\n        const len = this._appenders.length;\n        for (let i = 0; i < len; i++) {\n            if (level >= this.defaultLevel) {\n                this._appenders[i].log(level, args);\n            }\n        }\n    }\n    _logOnce(level, args) {\n        const serialized = level + args.join('+');\n        if (this._logOnceSet.has(serialized)) {\n            return;\n        }\n        else {\n            this._logOnceSet.add(serialized);\n            this._log(level, args);\n        }\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Debug} level\n     * @param args  Accepts any number of arguments\n     */\n    debug(...args) {\n        this._log(LogLevel.Debug, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Fatal} level, if it sees the same args again it wont log\n     * @param args  Accepts any number of arguments\n     */\n    debugOnce(...args) {\n        this._logOnce(LogLevel.Debug, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Info} level\n     * @param args  Accepts any number of arguments\n     */\n    info(...args) {\n        this._log(LogLevel.Info, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Info} level, if it sees the same args again it wont log\n     * @param args  Accepts any number of arguments\n     */\n    infoOnce(...args) {\n        this._logOnce(LogLevel.Info, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Warn} level\n     * @param args  Accepts any number of arguments\n     */\n    warn(...args) {\n        this._log(LogLevel.Warn, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Warn} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    warnOnce(...args) {\n        this._logOnce(LogLevel.Warn, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Error} level\n     * @param args  Accepts any number of arguments\n     */\n    error(...args) {\n        this._log(LogLevel.Error, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Error} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    errorOnce(...args) {\n        this._logOnce(LogLevel.Error, args);\n    }\n    /**\n     * Writes a log message at the {@apilink LogLevel.Fatal} level\n     * @param args  Accepts any number of arguments\n     */\n    fatal(...args) {\n        this._log(LogLevel.Fatal, args);\n    }\n    /**\n     * Writes a log message once at the {@apilink LogLevel.Fatal} level, if it sees the same args again it won't log\n     * @param args  Accepts any number of arguments\n     */\n    fatalOnce(...args) {\n        this._logOnce(LogLevel.Fatal, args);\n    }\n}\nLogger._INSTANCE = null;\n/**\n * Console appender for browsers (i.e. `console.log`)\n */\nclass ConsoleAppender {\n    /**\n     * Logs a message at the given {@apilink LogLevel}\n     * @param level  Level to log at\n     * @param args   Arguments to log\n     */\n    log(level, args) {\n        // Check for console support\n        if (!console && !console.log && console.warn && console.error) {\n            // todo maybe do something better than nothing\n            return;\n        }\n        // Create a new console args array\n        const consoleArgs = [];\n        consoleArgs.unshift.apply(consoleArgs, args);\n        consoleArgs.unshift('[' + LogLevel[level] + '] : ');\n        if (level < LogLevel.Warn) {\n            // Call .log for Debug/Info\n            if (console.log.apply) {\n                // this is required on some older browsers that don't support apply on console.log :(\n                console.log.apply(console, consoleArgs);\n            }\n            else {\n                console.log(consoleArgs.join(' '));\n            }\n        }\n        else if (level < LogLevel.Error) {\n            // Call .warn for Warn\n            if (console.warn.apply) {\n                console.warn.apply(console, consoleArgs);\n            }\n            else {\n                console.warn(consoleArgs.join(' '));\n            }\n        }\n        else {\n            // Call .error for Error/Fatal\n            if (console.error.apply) {\n                console.error.apply(console, consoleArgs);\n            }\n            else {\n                console.error(consoleArgs.join(' '));\n            }\n        }\n    }\n}\n/**\n * On-screen (canvas) appender\n */\nclass ScreenAppender {\n    constructor(options) {\n        var _a, _b;\n        this._messages = [];\n        this._pos = 10;\n        this._color = Color.Black;\n        this._options = options;\n        this.canvas = document.createElement('canvas');\n        this._ctx = this.canvas.getContext('2d');\n        this.canvas.style.position = 'absolute';\n        this.canvas.style.zIndex = (_b = (_a = options.zIndex) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '99';\n        document.body.appendChild(this.canvas);\n        this._positionScreenAppenderCanvas();\n        options.engine.screen.events.on('resize', () => {\n            this._positionScreenAppenderCanvas();\n        });\n    }\n    _positionScreenAppenderCanvas() {\n        var _a, _b, _c, _d;\n        const options = this._options;\n        this.canvas.width = (_a = options.width) !== null && _a !== void 0 ? _a : options.engine.screen.resolution.width;\n        this.canvas.height = (_b = options.height) !== null && _b !== void 0 ? _b : options.engine.screen.resolution.height;\n        this.canvas.style.position = 'absolute';\n        const pagePos = options.engine.screen.screenToPageCoordinates(vec(0, 0));\n        this.canvas.style.left = pagePos.x + 'px';\n        this.canvas.style.top = pagePos.y + 'px';\n        this._pos = (_c = options.xPos) !== null && _c !== void 0 ? _c : this._pos;\n        this._color = (_d = options.color) !== null && _d !== void 0 ? _d : this._color;\n    }\n    /**\n     * Logs a message at the given {@apilink LogLevel}\n     * @param level  Level to log at\n     * @param args   Arguments to log\n     */\n    log(level, args) {\n        const message = args.join(',');\n        this._ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\n        let pos = 10;\n        this._messages = this._messages.slice(0, 1000);\n        for (let i = 0; i < this._messages.length; i++) {\n            this._ctx.fillStyle = this._color.toRGBA();\n            this._ctx.fillText(this._messages[i], this._pos, pos);\n            pos += 10;\n        }\n    }\n}\n\n;// ./Collision/Side.ts\n/**\n * An enum that describes the sides of an axis aligned box for collision\n */\nvar Side;\n(function (Side) {\n    Side[\"None\"] = \"None\";\n    Side[\"Top\"] = \"Top\";\n    Side[\"Bottom\"] = \"Bottom\";\n    Side[\"Left\"] = \"Left\";\n    Side[\"Right\"] = \"Right\";\n})(Side || (Side = {}));\n(function (Side) {\n    /**\n     * Returns the opposite side from the current\n     */\n    function getOpposite(side) {\n        if (side === Side.Top) {\n            return Side.Bottom;\n        }\n        if (side === Side.Bottom) {\n            return Side.Top;\n        }\n        if (side === Side.Left) {\n            return Side.Right;\n        }\n        if (side === Side.Right) {\n            return Side.Left;\n        }\n        return Side.None;\n    }\n    Side.getOpposite = getOpposite;\n    /**\n     * Given a vector, return the Side most in that direction\n     */\n    function fromDirection(direction) {\n        if (Math.abs(direction.x) >= Math.abs(direction.y)) {\n            if (direction.x <= 0) {\n                return Side.Left;\n            }\n            return Side.Right;\n        }\n        if (direction.y <= 0) {\n            return Side.Top;\n        }\n        return Side.Bottom;\n    }\n    Side.fromDirection = fromDirection;\n})(Side || (Side = {}));\n\n;// ./Collision/BoundingBox.ts\n\n\n\n/**\n * Axis Aligned collision primitive for Excalibur.\n */\nclass BoundingBox {\n    /**\n     * Constructor allows passing of either an object with all coordinate components,\n     * or the coordinate components passed separately.\n     * @param leftOrOptions    Either x coordinate of the left edge or an options object\n     * containing the four coordinate components.\n     * @param top     y coordinate of the top edge\n     * @param right   x coordinate of the right edge\n     * @param bottom  y coordinate of the bottom edge\n     */\n    constructor(leftOrOptions = 0, top = 0, right = 0, bottom = 0) {\n        // Cache bounding box point returns\n        this._points = [];\n        if (typeof leftOrOptions === 'object') {\n            this.left = leftOrOptions.left;\n            this.top = leftOrOptions.top;\n            this.right = leftOrOptions.right;\n            this.bottom = leftOrOptions.bottom;\n        }\n        else if (typeof leftOrOptions === 'number') {\n            this.left = leftOrOptions;\n            this.top = top;\n            this.right = right;\n            this.bottom = bottom;\n        }\n    }\n    /**\n     * Returns a new instance of {@apilink BoundingBox} that is a copy of the current instance\n     */\n    clone(dest) {\n        const result = dest || new BoundingBox(0, 0, 0, 0);\n        result.left = this.left;\n        result.right = this.right;\n        result.top = this.top;\n        result.bottom = this.bottom;\n        return result;\n    }\n    /**\n     * Resets the bounds to a zero width/height box\n     */\n    reset() {\n        this.left = 0;\n        this.top = 0;\n        this.bottom = 0;\n        this.right = 0;\n    }\n    /**\n     * Given bounding box A & B, returns the side relative to A when intersection is performed.\n     * @param intersection Intersection vector between 2 bounding boxes\n     */\n    static getSideFromIntersection(intersection) {\n        if (!intersection) {\n            return Side.None;\n        }\n        if (intersection) {\n            if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\n                if (intersection.x < 0) {\n                    return Side.Right;\n                }\n                return Side.Left;\n            }\n            else {\n                if (intersection.y < 0) {\n                    return Side.Bottom;\n                }\n                return Side.Top;\n            }\n        }\n        return Side.None;\n    }\n    static fromPoints(points) {\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n        for (let i = 0; i < points.length; i++) {\n            if (points[i].x < minX) {\n                minX = points[i].x;\n            }\n            if (points[i].x > maxX) {\n                maxX = points[i].x;\n            }\n            if (points[i].y < minY) {\n                minY = points[i].y;\n            }\n            if (points[i].y > maxY) {\n                maxY = points[i].y;\n            }\n        }\n        return new BoundingBox(minX, minY, maxX, maxY);\n    }\n    /**\n     * Creates a bounding box from a width and height\n     * @param width\n     * @param height\n     * @param anchor Default Vector.Half\n     * @param pos Default Vector.Zero\n     */\n    static fromDimension(width, height, anchor = Vector.Half, pos = Vector.Zero) {\n        return new BoundingBox(-width * anchor.x + pos.x, -height * anchor.y + pos.y, width - width * anchor.x + pos.x, height - height * anchor.y + pos.y);\n    }\n    /**\n     * Returns the calculated width of the bounding box\n     */\n    get width() {\n        return this.right - this.left;\n    }\n    /**\n     * Returns the calculated height of the bounding box\n     */\n    get height() {\n        return this.bottom - this.top;\n    }\n    /**\n     * Return whether the bounding box has zero dimensions in height,width or both\n     */\n    hasZeroDimensions() {\n        return this.width === 0 || this.height === 0;\n    }\n    /**\n     * Returns the center of the bounding box\n     */\n    get center() {\n        return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\n    }\n    get topLeft() {\n        return new Vector(this.left, this.top);\n    }\n    get bottomRight() {\n        return new Vector(this.right, this.bottom);\n    }\n    get topRight() {\n        return new Vector(this.right, this.top);\n    }\n    get bottomLeft() {\n        return new Vector(this.left, this.bottom);\n    }\n    translate(pos) {\n        return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\n    }\n    /**\n     * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\n     * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\n     */\n    rotate(angle, point = Vector.Zero) {\n        const points = this.getPoints().map((p) => p.rotate(angle, point));\n        return BoundingBox.fromPoints(points);\n    }\n    /**\n     * Scale a bounding box by a scale factor, optionally provide a point\n     * @param scale\n     * @param point\n     */\n    scale(scale, point = Vector.Zero) {\n        const shifted = this.translate(point);\n        return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\n    }\n    /**\n     * Transform the axis aligned bounding box by a {@apilink Matrix}, producing a new axis aligned bounding box\n     * @param matrix\n     */\n    transform(matrix) {\n        // inlined these calculations to not use vectors would speed it up slightly\n        // const matFirstColumn = vec(matrix.data[0], matrix.data[1]);\n        // const xa = matFirstColumn.scale(this.left);\n        const xa1 = matrix.data[0] * this.left;\n        const xa2 = matrix.data[1] * this.left;\n        // const xb = matFirstColumn.scale(this.right);\n        const xb1 = matrix.data[0] * this.right;\n        const xb2 = matrix.data[1] * this.right;\n        // const matSecondColumn = vec(matrix.data[2], matrix.data[3]);\n        // const ya = matSecondColumn.scale(this.top);\n        const ya1 = matrix.data[2] * this.top;\n        const ya2 = matrix.data[3] * this.top;\n        // const yb = matSecondColumn.scale(this.bottom);\n        const yb1 = matrix.data[2] * this.bottom;\n        const yb2 = matrix.data[3] * this.bottom;\n        const matrixPos = matrix.getPosition();\n        // const topLeft = Vector.min(xa, xb).add(Vector.min(ya, yb)).add(matrixPos);\n        // const bottomRight = Vector.max(xa, xb).add(Vector.max(ya, yb)).add(matrixPos);\n        const left = Math.min(xa1, xb1) + Math.min(ya1, yb1) + matrixPos.x;\n        const top = Math.min(xa2, xb2) + Math.min(ya2, yb2) + matrixPos.y;\n        const right = Math.max(xa1, xb1) + Math.max(ya1, yb1) + matrixPos.x;\n        const bottom = Math.max(xa2, xb2) + Math.max(ya2, yb2) + matrixPos.y;\n        return new BoundingBox({\n            left, //: topLeft.x,\n            top, //: topLeft.y,\n            right, //: bottomRight.x,\n            bottom //: bottomRight.y\n        });\n    }\n    /**\n     * Returns the perimeter of the bounding box\n     */\n    getPerimeter() {\n        const wx = this.width;\n        const wy = this.height;\n        return 2 * (wx + wy);\n    }\n    /**\n     * Returns the world space points that make up the corners of the bounding box as a polygon\n     */\n    getPoints() {\n        if (this._left !== this.left || this._right !== this.right || this._top !== this.top || this._bottom !== this.bottom) {\n            this._points.length = 0;\n            this._points.push(new Vector(this.left, this.top));\n            this._points.push(new Vector(this.right, this.top));\n            this._points.push(new Vector(this.right, this.bottom));\n            this._points.push(new Vector(this.left, this.bottom));\n            this._left = this.left;\n            this._right = this.right;\n            this._top = this.top;\n            this._bottom = this.bottom;\n        }\n        return this._points;\n    }\n    /**\n     * Determines whether a ray intersects with a bounding box\n     */\n    rayCast(ray, farClipDistance = Infinity) {\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n        let tMin = -Infinity;\n        let tMax = +Infinity;\n        const xInv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n        const yInv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n        const tx1 = (this.left - ray.pos.x) * xInv;\n        const tx2 = (this.right - ray.pos.x) * xInv;\n        tMin = Math.min(tx1, tx2);\n        tMax = Math.max(tx1, tx2);\n        const ty1 = (this.top - ray.pos.y) * yInv;\n        const ty2 = (this.bottom - ray.pos.y) * yInv;\n        tMin = Math.max(tMin, Math.min(ty1, ty2));\n        tMax = Math.min(tMax, Math.max(ty1, ty2));\n        return tMax >= Math.max(0, tMin) && tMin < farClipDistance;\n    }\n    rayCastTime(ray, farClipDistance = Infinity) {\n        // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n        let tMin = -Infinity;\n        let tMax = +Infinity;\n        const xInv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n        const yInv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n        const tx1 = (this.left - ray.pos.x) * xInv;\n        const tx2 = (this.right - ray.pos.x) * xInv;\n        tMin = Math.min(tx1, tx2);\n        tMax = Math.max(tx1, tx2);\n        const ty1 = (this.top - ray.pos.y) * yInv;\n        const ty2 = (this.bottom - ray.pos.y) * yInv;\n        tMin = Math.max(tMin, Math.min(ty1, ty2));\n        tMax = Math.min(tMax, Math.max(ty1, ty2));\n        if (tMax >= Math.max(0, tMin) && tMin < farClipDistance) {\n            return tMin;\n        }\n        return -1;\n    }\n    contains(val) {\n        if (val instanceof Vector) {\n            return this.left <= val.x && this.top <= val.y && val.y <= this.bottom && val.x <= this.right;\n        }\n        else if (val instanceof BoundingBox) {\n            return this.left <= val.left && this.top <= val.top && val.bottom <= this.bottom && val.right <= this.right;\n        }\n        return false;\n    }\n    /**\n     * Combines this bounding box and another together returning a new bounding box\n     * @param other  The bounding box to combine\n     */\n    combine(other, dest) {\n        const compositeBB = dest || new BoundingBox(0, 0, 0, 0);\n        const left = Math.min(this.left, other.left);\n        const top = Math.min(this.top, other.top);\n        const right = Math.max(this.right, other.right);\n        const bottom = Math.max(this.bottom, other.bottom);\n        compositeBB.left = left;\n        compositeBB.top = top;\n        compositeBB.right = right;\n        compositeBB.bottom = bottom;\n        return compositeBB;\n    }\n    get dimensions() {\n        return new Vector(this.width, this.height);\n    }\n    /**\n     * Returns true if the bounding boxes overlap.\n     * @param other\n     * @param epsilon Optionally specify a small epsilon (default 0) as amount of overlap to ignore as overlap.\n     * This epsilon is useful in stable collision simulations.\n     */\n    overlaps(other, epsilon) {\n        const e = epsilon || 0;\n        if (other.hasZeroDimensions()) {\n            return this.contains(other);\n        }\n        if (this.hasZeroDimensions()) {\n            return other.contains(this);\n        }\n        const totalBoundingBox = this.combine(other);\n        return totalBoundingBox.width + e < other.width + this.width && totalBoundingBox.height + e < other.height + this.height;\n    }\n    /**\n     * Test wether this bounding box intersects with another returning\n     * the intersection vector that can be used to resolve the collision. If there\n     * is no intersection null is returned.\n     * @param other  Other {@apilink BoundingBox} to test intersection with\n     * @returns A Vector in the direction of the current BoundingBox, this <- other\n     */\n    intersect(other) {\n        const totalBoundingBox = this.combine(other);\n        // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\n        if (totalBoundingBox.width < other.width + this.width &&\n            totalBoundingBox.height < other.height + this.height &&\n            !totalBoundingBox.dimensions.equals(other.dimensions) &&\n            !totalBoundingBox.dimensions.equals(this.dimensions)) {\n            // collision\n            let overlapX = 0;\n            // right edge is between the other's left and right edge\n            /**\n             *     +-this-+\n             *     |      |\n             *     |    +-other-+\n             *     +----|-+     |\n             *          |       |\n             *          +-------+\n             *         <---\n             *          ^ overlap\n             */\n            if (this.right >= other.left && this.right <= other.right) {\n                overlapX = other.left - this.right;\n                // right edge is past the other's right edge\n                /**\n                 *     +-other-+\n                 *     |       |\n                 *     |    +-this-+\n                 *     +----|--+   |\n                 *          |      |\n                 *          +------+\n                 *          --->\n                 *          ^ overlap\n                 */\n            }\n            else {\n                overlapX = other.right - this.left;\n            }\n            let overlapY = 0;\n            // top edge is between the other's top and bottom edge\n            /**\n             *     +-other-+\n             *     |       |\n             *     |    +-this-+   | <- overlap\n             *     +----|--+   |   |\n             *          |      |  \\ /\n             *          +------+   '\n             */\n            if (this.top <= other.bottom && this.top >= other.top) {\n                overlapY = other.bottom - this.top;\n                // top edge is above the other top edge\n                /**\n                 *     +-this-+         .\n                 *     |      |        / \\\n                 *     |    +-other-+   | <- overlap\n                 *     +----|-+     |   |\n                 *          |       |\n                 *          +-------+\n                 */\n            }\n            else {\n                overlapY = other.top - this.bottom;\n            }\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\n                return new Vector(overlapX, 0);\n            }\n            else {\n                return new Vector(0, overlapY);\n            }\n            // Case of total containment of one bounding box by another\n        }\n        else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\n            let overlapX = 0;\n            // this is wider than the other\n            if (this.width - other.width >= 0) {\n                // This right edge is closest to the others right edge\n                if (this.right - other.right <= other.left - this.left) {\n                    overlapX = other.left - this.right;\n                    // This left edge is closest to the others left edge\n                }\n                else {\n                    overlapX = other.right - this.left;\n                }\n                // other is wider than this\n            }\n            else {\n                // This right edge is closest to the others right edge\n                if (other.right - this.right <= this.left - other.left) {\n                    overlapX = this.left - other.right;\n                    // This left edge is closest to the others left edge\n                }\n                else {\n                    overlapX = this.right - other.left;\n                }\n            }\n            let overlapY = 0;\n            // this is taller than other\n            if (this.height - other.height >= 0) {\n                // The bottom edge is closest to the others bottom edge\n                if (this.bottom - other.bottom <= other.top - this.top) {\n                    overlapY = other.top - this.bottom;\n                }\n                else {\n                    overlapY = other.bottom - this.top;\n                }\n                // other is taller than this\n            }\n            else {\n                // The bottom edge is closest to the others bottom edge\n                if (other.bottom - this.bottom <= this.top - other.top) {\n                    overlapY = this.top - other.bottom;\n                }\n                else {\n                    overlapY = this.bottom - other.top;\n                }\n            }\n            if (Math.abs(overlapX) < Math.abs(overlapY)) {\n                return new Vector(overlapX, 0);\n            }\n            else {\n                return new Vector(0, overlapY);\n            }\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\n     * @param bb The other actor to test\n     */\n    intersectWithSide(bb) {\n        const intersect = this.intersect(bb);\n        return BoundingBox.getSideFromIntersection(intersect);\n    }\n    /**\n     * Draw a debug bounding box\n     * @param ex\n     * @param color\n     */\n    draw(ex, color = Color.Yellow) {\n        ex.debug.drawRect(this.left, this.top, this.width, this.height, { color });\n    }\n}\n\n;// ./Util/Util.ts\n\n\n/**\n * Find the screen position of an HTML element\n */\nfunction getPosition(el) {\n    // do we need the scroll too? technically the offset method before did that\n    if (el && el.getBoundingClientRect) {\n        const rect = el.getBoundingClientRect();\n        return vec(rect.x + window.scrollX, rect.y + window.scrollY);\n    }\n    return Vector.Zero;\n}\n/**\n * Add an item to an array list if it doesn't already exist. Returns true if added, false if not and already exists in the array.\n * @deprecated Will be removed in v0.26.0\n */\nfunction addItemToArray(item, array) {\n    if (array.indexOf(item) === -1) {\n        array.push(item);\n        return true;\n    }\n    return false;\n}\n/**\n * Remove an item from an list\n * @deprecated Will be removed in v0.26.0\n */\nfunction removeItemFromArray(item, array) {\n    let index = -1;\n    if ((index = array.indexOf(item)) > -1) {\n        array.splice(index, 1);\n        return true;\n    }\n    return false;\n}\n/**\n * See if an array contains something\n */\nfunction contains(array, obj) {\n    for (let i = 0; i < array.length; i++) {\n        if (array[i] === obj) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Used for exhaustive checks at compile time\n */\nfunction fail(message) {\n    throw new Error(message);\n}\n/**\n * Create a promise that resolves after a certain number of milliseconds\n *\n * It is strongly recommended you pass the excalibur clock so delays are bound to the\n * excalibur clock which would be unaffected by stop/pause.\n * @param milliseconds\n * @param clock\n */\nfunction delay(milliseconds, clock) {\n    var _a;\n    const future = new Future();\n    const schedule = (_a = clock === null || clock === void 0 ? void 0 : clock.schedule.bind(clock)) !== null && _a !== void 0 ? _a : setTimeout;\n    schedule(() => {\n        future.resolve();\n    }, milliseconds);\n    return future.promise;\n}\n/**\n * Remove keys from object literals\n * @param object\n * @param keys\n */\nfunction omit(object, keys) {\n    const newObj = {};\n    for (const key in object) {\n        if (!keys.includes(key)) {\n            newObj[key] = object[key];\n        }\n    }\n    return newObj;\n}\n/**\n * Simple object check.\n * @param item\n */\nfunction isObject(item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n}\n/**\n * Deep merge two objects.\n * @param target\n * @param sources\n */\nfunction mergeDeep(target, ...sources) {\n    if (!sources.length) {\n        return target;\n    }\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (isObject(source[key])) {\n                if (!target[key]) {\n                    Object.assign(target, { [key]: {} });\n                }\n                mergeDeep(target[key], source[key]);\n            }\n            else {\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n    return mergeDeep(target, ...sources);\n}\n\n;// ./Math/matrix.ts\n\n\n\nvar MatrixLocations;\n(function (MatrixLocations) {\n    MatrixLocations[MatrixLocations[\"X\"] = 12] = \"X\";\n    MatrixLocations[MatrixLocations[\"Y\"] = 13] = \"Y\";\n})(MatrixLocations || (MatrixLocations = {}));\n/**\n * Excalibur Matrix helper for 4x4 matrices\n *\n * Useful for webgl 4x4 matrices\n */\nclass Matrix {\n    constructor() {\n        /**\n         *  4x4 matrix in column major order\n         *\n         * |         |         |          |          |\n         * | ------- | ------- | -------- | -------- |\n         * | data[0] | data[4] | data[8]  | data[12] |\n         * | data[1] | data[5] | data[9]  | data[13] |\n         * | data[2] | data[6] | data[10] | data[14] |\n         * | data[3] | data[7] | data[11] | data[15] |\n         *\n         */\n        this.data = new Float32Array(16);\n        this._scaleX = 1;\n        this._scaleSignX = 1;\n        this._scaleY = 1;\n        this._scaleSignY = 1;\n    }\n    /**\n     * Creates an orthographic (flat non-perspective) projection\n     * https://en.wikipedia.org/wiki/Orthographic_projection\n     * @param left\n     * @param right\n     * @param bottom\n     * @param top\n     * @param near\n     * @param far\n     */\n    static ortho(left, right, bottom, top, near, far) {\n        const mat = new Matrix();\n        mat.data[0] = 2 / (right - left);\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 2 / (top - bottom);\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = -2 / (far - near);\n        mat.data[11] = 0;\n        mat.data[12] = -(right + left) / (right - left);\n        mat.data[13] = -(top + bottom) / (top - bottom);\n        mat.data[14] = -(far + near) / (far - near);\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a new Matrix with the same data as the current 4x4\n     */\n    clone(dest) {\n        const mat = dest || new Matrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = this.data[2];\n        mat.data[3] = this.data[3];\n        mat.data[4] = this.data[4];\n        mat.data[5] = this.data[5];\n        mat.data[6] = this.data[6];\n        mat.data[7] = this.data[7];\n        mat.data[8] = this.data[8];\n        mat.data[9] = this.data[9];\n        mat.data[10] = this.data[10];\n        mat.data[11] = this.data[11];\n        mat.data[12] = this.data[12];\n        mat.data[13] = this.data[13];\n        mat.data[14] = this.data[14];\n        mat.data[15] = this.data[15];\n        return mat;\n    }\n    /**\n     * Converts the current matrix into a DOMMatrix\n     *\n     * This is useful when working with the browser Canvas context\n     * @returns {DOMMatrix} DOMMatrix\n     */\n    toDOMMatrix() {\n        return new DOMMatrix([...this.data]);\n    }\n    static fromFloat32Array(data) {\n        const matrix = new Matrix();\n        matrix.data = data;\n        return matrix;\n    }\n    /**\n     * Creates a new identity matrix (a matrix that when applied does nothing)\n     */\n    static identity() {\n        const mat = new Matrix();\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 1;\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = 0;\n        mat.data[13] = 0;\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Resets the current matrix to the identity matrix, mutating it\n     * @returns {Matrix} Current matrix as identity\n     */\n    reset() {\n        const mat = this;\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = 0;\n        mat.data[5] = 1;\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = 0;\n        mat.data[13] = 0;\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a brand new translation matrix at the specified 3d point\n     * @param x\n     * @param y\n     */\n    static translation(x, y) {\n        const mat = Matrix.identity();\n        mat.data[12] = x;\n        mat.data[13] = y;\n        return mat;\n    }\n    /**\n     * Creates a brand new scaling matrix with the specified scaling factor\n     * @param sx\n     * @param sy\n     */\n    static scale(sx, sy) {\n        const mat = Matrix.identity();\n        mat.data[0] = sx;\n        mat.data[5] = sy;\n        mat.data[10] = 1;\n        mat.data[15] = 1;\n        return mat;\n    }\n    /**\n     * Creates a brand new rotation matrix with the specified angle in radians\n     * @param angle\n     */\n    static rotation(angle) {\n        const mat = Matrix.identity();\n        mat.data[0] = Math.cos(angle);\n        mat.data[4] = -Math.sin(angle);\n        mat.data[1] = Math.sin(angle);\n        mat.data[5] = Math.cos(angle);\n        return mat;\n    }\n    multiply(vectorOrMatrix, dest) {\n        if (vectorOrMatrix instanceof Vector) {\n            const result = dest || new Vector(0, 0);\n            const vector = vectorOrMatrix;\n            // these shenanigans are to allow dest and vector to be the same instance\n            const resultX = vector.x * this.data[0] + vector.y * this.data[4] + this.data[12];\n            const resultY = vector.x * this.data[1] + vector.y * this.data[5] + this.data[13];\n            result.x = resultX;\n            result.y = resultY;\n            return result;\n        }\n        else {\n            const result = dest || new Matrix();\n            const other = vectorOrMatrix;\n            const a11 = this.data[0];\n            const a21 = this.data[1];\n            const a31 = this.data[2];\n            const a41 = this.data[3];\n            const a12 = this.data[4];\n            const a22 = this.data[5];\n            const a32 = this.data[6];\n            const a42 = this.data[7];\n            const a13 = this.data[8];\n            const a23 = this.data[9];\n            const a33 = this.data[10];\n            const a43 = this.data[11];\n            const a14 = this.data[12];\n            const a24 = this.data[13];\n            const a34 = this.data[14];\n            const a44 = this.data[15];\n            const b11 = other.data[0];\n            const b21 = other.data[1];\n            const b31 = other.data[2];\n            const b41 = other.data[3];\n            const b12 = other.data[4];\n            const b22 = other.data[5];\n            const b32 = other.data[6];\n            const b42 = other.data[7];\n            const b13 = other.data[8];\n            const b23 = other.data[9];\n            const b33 = other.data[10];\n            const b43 = other.data[11];\n            const b14 = other.data[12];\n            const b24 = other.data[13];\n            const b34 = other.data[14];\n            const b44 = other.data[15];\n            result.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n            result.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n            result.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n            result.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n            result.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n            result.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n            result.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n            result.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n            result.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n            result.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n            result.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n            result.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n            result.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n            result.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n            result.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n            result.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n            const s = this.getScale();\n            result._scaleSignX = sign(s.x) * sign(result._scaleSignX);\n            result._scaleSignY = sign(s.y) * sign(result._scaleSignY);\n            return result;\n        }\n    }\n    /**\n     * Applies translation to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        const a13 = this.data[8];\n        const a23 = this.data[9];\n        const a33 = this.data[10];\n        const a43 = this.data[11];\n        const a14 = this.data[12];\n        const a24 = this.data[13];\n        const a34 = this.data[14];\n        const a44 = this.data[15];\n        // Doesn't change z\n        const z = 0;\n        const w = 1;\n        this.data[12] = a11 * x + a12 * y + a13 * z + a14 * w;\n        this.data[13] = a21 * x + a22 * y + a23 * z + a24 * w;\n        this.data[14] = a31 * x + a32 * y + a33 * z + a34 * w;\n        this.data[15] = a41 * x + a42 * y + a43 * z + a44 * w;\n        return this;\n    }\n    setPosition(x, y) {\n        this.data[12] = x;\n        this.data[13] = y;\n    }\n    getPosition() {\n        return vec(this.data[12], this.data[13]);\n    }\n    /**\n     * Applies rotation to the current matrix mutating it\n     * @param angle in Radians\n     */\n    rotate(angle) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * a11 + sine * a12;\n        this.data[1] = cosine * a21 + sine * a22;\n        this.data[2] = cosine * a31 + sine * a32;\n        this.data[3] = cosine * a41 + sine * a42;\n        this.data[4] = cosine * a12 - sine * a11;\n        this.data[5] = cosine * a22 - sine * a21;\n        this.data[6] = cosine * a32 - sine * a31;\n        this.data[7] = cosine * a42 - sine * a41;\n        return this;\n    }\n    /**\n     * Applies scaling to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a31 = this.data[2];\n        const a41 = this.data[3];\n        const a12 = this.data[4];\n        const a22 = this.data[5];\n        const a32 = this.data[6];\n        const a42 = this.data[7];\n        this.data[0] = a11 * x;\n        this.data[1] = a21 * x;\n        this.data[2] = a31 * x;\n        this.data[3] = a41 * x;\n        this.data[4] = a12 * y;\n        this.data[5] = a22 * y;\n        this.data[6] = a32 * y;\n        this.data[7] = a42 * y;\n        return this;\n    }\n    setRotation(angle) {\n        const currentScale = this.getScale();\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * currentScale.x;\n        this.data[1] = sine * currentScale.y;\n        this.data[4] = -sine * currentScale.x;\n        this.data[5] = cosine * currentScale.y;\n    }\n    getRotation() {\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\n        return canonicalizeAngle(angle);\n    }\n    getScaleX() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const xscale = vec(this.data[0], this.data[4]).magnitude;\n        return this._scaleSignX * xscale;\n    }\n    getScaleY() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const yscale = vec(this.data[1], this.data[5]).magnitude;\n        return this._scaleSignY * yscale;\n    }\n    /**\n     * Get the scale of the matrix\n     */\n    getScale() {\n        return vec(this.getScaleX(), this.getScaleY());\n    }\n    setScaleX(val) {\n        if (this._scaleX === val) {\n            return;\n        }\n        this._scaleSignX = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[4] * this._scaleSignX).normalize();\n        this.data[0] = xscale.x * val;\n        this.data[4] = xscale.y * val;\n        this._scaleX = val;\n    }\n    setScaleY(val) {\n        if (this._scaleY === val) {\n            return;\n        }\n        this._scaleSignY = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[5] * this._scaleSignY).normalize();\n        this.data[1] = yscale.x * val;\n        this.data[5] = yscale.y * val;\n        this._scaleY = val;\n    }\n    setScale(scale) {\n        this.setScaleX(scale.x);\n        this.setScaleY(scale.y);\n    }\n    /**\n     * Determinant of the upper left 2x2 matrix\n     */\n    getBasisDeterminant() {\n        return this.data[0] * this.data[5] - this.data[1] * this.data[4];\n    }\n    /**\n     * Return the affine inverse, optionally store it in a target matrix.\n     *\n     * It's recommended you call .reset() the target unless you know what you're doing\n     * @param target\n     */\n    getAffineInverse(target) {\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\n        // Since we are actually only doing 2D transformations we can use this hack\n        // We don't actually use the 3rd or 4th dimension\n        const det = this.getBasisDeterminant();\n        const inverseDet = 1 / det; // todo zero check\n        const a = this.data[0];\n        const b = this.data[4];\n        const c = this.data[1];\n        const d = this.data[5];\n        const m = target || Matrix.identity();\n        // inverts rotation and scale\n        m.data[0] = d * inverseDet;\n        m.data[1] = -c * inverseDet;\n        m.data[4] = -b * inverseDet;\n        m.data[5] = a * inverseDet;\n        const tx = this.data[12];\n        const ty = this.data[13];\n        // invert translation\n        // transform translation into the matrix basis created by rot/scale\n        m.data[12] = -(tx * m.data[0] + ty * m.data[4]);\n        m.data[13] = -(tx * m.data[1] + ty * m.data[5]);\n        return m;\n    }\n    isIdentity() {\n        return (this.data[0] === 1 &&\n            this.data[1] === 0 &&\n            this.data[2] === 0 &&\n            this.data[3] === 0 &&\n            this.data[4] === 0 &&\n            this.data[5] === 1 &&\n            this.data[6] === 0 &&\n            this.data[7] === 0 &&\n            this.data[8] === 0 &&\n            this.data[9] === 0 &&\n            this.data[10] === 1 &&\n            this.data[11] === 0 &&\n            this.data[12] === 0 &&\n            this.data[13] === 0 &&\n            this.data[14] === 0 &&\n            this.data[15] === 1);\n    }\n    toString() {\n        return `\r\n[${this.data[0]} ${this.data[4]} ${this.data[8]} ${this.data[12]}]\r\n[${this.data[1]} ${this.data[5]} ${this.data[9]} ${this.data[13]}]\r\n[${this.data[2]} ${this.data[6]} ${this.data[10]} ${this.data[14]}]\r\n[${this.data[3]} ${this.data[7]} ${this.data[11]} ${this.data[15]}]\r\n`;\n    }\n}\n\n;// ./Math/affine-matrix.ts\n\n\n\nclass AffineMatrix {\n    constructor() {\n        /**\n         * |         |         |          |\n         * | ------- | ------- | -------- |\n         * | data[0] | data[2] | data[4]  |\n         * | data[1] | data[3] | data[5]  |\n         * |   0     |    0    |    1     |\n         */\n        this.data = new Float64Array(6);\n        this._scale = new Float64Array([1, 1]);\n        this._scaleSignX = 1;\n        this._scaleSignY = 1;\n    }\n    /**\n     * Converts the current matrix into a DOMMatrix\n     *\n     * This is useful when working with the browser Canvas context\n     * @returns {DOMMatrix} DOMMatrix\n     */\n    toDOMMatrix() {\n        return new DOMMatrix([...this.data]);\n    }\n    static identity() {\n        const mat = new AffineMatrix();\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 1;\n        mat.data[4] = 0;\n        mat.data[5] = 0;\n        return mat;\n    }\n    /**\n     * Creates a brand new translation matrix at the specified 3d point\n     * @param x\n     * @param y\n     */\n    static translation(x, y) {\n        const mat = AffineMatrix.identity();\n        mat.data[4] = x;\n        mat.data[5] = y;\n        return mat;\n    }\n    /**\n     * Creates a brand new scaling matrix with the specified scaling factor\n     * @param sx\n     * @param sy\n     */\n    static scale(sx, sy) {\n        const mat = AffineMatrix.identity();\n        mat.data[0] = sx;\n        mat.data[3] = sy;\n        mat._scale[0] = sx;\n        mat._scale[1] = sy;\n        return mat;\n    }\n    /**\n     * Creates a brand new rotation matrix with the specified angle in radians\n     * @param angle\n     */\n    static rotation(angle) {\n        const mat = AffineMatrix.identity();\n        mat.data[0] = Math.cos(angle);\n        mat.data[1] = Math.sin(angle);\n        mat.data[2] = -Math.sin(angle);\n        mat.data[3] = Math.cos(angle);\n        return mat;\n    }\n    setPosition(x, y) {\n        this.data[4] = x;\n        this.data[5] = y;\n    }\n    getPosition() {\n        return vec(this.data[4], this.data[5]);\n    }\n    /**\n     * Applies rotation to the current matrix mutating it\n     * @param angle in Radians\n     */\n    rotate(angle) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * a11 + sine * a12;\n        this.data[1] = cosine * a21 + sine * a22;\n        this.data[2] = cosine * a12 - sine * a11;\n        this.data[3] = cosine * a22 - sine * a21;\n        return this;\n    }\n    /**\n     * Applies translation to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        // const a31 = 0;\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        // const a32 = 0;\n        const a13 = this.data[4];\n        const a23 = this.data[5];\n        // const a33 = 1;\n        // Doesn't change z\n        this.data[4] = a11 * x + a12 * y + a13;\n        this.data[5] = a21 * x + a22 * y + a23;\n        return this;\n    }\n    /**\n     * Applies scaling to the current matrix mutating it\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        const a11 = this.data[0];\n        const a21 = this.data[1];\n        const a12 = this.data[2];\n        const a22 = this.data[3];\n        this.data[0] = a11 * x;\n        this.data[1] = a21 * x;\n        this.data[2] = a12 * y;\n        this.data[3] = a22 * y;\n        this._scale[0] = x;\n        this._scale[1] = y;\n        this._scaleSignX = sign(x);\n        this._scaleSignY = sign(y);\n        return this;\n    }\n    determinant() {\n        return this.data[0] * this.data[3] - this.data[1] * this.data[2];\n    }\n    /**\n     * Return the affine inverse, optionally store it in a target matrix.\n     *\n     * It's recommended you call .reset() the target unless you know what you're doing\n     * @param target\n     */\n    inverse(target) {\n        // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\n        // See https://www.mathsisfun.com/algebra/matrix-inverse.html\n        // Since we are actually only doing 2D transformations we can use this hack\n        // We don't actually use the 3rd or 4th dimension\n        const det = this.determinant();\n        let inverseDet = det; // default to a zero matrix if we have a singular matrix\n        if (det !== 0) {\n            inverseDet = 1 / det;\n        }\n        const a = this.data[0];\n        const b = this.data[2];\n        const c = this.data[1];\n        const d = this.data[3];\n        const m = target || AffineMatrix.identity();\n        // inverts rotation and scale\n        m.data[0] = d * inverseDet;\n        m.data[1] = -c * inverseDet;\n        m.data[2] = -b * inverseDet;\n        m.data[3] = a * inverseDet;\n        const tx = this.data[4];\n        const ty = this.data[5];\n        // invert translation\n        // transform translation into the matrix basis created by rot/scale\n        m.data[4] = -(tx * m.data[0] + ty * m.data[2]);\n        m.data[5] = -(tx * m.data[1] + ty * m.data[3]);\n        return m;\n    }\n    multiply(vectorOrMatrix, dest) {\n        if (vectorOrMatrix instanceof Vector) {\n            const result = dest || new Vector(0, 0);\n            const vector = vectorOrMatrix;\n            // these shenanigans are to allow dest and vector to be the same instance\n            const resultX = vector.x * this.data[0] + vector.y * this.data[2] + this.data[4];\n            const resultY = vector.x * this.data[1] + vector.y * this.data[3] + this.data[5];\n            result.x = resultX;\n            result.y = resultY;\n            return result;\n        }\n        else {\n            const result = dest || new AffineMatrix();\n            const other = vectorOrMatrix;\n            const a11 = this.data[0];\n            const a21 = this.data[1];\n            //  const a31 = 0;\n            const a12 = this.data[2];\n            const a22 = this.data[3];\n            //  const a32 = 0;\n            const a13 = this.data[4];\n            const a23 = this.data[5];\n            //  const a33 = 1;\n            const b11 = other.data[0];\n            const b21 = other.data[1];\n            //  const b31 = 0;\n            const b12 = other.data[2];\n            const b22 = other.data[3];\n            //  const b32 = 0;\n            const b13 = other.data[4];\n            const b23 = other.data[5];\n            //  const b33 = 1;\n            result.data[0] = a11 * b11 + a12 * b21; // + a13 * b31; // zero\n            result.data[1] = a21 * b11 + a22 * b21; // + a23 * b31; // zero\n            result.data[2] = a11 * b12 + a12 * b22; // + a13 * b32; // zero\n            result.data[3] = a21 * b12 + a22 * b22; // + a23 * b32; // zero\n            result.data[4] = a11 * b13 + a12 * b23 + a13; // * b33; // one\n            result.data[5] = a21 * b13 + a22 * b23 + a23; // * b33; // one\n            const signX = this._scaleSignX;\n            const signY = this._scaleSignY;\n            result._scaleSignX = signX * sign(result._scaleSignX);\n            result._scaleSignY = signY * sign(result._scaleSignY);\n            return result;\n        }\n    }\n    /**\n     * Packed array of length 8, that contains 4 vertices, with 2 components each\n     * So: [x0, y0, x1, y1, x2, y2, x3, y3]\n     * @param quad\n     */\n    multiplyQuadInPlace(quad) {\n        const resultTopLeftX = quad[0] * this.data[0] + quad[1] * this.data[2] + this.data[4];\n        const resultTopLeftY = quad[0] * this.data[1] + quad[1] * this.data[3] + this.data[5];\n        quad[0] = resultTopLeftX;\n        quad[1] = resultTopLeftY;\n        const resultTopRightX = quad[2] * this.data[0] + quad[3] * this.data[2] + this.data[4];\n        const resultTopRightY = quad[2] * this.data[1] + quad[3] * this.data[3] + this.data[5];\n        quad[2] = resultTopRightX;\n        quad[3] = resultTopRightY;\n        const resultBottomLeftX = quad[4] * this.data[0] + quad[5] * this.data[2] + this.data[4];\n        const resultBottomLeftY = quad[4] * this.data[1] + quad[5] * this.data[3] + this.data[5];\n        quad[4] = resultBottomLeftX;\n        quad[5] = resultBottomLeftY;\n        const resultBottomRightX = quad[6] * this.data[0] + quad[7] * this.data[2] + this.data[4];\n        const resultBottomRightY = quad[6] * this.data[1] + quad[7] * this.data[3] + this.data[5];\n        quad[6] = resultBottomRightX;\n        quad[7] = resultBottomRightY;\n    }\n    to4x4() {\n        const mat = new Matrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = 0;\n        mat.data[3] = 0;\n        mat.data[4] = this.data[2];\n        mat.data[5] = this.data[3];\n        mat.data[6] = 0;\n        mat.data[7] = 0;\n        mat.data[8] = 0;\n        mat.data[9] = 0;\n        mat.data[10] = 1;\n        mat.data[11] = 0;\n        mat.data[12] = this.data[4];\n        mat.data[13] = this.data[5];\n        mat.data[14] = 0;\n        mat.data[15] = 1;\n        return mat;\n    }\n    setRotation(angle) {\n        const currentScale = this.getScale();\n        const sine = Math.sin(angle);\n        const cosine = Math.cos(angle);\n        this.data[0] = cosine * currentScale.x;\n        this.data[1] = sine * currentScale.y;\n        this.data[2] = -sine * currentScale.x;\n        this.data[3] = cosine * currentScale.y;\n    }\n    getRotation() {\n        const angle = Math.atan2(this.data[1] / this.getScaleY(), this.data[0] / this.getScaleX());\n        return canonicalizeAngle(angle);\n    }\n    getScaleX() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const xScaleSq = this.data[0] * this.data[0] + this.data[2] * this.data[2];\n        if (xScaleSq === 1.0) {\n            // usually there isn't scale so we can avoid a sqrt\n            return this._scaleSignX;\n        }\n        return this._scaleSignX * Math.sqrt(xScaleSq);\n    }\n    getScaleY() {\n        // absolute scale of the matrix (we lose sign so need to add it back)\n        const yScaleSq = this.data[1] * this.data[1] + this.data[3] * this.data[3];\n        if (yScaleSq === 1.0) {\n            // usually there isn't scale so we can avoid a sqrt\n            return this._scaleSignY;\n        }\n        return this._scaleSignY * Math.sqrt(yScaleSq);\n    }\n    /**\n     * Get the scale of the matrix\n     */\n    getScale() {\n        return vec(this.getScaleX(), this.getScaleY());\n    }\n    setScaleX(val) {\n        if (val === this._scale[0]) {\n            return;\n        }\n        this._scaleSignX = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const xscale = vec(this.data[0] * this._scaleSignX, this.data[2] * this._scaleSignX).normalize();\n        this.data[0] = xscale.x * val;\n        this.data[2] = xscale.y * val;\n        this._scale[0] = val;\n    }\n    setScaleY(val) {\n        if (val === this._scale[1]) {\n            return;\n        }\n        this._scaleSignY = sign(val);\n        // negative scale acts like a 180 rotation, so flip\n        const yscale = vec(this.data[1] * this._scaleSignY, this.data[3] * this._scaleSignY).normalize();\n        this.data[1] = yscale.x * val;\n        this.data[3] = yscale.y * val;\n        this._scale[1] = val;\n    }\n    setScale(scale) {\n        this.setScaleX(scale.x);\n        this.setScaleY(scale.y);\n    }\n    isIdentity() {\n        return this.data[0] === 1 && this.data[1] === 0 && this.data[2] === 0 && this.data[3] === 1 && this.data[4] === 0 && this.data[5] === 0;\n    }\n    /**\n     * Resets the current matrix to the identity matrix, mutating it\n     * @returns {AffineMatrix} Current matrix as identity\n     */\n    reset() {\n        const mat = this;\n        mat.data[0] = 1;\n        mat.data[1] = 0;\n        mat.data[2] = 0;\n        mat.data[3] = 1;\n        mat.data[4] = 0;\n        mat.data[5] = 0;\n        return mat;\n    }\n    /**\n     * Creates a new Matrix with the same data as the current {@apilink AffineMatrix}\n     */\n    clone(dest) {\n        const mat = dest || new AffineMatrix();\n        mat.data[0] = this.data[0];\n        mat.data[1] = this.data[1];\n        mat.data[2] = this.data[2];\n        mat.data[3] = this.data[3];\n        mat.data[4] = this.data[4];\n        mat.data[5] = this.data[5];\n        mat._scaleSignX = this._scaleSignX;\n        mat._scaleSignY = this._scaleSignY;\n        return mat;\n    }\n    toString() {\n        return `\r\n[${this.data[0]} ${this.data[2]} ${this.data[4]}]\r\n[${this.data[1]} ${this.data[3]} ${this.data[5]}]\r\n[0 0 1]\r\n`;\n    }\n}\n\n;// ./Util/RentalPool.ts\nclass RentalPool {\n    constructor(builder, cleaner, preAllocate = 1) {\n        this.builder = builder;\n        this.cleaner = cleaner;\n        this._pool = [];\n        this._size = 0;\n        this.grow(preAllocate);\n    }\n    /**\n     * Grow the pool size by an amount\n     * @param amount\n     */\n    grow(amount) {\n        if (amount > 0) {\n            this._size += amount;\n            for (let i = 0; i < amount; i++) {\n                this._pool.push(this.builder());\n            }\n        }\n    }\n    /**\n     * Rent an object from the pool, optionally clean it. If not cleaned previous state may be set.\n     *\n     * The pool will automatically double if depleted\n     * @param clean\n     */\n    rent(clean = false) {\n        if (this._pool.length === 0) {\n            this.grow(this._size);\n        }\n        return clean ? this.cleaner(this._pool.pop()) : this._pool.pop();\n    }\n    /**\n     * Return an object to the pool\n     * @param object\n     */\n    return(object) {\n        this._pool.push(object);\n    }\n}\n\n;// ./Graphics/Context/transform-stack.ts\n\n\nclass TransformStack {\n    constructor() {\n        this._pool = new RentalPool(() => AffineMatrix.identity(), (mat) => mat.reset(), 100);\n        this._transforms = [];\n        this._currentTransform = this._pool.rent(true);\n    }\n    save() {\n        this._transforms.push(this._currentTransform);\n        this._currentTransform = this._currentTransform.clone(this._pool.rent());\n    }\n    restore() {\n        this._pool.return(this._currentTransform);\n        this._currentTransform = this._transforms.pop();\n    }\n    translate(x, y) {\n        return this._currentTransform.translate(x, y);\n    }\n    rotate(angle) {\n        return this._currentTransform.rotate(angle);\n    }\n    scale(x, y) {\n        return this._currentTransform.scale(x, y);\n    }\n    reset() {\n        this._currentTransform.reset();\n    }\n    set current(matrix) {\n        this._currentTransform = matrix;\n    }\n    get current() {\n        return this._currentTransform;\n    }\n}\n\n;// ./Graphics/Context/state-stack.ts\n\n\nclass ContextState {\n    constructor() {\n        this.opacity = 1;\n        this.z = 0;\n        this.tint = Color.White;\n        this.material = null;\n    }\n}\nclass StateStack {\n    constructor() {\n        this._pool = new RentalPool(() => new ContextState(), (s) => {\n            s.opacity = 1;\n            s.z = 0;\n            s.tint = Color.White;\n            s.material = null;\n            return s;\n        }, 100);\n        this.current = this._pool.rent(true);\n        this._states = [];\n    }\n    _cloneState(dest) {\n        var _a;\n        dest.opacity = this.current.opacity;\n        dest.z = this.current.z;\n        dest.tint = (_a = this.current.tint) === null || _a === void 0 ? void 0 : _a.clone();\n        dest.material = this.current.material; // TODO is this going to cause problems when cloning\n        return dest;\n    }\n    save() {\n        this._states.push(this.current);\n        this.current = this._cloneState(this._pool.rent());\n    }\n    restore() {\n        this._pool.return(this.current);\n        this.current = this._states.pop();\n    }\n}\n\n;// ./Resources/Resource.ts\n\n\nconst ResourceEvents = {\n    Complete: 'complete',\n    Load: 'load',\n    LoadStart: 'loadstart',\n    Progress: 'progress',\n    Error: 'error'\n};\n/**\n * The {@apilink Resource} type allows games built in Excalibur to load generic resources.\n * For any type of remote resource it is recommended to use {@apilink Resource} for preloading.\n */\nclass Resource {\n    /**\n     * @param path          Path to the remote resource\n     * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\n     * @param bustCache     Whether or not to cache-bust requests\n     */\n    constructor(path, responseType, bustCache = false) {\n        this.path = path;\n        this.responseType = responseType;\n        this.bustCache = bustCache;\n        this.data = null;\n        this.logger = Logger.getInstance();\n        this.events = new EventEmitter();\n    }\n    /**\n     * Returns true if the Resource is completely loaded and is ready\n     * to be drawn.\n     */\n    isLoaded() {\n        return this.data !== null;\n    }\n    _cacheBust(uri) {\n        const query = /\\?\\w*=\\w*/;\n        if (query.test(uri)) {\n            uri += '&__=' + Date.now();\n        }\n        else {\n            uri += '?__=' + Date.now();\n        }\n        return uri;\n    }\n    /**\n     * Begin loading the resource and returns a promise to be resolved on completion\n     */\n    load() {\n        return new Promise((resolve, reject) => {\n            // Exit early if we already have data\n            if (this.data !== null) {\n                this.logger.debug('Already have data for resource', this.path);\n                this.events.emit('complete', this.data);\n                resolve(this.data);\n                return;\n            }\n            const request = new XMLHttpRequest();\n            request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\n            request.responseType = this.responseType;\n            request.addEventListener('loadstart', (e) => this.events.emit('loadstart', e));\n            request.addEventListener('progress', (e) => this.events.emit('progress', e));\n            request.addEventListener('error', (e) => this.events.emit('error', e));\n            request.addEventListener('load', (e) => this.events.emit('load', e));\n            request.addEventListener('load', () => {\n                // XHR on file:// success status is 0, such as with PhantomJS\n                if (request.status !== 0 && request.status !== 200) {\n                    this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\n                    this.events.emit('error', request.response);\n                    reject(new Error(request.statusText));\n                    return;\n                }\n                if (request.response instanceof Blob && request.response.type === 'text/html') {\n                    const errorText = `Expected blob (usually image) data from the server when loading ${this.path}, but got HTML content instead!\r\n\r\nCheck your server configuration, for example Vite serves static files from the /public folder`;\n                    this.events.emit('error', request.response);\n                    reject(new Error(errorText));\n                    return;\n                }\n                this.data = request.response;\n                this.events.emit('complete', this.data);\n                this.logger.debug('Completed loading resource', this.path);\n                resolve(this.data);\n            });\n            request.send();\n        });\n    }\n}\n\n;// ./Util/Watch.ts\n/**\n * Watch an object with a proxy, only fires if property value is different\n */\nfunction watch(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, {\n            set: (obj, prop, value) => {\n                // The default behavior to store the value\n                if (obj[prop] !== value) {\n                    obj[prop] = value;\n                    // Avoid watching private junk\n                    if (typeof prop === 'string') {\n                        if (prop[0] !== '_') {\n                            change(obj);\n                        }\n                    }\n                }\n                // Indicate success\n                return true;\n            },\n            get: (obj, prop) => {\n                if (prop !== '__isProxy') {\n                    return obj[prop];\n                }\n                return true;\n            }\n        });\n    }\n    return type;\n}\nconst createHandler = (path = [], change, typeType) => ({\n    get: (target, key) => {\n        if (key === '__isProxy') {\n            return true;\n        }\n        if (typeof target[key] === 'object' && target[key] != null) {\n            return new Proxy(target[key], createHandler([...path, key], change, typeType));\n        }\n        return target[key];\n    },\n    set: (target, key, value) => {\n        if (typeof key === 'string') {\n            if (key[0] !== '_') {\n                change(typeType);\n            }\n        }\n        target[key] = value;\n        return true;\n    }\n});\n/**\n *\n */\nfunction watchDeep(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, createHandler([], change, type));\n    }\n    return type;\n}\n/**\n * Watch an object with a proxy, fires change on any property value change\n */\nfunction watchAny(type, change) {\n    if (!type) {\n        return type;\n    }\n    if (type.__isProxy === undefined) {\n        // expando hack to mark a proxy\n        return new Proxy(type, {\n            set: (obj, prop, value) => {\n                // The default behavior to store the value\n                obj[prop] = value;\n                // Avoid watching private junk\n                if (typeof prop === 'string') {\n                    if (prop[0] !== '_') {\n                        change(obj);\n                    }\n                }\n                // Indicate success\n                return true;\n            },\n            get: (obj, prop) => {\n                if (prop !== '__isProxy') {\n                    return obj[prop];\n                }\n                return true;\n            }\n        });\n    }\n    return type;\n}\n\n;// ./Graphics/Graphic.ts\n\n\n\n\n/**\n * A Graphic is the base Excalibur primitive for something that can be drawn to the {@apilink ExcaliburGraphicsContext}.\n * {@apilink Sprite}, {@apilink Animation}, {@apilink GraphicsGroup}, {@apilink Canvas}, {@apilink Rectangle}, {@apilink Circle}, and {@apilink Polygon} all derive from the\n * {@apilink Graphic} abstract class.\n *\n * Implementors of a Graphic must override the abstract {@apilink Graphic._drawImage} method to render an image to the graphics context. Graphic\n * handles all the position, rotation, and scale transformations in {@apilink Graphic._preDraw} and {@apilink Graphic._postDraw}\n */\nclass Graphic {\n    isStale() {\n        return this._transformStale;\n    }\n    /**\n     * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\n     */\n    get flipHorizontal() {\n        return this._flipHorizontal;\n    }\n    set flipHorizontal(value) {\n        this._flipHorizontal = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\n     */\n    get flipVertical() {\n        return this._flipVertical;\n    }\n    set flipVertical(value) {\n        this._flipVertical = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the rotation of the graphic\n     */\n    get rotation() {\n        return this._rotation;\n    }\n    set rotation(value) {\n        this._rotation = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the scale of the graphic, this affects the width and\n     */\n    get scale() {\n        return this._scale;\n    }\n    set scale(value) {\n        this._scale = watch(value, () => {\n            this._transformStale = true;\n        });\n        this._transformStale = true;\n    }\n    /**\n     * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\n     */\n    get origin() {\n        return this._origin;\n    }\n    set origin(value) {\n        if (value) {\n            this._origin = watch(value, () => {\n                this._transformStale = true;\n            });\n        }\n        this._transformStale = true;\n    }\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        this.id = Graphic._ID++;\n        this.transform = AffineMatrix.identity();\n        this._transformStale = true;\n        /**\n         * Gets or sets wether to show debug information about the graphic\n         */\n        this.showDebug = false;\n        this._flipHorizontal = false;\n        this._flipVertical = false;\n        this._rotation = 0;\n        /**\n         * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\n         */\n        this.opacity = 1;\n        this._scale = Vector.One;\n        this._width = 0;\n        this._height = 0;\n        if (options) {\n            this.origin = (_a = options.origin) !== null && _a !== void 0 ? _a : this.origin;\n            this.flipHorizontal = (_b = options.flipHorizontal) !== null && _b !== void 0 ? _b : this.flipHorizontal;\n            this.flipVertical = (_c = options.flipVertical) !== null && _c !== void 0 ? _c : this.flipVertical;\n            this.rotation = (_d = options.rotation) !== null && _d !== void 0 ? _d : this.rotation;\n            this.opacity = (_e = options.opacity) !== null && _e !== void 0 ? _e : this.opacity;\n            this.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : this.scale;\n            this.tint = (_g = options.tint) !== null && _g !== void 0 ? _g : this.tint;\n            if (options.width) {\n                this._width = options.width;\n            }\n            if (options.height) {\n                this._height = options.height;\n            }\n        }\n    }\n    cloneGraphicOptions() {\n        return {\n            width: this.width / this.scale.x,\n            height: this.height / this.scale.y,\n            origin: this.origin ? this.origin.clone() : undefined,\n            flipHorizontal: this.flipHorizontal,\n            flipVertical: this.flipVertical,\n            rotation: this.rotation,\n            opacity: this.opacity,\n            scale: this.scale ? this.scale.clone() : undefined,\n            tint: this.tint ? this.tint.clone() : undefined\n        };\n    }\n    /**\n     * Gets or sets the width of the graphic (always positive)\n     */\n    get width() {\n        return Math.abs(this._width * this.scale.x);\n    }\n    /**\n     * Gets or sets the height of the graphic (always positive)\n     */\n    get height() {\n        return Math.abs(this._height * this.scale.y);\n    }\n    set width(value) {\n        this._width = value;\n        this._transformStale = true;\n    }\n    set height(value) {\n        this._height = value;\n        this._transformStale = true;\n    }\n    /**\n     * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\n     */\n    get localBounds() {\n        return BoundingBox.fromDimension(this.width, this.height, Vector.Zero);\n    }\n    /**\n     * Draw the whole graphic to the context including transform\n     * @param ex The excalibur graphics context\n     * @param x\n     * @param y\n     */\n    draw(ex, x, y) {\n        this._preDraw(ex, x, y);\n        this._drawImage(ex, 0, 0);\n        this._postDraw(ex);\n    }\n    /**\n     * Apply affine transformations to the graphics context to manipulate the graphic before {@apilink Graphic._drawImage}\n     * @param ex\n     * @param x\n     * @param y\n     */\n    _preDraw(ex, x, y) {\n        ex.save();\n        ex.translate(x, y);\n        if (this._transformStale) {\n            this.transform.reset();\n            this.transform.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\n            this._rotate(this.transform);\n            this._flip(this.transform);\n            this._transformStale = false;\n        }\n        ex.multiply(this.transform);\n        // it is important to multiply alphas so graphics respect the current context\n        ex.opacity = ex.opacity * this.opacity;\n        if (this.tint) {\n            ex.tint = this.tint;\n        }\n    }\n    _rotate(ex) {\n        var _a;\n        const scaleDirX = this.scale.x > 0 ? 1 : -1;\n        const scaleDirY = this.scale.y > 0 ? 1 : -1;\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : vec(this.width / 2, this.height / 2);\n        ex.translate(origin.x, origin.y);\n        ex.rotate(this.rotation);\n        // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\n        ex.scale(scaleDirX, scaleDirY);\n        ex.translate(-origin.x, -origin.y);\n    }\n    _flip(ex) {\n        if (this.flipHorizontal) {\n            ex.translate(this.width / this.scale.x, 0);\n            ex.scale(-1, 1);\n        }\n        if (this.flipVertical) {\n            ex.translate(0, this.height / this.scale.y);\n            ex.scale(1, -1);\n        }\n    }\n    /**\n     * Apply any additional work after {@apilink Graphic._drawImage} and restore the context state.\n     * @param ex\n     */\n    _postDraw(ex) {\n        if (this.showDebug) {\n            ex.debug.drawRect(0, 0, this.width, this.height);\n        }\n        ex.restore();\n    }\n}\nGraphic._ID = 0;\n\n;// ./Graphics/Sprite.ts\n\n\nclass Sprite extends Graphic {\n    static from(image, options) {\n        return new Sprite({\n            image,\n            ...options\n        });\n    }\n    constructor(options) {\n        var _a, _b;\n        super(options);\n        this._logger = Logger.getInstance();\n        this._dirty = true;\n        this.image = options.image;\n        const { width, height } = options;\n        this.sourceView = (_a = options.sourceView) !== null && _a !== void 0 ? _a : { x: 0, y: 0, width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\n        this.destSize = (_b = options.destSize) !== null && _b !== void 0 ? _b : { width: width !== null && width !== void 0 ? width : 0, height: height !== null && height !== void 0 ? height : 0 };\n        this._updateSpriteDimensions();\n        // Fire when loaded\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.image.ready.then(() => {\n            this._updateSpriteDimensions();\n        });\n    }\n    get width() {\n        return Math.abs(this.destSize.width * this.scale.x);\n    }\n    get height() {\n        return Math.abs(this.destSize.height * this.scale.y);\n    }\n    set width(newWidth) {\n        newWidth /= Math.abs(this.scale.x);\n        this.destSize.width = newWidth;\n        super.width = Math.ceil(this.destSize.width);\n    }\n    set height(newHeight) {\n        newHeight /= Math.abs(this.scale.y);\n        this.destSize.height = newHeight;\n        super.height = Math.ceil(this.destSize.height);\n    }\n    _updateSpriteDimensions() {\n        var _a, _b, _c, _d, _e, _f;\n        const { width: nativeWidth, height: nativeHeight } = this.image;\n        // This code uses || to avoid 0's\n        // If the source is not specified, use the native dimension\n        this.sourceView.width = ((_a = this.sourceView) === null || _a === void 0 ? void 0 : _a.width) || nativeWidth;\n        this.sourceView.height = ((_b = this.sourceView) === null || _b === void 0 ? void 0 : _b.height) || nativeHeight;\n        // If the destination is not specified, use the source if specified, then native\n        this.destSize.width = ((_c = this.destSize) === null || _c === void 0 ? void 0 : _c.width) || ((_d = this.sourceView) === null || _d === void 0 ? void 0 : _d.width) || nativeWidth;\n        this.destSize.height = ((_e = this.destSize) === null || _e === void 0 ? void 0 : _e.height) || ((_f = this.sourceView) === null || _f === void 0 ? void 0 : _f.height) || nativeHeight;\n        this.width = Math.ceil(this.destSize.width) * this.scale.x;\n        this.height = Math.ceil(this.destSize.height) * this.scale.y;\n    }\n    _preDraw(ex, x, y) {\n        if (this.image.isLoaded() && this._dirty) {\n            this._dirty = false;\n            this._updateSpriteDimensions();\n        }\n        super._preDraw(ex, x, y);\n    }\n    _drawImage(ex, x, y) {\n        if (this.image.isLoaded()) {\n            ex.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, x, y, this.destSize.width, this.destSize.height);\n        }\n        else {\n            this._logger.warnOnce(`ImageSource ${this.image.path}` +\n                ` is not yet loaded and won't be drawn. Please call .load() or include in a Loader.\\n\\n` +\n                `Read https://excaliburjs.com/docs/imagesource for more information.`);\n        }\n    }\n    clone() {\n        return new Sprite({\n            image: this.image,\n            sourceView: { ...this.sourceView },\n            destSize: { ...this.destSize },\n            ...this.cloneGraphicOptions()\n        });\n    }\n}\n\n;// ./Graphics/Filtering.ts\n/**\n * Describes the different image filtering modes\n */\nvar ImageFiltering;\n(function (ImageFiltering) {\n    /**\n     * Pixel is useful when you do not want smoothing aka antialiasing applied to your graphics.\n     *\n     * Useful for Pixel art aesthetics.\n     */\n    ImageFiltering[\"Pixel\"] = \"Pixel\";\n    /**\n     * Blended is useful when you have high resolution artwork and would like it blended and smoothed\n     */\n    ImageFiltering[\"Blended\"] = \"Blended\";\n})(ImageFiltering || (ImageFiltering = {}));\n/**\n * Parse the image filtering attribute value, if it doesn't match returns null\n */\nfunction parseImageFiltering(val) {\n    switch (val) {\n        case ImageFiltering.Pixel:\n            return ImageFiltering.Pixel;\n        case ImageFiltering.Blended:\n            return ImageFiltering.Blended;\n        default:\n            return undefined;\n    }\n}\n\n;// ./Graphics/Wrapping.ts\n/**\n * Describes the different image wrapping modes\n */\nvar ImageWrapping;\n(function (ImageWrapping) {\n    ImageWrapping[\"Clamp\"] = \"Clamp\";\n    ImageWrapping[\"Repeat\"] = \"Repeat\";\n    ImageWrapping[\"Mirror\"] = \"Mirror\";\n})(ImageWrapping || (ImageWrapping = {}));\n/**\n *\n */\nfunction parseImageWrapping(val) {\n    switch (val) {\n        case ImageWrapping.Clamp:\n            return ImageWrapping.Clamp;\n        case ImageWrapping.Repeat:\n            return ImageWrapping.Repeat;\n        case ImageWrapping.Mirror:\n            return ImageWrapping.Mirror;\n        default:\n            return ImageWrapping.Clamp;\n    }\n}\n\n;// ./Graphics/Context/texture-loader.ts\n\n\n\n/**\n * Manages loading image sources into webgl textures, a unique id is associated with all sources\n */\nclass TextureLoader {\n    constructor(gl, _garbageCollector) {\n        var _a;\n        this._garbageCollector = _garbageCollector;\n        this._textureMap = new Map();\n        /**\n         * Looks for textures that haven't been drawn in a while\n         */\n        this._collect = (image) => {\n            var _a;\n            if (this._gl) {\n                const name = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : image.constructor.name;\n                TextureLoader._LOGGER.debug(`WebGL Texture for ${name} collected`);\n                this.delete(image);\n                return true;\n            }\n            return false;\n        };\n        this._gl = gl;\n        TextureLoader._MAX_TEXTURE_SIZE = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n        if (this._garbageCollector) {\n            TextureLoader._LOGGER.debug('WebGL Texture collection interval:', this._garbageCollector.collectionInterval);\n            (_a = this._garbageCollector.garbageCollector) === null || _a === void 0 ? void 0 : _a.registerCollector('texture', this._garbageCollector.collectionInterval, this._collect);\n        }\n    }\n    dispose() {\n        for (const [image] of this._textureMap) {\n            this.delete(image);\n        }\n        this._textureMap.clear();\n        this._gl = null;\n    }\n    /**\n     * Get the WebGL Texture from a source image\n     * @param image\n     */\n    get(image) {\n        return this._textureMap.get(image);\n    }\n    /**\n     * Returns whether a source image has been loaded as a texture\n     * @param image\n     */\n    has(image) {\n        return this._textureMap.has(image);\n    }\n    /**\n     * Loads a graphic into webgl and returns it's texture info, a webgl context must be previously registered\n     * @param image Source graphic\n     * @param options {ImageSourceOptions} Optionally configure the ImageFiltering and ImageWrapping mode to apply to the loaded texture\n     * @param forceUpdate Optionally force a texture to be reloaded, useful if the source graphic has changed\n     */\n    load(image, options, forceUpdate = false) {\n        var _a, _b;\n        // Ignore loading if webgl is not registered\n        const gl = this._gl;\n        if (!gl) {\n            return null;\n        }\n        const { filtering, wrapping } = { ...options };\n        let tex = null;\n        // If reuse the texture if it's from the same source\n        if (this.has(image)) {\n            tex = this.get(image);\n        }\n        // Update existing webgl texture and return early\n        if (tex) {\n            if (forceUpdate) {\n                gl.bindTexture(gl.TEXTURE_2D, tex);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n            }\n            (_a = this._garbageCollector) === null || _a === void 0 ? void 0 : _a.garbageCollector.touch(image);\n            return tex;\n        }\n        // No texture exists create a new one\n        tex = gl.createTexture();\n        // TODO implement texture gc with weakmap and timer\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n        let wrappingConfig;\n        if (wrapping) {\n            if (typeof wrapping === 'string') {\n                wrappingConfig = {\n                    x: wrapping,\n                    y: wrapping\n                };\n            }\n            else {\n                wrappingConfig = {\n                    x: wrapping.x,\n                    y: wrapping.y\n                };\n            }\n        }\n        const { x: xWrap, y: yWrap } = wrappingConfig !== null && wrappingConfig !== void 0 ? wrappingConfig : TextureLoader.wrapping;\n        switch (xWrap) {\n            case ImageWrapping.Clamp:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                break;\n            case ImageWrapping.Repeat:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n                break;\n            case ImageWrapping.Mirror:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.MIRRORED_REPEAT);\n                break;\n            default:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        }\n        switch (yWrap) {\n            case ImageWrapping.Clamp:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                break;\n            case ImageWrapping.Repeat:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n                break;\n            case ImageWrapping.Mirror:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.MIRRORED_REPEAT);\n                break;\n            default:\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        }\n        // NEAREST for pixel art, LINEAR for hi-res\n        const filterMode = filtering !== null && filtering !== void 0 ? filtering : TextureLoader.filtering;\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, filterMode === ImageFiltering.Pixel ? gl.NEAREST : gl.LINEAR);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n        this._textureMap.set(image, tex);\n        (_b = this._garbageCollector) === null || _b === void 0 ? void 0 : _b.garbageCollector.addCollectableResource('texture', image);\n        return tex;\n    }\n    delete(image) {\n        // Ignore loading if webgl is not registered\n        const gl = this._gl;\n        if (!gl) {\n            return;\n        }\n        if (this.has(image)) {\n            const texture = this.get(image);\n            if (texture) {\n                this._textureMap.delete(image);\n                gl.deleteTexture(texture);\n            }\n        }\n    }\n    /**\n     * Takes an image and returns if it meets size criteria for hardware\n     * @param image\n     * @returns if the image will be supported at runtime\n     */\n    static checkImageSizeSupportedAndLog(image) {\n        var _a;\n        const originalSrc = (_a = image.dataset.originalSrc) !== null && _a !== void 0 ? _a : 'internal canvas bitmap';\n        if (image.width > TextureLoader._MAX_TEXTURE_SIZE || image.height > TextureLoader._MAX_TEXTURE_SIZE) {\n            TextureLoader._LOGGER.error(`The image [${originalSrc}] provided to Excalibur is too large for the device's maximum texture size of ` +\n                `(${TextureLoader._MAX_TEXTURE_SIZE}x${TextureLoader._MAX_TEXTURE_SIZE}) please resize to an image ` +\n                `for excalibur to render properly.\\n\\nImages will likely render as black rectangles.\\n\\n` +\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\n            return false;\n        }\n        else if (image.width > 4096 || image.height > 4096) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits\n            TextureLoader._LOGGER.warn(`The image [${originalSrc}] provided to excalibur is too large may not work on all mobile devices, ` +\n                `it is recommended you resize images to a maximum (4096x4096).\\n\\n` +\n                `Images will likely render as black rectangles on some mobile platforms.\\n\\n` +\n                `Read more here: https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices#understand_system_limits`);\n        }\n        return true;\n    }\n}\nTextureLoader._LOGGER = Logger.getInstance();\n/**\n * Sets the default filtering for the Excalibur texture loader, default {@apilink ImageFiltering.Blended}\n */\nTextureLoader.filtering = ImageFiltering.Blended;\nTextureLoader.wrapping = { x: ImageWrapping.Clamp, y: ImageWrapping.Clamp };\nTextureLoader._MAX_TEXTURE_SIZE = 4096;\n\n;// ./Graphics/ImageSource.ts\n\n\n\n\n\n\n\nconst ImageSourceAttributeConstants = {\n    Filtering: 'filtering',\n    WrappingX: 'wrapping-x',\n    WrappingY: 'wrapping-y'\n};\nclass ImageSource {\n    /**\n     * The original size of the source image in pixels\n     */\n    get width() {\n        return this.image.naturalWidth;\n    }\n    /**\n     * The original height of the source image in pixels\n     */\n    get height() {\n        return this.image.naturalHeight;\n    }\n    /**\n     * Returns true if the Texture is completely loaded and is ready\n     * to be drawn.\n     */\n    isLoaded() {\n        if (!this._src) {\n            // this boosts speed of access\n            this._src = this.data.src;\n        }\n        return !!this._src;\n    }\n    get image() {\n        return this.data;\n    }\n    constructor(pathOrBase64, bustCacheOrOptions, filtering) {\n        this._logger = Logger.getInstance();\n        /**\n         * Access to the underlying html image element\n         */\n        this.data = new Image();\n        this._readyFuture = new Future();\n        /**\n         * Promise the resolves when the image is loaded and ready for use, does not initiate loading\n         */\n        this.ready = this._readyFuture.promise;\n        this.path = pathOrBase64;\n        let bustCache = false;\n        let wrapping;\n        if (typeof bustCacheOrOptions === 'boolean') {\n            bustCache = bustCacheOrOptions;\n        }\n        else {\n            ({ filtering, wrapping, bustCache } = { ...bustCacheOrOptions });\n        }\n        this._resource = new Resource(pathOrBase64, 'blob', bustCache);\n        this.filtering = filtering !== null && filtering !== void 0 ? filtering : this.filtering;\n        if (typeof wrapping === 'string') {\n            this.wrapping = {\n                x: wrapping,\n                y: wrapping\n            };\n        }\n        else {\n            this.wrapping = wrapping !== null && wrapping !== void 0 ? wrapping : this.wrapping;\n        }\n        if (pathOrBase64.endsWith('.gif')) {\n            this._logger.warn(`Use the ex.Gif type to load gifs, you may have mixed results with ${pathOrBase64} in ex.ImageSource. Fully supported: svg, jpg, bmp, and png`);\n        }\n    }\n    /**\n     * Create an ImageSource from and HTML <image> tag element\n     * @param image\n     */\n    static fromHtmlImageElement(image, options) {\n        const imageSource = new ImageSource('');\n        imageSource._src = 'image-element';\n        imageSource.data = image;\n        imageSource.data.setAttribute('data-original-src', 'image-element');\n        if (options === null || options === void 0 ? void 0 : options.filtering) {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, options === null || options === void 0 ? void 0 : options.filtering);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, ImageFiltering.Blended);\n        }\n        if (options === null || options === void 0 ? void 0 : options.wrapping) {\n            let wrapping;\n            if (typeof options.wrapping === 'string') {\n                wrapping = {\n                    x: options.wrapping,\n                    y: options.wrapping\n                };\n            }\n            else {\n                wrapping = {\n                    x: options.wrapping.x,\n                    y: options.wrapping.y\n                };\n            }\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, wrapping.x);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, wrapping.y);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, ImageWrapping.Clamp);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, ImageWrapping.Clamp);\n        }\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        imageSource._readyFuture.resolve(image);\n        return imageSource;\n    }\n    static fromHtmlCanvasElement(image, options) {\n        const imageSource = new ImageSource('');\n        imageSource._src = 'canvas-element-blob';\n        imageSource.data.setAttribute('data-original-src', 'canvas-element-blob');\n        if (options === null || options === void 0 ? void 0 : options.filtering) {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, options === null || options === void 0 ? void 0 : options.filtering);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.Filtering, ImageFiltering.Blended);\n        }\n        if (options === null || options === void 0 ? void 0 : options.wrapping) {\n            let wrapping;\n            if (typeof options.wrapping === 'string') {\n                wrapping = {\n                    x: options.wrapping,\n                    y: options.wrapping\n                };\n            }\n            else {\n                wrapping = {\n                    x: options.wrapping.x,\n                    y: options.wrapping.y\n                };\n            }\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, wrapping.x);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, wrapping.y);\n        }\n        else {\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingX, ImageWrapping.Clamp);\n            imageSource.data.setAttribute(ImageSourceAttributeConstants.WrappingY, ImageWrapping.Clamp);\n        }\n        TextureLoader.checkImageSizeSupportedAndLog(image);\n        image.toBlob((blob) => {\n            // TODO throw? if blob null?\n            const url = URL.createObjectURL(blob);\n            imageSource.image.onload = () => {\n                // no longer need to read the blob so it's revoked\n                URL.revokeObjectURL(url);\n                imageSource.data = imageSource.image;\n                imageSource._readyFuture.resolve(imageSource.image);\n            };\n            imageSource.image.src = url;\n        });\n        return imageSource;\n    }\n    static fromSvgString(svgSource, options) {\n        const blob = new Blob([svgSource], { type: 'image/svg+xml' });\n        const url = URL.createObjectURL(blob);\n        return new ImageSource(url, options);\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * Begins loading the image and returns a promise that resolves when the image is loaded\n     */\n    async load() {\n        var _a, _b, _c, _d;\n        if (this.isLoaded()) {\n            return this.data;\n        }\n        try {\n            // Load base64 or blob if needed\n            let url;\n            if (!this.path.includes('data:image/')) {\n                const blob = await this._resource.load();\n                url = URL.createObjectURL(blob);\n            }\n            else {\n                url = this.path;\n            }\n            // Decode the image\n            const image = new Image();\n            // Use Image.onload over Image.decode()\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=1055828#c7\n            // Otherwise chrome will throw still Image.decode() failures for large textures\n            const loadedFuture = new Future();\n            image.onload = () => loadedFuture.resolve();\n            image.src = url;\n            image.setAttribute('data-original-src', this.path);\n            await loadedFuture.promise;\n            // Set results\n            // We defer loading the texture into webgl until the first draw that way we avoid a singleton\n            // and for the multi-engine case the texture needs to be created in EACH webgl context to work\n            // See image-renderer.ts draw()\n            this.data = image;\n            // emit warning if potentially too big\n            TextureLoader.checkImageSizeSupportedAndLog(this.data);\n        }\n        catch (error) {\n            throw `Error loading ImageSource from path '${this.path}' with error [${error.message}]`;\n        }\n        // Do a bad thing to pass the filtering as an attribute\n        this.data.setAttribute(ImageSourceAttributeConstants.Filtering, this.filtering); // TODO fix type\n        this.data.setAttribute(ImageSourceAttributeConstants.WrappingX, (_b = (_a = this.wrapping) === null || _a === void 0 ? void 0 : _a.x) !== null && _b !== void 0 ? _b : ImageWrapping.Clamp);\n        this.data.setAttribute(ImageSourceAttributeConstants.WrappingY, (_d = (_c = this.wrapping) === null || _c === void 0 ? void 0 : _c.y) !== null && _d !== void 0 ? _d : ImageWrapping.Clamp);\n        // todo emit complete\n        this._readyFuture.resolve(this.data);\n        return this.data;\n    }\n    /**\n     * Build a sprite from this ImageSource\n     */\n    toSprite(options) {\n        return Sprite.from(this, options);\n    }\n    /**\n     * Unload images from memory\n     */\n    unload() {\n        this.data = new Image();\n    }\n}\n\n;// ./Graphics/SpriteFont.ts\n\n\n\n\nclass SpriteFont extends Graphic {\n    constructor(options) {\n        super(options);\n        this._text = '';\n        this.alphabet = '';\n        this.shadow = undefined;\n        this.caseInsensitive = false;\n        this.spacing = 0;\n        this.lineHeight = undefined;\n        this._logger = Logger.getInstance();\n        const { alphabet, spriteSheet, caseInsensitive, spacing, shadow, lineHeight } = options;\n        this.alphabet = alphabet;\n        this.spriteSheet = spriteSheet;\n        this.caseInsensitive = caseInsensitive !== null && caseInsensitive !== void 0 ? caseInsensitive : this.caseInsensitive;\n        this.spacing = spacing !== null && spacing !== void 0 ? spacing : this.spacing;\n        this.shadow = shadow !== null && shadow !== void 0 ? shadow : this.shadow;\n        this.lineHeight = lineHeight !== null && lineHeight !== void 0 ? lineHeight : this.lineHeight;\n    }\n    _getCharacterSprites(text) {\n        const results = [];\n        // handle case insensitive\n        const textToRender = this.caseInsensitive ? text.toLocaleLowerCase() : text;\n        const alphabet = this.caseInsensitive ? this.alphabet.toLocaleLowerCase() : this.alphabet;\n        // for each letter in text\n        for (let letterIndex = 0; letterIndex < textToRender.length; letterIndex++) {\n            // find the sprite index in alphabet , if there is an error pick the first\n            const letter = textToRender[letterIndex];\n            let spriteIndex = alphabet.indexOf(letter);\n            if (spriteIndex === -1) {\n                spriteIndex = 0;\n                this._logger.warnOnce(`SpriteFont - Cannot find letter '${letter}' in configured alphabet '${alphabet}'.`);\n                this._logger.warnOnce('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\n            }\n            const letterSprite = this.spriteSheet.sprites[spriteIndex];\n            if (letterSprite) {\n                results.push(letterSprite);\n            }\n            else {\n                this._logger.warnOnce(`SpriteFont - Cannot find sprite for '${letter}' at index '${spriteIndex}' in configured SpriteSheet`);\n                this._logger.warnOnce('There maybe be more issues in the SpriteFont configuration. No additional warnings will be logged.');\n            }\n        }\n        return results;\n    }\n    measureText(text, maxWidth) {\n        const lines = this._getLinesFromText(text, maxWidth);\n        const maxWidthLine = lines.reduce((a, b) => {\n            return a.length > b.length ? a : b;\n        });\n        const sprites = this._getCharacterSprites(maxWidthLine);\n        let width = 0;\n        let height = 0;\n        for (const sprite of sprites) {\n            width += sprite.width + this.spacing;\n            height = Math.max(height, sprite.height);\n        }\n        return BoundingBox.fromDimension(width * this.scale.x, height * lines.length * this.scale.y, Vector.Zero);\n    }\n    _drawImage(ex, x, y, maxWidth) {\n        var _a;\n        let xCursor = 0;\n        let yCursor = 0;\n        let height = 0;\n        const lines = this._getLinesFromText(this._text, maxWidth);\n        for (const line of lines) {\n            for (const sprite of this._getCharacterSprites(line)) {\n                // draw it in the right spot and increase the cursor by sprite width\n                sprite.draw(ex, x + xCursor, y + yCursor);\n                xCursor += sprite.width + this.spacing;\n                height = Math.max(height, sprite.height);\n            }\n            xCursor = 0;\n            yCursor += (_a = this.lineHeight) !== null && _a !== void 0 ? _a : height;\n        }\n    }\n    render(ex, text, _color, x, y, maxWidth) {\n        // SpriteFont doesn't support _color, yet...\n        this._text = text;\n        const bounds = this.measureText(text, maxWidth);\n        this.width = bounds.width;\n        this.height = bounds.height;\n        if (this.shadow) {\n            ex.save();\n            ex.translate(this.shadow.offset.x, this.shadow.offset.y);\n            this._preDraw(ex, x, y);\n            this._drawImage(ex, 0, 0, maxWidth);\n            this._postDraw(ex);\n            ex.restore();\n        }\n        this._preDraw(ex, x, y);\n        this._drawImage(ex, 0, 0, maxWidth);\n        this._postDraw(ex);\n    }\n    clone() {\n        return new SpriteFont({\n            alphabet: this.alphabet,\n            spriteSheet: this.spriteSheet,\n            spacing: this.spacing\n        });\n    }\n    _getLinesFromText(text, maxWidth) {\n        var _a;\n        if (this._cachedText === text && this._cachedRenderWidth === maxWidth && ((_a = this._cachedLines) === null || _a === void 0 ? void 0 : _a.length)) {\n            return this._cachedLines;\n        }\n        const lines = text.split('\\n');\n        if (maxWidth == null) {\n            return lines;\n        }\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i];\n            let newLine = '';\n            // Note: we subtract the spacing to counter the initial padding on the left side.\n            if (this.measureText(line).width > maxWidth) {\n                while (this.measureText(line).width > maxWidth) {\n                    newLine = line[line.length - 1] + newLine;\n                    line = line.slice(0, -1); // Remove last character from line\n                }\n                // Update the array with our new values\n                lines[i] = line;\n                lines[i + 1] = newLine;\n            }\n        }\n        this._cachedText = text;\n        this._cachedLines = lines;\n        this._cachedRenderWidth = maxWidth;\n        return lines;\n    }\n}\n\n;// ./Graphics/TiledSprite.ts\n\n\n\n\nclass TiledSprite extends Sprite {\n    constructor(options) {\n        super({\n            image: options.image,\n            sourceView: options.sourceView,\n            destSize: { width: options.width, height: options.height },\n            flipHorizontal: options.flipHorizontal,\n            flipVertical: options.flipVertical,\n            rotation: options.rotation,\n            scale: options.scale,\n            opacity: options.opacity,\n            tint: options.tint,\n            origin: options.origin\n        });\n        this._ready = new Future();\n        this.ready = this._ready.promise;\n        this._options = options;\n        if (this.image.isLoaded()) {\n            this._applyTiling();\n        }\n        else {\n            this.image.ready.then(() => this._applyTiling());\n        }\n    }\n    static fromSprite(sprite, options) {\n        return new TiledSprite({\n            sourceView: { ...sprite.sourceView },\n            width: sprite.width,\n            height: sprite.height,\n            ...options,\n            image: sprite.image\n        });\n    }\n    _applyTiling() {\n        const { width, height, filtering, wrapping } = { ...this._options };\n        const spriteCanvas = document.createElement('canvas');\n        spriteCanvas.width = this.sourceView.width;\n        spriteCanvas.height = this.sourceView.height;\n        const spriteCtx = spriteCanvas.getContext('2d');\n        // prettier-ignore\n        spriteCtx.drawImage(this.image.image, this.sourceView.x, this.sourceView.y, this.sourceView.width, this.sourceView.height, 0, 0, this.sourceView.width, this.sourceView.height);\n        // prettier-ignore\n        const tiledImageSource = ImageSource.fromHtmlCanvasElement(spriteCanvas, {\n            wrapping: wrapping !== null && wrapping !== void 0 ? wrapping : ImageWrapping.Repeat,\n            filtering\n        });\n        if (width) {\n            this.destSize.width = width;\n            this.sourceView.width = width;\n        }\n        if (height) {\n            this.destSize.height = height;\n            this.sourceView.height = height;\n        }\n        this.sourceView.x = 0;\n        this.sourceView.y = 0;\n        this.image = tiledImageSource;\n        // this._ready.resolve();\n        this.image.ready.then(() => this._ready.resolve());\n    }\n}\n\n;// ./Graphics/SpriteSheet.ts\n\n\n/**\n * Represents a collection of sprites from a source image with some organization in a grid\n */\nclass SpriteSheet {\n    /**\n     * Build a new sprite sheet from a list of sprites\n     *\n     * Use {@apilink SpriteSheet.fromImageSource} to create a SpriteSheet from an {@apilink ImageSource} organized in a grid\n     * @param options\n     */\n    constructor(options) {\n        this.sprites = [];\n        const { sprites, rows, columns } = options;\n        this.sprites = sprites;\n        this.rows = rows !== null && rows !== void 0 ? rows : 1;\n        this.columns = columns !== null && columns !== void 0 ? columns : this.sprites.length;\n    }\n    /**\n     * Find a sprite by their x/y integer coordinates in the SpriteSheet, for example `getSprite(0, 0)` is the {@apilink Sprite} in the top-left\n     * and `getSprite(1, 0)` is the sprite one to the right.\n     * @param x\n     * @param y\n     */\n    getSprite(x, y, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        if (x >= this.columns || x < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1} columns`);\n        }\n        if (y >= this.rows || y < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1} rows`);\n        }\n        const spriteIndex = x + y * this.columns;\n        const sprite = this.sprites[spriteIndex];\n        if (sprite) {\n            if (options) {\n                const spriteWithOptions = sprite.clone();\n                spriteWithOptions.flipHorizontal = (_a = options.flipHorizontal) !== null && _a !== void 0 ? _a : spriteWithOptions.flipHorizontal;\n                spriteWithOptions.flipVertical = (_b = options.flipVertical) !== null && _b !== void 0 ? _b : spriteWithOptions.flipVertical;\n                spriteWithOptions.width = (_c = options.width) !== null && _c !== void 0 ? _c : spriteWithOptions.width;\n                spriteWithOptions.height = (_d = options.height) !== null && _d !== void 0 ? _d : spriteWithOptions.height;\n                spriteWithOptions.rotation = (_e = options.rotation) !== null && _e !== void 0 ? _e : spriteWithOptions.rotation;\n                spriteWithOptions.scale = (_f = options.scale) !== null && _f !== void 0 ? _f : spriteWithOptions.scale;\n                spriteWithOptions.opacity = (_g = options.opacity) !== null && _g !== void 0 ? _g : spriteWithOptions.opacity;\n                spriteWithOptions.tint = (_h = options.tint) !== null && _h !== void 0 ? _h : spriteWithOptions.tint;\n                spriteWithOptions.origin = (_j = options.origin) !== null && _j !== void 0 ? _j : spriteWithOptions.origin;\n                return spriteWithOptions;\n            }\n            return sprite;\n        }\n        throw Error(`Invalid sprite coordinates (${x}, ${y})`);\n    }\n    /**\n     * Find a sprite by their x/y integer coordinates in the SpriteSheet and configures tiling to repeat by default,\n     * for example `getTiledSprite(0, 0)` is the {@apilink TiledSprite} in the top-left\n     * and `getTiledSprite(1, 0)` is the sprite one to the right.\n     *\n     * Example:\n     *\n     * ```typescript\n     * spriteSheet.getTiledSprite(1, 0, {\n     * width: game.screen.width,\n     * height: 200,\n     * wrapping: {\n     * x: ex.ImageWrapping.Repeat,\n     * y: ex.ImageWrapping.Clamp\n     * }\n     * });\n     * ```\n     * @param x\n     * @param y\n     * @param options\n     */\n    getTiledSprite(x, y, options) {\n        if (x >= this.columns || x < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), x: ${x} should be between 0 and ${this.columns - 1} columns`);\n        }\n        if (y >= this.rows || y < 0) {\n            throw Error(`No sprite exists in the SpriteSheet at (${x}, ${y}), y: ${y} should be between 0 and ${this.rows - 1} rows`);\n        }\n        const spriteIndex = x + y * this.columns;\n        const sprite = this.sprites[spriteIndex];\n        if (sprite) {\n            return TiledSprite.fromSprite(sprite, options);\n        }\n        throw Error(`Invalid sprite coordinates (${x}, ${y})`);\n    }\n    /**\n     * Create a sprite sheet from a sparse set of {@apilink SourceView} rectangles\n     * @param options\n     */\n    static fromImageSourceWithSourceViews(options) {\n        const sprites = options.sourceViews.map((sourceView) => {\n            return new Sprite({\n                image: options.image,\n                sourceView\n            });\n        });\n        return new SpriteSheet({ sprites });\n    }\n    /**\n     * Create a SpriteSheet from an {@apilink ImageSource} organized in a grid\n     *\n     * Example:\n     * ```\n     * const spriteSheet = SpriteSheet.fromImageSource({\n     *   image: imageSource,\n     *   grid: {\n     *     rows: 5,\n     *     columns: 2,\n     *     spriteWidth: 32, // pixels\n     *     spriteHeight: 32 // pixels\n     *   },\n     *   // Optionally specify spacing\n     *   spacing: {\n     *     // pixels from the top left to start the sprite parsing\n     *     originOffset: {\n     *       x: 5,\n     *       y: 5\n     *     },\n     *     // pixels between each sprite while parsing\n     *     margin: {\n     *       x: 1,\n     *       y: 1\n     *     }\n     *   }\n     * })\n     * ```\n     * @param options\n     */\n    static fromImageSource(options) {\n        var _a;\n        const sprites = [];\n        options.spacing = (_a = options.spacing) !== null && _a !== void 0 ? _a : {};\n        const { image, grid: { rows, columns: cols, spriteWidth, spriteHeight }, spacing: { originOffset, margin } } = options;\n        const offsetDefaults = { x: 0, y: 0, ...originOffset };\n        const marginDefaults = { x: 0, y: 0, ...margin };\n        for (let x = 0; x < cols; x++) {\n            for (let y = 0; y < rows; y++) {\n                sprites[x + y * cols] = new Sprite({\n                    image: image,\n                    sourceView: {\n                        x: x * spriteWidth + marginDefaults.x * x + offsetDefaults.x,\n                        y: y * spriteHeight + marginDefaults.y * y + offsetDefaults.y,\n                        width: spriteWidth,\n                        height: spriteHeight\n                    },\n                    destSize: { height: spriteHeight, width: spriteWidth }\n                });\n            }\n        }\n        return new SpriteSheet({\n            sprites: sprites,\n            rows: rows,\n            columns: cols\n        });\n    }\n    clone() {\n        return new SpriteSheet({\n            sprites: this.sprites.map((sprite) => sprite.clone()),\n            rows: this.rows,\n            columns: this.columns\n        });\n    }\n}\n\n;// ./Graphics/Context/debug-font.png\n/* harmony default export */ const debug_font = (\"data:image/png;base64,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\");\n;// ./Graphics/Context/debug-text.ts\n\n\n\n\n/**\n * Internal debug text helper\n */\nclass DebugText {\n    constructor() {\n        /**\n         * base64 font\n         */\n        this.fontSheet = debug_font;\n        this.size = 16;\n        // We fire and forget, we don't care if it's loaded or not\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        this.load();\n    }\n    load() {\n        this._imageSource = new ImageSource(this.fontSheet);\n        return this._imageSource.load().then(() => {\n            this._spriteSheet = SpriteSheet.fromImageSource({\n                image: this._imageSource,\n                grid: {\n                    rows: 4,\n                    columns: 16,\n                    spriteWidth: 16,\n                    spriteHeight: 16\n                }\n            });\n            this._spriteFont = new SpriteFont({\n                alphabet: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,!\\'&.\"?-()+# ',\n                caseInsensitive: true,\n                spriteSheet: this._spriteSheet,\n                spacing: -6\n            });\n        });\n    }\n    /**\n     * Writes debug text using the built in sprint font\n     * @param ctx\n     * @param text\n     * @param pos\n     */\n    write(ctx, text, pos) {\n        if (this._imageSource.isLoaded()) {\n            this._spriteFont.render(ctx, text, null, pos.x, pos.y);\n        }\n    }\n}\n\n;// ./Graphics/Context/render-source.ts\nclass RenderSource {\n    constructor(_gl, _texture) {\n        this._gl = _gl;\n        this._texture = _texture;\n    }\n    use() {\n        const gl = this._gl;\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\n    }\n    disable() {\n        const gl = this._gl;\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n}\n\n;// ./Graphics/Context/render-target.ts\n\nclass RenderTarget {\n    constructor(options) {\n        var _a, _b;\n        this.antialias = false;\n        this.samples = 1;\n        this._gl = options.gl;\n        this.width = options.width;\n        this.height = options.height;\n        this.transparency = options.transparency;\n        this.antialias = (_a = options.antialias) !== null && _a !== void 0 ? _a : this.antialias;\n        this.samples = (_b = options.samples) !== null && _b !== void 0 ? _b : this._gl.getParameter(this._gl.MAX_SAMPLES);\n        const gl = this._gl;\n        // Determine current context format for blitting later needs to match\n        if (gl.drawingBufferFormat) {\n            this.bufferFormat = gl.drawingBufferFormat;\n        }\n        else {\n            // Documented in webgl spec\n            // https://registry.khronos.org/webgl/specs/latest/1.0/\n            if (this.transparency) {\n                this.bufferFormat = gl.RGBA8;\n            }\n            else {\n                this.bufferFormat = gl.RGB8;\n            }\n        }\n        this._setupRenderBuffer();\n        this._setupFramebuffer();\n    }\n    setResolution(width, height) {\n        const gl = this._gl;\n        this.width = width;\n        this.height = height;\n        // update backing texture size\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // update render buffer size\n        if (this._renderBuffer) {\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n            gl.renderbufferStorageMultisample(gl.RENDERBUFFER, Math.min(this.samples, gl.getParameter(gl.MAX_SAMPLES)), this.bufferFormat, this.width, this.height);\n        }\n    }\n    get renderBuffer() {\n        return this._renderBuffer;\n    }\n    get renderFrameBuffer() {\n        return this._renderFrameBuffer;\n    }\n    get frameBuffer() {\n        return this._frameBuffer;\n    }\n    get frameTexture() {\n        return this._frameTexture;\n    }\n    _setupRenderBuffer() {\n        if (this.antialias) {\n            const gl = this._gl;\n            // Render buffers can be used as an input to a shader\n            this._renderBuffer = gl.createRenderbuffer();\n            this._renderFrameBuffer = gl.createFramebuffer();\n            gl.bindRenderbuffer(gl.RENDERBUFFER, this._renderBuffer);\n            gl.renderbufferStorageMultisample(gl.RENDERBUFFER, Math.min(this.samples, gl.getParameter(gl.MAX_SAMPLES)), this.bufferFormat, this.width, this.height);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._renderFrameBuffer);\n            gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.RENDERBUFFER, this._renderBuffer);\n        }\n    }\n    _setupFramebuffer() {\n        // Allocates frame buffer\n        const gl = this._gl;\n        this._frameTexture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this._frameTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        // set the filtering so we don't need mips\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        // attach the texture as the first color attachment\n        const attachmentPoint = gl.COLOR_ATTACHMENT0;\n        // After this bind all draw calls will draw to this framebuffer texture\n        this._frameBuffer = gl.createFramebuffer();\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachmentPoint, gl.TEXTURE_2D, this._frameTexture, 0);\n        // Reset after initialized\n        this.disable();\n    }\n    toRenderSource() {\n        if (this.renderBuffer) {\n            this.blitRenderBufferToFrameBuffer();\n        }\n        const source = new RenderSource(this._gl, this._frameTexture);\n        return source;\n    }\n    blitToScreen() {\n        const gl = this._gl;\n        // set to size of canvas's drawingBuffer\n        if (this._renderBuffer) {\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.renderFrameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n        else {\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.frameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, null);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n    }\n    blitRenderBufferToFrameBuffer() {\n        if (this._renderBuffer) {\n            const gl = this._gl;\n            gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this.renderFrameBuffer);\n            gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this.frameBuffer);\n            gl.clearBufferfv(gl.COLOR, 0, [0.0, 0.0, 1.0, 1.0]);\n            gl.blitFramebuffer(0, 0, this.width, this.height, 0, 0, this.width, this.height, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n        }\n    }\n    copyToTexture(texture) {\n        const gl = this._gl;\n        if (this._renderBuffer) {\n            this.blitRenderBufferToFrameBuffer();\n        }\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.copyTexImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 0, 0, this.width, this.height, 0);\n    }\n    /**\n     * When called, all drawing gets redirected to this render target\n     */\n    use() {\n        const gl = this._gl;\n        if (this.antialias) {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._renderFrameBuffer);\n        }\n        else {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n        }\n        // very important to set the viewport to the size of the framebuffer texture\n        gl.viewport(0, 0, this.width, this.height);\n    }\n    /**\n     * When called, all drawing is sent back to the canvas\n     */\n    disable() {\n        const gl = this._gl;\n        // passing null switches rendering back to the canvas\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n    }\n}\n\n;// ./Graphics/Context/line-renderer/line-vertex.glsl\n/* harmony default export */ const line_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\n\\r\\nout lowp vec4 v_color;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Passthrough the color\\r\\n   v_color = a_color;\\r\\n}\");\n;// ./Graphics/Context/line-renderer/line-fragment.glsl\n/* harmony default export */ const line_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Color\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  fragColor = v_color;\\r\\n}\");\n;// ./Graphics/Context/webgl-util.ts\n/**\n * Return the size of the GlType in bytes\n * @param gl\n * @param type\n */\nfunction getGlTypeSizeBytes(gl, type) {\n    switch (type) {\n        case gl.INT:\n        case gl.UNSIGNED_INT:\n        case gl.FLOAT:\n            return 4;\n        case gl.SHORT:\n            return 2;\n        case gl.UNSIGNED_SHORT:\n            return 2;\n        case gl.BYTE:\n            return 1;\n        case gl.UNSIGNED_BYTE:\n            return 1;\n        default:\n            return 1;\n    }\n}\n/**\n * Checks if an attribute is present in vertex source\n */\nfunction isAttributeInSource(source, variable) {\n    const attributeRegexTemplate = `(?<type>[a-z0-9]+)\\\\s+${variable};`;\n    const regex = new RegExp(attributeRegexTemplate, 'g');\n    const matches = regex.exec(source);\n    return (matches === null || matches === void 0 ? void 0 : matches.length) > 0;\n}\n/**\n * Attempt to discern the glType of an attribute from vertex source\n * @param gl\n * @param source\n * @param variable\n */\nfunction getGLTypeFromSource(gl, source, variable) {\n    var _a;\n    const attributeRegexTemplate = `(?<type>[a-z0-9]+)\\\\s+${variable};`;\n    const regex = new RegExp(attributeRegexTemplate, 'g');\n    const matches = regex.exec(source);\n    const type = (_a = matches === null || matches === void 0 ? void 0 : matches.groups) === null || _a === void 0 ? void 0 : _a.type;\n    switch (type) {\n        case 'float':\n        case 'vec2':\n        case 'vec3':\n        case 'vec4':\n            return gl.FLOAT;\n        case 'int':\n        case 'ivec2':\n        case 'ivec3':\n        case 'ivec4':\n            return gl.INT;\n        case 'uint':\n        case 'uvec2':\n        case 'uvec3':\n        case 'uvec4':\n            return gl.UNSIGNED_INT;\n        case 'bool':\n        case 'bvec2':\n        case 'bvec3':\n        case 'bvec4':\n            return gl.BOOL;\n        case 'short':\n            return gl.SHORT;\n        case 'ushort':\n            return gl.UNSIGNED_SHORT;\n        case 'ubyte':\n            return gl.UNSIGNED_BYTE;\n        case 'byte':\n            return gl.BYTE;\n        default:\n            return gl.FLOAT;\n    }\n}\n/**\n * Based on the type return the number of attribute components\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\n * @param gl\n * @param type\n */\nfunction getAttributeComponentSize(gl, type) {\n    switch (type) {\n        case gl.LOW_FLOAT:\n        case gl.HIGH_FLOAT:\n        case gl.FLOAT:\n            return 1;\n        case gl.FLOAT_VEC2:\n            return 2;\n        case gl.FLOAT_VEC3:\n            return 3;\n        case gl.FLOAT_VEC4:\n            return 4;\n        case gl.BYTE:\n            return 1;\n        case gl.UNSIGNED_BYTE:\n            return 1;\n        case gl.UNSIGNED_SHORT:\n        case gl.SHORT:\n            return 1;\n        default:\n            return 1;\n    }\n}\n/**\n * Based on the attribute return the corresponding supported attrib pointer type\n * https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer\n * @param gl\n * @param type\n */\nfunction getAttributePointerType(gl, type) {\n    switch (type) {\n        case gl.LOW_FLOAT:\n        case gl.HIGH_FLOAT:\n        case gl.FLOAT:\n        case gl.FLOAT_VEC2:\n        case gl.FLOAT_VEC3:\n        case gl.FLOAT_VEC4:\n            return gl.FLOAT;\n        case gl.BYTE:\n            return gl.BYTE;\n        case gl.UNSIGNED_BYTE:\n            return gl.UNSIGNED_BYTE;\n        case gl.SHORT:\n            return gl.SHORT;\n        case gl.UNSIGNED_SHORT:\n            return gl.UNSIGNED_SHORT;\n        default:\n            return gl.FLOAT;\n    }\n}\n/**\n *\n */\nfunction getMaxShaderComplexity(gl, numIfs) {\n    const assembleTestShader = (numIfs) => {\n        const testShader = `#version 300 es\r\n    precision mediump float;\r\n    out vec4 fragColor;\r\n    void main() {\r\n      float index = 1.01;\r\n      %%complexity%%\r\n    }`;\n        let testComplexity = '';\n        for (let i = 0; i < numIfs; i++) {\n            if (i === 0) {\n                testComplexity += `if (index <= ${i}.5) {\\n`;\n            }\n            else {\n                testComplexity += `   else if (index <= ${i}.5) {\\n`;\n            }\n            testComplexity += `      fragColor = vec4(1.0);\\n`;\n            testComplexity += `   }\\n`;\n        }\n        return testShader.replace('%%complexity%%', testComplexity);\n    };\n    let canCompile = false;\n    do {\n        const test = assembleTestShader(numIfs);\n        const shader = gl.createShader(gl.FRAGMENT_SHADER);\n        gl.shaderSource(shader, test);\n        gl.compileShader(shader);\n        canCompile = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!canCompile) {\n            numIfs = (numIfs / 2) | 0;\n        }\n    } while (!canCompile);\n    return numIfs;\n}\n\n;// ./Graphics/Context/shader.ts\n\n\nclass Shader {\n    get compiled() {\n        return this._compiled;\n    }\n    /**\n     * Create a shader program in excalibur\n     * @param options specify shader vertex and fragment source\n     */\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this.uniforms = {};\n        this.attributes = {};\n        this._compiled = false;\n        const { gl, vertexSource, fragmentSource, onPreLink, onPostCompile } = options;\n        this._gl = gl;\n        this.vertexSource = vertexSource;\n        this.fragmentSource = fragmentSource;\n        this._onPreLink = onPreLink;\n        this._onPostCompile = onPostCompile;\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteProgram(this.program);\n        this._gl = null;\n    }\n    /**\n     * Binds the shader program\n     */\n    use() {\n        const gl = this._gl;\n        gl.useProgram(this.program);\n        Shader._ACTIVE_SHADER_INSTANCE = this;\n    }\n    isCurrentlyBound() {\n        return Shader._ACTIVE_SHADER_INSTANCE === this;\n    }\n    /**\n     * Compile the current shader against a webgl context\n     */\n    compile() {\n        const gl = this._gl;\n        const vertexShader = this._compileShader(gl, this.vertexSource, gl.VERTEX_SHADER);\n        const fragmentShader = this._compileShader(gl, this.fragmentSource, gl.FRAGMENT_SHADER);\n        this.program = this._createProgram(gl, vertexShader, fragmentShader);\n        const attributes = this.getAttributes();\n        for (const attribute of attributes) {\n            this.attributes[attribute.name] = attribute;\n        }\n        const uniforms = this.getUniforms();\n        for (const uniform of uniforms) {\n            this.uniforms[uniform.name] = uniform;\n        }\n        this._compiled = true;\n        if (this._onPostCompile) {\n            this._onPostCompile(this);\n        }\n        return this.program;\n    }\n    getUniforms() {\n        const gl = this._gl;\n        const uniformCount = gl.getProgramParameter(this.program, gl.ACTIVE_UNIFORMS);\n        const uniforms = [];\n        for (let i = 0; i < uniformCount; i++) {\n            const uniform = gl.getActiveUniform(this.program, i);\n            const uniformLocation = gl.getUniformLocation(this.program, uniform.name);\n            uniforms.push({\n                name: uniform.name,\n                glType: uniform.type,\n                location: uniformLocation\n            });\n        }\n        return uniforms;\n    }\n    getAttributes() {\n        const gl = this._gl;\n        const attributeCount = gl.getProgramParameter(this.program, gl.ACTIVE_ATTRIBUTES);\n        const attributes = [];\n        for (let i = 0; i < attributeCount; i++) {\n            const attribute = gl.getActiveAttrib(this.program, i);\n            const attributeLocation = gl.getAttribLocation(this.program, attribute.name);\n            attributes.push({\n                name: attribute.name,\n                glType: getAttributePointerType(gl, attribute.type),\n                size: getAttributeComponentSize(gl, attribute.type),\n                location: attributeLocation,\n                normalized: false\n            });\n        }\n        return attributes;\n    }\n    /**\n     * Set a texture in a gpu texture slot\n     * @param slotNumber\n     * @param texture\n     */\n    setTexture(slotNumber, texture) {\n        const gl = this._gl;\n        gl.activeTexture(gl.TEXTURE0 + slotNumber);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n    }\n    /**\n     * Set an integer uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformInt(name, value) {\n        this.setUniform('uniform1i', name, ~~value);\n    }\n    /**\n     * Set an integer uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformInt(name, value) {\n        return this.trySetUniform('uniform1i', name, ~~value);\n    }\n    /**\n     * Set an integer array uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformIntArray(name, value) {\n        this.setUniform('uniform1iv', name, value);\n    }\n    /**\n     * Set an integer array uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformIntArray(name, value) {\n        return this.trySetUniform('uniform1iv', name, value);\n    }\n    /**\n     * Set a boolean uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformBoolean(name, value) {\n        this.setUniform('uniform1i', name, value ? 1 : 0);\n    }\n    /**\n     * Set a boolean uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformBoolean(name, value) {\n        return this.trySetUniform('uniform1i', name, value ? 1 : 0);\n    }\n    /**\n     * Set a float uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloat(name, value) {\n        this.setUniform('uniform1f', name, value);\n    }\n    /**\n     * Set a float uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloat(name, value) {\n        return this.trySetUniform('uniform1f', name, value);\n    }\n    /**\n     * Set a float array uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatArray(name, value) {\n        this.setUniform('uniform1fv', name, value);\n    }\n    /**\n     * Set a float array uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatArray(name, value) {\n        return this.trySetUniform('uniform1fv', name, value);\n    }\n    /**\n     * Set a {@apilink Vector} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatVector(name, value) {\n        this.setUniform('uniform2f', name, value.x, value.y);\n    }\n    /**\n     * Set a {@apilink Vector} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatVector(name, value) {\n        return this.trySetUniform('uniform2f', name, value.x, value.y);\n    }\n    /**\n     * Set a {@apilink Color} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformFloatColor(name, value) {\n        this.setUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\n    }\n    /**\n     * Set a {@apilink Color} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformFloatColor(name, value) {\n        return this.trySetUniform('uniform4f', name, value.r / 255, value.g / 255, value.b / 255, value.a);\n    }\n    /**\n     * Set an {@apilink Matrix} uniform for the current shader\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    setUniformMatrix(name, value) {\n        this.setUniform('uniformMatrix4fv', name, false, value.data);\n    }\n    setUniformAffineMatrix(name, value) {\n        this.setUniform('uniformMatrix4fv', name, false, [\n            value.data[0],\n            value.data[1],\n            0,\n            0,\n            value.data[2],\n            value.data[3],\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            value.data[4],\n            value.data[5],\n            0,\n            1\n        ]);\n    }\n    /**\n     * Set an {@apilink Matrix} uniform for the current shader, WILL NOT THROW on error.\n     *\n     * **Important** Must call ex.Shader.use() before setting a uniform!\n     * @param name\n     * @param value\n     */\n    trySetUniformMatrix(name, value) {\n        return this.trySetUniform('uniformMatrix4fv', name, false, value.data);\n    }\n    /**\n     * Set any available uniform type in webgl\n     *\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\n     */\n    setUniform(uniformType, name, ...value) {\n        if (!this._compiled) {\n            throw Error(`Must compile shader before setting a uniform ${uniformType}:${name}`);\n        }\n        if (!this.isCurrentlyBound()) {\n            throw Error('Currently accessed shader instance is not the current active shader in WebGL,' +\n                ' must call `shader.use()` before setting uniforms');\n        }\n        const gl = this._gl;\n        const location = gl.getUniformLocation(this.program, name);\n        if (location) {\n            const args = [location, ...value];\n            this._gl[uniformType].apply(this._gl, args);\n        }\n        else {\n            throw Error(`Uniform ${uniformType}:${name} doesn\\'t exist or is not used in the shader source code,` +\n                ' unused uniforms are optimized away by most browsers');\n        }\n    }\n    /**\n     * Set any available uniform type in webgl. Will try to set the uniform, will return false if the uniform didn't exist,\n     * true if it was set.\n     *\n     * WILL NOT THROW on error\n     *\n     * For example setUniform('uniformMatrix2fv', 'u_my2x2_mat`, ...);\n     *\n     */\n    trySetUniform(uniformType, name, ...value) {\n        if (!this._compiled) {\n            this._logger.warn(`Must compile shader before setting a uniform ${uniformType}:${name}`);\n            return false;\n        }\n        if (!this.isCurrentlyBound()) {\n            this._logger.warn('Currently accessed shader instance is not the current active shader in WebGL,' +\n                ' must call `shader.use()` before setting uniforms');\n            return false;\n        }\n        const gl = this._gl;\n        const location = gl.getUniformLocation(this.program, name);\n        if (location) {\n            const args = [location, ...value];\n            this._gl[uniformType].apply(this._gl, args);\n        }\n        else {\n            return false;\n        }\n        return true;\n    }\n    _createProgram(gl, vertexShader, fragmentShader) {\n        const program = gl.createProgram();\n        if (program === null) {\n            throw Error('Could not create graphics shader program');\n        }\n        // attach the shaders.\n        gl.attachShader(program, vertexShader);\n        gl.attachShader(program, fragmentShader);\n        if (this._onPreLink) {\n            this._onPreLink(program);\n        }\n        // link the program.\n        gl.linkProgram(program);\n        const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n        if (!success) {\n            throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\n        }\n        return program;\n    }\n    _compileShader(gl, source, type) {\n        const typeName = gl.VERTEX_SHADER === type ? 'vertex' : 'fragment';\n        const shader = gl.createShader(type);\n        if (shader === null) {\n            throw Error(`Could not build shader: [${source}]`);\n        }\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n        const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!success) {\n            const errorInfo = gl.getShaderInfoLog(shader);\n            throw Error(`Could not compile ${typeName} shader:\\n\\n${errorInfo}${this._processSourceForError(source, errorInfo)}`);\n        }\n        return shader;\n    }\n    _processSourceForError(source, errorInfo) {\n        if (!source) {\n            return errorInfo;\n        }\n        const lines = source.split('\\n');\n        const errorLineStart = errorInfo.search(/\\d:\\d/);\n        const errorLineEnd = errorInfo.indexOf(' ', errorLineStart);\n        const [_, error2] = errorInfo\n            .slice(errorLineStart, errorLineEnd)\n            .split(':')\n            .map((v) => Number(v));\n        for (let i = 0; i < lines.length; i++) {\n            lines[i] = `${i + 1}: ${lines[i]}${error2 === i + 1 ? ' <----- ERROR!' : ''}`;\n        }\n        return '\\n\\nSource:\\n' + lines.join('\\n');\n    }\n}\nShader._ACTIVE_SHADER_INSTANCE = null;\n\n;// ./Graphics/Context/vertex-buffer.ts\n/**\n * Helper around vertex buffer to simplify creating and uploading geometry\n *\n * Under the hood uses Float32Array\n */\nclass VertexBuffer {\n    constructor(options) {\n        /**\n         * If the vertices never change switching 'static' can be more efficient on the gpu\n         *\n         * Default is 'dynamic'\n         */\n        this.type = 'dynamic';\n        const { gl, size, type, data } = options;\n        this._gl = gl;\n        this.buffer = this._gl.createBuffer();\n        if (!data && !size) {\n            throw Error('Must either provide data or a size to the VertexBuffer');\n        }\n        if (!data) {\n            this.bufferData = new Float32Array(size);\n        }\n        else {\n            this.bufferData = data;\n        }\n        this.type = type !== null && type !== void 0 ? type : this.type;\n        // Allocate buffer\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\n    }\n    /**\n     * Bind this vertex buffer\n     */\n    bind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n    }\n    unbind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    }\n    /**\n     * Upload vertex buffer geometry to the GPU\n     */\n    upload(count) {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        if (count) {\n            gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.bufferData, 0, count);\n        }\n        else {\n            // TODO always use bufferSubData? need to perf test it\n            gl.bufferData(gl.ARRAY_BUFFER, this.bufferData, this.type === 'static' ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW);\n        }\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteBuffer(this.buffer);\n        this._gl = null;\n    }\n}\n\n;// ./Graphics/Context/vertex-layout.ts\n\n\n/**\n * Helper around creating vertex attributes in a given {@apilink VertexBuffer}, this is useful for describing\n * the memory layout for your vertices inside a particular buffer\n *\n * Note: This helper assumes interleaved attributes in one {@apilink VertexBuffer}, not many.\n *\n * Working with `gl.vertexAttribPointer` can be tricky, and this attempts to double check you\n */\nclass VertexLayout {\n    get vertexBuffer() {\n        return this._vertexBuffer;\n    }\n    get attributes() {\n        return this._attributes;\n    }\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._suppressWarnings = false;\n        this._layout = [];\n        this._attributes = [];\n        this._vertexTotalSizeBytes = 0;\n        this._initialized = false;\n        const { gl, shader, vertexBuffer, attributes, suppressWarnings } = options;\n        this._gl = gl;\n        this._vertexBuffer = vertexBuffer;\n        this._attributes = attributes;\n        this._shader = shader;\n        this._suppressWarnings = suppressWarnings;\n        if (shader) {\n            this.initialize();\n        }\n    }\n    /**\n     * Total number of bytes that the vertex will take up\n     */\n    get totalVertexSizeBytes() {\n        return this._vertexTotalSizeBytes;\n    }\n    set shader(shader) {\n        if (shader && this._shader !== shader) {\n            this._shader = shader;\n            this.initialize();\n        }\n    }\n    get shader() {\n        return this._shader;\n    }\n    /**\n     * Layouts need shader locations and must be bound to a shader\n     */\n    initialize() {\n        if (this._initialized) {\n            return;\n        }\n        if (!this._shader) {\n            return;\n        }\n        if (!this._shader.compiled) {\n            throw Error('Shader not compiled, shader must be compiled before defining a vertex layout');\n        }\n        this._vertexTotalSizeBytes = 0;\n        this._layout.length = 0;\n        const shaderAttributes = this._shader.attributes;\n        for (const attribute of this._attributes) {\n            const attrib = shaderAttributes[attribute[0]];\n            if (!attrib) {\n                if (!isAttributeInSource(this._shader.vertexSource, attribute[0])) {\n                    throw Error(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\n                        ` not found in the shader source code:\\n ${this._shader.vertexSource}`);\n                }\n                if (!this._suppressWarnings) {\n                    this._logger.warn(`The attribute named: ${attribute[0]} size ${attribute[1]}` +\n                        ` not found in the compiled shader. This is possibly a bug:\\n` +\n                        ` 1. Not a bug, but should remove unused code - attribute \"${attribute[0]}\" is unused in` +\n                        ` vertex/fragment and has been automatically removed by glsl compiler.\\n` +\n                        ` 2. Definitely a bug, attribute \"${attribute[0]}\" in layout has been mistyped or is missing` +\n                        ` in shader, check vertex/fragment source.`);\n                }\n                const glType = getGLTypeFromSource(this._gl, this._shader.vertexSource, attribute[0]);\n                // Unused attribute placeholder\n                this._layout.push({\n                    name: attribute[0],\n                    glType,\n                    size: attribute[1],\n                    location: -1,\n                    normalized: false\n                });\n            }\n            if (attrib) {\n                if (attrib.size !== attribute[1]) {\n                    throw Error(`VertexLayout size definition for attribute: [${attribute[0]}, ${attribute[1]}],` +\n                        ` doesn\\'t match shader source size ${attrib.size}:\\n ${this._shader.vertexSource}`);\n                }\n                this._layout.push(attrib);\n            }\n        }\n        // calc size\n        let componentsPerVertex = 0;\n        for (const vertAttribute of this._layout) {\n            const typeSize = getGlTypeSizeBytes(this._gl, vertAttribute.glType);\n            this._vertexTotalSizeBytes += typeSize * vertAttribute.size;\n            componentsPerVertex += vertAttribute.size;\n        }\n        if (this._vertexBuffer.bufferData.length % componentsPerVertex !== 0) {\n            this._logger.warn(`The vertex component size (${componentsPerVertex})  does NOT divide evenly into the specified vertex buffer` +\n                ` (${this._vertexBuffer.bufferData.length})`);\n        }\n        // create VAO\n        const gl = this._gl;\n        this._vao = gl.createVertexArray();\n        gl.bindVertexArray(this._vao);\n        this._vertexBuffer.bind();\n        let offset = 0;\n        for (const vert of this._layout) {\n            // skip unused attributes\n            if (vert.location !== -1) {\n                if (vert.glType === gl.INT) {\n                    gl.vertexAttribIPointer(vert.location, vert.size, vert.glType, this.totalVertexSizeBytes, offset);\n                }\n                else {\n                    gl.vertexAttribPointer(vert.location, vert.size, vert.glType, vert.normalized, this.totalVertexSizeBytes, offset);\n                }\n                gl.enableVertexAttribArray(vert.location);\n            }\n            offset += getGlTypeSizeBytes(gl, vert.glType) * vert.size;\n        }\n        gl.bindVertexArray(null);\n        this._vertexBuffer.unbind();\n        this._initialized = true;\n    }\n    /**\n     * Bind this layout with it's associated vertex buffer\n     * @param uploadBuffer Optionally indicate you wish to upload the buffer to the GPU associated with this layout\n     */\n    use(uploadBuffer = false, count) {\n        if (!this._shader) {\n            throw Error('No shader is associated with this vertex layout, a shader must be set');\n        }\n        const gl = this._gl;\n        if (!this._shader.isCurrentlyBound()) {\n            throw Error('Shader associated with this vertex layout is not active! Call shader.use() before layout.use()');\n        }\n        this._vertexBuffer.bind();\n        if (uploadBuffer) {\n            this._vertexBuffer.upload(count);\n        }\n        gl.bindVertexArray(this._vao);\n    }\n}\n\n;// ./Graphics/GraphicsDiagnostics.ts\nclass GraphicsDiagnostics {\n    static clear() {\n        GraphicsDiagnostics.DrawCallCount = 0;\n        GraphicsDiagnostics.DrawnImagesCount = 0;\n    }\n}\nGraphicsDiagnostics.DrawCallCount = 0;\nGraphicsDiagnostics.DrawnImagesCount = 0;\n\n;// ./Graphics/Context/line-renderer/line-renderer.ts\n\n\n\n\n\nclass LineRenderer {\n    constructor() {\n        this.type = 'ex.line';\n        this.priority = 0;\n        this._maxLines = 10922;\n        this._vertexIndex = 0;\n        this._lineCount = 0;\n        this._startScratch = vec(0, 0);\n        this._endScratch = vec(0, 0);\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: line_vertex,\n            fragmentSource: line_fragment\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        this._vertexBuffer = new VertexBuffer({\n            gl,\n            size: 6 * 2 * this._maxLines,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            vertexBuffer: this._vertexBuffer,\n            shader: this._shader,\n            attributes: [\n                ['a_position', 2],\n                ['a_color', 4]\n            ]\n        });\n    }\n    dispose() {\n        this._vertexBuffer.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    draw(start, end, color) {\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._lineCount++;\n        const transform = this._context.getTransform();\n        const finalStart = transform.multiply(start, this._startScratch);\n        const finalEnd = transform.multiply(end, this._endScratch);\n        const vertexBuffer = this._vertexBuffer.bufferData;\n        // Start\n        vertexBuffer[this._vertexIndex++] = finalStart.x;\n        vertexBuffer[this._vertexIndex++] = finalStart.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        // End\n        vertexBuffer[this._vertexIndex++] = finalEnd.x;\n        vertexBuffer[this._vertexIndex++] = finalEnd.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n    }\n    _isFull() {\n        if (this._lineCount >= this._maxLines) {\n            return true;\n        }\n        return false;\n    }\n    hasPendingDraws() {\n        return this._lineCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._lineCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use(true);\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        gl.drawArrays(gl.LINES, 0, this._lineCount * 2); // 2 verts per line\n        GraphicsDiagnostics.DrawnImagesCount += this._lineCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // reset\n        this._vertexIndex = 0;\n        this._lineCount = 0;\n    }\n}\n\n;// ./Graphics/Context/point-renderer/point-vertex.glsl\n/* harmony default export */ const point_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\nin vec4 a_color;\\r\\nin float a_size;\\r\\nout lowp vec4 v_color;\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n  gl_PointSize = a_size * 2.0;\\r\\n  v_color = a_color;\\r\\n}\");\n;// ./Graphics/Context/point-renderer/point-fragment.glsl\n/* harmony default export */ const point_fragment = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\nin lowp vec4 v_color;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  float r = 0.0, delta = 0.0, alpha = 1.0;\\r\\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\r\\n  r = dot(cxy, cxy);\\r\\n\\r\\n  delta = fwidth(r);\\r\\n  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\\r\\n  // \\\"premultiply\\\" the color by alpha\\r\\n  vec4 color = v_color;\\r\\n  color.a = color.a * alpha;\\r\\n  color.rgb = color.rgb * color.a;\\r\\n  fragColor = color;\\r\\n}\");\n;// ./Graphics/Context/point-renderer/point-renderer.ts\n\n\n\n\n\n\n\nclass PointRenderer {\n    constructor() {\n        this.type = 'ex.point';\n        this.priority = 0;\n        this._maxPoints = 10922;\n        this._pointCount = 0;\n        this._vertexIndex = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: point_vertex,\n            fragmentSource: point_fragment\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 7 * this._maxPoints,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_color', 4],\n                ['a_size', 1]\n            ]\n        });\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    draw(point, color, size) {\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._pointCount++;\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const finalPoint = transform.multiply(point);\n        if (snapToPixel) {\n            finalPoint.x = ~~(finalPoint.x + pixelSnapEpsilon);\n            finalPoint.y = ~~(finalPoint.y + pixelSnapEpsilon);\n        }\n        const vertexBuffer = this._buffer.bufferData;\n        vertexBuffer[this._vertexIndex++] = finalPoint.x;\n        vertexBuffer[this._vertexIndex++] = finalPoint.y;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a * opacity;\n        vertexBuffer[this._vertexIndex++] = size * Math.max(transform.getScaleX(), transform.getScaleY());\n    }\n    _isFull() {\n        if (this._pointCount >= this._maxPoints) {\n            return true;\n        }\n        return false;\n    }\n    hasPendingDraws() {\n        return this._pointCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._pointCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use(true);\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        gl.drawArrays(gl.POINTS, 0, this._pointCount);\n        GraphicsDiagnostics.DrawnImagesCount += this._pointCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        this._pointCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Graphics/Context/screen-pass-painter/screen-vertex.glsl\n/* harmony default export */ const screen_vertex = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n  // Pass the texcoord to the fragment shader.\\r\\n  v_texcoord = a_texcoord;\\r\\n}\");\n;// ./Graphics/Context/screen-pass-painter/screen-fragment.glsl\n/* harmony default export */ const screen_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// Passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// The texture.\\r\\nuniform sampler2D u_texture;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n   fragColor = texture(u_texture, v_texcoord);\\r\\n}\");\n;// ./Graphics/Context/screen-pass-painter/screen-pass-painter.ts\n\n\n\n\n\n/**\n * This is responsible for painting the entire screen during the render passes\n */\nclass ScreenPassPainter {\n    constructor(gl) {\n        this._gl = gl;\n        this._shader = new Shader({\n            gl,\n            vertexSource: screen_vertex,\n            fragmentSource: screen_fragment\n        });\n        this._shader.compile();\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            type: 'static',\n            // clip space quad + uv since we don't need a camera\n            data: new Float32Array([\n                -1, -1, 0, 0, -1, 1, 0, 1, 1, -1, 1, 0,\n                1, -1, 1, 0, -1, 1, 0, 1, 1, 1, 1, 1\n            ])\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_texcoord', 2]\n            ]\n        });\n        this._buffer.upload();\n    }\n    renderWithPostProcessor(postprocessor) {\n        const gl = this._gl;\n        const shader = postprocessor.getShader();\n        shader.use();\n        postprocessor.getLayout().use();\n        gl.activeTexture(gl.TEXTURE0);\n        shader.trySetUniformInt('u_image', 0);\n        if (postprocessor.onDraw) {\n            postprocessor.onDraw();\n        }\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n    renderToScreen() {\n        const gl = this._gl;\n        this._shader.use();\n        this._layout.use();\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n    }\n}\n\n;// ./Graphics/Context/quad-index-buffer.ts\n\n/**\n * Helper that defines and index buffer for quad geometry\n *\n * Index buffers allow you to save space in vertex buffers when you share vertices in geometry\n * it is almost always worth it in terms of performance to use an index buffer.\n */\nclass QuadIndexBuffer {\n    /**\n     * @param gl WebGL2RenderingContext this layout will be attached to, these cannot be reused across contexts.\n     * @param numberOfQuads Specify the max number of quads you want to draw\n     * @param useUint16 Optionally force a uint16 buffer\n     */\n    constructor(gl, numberOfQuads, useUint16) {\n        this._logger = Logger.getInstance();\n        this._gl = gl;\n        this.buffer = gl.createBuffer();\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n        const totalVertices = numberOfQuads * 6;\n        if (!useUint16) {\n            this.bufferData = new Uint32Array(totalVertices);\n        }\n        else {\n            // fall back to using gl.UNSIGNED_SHORT or tell the user they are out of luck\n            const maxUint16 = 65535;\n            const maxUint16Index = Math.floor((maxUint16 - 1) / 4); // max quads\n            this.bufferGlType = gl.UNSIGNED_SHORT;\n            this.bufferData = new Uint16Array(totalVertices);\n            // TODO Should we error if this happens?? maybe not might crash mid game\n            if (numberOfQuads > maxUint16Index) {\n                this._logger.warn(`Total quads exceeds hardware index buffer limit (uint16), max(${maxUint16Index}) requested quads(${numberOfQuads})`);\n            }\n        }\n        let currentQuad = 0;\n        for (let i = 0; i < totalVertices; i += 6) {\n            // first triangle\n            this.bufferData[i + 0] = currentQuad + 0;\n            this.bufferData[i + 1] = currentQuad + 1;\n            this.bufferData[i + 2] = currentQuad + 2;\n            // second triangle\n            this.bufferData[i + 3] = currentQuad + 2;\n            this.bufferData[i + 4] = currentQuad + 1;\n            this.bufferData[i + 5] = currentQuad + 3;\n            currentQuad += 4;\n        }\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\n    }\n    get size() {\n        return this.bufferData.length;\n    }\n    /**\n     * Upload data to the GPU\n     */\n    upload() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.bufferData, gl.STATIC_DRAW);\n    }\n    /**\n     * Bind this index buffer\n     */\n    bind() {\n        const gl = this._gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.buffer);\n    }\n    dispose() {\n        const gl = this._gl;\n        gl.deleteBuffer(this.buffer);\n        this._gl = null;\n    }\n}\n\n;// ./Graphics/Context/image-renderer/image-renderer.frag.glsl\n/* harmony default export */ const image_renderer_frag = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// Texture index\\r\\nin lowp float v_textureIndex;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\nuniform bool u_pixelart;\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nin vec4 v_tint;\\r\\n\\r\\nin vec2 v_res;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\n// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\\r\\nvec2 uv_iq(in vec2 uv, in vec2 texture_size) {\\r\\n  vec2 pixel = uv * texture_size;\\r\\n  \\r\\n  vec2 seam=floor(pixel+.5);\\r\\n  vec2 dudv=fwidth(pixel);\\r\\n  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\\r\\n  \\r\\n  return pixel/texture_size;\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n  // In order to support the most efficient sprite batching, we have multiple\\r\\n  // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n  // that do not apply to a particular sprite.\\r\\n  \\r\\n  vec4 color=vec4(1.,0,0,1.);\\r\\n  \\r\\n  // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n  %%texture_picker%%\\r\\n  \\r\\n  color.rgb=color.rgb*v_opacity;\\r\\n  color.a=color.a*v_opacity;\\r\\n  fragColor=color*v_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer/image-renderer.vert.glsl\n/* harmony default export */ const image_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// Opacity\\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\n// Texture res\\r\\nin vec2 a_res;\\r\\nout vec2 v_res;\\r\\n\\r\\n// Texture number\\r\\nin lowp float a_textureIndex;\\r\\nout lowp float v_textureIndex;\\r\\n\\r\\nin vec4 a_tint;\\r\\nout vec4 v_tint;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main(){\\r\\n  // Set the vertex position using the ortho transform matrix\\r\\n  gl_Position=u_matrix*vec4(a_position,0.,1.);\\r\\n  \\r\\n  // Pass through the Opacity to the fragment shader\\r\\n  v_opacity=a_opacity;\\r\\n  // Pass through the UV coord to the fragment shader\\r\\n  v_texcoord=a_texcoord;\\r\\n\\r\\n  v_res = a_res;\\r\\n\\r\\n  // Pass through the texture number to the fragment shader\\r\\n  v_textureIndex=a_textureIndex;\\r\\n  // Pass through the tint\\r\\n  v_tint=a_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer/image-renderer.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass ImageRenderer {\n    constructor(options) {\n        this.type = 'ex.image';\n        this.priority = 0;\n        this._maxImages = 10922; // max(uint16) / 6 verts\n        this._maxTextures = 0;\n        // Per flush vars\n        this._imageCount = 0;\n        this._textures = [];\n        this._textureIndex = 0;\n        this._textureToIndex = new Map();\n        this._images = new Set();\n        this._vertexIndex = 0;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this._view = [0, 0, 0, 0];\n        this._dest = [0, 0];\n        this._quad = [0, 0, 0, 0, 0, 0, 0, 0];\n        this._defaultTint = Color.White;\n        this.pixelArtSampler = options.pixelArtSampler;\n        this.uvPadding = options.uvPadding;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Transform shader source\n        // FIXME: PIXEL 6 complains `ERROR: Expression too complex.` if we use it's reported max texture units, 125 seems to work for now...\n        const maxTexture = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        const maxComplexity = getMaxShaderComplexity(gl, maxTexture);\n        this._maxTextures = Math.min(maxTexture, maxComplexity);\n        const transformedFrag = this._transformFragmentSource(image_renderer_frag, this._maxTextures);\n        // Compile shader\n        this._shader = new Shader({\n            gl,\n            fragmentSource: transformedFrag,\n            vertexSource: image_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 12 * 4 * this._maxImages, // 12 components * 4 verts\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_opacity', 1],\n                ['a_res', 2],\n                ['a_texcoord', 2],\n                ['a_textureIndex', 1],\n                ['a_tint', 4]\n            ]\n        });\n        // Setup index buffer\n        this._quads = new QuadIndexBuffer(gl, this._maxImages, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    _transformFragmentSource(source, maxTextures) {\n        let newSource = source.replace('%%count%%', maxTextures.toString());\n        let texturePickerBuilder = '';\n        for (let i = 0; i < maxTextures; i++) {\n            if (i === 0) {\n                texturePickerBuilder += `if (v_textureIndex <= ${i}.5) {\\n`;\n            }\n            else {\n                texturePickerBuilder += `   else if (v_textureIndex <= ${i}.5) {\\n`;\n            }\n            texturePickerBuilder += `      vec2 uv = u_pixelart ? uv_iq(v_texcoord, v_res) : v_texcoord;\\n`;\n            texturePickerBuilder += `      color = texture(u_textures[${i}], uv);\\n`;\n            texturePickerBuilder += `   }\\n`;\n        }\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n        return newSource;\n    }\n    _addImageAsTexture(image) {\n        if (this._images.has(image)) {\n            return;\n        }\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n            this._textureToIndex.set(texture, this._textureIndex++);\n            this._images.add(image);\n        }\n    }\n    _bindTextures(gl) {\n        // Bind textures in the correct order\n        for (let i = 0; i < this._maxTextures; i++) {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\n        }\n    }\n    _getTextureIdForImage(image) {\n        var _a;\n        if (image) {\n            const maybeTexture = this._context.textureLoader.get(image);\n            return (_a = this._textureToIndex.get(maybeTexture)) !== null && _a !== void 0 ? _a : -1; //this._textures.indexOf(maybeTexture);\n        }\n        return -1;\n    }\n    _isFull() {\n        if (this._imageCount >= this._maxImages) {\n            return true;\n        }\n        if (this._textures.length >= this._maxTextures) {\n            return true;\n        }\n        return false;\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._imageCount++;\n        // This creates and uploads the texture if not already done\n        this._addImageAsTexture(image);\n        const maybeImageWidth = this._getImageWidth(image);\n        const maybeImageHeight = this._getImageHeight(image);\n        let width = maybeImageWidth || swidth || 0;\n        let height = maybeImageHeight || sheight || 0;\n        this._view[0] = 0;\n        this._view[1] = 0;\n        this._view[2] = (_a = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _a !== void 0 ? _a : 0;\n        this._view[3] = (_b = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _b !== void 0 ? _b : 0;\n        this._dest[0] = sx !== null && sx !== void 0 ? sx : 1;\n        this._dest[1] = sy !== null && sy !== void 0 ? sy : 1;\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            this._view[0] = sx !== null && sx !== void 0 ? sx : 1;\n            this._view[1] = sy !== null && sy !== void 0 ? sy : 1;\n            this._view[2] = (_c = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _c !== void 0 ? _c : 0;\n            this._view[3] = (_d = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _d !== void 0 ? _d : 0;\n            this._dest[0] = dx;\n            this._dest[1] = dy;\n            width = dwidth;\n            height = dheight;\n        }\n        sx = this._view[0];\n        sy = this._view[1];\n        const sw = this._view[2];\n        const sh = this._view[3];\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        // top left\n        this._quad[0] = this._dest[0];\n        this._quad[1] = this._dest[1];\n        // top right\n        this._quad[2] = this._dest[0] + width;\n        this._quad[3] = this._dest[1];\n        // bottom left\n        this._quad[4] = this._dest[0];\n        this._quad[5] = this._dest[1] + height;\n        // bottom right\n        this._quad[6] = this._dest[0] + width;\n        this._quad[7] = this._dest[1] + height;\n        transform.multiplyQuadInPlace(this._quad);\n        if (snapToPixel) {\n            this._quad[0] = ~~(this._quad[0] + sign(this._quad[0]) * pixelSnapEpsilon);\n            this._quad[1] = ~~(this._quad[1] + sign(this._quad[1]) * pixelSnapEpsilon);\n            this._quad[2] = ~~(this._quad[2] + sign(this._quad[2]) * pixelSnapEpsilon);\n            this._quad[3] = ~~(this._quad[3] + sign(this._quad[3]) * pixelSnapEpsilon);\n            this._quad[4] = ~~(this._quad[4] + sign(this._quad[4]) * pixelSnapEpsilon);\n            this._quad[5] = ~~(this._quad[5] + sign(this._quad[5]) * pixelSnapEpsilon);\n            this._quad[6] = ~~(this._quad[6] + sign(this._quad[6]) * pixelSnapEpsilon);\n            this._quad[7] = ~~(this._quad[7] + sign(this._quad[7]) * pixelSnapEpsilon);\n        }\n        const tint = this._context.tint || this._defaultTint;\n        const textureId = this._getTextureIdForImage(image);\n        const imageWidth = maybeImageWidth || width;\n        const imageHeight = maybeImageHeight || height;\n        const uvx0 = (sx + this.uvPadding) / imageWidth;\n        const uvy0 = (sy + this.uvPadding) / imageHeight;\n        const uvx1 = (sx + sw - this.uvPadding) / imageWidth;\n        const uvy1 = (sy + sh - this.uvPadding) / imageHeight;\n        const txWidth = maybeImageWidth;\n        const txHeight = maybeImageHeight;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = this._quad[0];\n        vertexBuffer[this._vertexIndex++] = this._quad[1];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = this._quad[4];\n        vertexBuffer[this._vertexIndex++] = this._quad[5];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = this._quad[2];\n        vertexBuffer[this._vertexIndex++] = this._quad[3];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = this._quad[6];\n        vertexBuffer[this._vertexIndex++] = this._quad[7];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n    }\n    hasPendingDraws() {\n        return this._imageCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._imageCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true, 4 * 12 * this._imageCount); // 4 verts * 12 components\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Turn on pixel art aa sampler\n        this._shader.setUniformBoolean('u_pixelart', this.pixelArtSampler);\n        // Bind textures to\n        this._bindTextures(gl);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._imageCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._imageCount = 0;\n        this._vertexIndex = 0;\n        this._textures.length = 0;\n        this._textureIndex = 0;\n        this._textureToIndex.clear();\n        this._images.clear();\n        this._imageToWidth.clear();\n        this._imageToHeight.clear();\n    }\n}\n\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.frag.glsl\n/* harmony default export */ const rectangle_renderer_frag = (\"#version 300 es\\r\\n\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\nin vec2 v_size; // in pixels\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness; // in pixels\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n    // modified from https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\\r\\n    vec2 uv = v_uv;\\r\\n    vec2 fragCoord = uv * v_size;\\r\\n    float maxX = v_size.x - v_strokeThickness;\\r\\n    float minX = v_strokeThickness;\\r\\n    float maxY = v_size.y - v_strokeThickness;\\r\\n    float minY = v_strokeThickness;\\r\\n\\r\\n    if (fragCoord.x < maxX && fragCoord.x > minX &&\\r\\n        fragCoord.y < maxY && fragCoord.y > minY) {\\r\\n      fragColor = v_color;\\r\\n    } else {\\r\\n      fragColor = v_strokeColor;\\r\\n    }\\r\\n    fragColor.a *= v_opacity;\\r\\n    fragColor.rgb *= fragColor.a;\\r\\n\\r\\n    // vec2 v2CenteredPos     = abs(fragCoord - v_size.xy / 2.0);\\r\\n    // vec2 v2HalfShapeSizePx = v_size.xy/2.0 - v_strokeThickness/2.0;\\r\\n\\r\\n    // float fHalfBorderDist      = 0.0;\\r\\n    // float fHalfBorderThickness = 0.0;\\r\\n\\r\\n    // if (fragCoord.x > max(v_radius, v_strokeThickness) && \\r\\n    //     fragCoord.x < v_size.x - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.y - v2HalfShapeSizePx.y;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else if (fragCoord.y > max(v_radius, v_strokeThickness) && \\r\\n    //          fragCoord.y < v_size.y - max(v_radius, v_strokeThickness))\\r\\n    // {\\r\\n    //     fHalfBorderDist      = v2CenteredPos.x - v2HalfShapeSizePx.x;\\r\\n    //     fHalfBorderThickness = v_strokeThickness / 2.0;\\r\\n    // }\\r\\n    // else\\r\\n    // {\\r\\n    //     vec2 edgeVec = max(vec2(0.0), v_radius - vec2(\\r\\n    //         uv.x > 0.5 ? v_size.x - fragCoord.x : fragCoord.x,\\r\\n    //         uv.y > 0.5 ? v_size.y - fragCoord.y : fragCoord.y));\\r\\n        \\r\\n    //     float ellipse_ab    = v_radius-v_strokeThickness;\\r\\n    //     vec2 ellipse_isect = (v_strokeThickness > v_radius || v_strokeThickness > v_radius) ? vec2(0.0) :\\r\\n    //                             edgeVec.xy * ellipse_ab*ellipse_ab / length(ellipse_ab*edgeVec.yx); \\r\\n            \\r\\n    //     fHalfBorderThickness = (v_radius - length(ellipse_isect)) / 2.0;\\r\\n    //     fHalfBorderDist      = length(edgeVec) - (v_radius - fHalfBorderThickness);\\r\\n    // }\\r\\n\\r\\n    // vec4 v4FromColor = v_strokeColor;\\r\\n    // v4FromColor.rgb *= v4FromColor.a;\\r\\n    // vec4 v4ToColor   = vec4(0.0); // background color is transparent\\r\\n    // if (fHalfBorderDist < 0.0) {\\r\\n    //     v4ToColor = v_color;\\r\\n    //     v4ToColor.rgb *= v4ToColor.a;\\r\\n    // }\\r\\n\\r\\n    // float mixPct = abs(fHalfBorderDist) - fHalfBorderThickness;\\r\\n\\r\\n    // vec4 finalColor = mix(v4FromColor, v4ToColor, mixPct);\\r\\n    // gl_FragColor = finalColor;\\r\\n}\");\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.vert.glsl\n/* harmony default export */ const rectangle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\nin vec2 a_size;\\r\\nout vec2 v_size;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through size\\r\\n   v_size = a_size;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// ./Graphics/Context/rectangle-renderer/rectangle-renderer.ts\n\n\n\n\n\n\n\n\n\n\nclass RectangleRenderer {\n    constructor() {\n        this.type = 'ex.rectangle';\n        this.priority = 0;\n        this._maxRectangles = 10922; // max(uint16) / 6 verts\n        this._rectangleCount = 0;\n        this._vertexIndex = 0;\n        this._transparent = Color.Transparent;\n        this._scratch1 = vec(0, 0);\n        this._scratch2 = vec(0, 0);\n        this._scratch3 = vec(0, 0);\n        this._scratch4 = vec(0, 0);\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // https://stackoverflow.com/questions/59197671/glsl-rounded-rectangle-with-variable-border\n        this._shader = new Shader({\n            gl,\n            fragmentSource: rectangle_renderer_frag,\n            vertexSource: rectangle_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 16 * 4 * this._maxRectangles,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_size', 2],\n                ['a_opacity', 1],\n                ['a_color', 4],\n                ['a_strokeColor', 4],\n                ['a_strokeThickness', 1]\n            ]\n        });\n        this._quads = new QuadIndexBuffer(gl, this._maxRectangles, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    _isFull() {\n        if (this._rectangleCount >= this._maxRectangles) {\n            return true;\n        }\n        return false;\n    }\n    draw(...args) {\n        if (args[0] instanceof Vector && args[1] instanceof Vector) {\n            this.drawLine.apply(this, args);\n        }\n        else {\n            this.drawRectangle.apply(this, args);\n        }\n    }\n    drawLine(start, end, color, thickness = 1) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._rectangleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const dir = end.sub(start);\n        const length = dir.magnitude;\n        const normal = dir.normalize().perpendicular();\n        const halfThick = thickness / 2;\n        /**\n         *    +---------------------^----------------------+\n         *    |                     | (normal)             |\n         *   (startX, startY)------------------>(endX, endY)\n         *    |                                            |\n         *    + -------------------------------------------+\n         */\n        const startTop = transform.multiply(normal.scale(halfThick, this._scratch1).add(start, this._scratch1), this._scratch1);\n        const startBottom = transform.multiply(normal.scale(-halfThick, this._scratch2).add(start, this._scratch2), this._scratch2);\n        const endTop = transform.multiply(normal.scale(halfThick, this._scratch3).add(end, this._scratch3), this._scratch3);\n        const endBottom = transform.multiply(normal.scale(-halfThick, this._scratch4).add(end, this._scratch4), this._scratch4);\n        if (snapToPixel) {\n            startTop.x = ~~(startTop.x + pixelSnapEpsilon);\n            startTop.y = ~~(startTop.y + pixelSnapEpsilon);\n            endTop.x = ~~(endTop.x + pixelSnapEpsilon);\n            endTop.y = ~~(endTop.y + pixelSnapEpsilon);\n            startBottom.x = ~~(startBottom.x + pixelSnapEpsilon);\n            startBottom.y = ~~(startBottom.y + pixelSnapEpsilon);\n            endBottom.x = ~~(endBottom.x + pixelSnapEpsilon);\n            endBottom.y = ~~(endBottom.y + pixelSnapEpsilon);\n        }\n        // TODO uv could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        const stroke = this._transparent;\n        const strokeThickness = 0;\n        const width = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = startTop.x;\n        vertexBuffer[this._vertexIndex++] = startTop.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = startBottom.x;\n        vertexBuffer[this._vertexIndex++] = startBottom.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = endTop.x;\n        vertexBuffer[this._vertexIndex++] = endTop.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = endBottom.x;\n        vertexBuffer[this._vertexIndex++] = endBottom.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = length;\n        vertexBuffer[this._vertexIndex++] = thickness;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / width;\n    }\n    drawRectangle(pos, width, height, color, stroke = Color.Transparent, strokeThickness = 0) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._rectangleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const topLeft = transform.multiply(pos.add(vec(0, 0)));\n        const topRight = transform.multiply(pos.add(vec(width, 0)));\n        const bottomRight = transform.multiply(pos.add(vec(width, height)));\n        const bottomLeft = transform.multiply(pos.add(vec(0, height)));\n        if (snapToPixel) {\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\n        }\n        // TODO uv could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = topRight.x;\n        vertexBuffer[this._vertexIndex++] = topRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness;\n    }\n    hasPendingDraws() {\n        return this._rectangleCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._rectangleCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._rectangleCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._rectangleCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._rectangleCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Graphics/Context/circle-renderer/circle-renderer.frag.glsl\n/* harmony default export */ const circle_renderer_frag = (\"#version 300 es\\r\\nprecision highp float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_uv;\\r\\n\\r\\n// Color coord to blend with image\\r\\nin lowp vec4 v_color;\\r\\n\\r\\n// Stroke color if used\\r\\nin lowp vec4 v_strokeColor;\\r\\n\\r\\n// Stroke thickness if used\\r\\nin lowp float v_strokeThickness;\\r\\n\\r\\n// Opacity\\r\\nin float v_opacity;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  // make (0, 0) the center the uv \\r\\n  vec2 uv = v_uv * 2.0 - 1.0;\\r\\n\\r\\n  vec4 color = v_color;\\r\\n  vec4 strokeColor = v_strokeColor;\\r\\n\\r\\n  // circle border is at radius 1.0 \\r\\n  // dist is > 0 when inside the circle \\r\\n  float d = length(uv);\\r\\n  float dist = 1.0 - length(uv);\\r\\n\\r\\n  // Fade based on fwidth\\r\\n  float fade = fwidth(dot(uv, uv));\\r\\n\\r\\n  // if dist is greater than 0 step to 1;\\r\\n  // when we cross this 0 threshold add a smooth fade\\r\\n  float fill = smoothstep(-fade/2.0, fade/2.0, dist);\\r\\n\\r\\n  // if dist is greater than the stroke thickness step to 1\\r\\n  float stroke = 1.0 - smoothstep(v_strokeThickness, v_strokeThickness + fade, dist);\\r\\n\\r\\n  strokeColor.a *= fill * stroke;\\r\\n  strokeColor.rgb *= strokeColor.a;\\r\\n\\r\\n  color.a *= fill * (1.0 - stroke);\\r\\n  color.rgb *= color.a;\\r\\n\\r\\n  vec4 finalColor = mix(vec4(0.0), (color + strokeColor), fill);\\r\\n  finalColor.rgb = finalColor.rgb * v_opacity;\\r\\n  finalColor.a = finalColor.a * v_opacity;\\r\\n  fragColor = finalColor;\\r\\n}\");\n;// ./Graphics/Context/circle-renderer/circle-renderer.vert.glsl\n/* harmony default export */ const circle_renderer_vert = (\"#version 300 es\\r\\nin vec2 a_position;\\r\\n\\r\\n// UV coordinate\\r\\nin vec2 a_uv;\\r\\nout vec2 v_uv;\\r\\n\\r\\n// Opacity \\r\\nin float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\nin vec4 a_color;\\r\\nout vec4 v_color;\\r\\n\\r\\nin vec4 a_strokeColor;\\r\\nout vec4 v_strokeColor;\\r\\n\\r\\nin float a_strokeThickness;\\r\\nout float v_strokeThickness;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\n\\r\\nvoid main() {\\r\\n   // Set the vertex position using the ortho transform matrix\\r\\n   gl_Position = u_matrix * vec4(a_position, 0.0, 1.0);\\r\\n\\r\\n   // Pass through UV coords\\r\\n   v_uv = a_uv;\\r\\n   // Pass through the Opacity to the fragment shader\\r\\n   v_opacity = a_opacity;\\r\\n   // Pass through the color to the fragment shader\\r\\n   v_color = a_color;\\r\\n   // Pass through the stroke color to the fragment shader\\r\\n   v_strokeColor = a_strokeColor;\\r\\n   // Pass through the stroke thickenss to the fragment shader\\r\\n   v_strokeThickness = a_strokeThickness;\\r\\n}\");\n;// ./Graphics/Context/circle-renderer/circle-renderer.ts\n\n\n\n\n\n\n\n\n\n\nclass CircleRenderer {\n    constructor() {\n        this.type = 'ex.circle';\n        this.priority = 0;\n        this._maxCircles = 10922; // max(uint16) / 6 verts\n        this._circleCount = 0;\n        this._vertexIndex = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            fragmentSource: circle_renderer_frag,\n            vertexSource: circle_renderer_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 14 * 4 * this._maxCircles,\n            type: 'dynamic'\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_opacity', 1],\n                ['a_color', 4],\n                ['a_strokeColor', 4],\n                ['a_strokeThickness', 1]\n            ]\n        });\n        this._quads = new QuadIndexBuffer(gl, this._maxCircles, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._shader.dispose();\n        this._context = null;\n        this._gl = null;\n    }\n    _isFull() {\n        if (this._circleCount >= this._maxCircles) {\n            return true;\n        }\n        return false;\n    }\n    draw(pos, radius, color, stroke = Color.Transparent, strokeThickness = 0) {\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._circleCount++;\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        const topLeft = transform.multiply(pos.add(vec(-radius, -radius)));\n        const topRight = transform.multiply(pos.add(vec(radius, -radius)));\n        const bottomRight = transform.multiply(pos.add(vec(radius, radius)));\n        const bottomLeft = transform.multiply(pos.add(vec(-radius, radius)));\n        if (snapToPixel) {\n            topLeft.x = ~~(topLeft.x + pixelSnapEpsilon);\n            topLeft.y = ~~(topLeft.y + pixelSnapEpsilon);\n            topRight.x = ~~(topRight.x + pixelSnapEpsilon);\n            topRight.y = ~~(topRight.y + pixelSnapEpsilon);\n            bottomLeft.x = ~~(bottomLeft.x + pixelSnapEpsilon);\n            bottomLeft.y = ~~(bottomLeft.y + pixelSnapEpsilon);\n            bottomRight.x = ~~(bottomRight.x + pixelSnapEpsilon);\n            bottomRight.y = ~~(bottomRight.y + pixelSnapEpsilon);\n        }\n        // TODO UV could be static vertex buffer\n        const uvx0 = 0;\n        const uvy0 = 0;\n        const uvx1 = 1;\n        const uvy1 = 1;\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        // (0, 0) - 0\n        vertexBuffer[this._vertexIndex++] = topLeft.x;\n        vertexBuffer[this._vertexIndex++] = topLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (0, 1) - 1\n        vertexBuffer[this._vertexIndex++] = bottomLeft.x;\n        vertexBuffer[this._vertexIndex++] = bottomLeft.y;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (1, 0) - 2\n        vertexBuffer[this._vertexIndex++] = topRight.x;\n        vertexBuffer[this._vertexIndex++] = topRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n        // (1, 1) - 3\n        vertexBuffer[this._vertexIndex++] = bottomRight.x;\n        vertexBuffer[this._vertexIndex++] = bottomRight.y;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = color.r / 255;\n        vertexBuffer[this._vertexIndex++] = color.g / 255;\n        vertexBuffer[this._vertexIndex++] = color.b / 255;\n        vertexBuffer[this._vertexIndex++] = color.a;\n        vertexBuffer[this._vertexIndex++] = stroke.r / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.g / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.b / 255;\n        vertexBuffer[this._vertexIndex++] = stroke.a;\n        vertexBuffer[this._vertexIndex++] = strokeThickness / radius;\n    }\n    hasPendingDraws() {\n        return this._circleCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._circleCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._layout.use(true);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Bind index buffer\n        this._quads.bind();\n        // Draw all the quads\n        gl.drawElements(gl.TRIANGLES, this._circleCount * 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount += this._circleCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        // Reset\n        this._circleCount = 0;\n        this._vertexIndex = 0;\n    }\n}\n\n;// ./Util/Pool.ts\n\nclass Pool {\n    constructor(builder, recycler, maxObjects = 100) {\n        this.builder = builder;\n        this.recycler = recycler;\n        this.maxObjects = maxObjects;\n        this.totalAllocations = 0;\n        this.index = 0;\n        this.objects = [];\n        this.disableWarnings = false;\n        this._logger = Logger.getInstance();\n    }\n    dispose() {\n        this.objects.length = 0;\n    }\n    preallocate() {\n        for (let i = 0; i < this.maxObjects; i++) {\n            this.objects[i] = this.builder();\n        }\n    }\n    /**\n     * Use many instances out of the in the context and return all to the pool.\n     *\n     * By returning values out of the context they will be un-hooked from the pool and are free to be passed to consumers\n     * @param context\n     */\n    using(context) {\n        const result = context(this);\n        if (result) {\n            return this.done(...result);\n        }\n        return this.done();\n    }\n    /**\n     * Use a single instance out of th pool and immediately return it to the pool\n     * @param context\n     */\n    borrow(context) {\n        const object = this.get();\n        context(object);\n        this.index--;\n    }\n    /**\n     * Retrieve a value from the pool, will allocate a new instance if necessary or recycle from the pool\n     */\n    get() {\n        if (this.index === this.maxObjects) {\n            if (!this.disableWarnings) {\n                this._logger.warn('Max pooled objects reached, possible memory leak? Doubling');\n            }\n            this.maxObjects = this.maxObjects * 2;\n        }\n        if (this.objects[this.index]) {\n            // Pool has an available object already constructed\n            if (this.recycler) {\n                return this.recycler(this.objects[this.index++]);\n            }\n            return this.objects[this.index++];\n        }\n        else {\n            // New allocation\n            this.totalAllocations++;\n            const object = (this.objects[this.index++] = this.builder());\n            return object;\n        }\n    }\n    done(...objects) {\n        // All objects in pool now considered \"free\"\n        this.index = 0;\n        for (const object of objects) {\n            const poolIndex = this.objects.indexOf(object);\n            // Build a new object to take the pool place\n            this.objects[poolIndex] = this.builder();\n            this.totalAllocations++;\n        }\n        return objects;\n    }\n}\n\n;// ./Graphics/Context/draw-call.ts\n\n\nclass DrawCall {\n    constructor() {\n        this.z = 0;\n        this.priority = 0;\n        this.renderer = '';\n        this.transform = AffineMatrix.identity();\n        this.state = {\n            z: 0,\n            opacity: 1,\n            tint: Color.White,\n            material: null\n        };\n        this.args = new Array(10);\n    }\n}\n\n;// ./Graphics/Context/material.ts\n\n\n\n\n\n\nconst defaultVertexSource = `#version 300 es\r\nin vec2 a_position;\r\n\r\nin vec2 a_uv;\r\nout vec2 v_uv;\r\n\r\nin vec2 a_screenuv;\r\nout vec2 v_screenuv;\r\n\r\nuniform mat4 u_matrix;\r\nuniform mat4 u_transform;\r\n\r\nvoid main() {\r\n  // Set the vertex position using the ortho & transform matrix\r\n  gl_Position = u_matrix * u_transform * vec4(a_position, 0.0, 1.0);\r\n\r\n  // Pass through the UV coord to the fragment shader\r\n  v_uv = a_uv;\r\n  v_screenuv = a_screenuv;\r\n}\r\n`;\nclass Material {\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._color = Color.Transparent;\n        this._initialized = false;\n        this._images = new Map();\n        this._textures = new Map();\n        const { color, name, vertexSource, fragmentSource, graphicsContext, images } = options;\n        this._name = name !== null && name !== void 0 ? name : 'anonymous material';\n        this._vertexSource = vertexSource !== null && vertexSource !== void 0 ? vertexSource : defaultVertexSource;\n        this._fragmentSource = fragmentSource;\n        this._color = color !== null && color !== void 0 ? color : this._color;\n        if (!graphicsContext) {\n            throw Error(`Material ${name} must be provided an excalibur webgl graphics context`);\n        }\n        if (graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this._graphicsContext = graphicsContext;\n            this._initialize(graphicsContext);\n        }\n        else {\n            this._logger.warn(`Material ${name} was created in 2D Canvas mode, currently only WebGL is supported`);\n        }\n        if (images) {\n            for (const key in images) {\n                this.addImageSource(key, images[key]);\n            }\n        }\n    }\n    _initialize(graphicsContextWebGL) {\n        if (this._initialized) {\n            return;\n        }\n        const gl = graphicsContextWebGL.__gl;\n        // max texture slots - 2 for the graphic texture and screen texture\n        this._maxTextureSlots = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS) - 2;\n        this._shader = graphicsContextWebGL.createShader({\n            vertexSource: this._vertexSource,\n            fragmentSource: this._fragmentSource\n        });\n        this._shader.compile();\n        this._initialized = true;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(c) {\n        this._color = c;\n    }\n    get name() {\n        var _a;\n        return (_a = this._name) !== null && _a !== void 0 ? _a : 'anonymous material';\n    }\n    get isUsingScreenTexture() {\n        return this._fragmentSource.includes('u_screen_texture');\n    }\n    update(callback) {\n        if (this._shader) {\n            this._shader.use();\n            callback(this._shader);\n        }\n    }\n    getShader() {\n        return this._shader;\n    }\n    addImageSource(textureUniformName, image) {\n        if (this._images.size < this._maxTextureSlots) {\n            this._images.set(textureUniformName, image);\n        }\n        else {\n            this._logger.warn(`Max number texture slots ${this._maxTextureSlots} have been reached for material \"${this.name}\", ` +\n                `no more textures will be uploaded due to hardware constraints.`);\n        }\n    }\n    removeImageSource(textureName) {\n        const image = this._images.get(textureName);\n        this._graphicsContext.textureLoader.delete(image.image);\n        this._images.delete(textureName);\n    }\n    _loadImageSource(image) {\n        const imageElement = image.image;\n        const maybeFiltering = imageElement.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(imageElement.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(imageElement.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = imageElement.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._graphicsContext.textureLoader.load(imageElement, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        imageElement.removeAttribute('forceUpload');\n        if (!this._textures.has(image)) {\n            this._textures.set(image, texture);\n        }\n        return texture;\n    }\n    uploadAndBind(gl, startingTextureSlot = 2) {\n        let textureSlot = startingTextureSlot;\n        for (const [textureName, image] of this._images.entries()) {\n            if (!image.isLoaded()) {\n                this._logger.warnOnce(`Image named ${textureName} in material ${this.name} not loaded, nothing will be uploaded to the shader.` +\n                    ` Did you forget to add this to a loader? https://excaliburjs.com/docs/loaders/`);\n                continue;\n            } // skip unloaded images, maybe warn\n            const texture = this._loadImageSource(image);\n            gl.activeTexture(gl.TEXTURE0 + textureSlot);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            this._shader.trySetUniformInt(textureName, textureSlot);\n            textureSlot++;\n        }\n    }\n    use() {\n        if (this._initialized) {\n            // bind the shader\n            this._shader.use();\n            // Apply standard uniforms\n            this._shader.trySetUniformFloatColor('u_color', this._color);\n        }\n        else {\n            throw Error(`Material ${this.name} not yet initialized, use the ExcaliburGraphicsContext.createMaterial() to work around this.`);\n        }\n    }\n}\n\n;// ./Graphics/Context/material-renderer/material-renderer.ts\n\n\n\n\n\n\n\n\nclass MaterialRenderer {\n    constructor() {\n        this.type = 'ex.material';\n        this.priority = 0;\n        this._textures = [];\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            size: 6 * 4, // 6 components * 4 verts\n            type: 'dynamic'\n        });\n        // Setup a vertex layout/buffer to the material\n        this._layout = new VertexLayout({\n            gl,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2],\n                ['a_screenuv', 2]\n            ],\n            suppressWarnings: true\n        });\n        // Setup index buffer\n        this._quads = new QuadIndexBuffer(gl, 1, true);\n    }\n    dispose() {\n        this._buffer.dispose();\n        this._quads.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        const gl = this._gl;\n        // Extract context info\n        const material = this._context.material;\n        if (!material) {\n            return;\n        }\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        // material shader\n        const shader = material.getShader();\n        // construct geometry, or hold on to it in the material?\n        // geometry primitive for drawing rectangles?\n        // update data\n        const vertexBuffer = this._layout.vertexBuffer.bufferData;\n        let vertexIndex = 0;\n        let width = (image === null || image === void 0 ? void 0 : image.width) || swidth || 0;\n        let height = (image === null || image === void 0 ? void 0 : image.height) || sheight || 0;\n        let view = [0, 0, (_a = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _a !== void 0 ? _a : 0, (_b = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _b !== void 0 ? _b : 0];\n        let dest = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1];\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            view = [sx !== null && sx !== void 0 ? sx : 1, sy !== null && sy !== void 0 ? sy : 1, (_c = swidth !== null && swidth !== void 0 ? swidth : image === null || image === void 0 ? void 0 : image.width) !== null && _c !== void 0 ? _c : 0, (_d = sheight !== null && sheight !== void 0 ? sheight : image === null || image === void 0 ? void 0 : image.height) !== null && _d !== void 0 ? _d : 0];\n            dest = [dx, dy];\n            width = dwidth;\n            height = dheight;\n        }\n        sx = view[0];\n        sy = view[1];\n        const sw = view[2];\n        const sh = view[3];\n        const topLeft = vec(dest[0], dest[1]);\n        const topRight = vec(dest[0] + width, dest[1]);\n        const bottomLeft = vec(dest[0], dest[1] + height);\n        const bottomRight = vec(dest[0] + width, dest[1] + height);\n        const imageWidth = image.width || width;\n        const imageHeight = image.height || height;\n        const uvx0 = sx / imageWidth;\n        const uvy0 = sy / imageHeight;\n        const uvx1 = (sx + sw - 0.01) / imageWidth;\n        const uvy1 = (sy + sh - 0.01) / imageHeight;\n        const topLeftScreen = transform.getPosition();\n        const bottomRightScreen = topLeftScreen.add(bottomRight);\n        const screenUVX0 = topLeftScreen.x / this._context.width;\n        const screenUVY0 = topLeftScreen.y / this._context.height;\n        const screenUVX1 = bottomRightScreen.x / this._context.width;\n        const screenUVY1 = bottomRightScreen.y / this._context.height;\n        // (0, 0) - 0\n        vertexBuffer[vertexIndex++] = topLeft.x;\n        vertexBuffer[vertexIndex++] = topLeft.y;\n        vertexBuffer[vertexIndex++] = uvx0;\n        vertexBuffer[vertexIndex++] = uvy0;\n        vertexBuffer[vertexIndex++] = screenUVX0;\n        vertexBuffer[vertexIndex++] = screenUVY0;\n        // (0, 1) - 1\n        vertexBuffer[vertexIndex++] = bottomLeft.x;\n        vertexBuffer[vertexIndex++] = bottomLeft.y;\n        vertexBuffer[vertexIndex++] = uvx0;\n        vertexBuffer[vertexIndex++] = uvy1;\n        vertexBuffer[vertexIndex++] = screenUVX0;\n        vertexBuffer[vertexIndex++] = screenUVY1;\n        // (1, 0) - 2\n        vertexBuffer[vertexIndex++] = topRight.x;\n        vertexBuffer[vertexIndex++] = topRight.y;\n        vertexBuffer[vertexIndex++] = uvx1;\n        vertexBuffer[vertexIndex++] = uvy0;\n        vertexBuffer[vertexIndex++] = screenUVX1;\n        vertexBuffer[vertexIndex++] = screenUVY0;\n        // (1, 1) - 3\n        vertexBuffer[vertexIndex++] = bottomRight.x;\n        vertexBuffer[vertexIndex++] = bottomRight.y;\n        vertexBuffer[vertexIndex++] = uvx1;\n        vertexBuffer[vertexIndex++] = uvy1;\n        vertexBuffer[vertexIndex++] = screenUVX1;\n        vertexBuffer[vertexIndex++] = screenUVY1;\n        // This creates and uploads the texture if not already done\n        const texture = this._addImageAsTexture(image);\n        // apply material\n        material.use();\n        this._layout.shader = shader;\n        // apply layout and geometry\n        this._layout.use(true);\n        // apply time in ms since the page (performance.now())\n        shader.trySetUniformFloat('u_time_ms', performance.now());\n        // apply opacity\n        shader.trySetUniformFloat('u_opacity', opacity);\n        // apply resolution\n        shader.trySetUniformFloatVector('u_resolution', vec(this._context.width, this._context.height));\n        // apply graphic resolution\n        shader.trySetUniformFloatVector('u_graphic_resolution', vec(imageWidth, imageHeight));\n        // apply size\n        shader.trySetUniformFloatVector('u_size', vec(sw, sh));\n        // apply orthographic projection\n        shader.trySetUniformMatrix('u_matrix', this._context.ortho);\n        // apply geometry transform\n        shader.trySetUniformMatrix('u_transform', transform.to4x4());\n        // bind graphic image texture 'uniform sampler2D u_graphic;'\n        gl.activeTexture(gl.TEXTURE0 + 0);\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        shader.trySetUniformInt('u_graphic', 0);\n        // bind the screen texture\n        gl.activeTexture(gl.TEXTURE0 + 1);\n        gl.bindTexture(gl.TEXTURE_2D, this._context.materialScreenTexture);\n        shader.trySetUniformInt('u_screen_texture', 1);\n        // bind any additional textures in the material\n        material.uploadAndBind(gl);\n        // bind quad index buffer\n        this._quads.bind();\n        // Draw a single quad\n        gl.drawElements(gl.TRIANGLES, 6, this._quads.bufferGlType, 0);\n        GraphicsDiagnostics.DrawnImagesCount++;\n        GraphicsDiagnostics.DrawCallCount++;\n    }\n    _addImageAsTexture(image) {\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n        }\n        return texture;\n    }\n    hasPendingDraws() {\n        return false;\n    }\n    flush() {\n        // flush does not do anything, material renderer renders immediately per draw\n    }\n}\n\n;// ./Graphics/Context/particle-renderer/particle-vertex.glsl\n/* harmony default export */ const particle_vertex = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\nuniform float deltaMs;\\r\\nuniform float maxLifeMs;\\r\\nuniform vec2 gravity;\\r\\nuniform vec2 focus;\\r\\nuniform float focusAccel;\\r\\nuniform mat4 u_matrix;\\r\\nuniform mat4 u_transform;\\r\\nuniform float startSize;\\r\\nuniform float endSize;\\r\\n// uniform sampler2D obstacle;\\r\\n\\r\\nlayout(location=0)in vec2 position;\\r\\nlayout(location=1)in vec2 velocity;\\r\\nlayout(location=2)in float rotation;\\r\\nlayout(location=3)in float angularVelocity;\\r\\nlayout(location=4)in float lifeMs;\\r\\n\\r\\n// TODO z index to handle buffer wrapping?\\r\\n\\r\\n// DO NOT RE-ORDER\\r\\nout vec2 finalPosition;\\r\\nout vec2 finalVelocity;\\r\\nout float finalRotation;\\r\\nout float finalAngularVelocity;\\r\\nout float finalLifeMs;\\r\\nvoid main(){\\r\\n  // Evolve particle\\r\\n  float seconds = deltaMs / 1000.;\\r\\n  // euler integration\\r\\n  // Weird artifact of re-using the same buffer layout for update/draw\\r\\n  // we need differently named variables\\r\\n  vec2 finalGravity = gravity + normalize(focus - position) * focusAccel;\\r\\n  finalVelocity = velocity + finalGravity * seconds;\\r\\n  finalPosition = position + velocity * seconds + finalGravity * .5 * seconds * seconds;\\r\\n  finalRotation = rotation + angularVelocity * seconds;\\r\\n  finalAngularVelocity = angularVelocity;\\r\\n  finalLifeMs = clamp(lifeMs - deltaMs, 0., maxLifeMs);\\r\\n\\r\\n  // Collision mask sampling\\r\\n  // vec2 samplePoint = finalPosition / vec2(width, height);\\r\\n  // vec4 collides = texture(obstacle, samplePoint);\\r\\n  // if (distance(collides,vec4(0.)) > .01) {\\r\\n  //   // non opaque means we collide! recalc final pos/vel\\r\\n  //   vec2 newVelocity = velocity * -.1;// lose energy\\r\\n  //   finalVelocity = newVelocity + gravity * seconds;\\r\\n  //   finalPosition = position + newVelocity * seconds + gravity * .5 * seconds * seconds;\\r\\n  // }\\r\\n\\r\\n  float lifePercent = finalLifeMs / maxLifeMs;\\r\\n  vec2 transformedPos = (u_matrix * u_transform * vec4(finalPosition,0.,1.)).xy;\\r\\n  float scale = sqrt(u_transform[0][0] * u_transform[0][0] + u_transform[1][1] * u_transform[1][1]);\\r\\n  gl_Position = vec4(transformedPos, 1.0 - lifePercent, 1.); // use life percent to sort z\\r\\n  gl_PointSize = mix(startSize, endSize, 1.0 - lifePercent) * scale;\\r\\n}\");\n;// ./Graphics/Context/particle-renderer/particle-fragment.glsl\n/* harmony default export */ const particle_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\nuniform sampler2D graphic;\\r\\nuniform bool useTexture;\\r\\nuniform float maxLifeMs;\\r\\n\\r\\nuniform vec4 beginColor;\\r\\nuniform vec4 endColor;\\r\\nuniform bool fade;\\r\\nuniform float startOpacity;\\r\\n\\r\\nin float finalRotation;\\r\\nin float finalLifeMs;\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main(){\\r\\n\\r\\n  float lifePct = finalLifeMs / maxLifeMs;\\r\\n\\r\\n  if (useTexture) {\\r\\n    /** Draw texture */\\r\\n    if (lifePct <= 0.) discard;\\r\\n    float mid = .5;\\r\\n    float cosine = cos(finalRotation);\\r\\n    float sine = sin(finalRotation);\\r\\n    vec2 rotated = vec2(cosine * (gl_PointCoord.x - mid) + sine * (gl_PointCoord.y - mid) + mid,\\r\\n                        cosine * (gl_PointCoord.y - mid) - sine * (gl_PointCoord.x - mid) + mid);\\r\\n    vec4 color = texture(graphic, rotated);\\r\\n    fragColor = color * (fade ? lifePct : 1.0);\\r\\n  } else {\\r\\n    /** Draw circle */\\r\\n    if (lifePct <= 0.) discard;\\r\\n    vec2 uv = gl_PointCoord.xy * 2.0 - 1.0;\\r\\n    float dist = 1.0 - length(uv);\\r\\n    float edge = fwidth(dot(uv, uv));\\r\\n    float circle = smoothstep(-edge/2.0, edge/2.0, dist);\\r\\n    vec3 color = mix(beginColor.rgb, endColor.rgb, 1.0 - lifePct);\\r\\n    fragColor.rgb = color;\\r\\n    fragColor.a = startOpacity * circle * (fade ? lifePct : 1.0);// * mix(beginColor.a, endColor.a, 1.0 - lifePct);\\r\\n    fragColor.rgb *= fragColor.a;\\r\\n  }\\r\\n}\");\n;// ./Math/coord-plane.ts\n/**\n * Enum representing the coordinate plane for the position 2D vector in the {@apilink TransformComponent}\n */\nvar CoordPlane;\n(function (CoordPlane) {\n    /**\n     * The world coordinate plane (default) represents world space, any entities drawn with world\n     * space move when the camera moves.\n     */\n    CoordPlane[\"World\"] = \"world\";\n    /**\n     * The screen coordinate plane represents screen space, entities drawn in screen space are pinned\n     * to screen coordinates ignoring the camera.\n     */\n    CoordPlane[\"Screen\"] = \"screen\";\n})(CoordPlane || (CoordPlane = {}));\n\n;// ./Math/vector-view.ts\n\nclass VectorView extends Vector {\n    constructor(options) {\n        super(0, 0);\n        this._getX = options.getX;\n        this._getY = options.getY;\n        this._setX = options.setX;\n        this._setY = options.setY;\n    }\n    get x() {\n        return (this._x = this._getX());\n    }\n    set x(val) {\n        this._setX(val);\n        this._x = val;\n    }\n    get y() {\n        return (this._y = this._getY());\n    }\n    set y(val) {\n        this._setY(val);\n        this._y = val;\n    }\n}\n\n;// ./Math/watch-vector.ts\n\n/**\n * Wraps a vector and watches for changes in the x/y, modifies the original vector.\n */\nclass WatchVector extends Vector {\n    constructor(original, change) {\n        super(original.x, original.y);\n        this.original = original;\n        this.change = change;\n    }\n    get x() {\n        return (this._x = this.original.x);\n    }\n    set x(newX) {\n        if (newX !== this._x) {\n            this.change(newX, this._y);\n            this._x = this.original.x = newX;\n        }\n    }\n    get y() {\n        return (this._y = this.original.y);\n    }\n    set y(newY) {\n        if (newY !== this._y) {\n            this.change(this._x, newY);\n            this._y = this.original.y = newY;\n        }\n    }\n    setTo(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\n;// ./Math/transform.ts\n\n\n\n\n\nclass transform_Transform {\n    constructor() {\n        this._parent = null;\n        this._children = [];\n        this._pos = new WatchVector(vec(0, 0), () => {\n            this.flagDirty();\n        });\n        this._globalPos = new VectorView({\n            getX: () => this.matrix.data[4],\n            getY: () => this.matrix.data[5],\n            setX: (x) => {\n                if (this.parent) {\n                    const { x: newX } = this.parent.inverse.multiply(vec(x, this.pos.y));\n                    this.pos.x = newX;\n                }\n                else {\n                    this.pos.x = x;\n                }\n                if (x !== this.matrix.data[4]) {\n                    this.flagDirty();\n                }\n            },\n            setY: (y) => {\n                if (this.parent) {\n                    const { y: newY } = this.parent.inverse.multiply(vec(this.pos.x, y));\n                    this.pos.y = newY;\n                }\n                else {\n                    this.pos.y = y;\n                }\n                if (y !== this.matrix.data[5]) {\n                    this.flagDirty();\n                }\n            }\n        });\n        this._rotation = 0;\n        this._scale = new WatchVector(vec(1, 1), () => {\n            this.flagDirty();\n        });\n        this._globalScale = new VectorView({\n            getX: () => (this.parent ? this.matrix.getScaleX() : this.scale.x),\n            getY: () => (this.parent ? this.matrix.getScaleY() : this.scale.y),\n            setX: (x) => {\n                if (this.parent) {\n                    const globalScaleX = this.parent.globalScale.x;\n                    this.scale.x = x / globalScaleX;\n                }\n                else {\n                    this.scale.x = x;\n                }\n            },\n            setY: (y) => {\n                if (this.parent) {\n                    const globalScaleY = this.parent.globalScale.y;\n                    this.scale.y = y / globalScaleY;\n                }\n                else {\n                    this.scale.y = y;\n                }\n            }\n        });\n        this._z = 0;\n        this._isDirty = false;\n        this._isInverseDirty = false;\n        this._matrix = AffineMatrix.identity();\n        this._inverse = AffineMatrix.identity();\n        this._scratch = AffineMatrix.identity();\n    }\n    get parent() {\n        return this._parent;\n    }\n    set parent(transform) {\n        if (this._parent) {\n            const index = this._parent._children.indexOf(this);\n            if (index > -1) {\n                this._parent._children.splice(index, 1);\n            }\n        }\n        this._parent = transform;\n        if (this._parent) {\n            this._parent._children.push(this);\n        }\n        this.flagDirty();\n    }\n    get children() {\n        return this._children;\n    }\n    set pos(v) {\n        this._pos.x = v.x;\n        this._pos.y = v.y;\n    }\n    get pos() {\n        return this._pos;\n    }\n    set globalPos(v) {\n        let localPos = v.clone();\n        if (this.parent) {\n            localPos = this.parent.inverse.multiply(v);\n        }\n        if (!localPos.equals(this._pos)) {\n            this._pos = localPos;\n            this.flagDirty();\n        }\n    }\n    get globalPos() {\n        return this._globalPos;\n    }\n    set rotation(rotation) {\n        const canonRotation = canonicalizeAngle(rotation);\n        if (canonRotation !== this._rotation) {\n            this.flagDirty();\n        }\n        this._rotation = canonRotation;\n    }\n    get rotation() {\n        return this._rotation;\n    }\n    set globalRotation(rotation) {\n        let inverseRotation = 0;\n        if (this.parent) {\n            inverseRotation = this.parent.globalRotation;\n        }\n        const canonRotation = canonicalizeAngle(rotation + inverseRotation);\n        if (canonRotation !== this._rotation) {\n            this.flagDirty();\n        }\n        this._rotation = canonRotation;\n    }\n    get globalRotation() {\n        if (this.parent) {\n            return this.matrix.getRotation();\n        }\n        return this.rotation;\n    }\n    set scale(v) {\n        this._scale.x = v.x;\n        this._scale.y = v.y;\n    }\n    get scale() {\n        return this._scale;\n    }\n    set globalScale(v) {\n        let inverseScale = vec(1, 1);\n        if (this.parent) {\n            inverseScale = this.parent.globalScale;\n        }\n        this.scale = v.scale(vec(1 / inverseScale.x, 1 / inverseScale.y));\n    }\n    get globalScale() {\n        return this._globalScale;\n    }\n    set z(z) {\n        this._z = z;\n        this.flagDirty();\n    }\n    get z() {\n        return this._z;\n    }\n    set globalZ(z) {\n        if (this.parent) {\n            this.z = z - this.parent.globalZ;\n        }\n        else {\n            this.z = z;\n        }\n    }\n    get globalZ() {\n        if (this.parent) {\n            return this.z + this.parent.globalZ;\n        }\n        return this.z;\n    }\n    /**\n     * Calculates and returns the matrix representation of this transform\n     *\n     * Avoid mutating the matrix to update the transform, it is not the source of truth.\n     * Update the transform pos, rotation, scale.\n     */\n    get matrix() {\n        if (this._isDirty) {\n            if (this.parent === null) {\n                this._calculateMatrix().clone(this._matrix);\n            }\n            else {\n                this.parent.matrix.multiply(this._calculateMatrix()).clone(this._matrix);\n            }\n            this._isDirty = false;\n        }\n        return this._matrix;\n    }\n    /**\n     * Calculates and returns the inverse matrix representation of this transform\n     */\n    get inverse() {\n        if (this._isInverseDirty) {\n            this.matrix.inverse(this._inverse);\n            this._isInverseDirty = false;\n        }\n        return this._inverse;\n    }\n    _calculateMatrix() {\n        this._scratch.data[0] = Math.cos(this._rotation);\n        this._scratch.data[1] = Math.sin(this._rotation);\n        this._scratch.data[2] = -Math.sin(this._rotation);\n        this._scratch.data[3] = Math.cos(this.rotation);\n        this._scratch.data[4] = this._pos.x;\n        this._scratch.data[5] = this._pos.y;\n        this._scratch.scale(this._scale.x, this._scale.y);\n        return this._scratch;\n    }\n    flagDirty() {\n        this._isDirty = true;\n        this._isInverseDirty = true;\n        for (let i = 0; i < this._children.length; i++) {\n            this._children[i].flagDirty();\n        }\n    }\n    apply(point) {\n        return this.matrix.multiply(point);\n    }\n    applyInverse(point) {\n        return this.inverse.multiply(point);\n    }\n    setTransform(pos, rotation, scale) {\n        this._pos.x = pos.x;\n        this._pos.y = pos.y;\n        this._rotation = canonicalizeAngle(rotation);\n        this._scale.x = scale.x;\n        this._scale.y = scale.y;\n        this.flagDirty();\n    }\n    /**\n     * Returns true if the transform has a negative x scale or y scale, but not both\n     */\n    isMirrored() {\n        const signBitX = sign(this.scale.x) >>> 31;\n        const signBitY = sign(this.scale.y) >>> 31;\n        const mirrored = signBitX ^ signBitY;\n        return !!mirrored;\n    }\n    /**\n     * Clones the current transform\n     * **Warning does not clone the parent**\n     * @param dest\n     */\n    clone(dest) {\n        const target = dest !== null && dest !== void 0 ? dest : new transform_Transform();\n        this._pos.clone(target._pos);\n        target._z = this._z;\n        target._rotation = this._rotation;\n        this._scale.clone(target._scale);\n        target.flagDirty();\n        return target;\n    }\n    /**\n     * Clones but keeps the same parent reference\n     */\n    cloneWithParent(dest) {\n        const target = dest !== null && dest !== void 0 ? dest : new transform_Transform();\n        this._pos.clone(target._pos);\n        target._z = this._z;\n        target._rotation = this._rotation;\n        this._scale.clone(target._scale);\n        target.parent = this.parent;\n        target.flagDirty();\n        return target;\n    }\n    toString() {\n        return this.matrix.toString();\n    }\n}\n\n;// ./EntityComponentSystem/Component.ts\n/**\n *\n */\nfunction isComponentCtor(value) {\n    return !!value && !!value.prototype && !!value.prototype.constructor;\n}\n/**\n * Type guard to check if a component implements clone\n * @param x\n */\nfunction hasClone(x) {\n    return !!(x === null || x === void 0 ? void 0 : x.clone);\n}\n/**\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity possesses\n *\n * Implementations of Component must have a zero-arg constructor to support dependencies\n *\n * ```typescript\n * class MyComponent extends ex.Component {\n *   // zero arg support required if you want to use component dependencies\n *   constructor(public optionalPos?: ex.Vector) {}\n * }\n * ```\n */\nclass Component {\n    constructor() {\n        // TODO maybe generate a unique id?\n        /**\n         * Current owning {@apilink Entity}, if any, of this component. Null if not added to any {@apilink Entity}\n         */\n        this.owner = undefined;\n    }\n    /**\n     * Clones any properties on this component, if that property value has a `clone()` method it will be called\n     */\n    clone() {\n        const newComponent = new this.constructor();\n        for (const prop in this) {\n            if (this.hasOwnProperty(prop)) {\n                const val = this[prop];\n                if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\n                    newComponent[prop] = val.clone();\n                }\n                else {\n                    newComponent[prop] = val;\n                }\n            }\n        }\n        return newComponent;\n    }\n}\n\n;// ./Util/Observable.ts\n/**\n * Simple Observable implementation\n * @template T is the typescript Type that defines the data being observed\n */\nclass Observable {\n    constructor() {\n        this.observers = [];\n        this.subscriptions = [];\n    }\n    /**\n     * Register an observer to listen to this observable\n     * @param observer\n     */\n    register(observer) {\n        this.observers.push(observer);\n    }\n    /**\n     * Register a callback to listen to this observable\n     * @param func\n     */\n    subscribe(func) {\n        this.subscriptions.push(func);\n    }\n    /**\n     * Remove an observer from the observable\n     * @param observer\n     */\n    unregister(observer) {\n        const i = this.observers.indexOf(observer);\n        if (i !== -1) {\n            this.observers.splice(i, 1);\n        }\n    }\n    /**\n     * Remove a callback that is listening to this observable\n     * @param func\n     */\n    unsubscribe(func) {\n        const i = this.subscriptions.indexOf(func);\n        if (i !== -1) {\n            this.subscriptions.splice(i, 1);\n        }\n    }\n    /**\n     * Broadcasts a message to all observers and callbacks\n     * @param message\n     */\n    notifyAll(message) {\n        const observersLength = this.observers.length;\n        for (let i = 0; i < observersLength; i++) {\n            this.observers[i].notify(message);\n        }\n        const subscriptionsLength = this.subscriptions.length;\n        for (let i = 0; i < subscriptionsLength; i++) {\n            this.subscriptions[i](message);\n        }\n    }\n    /**\n     * Removes all observers and callbacks\n     */\n    clear() {\n        this.observers.length = 0;\n        this.subscriptions.length = 0;\n    }\n}\n\n;// ./EntityComponentSystem/Components/TransformComponent.ts\n\n\n\n\n\nclass TransformComponent extends Component {\n    constructor() {\n        super(...arguments);\n        this._logger = Logger.getInstance();\n        this._parentComponent = null;\n        this._transform = new transform_Transform();\n        this._addChildTransform = (child) => {\n            const childTxComponent = child.get(TransformComponent);\n            if (childTxComponent) {\n                childTxComponent._transform.parent = this._transform;\n                childTxComponent._parentComponent = this;\n            }\n        };\n        /**\n         * Observable that emits when the z index changes on this component\n         */\n        this.zIndexChanged$ = new Observable();\n        this._coordPlane = CoordPlane.World;\n    }\n    get() {\n        return this._transform;\n    }\n    onAdd(owner) {\n        for (const child of owner.children) {\n            this._addChildTransform(child);\n        }\n        owner.childrenAdded$.subscribe((child) => this._addChildTransform(child));\n        owner.childrenRemoved$.subscribe((child) => {\n            const childTxComponent = child.get(TransformComponent);\n            if (childTxComponent) {\n                childTxComponent._transform.parent = null;\n                childTxComponent._parentComponent = null;\n            }\n        });\n    }\n    onRemove(_previousOwner) {\n        this._transform.parent = null;\n        this._parentComponent = null;\n    }\n    /**\n     * The z-index ordering of the entity, a higher values are drawn on top of lower values.\n     * For example z=99 would be drawn on top of z=0.\n     */\n    get z() {\n        return this._transform.z;\n    }\n    set z(val) {\n        const oldz = this._transform.z;\n        this._transform.z = val;\n        if (oldz !== val) {\n            this.zIndexChanged$.notifyAll(val);\n        }\n    }\n    get globalZ() {\n        return this._transform.globalZ;\n    }\n    set globalZ(z) {\n        this._transform.globalZ = z;\n    }\n    /**\n     * The {@apilink CoordPlane | `coordinate plane`} for this transform for the entity.\n     */\n    get coordPlane() {\n        if (this._parentComponent) {\n            return this._parentComponent.coordPlane;\n        }\n        return this._coordPlane;\n    }\n    set coordPlane(value) {\n        var _a;\n        if (!this._parentComponent) {\n            this._coordPlane = value;\n        }\n        else {\n            this._logger.warn(`Cannot set coordinate plane on child entity ${(_a = this.owner) === null || _a === void 0 ? void 0 : _a.name}, children inherit their coordinate plane from their parents.`);\n        }\n    }\n    get pos() {\n        return this._transform.pos;\n    }\n    set pos(v) {\n        this._transform.pos = v;\n    }\n    get globalPos() {\n        return this._transform.globalPos;\n    }\n    set globalPos(v) {\n        this._transform.globalPos = v;\n    }\n    get rotation() {\n        return this._transform.rotation;\n    }\n    set rotation(rotation) {\n        this._transform.rotation = rotation;\n    }\n    get globalRotation() {\n        return this._transform.globalRotation;\n    }\n    set globalRotation(rotation) {\n        this._transform.globalRotation = rotation;\n    }\n    get scale() {\n        return this._transform.scale;\n    }\n    set scale(v) {\n        this._transform.scale = v;\n    }\n    get globalScale() {\n        return this._transform.globalScale;\n    }\n    set globalScale(v) {\n        this._transform.globalScale = v;\n    }\n    applyInverse(v) {\n        return this._transform.applyInverse(v);\n    }\n    apply(v) {\n        return this._transform.apply(v);\n    }\n    clone() {\n        const component = new TransformComponent();\n        component._transform = this._transform.clone();\n        return component;\n    }\n}\n\n;// ./Graphics/Animation.ts\n\n\n\n\nvar AnimationDirection;\n(function (AnimationDirection) {\n    /**\n     * Animation is playing forwards\n     */\n    AnimationDirection[\"Forward\"] = \"forward\";\n    /**\n     * Animation is playing backwards\n     */\n    AnimationDirection[\"Backward\"] = \"backward\";\n})(AnimationDirection || (AnimationDirection = {}));\nvar AnimationStrategy;\n(function (AnimationStrategy) {\n    /**\n     * Animation ends without displaying anything\n     */\n    AnimationStrategy[\"End\"] = \"end\";\n    /**\n     * Animation loops to the first frame after the last frame\n     */\n    AnimationStrategy[\"Loop\"] = \"loop\";\n    /**\n     * Animation plays to the last frame, then backwards to the first frame, then repeats\n     */\n    AnimationStrategy[\"PingPong\"] = \"pingpong\";\n    /**\n     * Animation ends stopping on the last frame\n     */\n    AnimationStrategy[\"Freeze\"] = \"freeze\";\n})(AnimationStrategy || (AnimationStrategy = {}));\nconst AnimationEvents = {\n    Frame: 'frame',\n    Loop: 'loop',\n    End: 'end'\n};\n/**\n * Create an Animation given a list of {@apilink Frame | `frames`} in {@apilink AnimationOptions}\n *\n * To create an Animation from a {@apilink SpriteSheet}, use {@apilink Animation.fromSpriteSheet}\n */\nclass Animation extends Graphic {\n    constructor(options) {\n        var _a, _b, _c;\n        super(options);\n        this.events = new EventEmitter();\n        this.frames = [];\n        this.strategy = AnimationStrategy.Loop;\n        this.frameDuration = 100;\n        this._idempotencyToken = -1;\n        this._firstTick = true;\n        this._currentFrame = 0;\n        this._timeLeftInFrame = 0;\n        this._pingPongDirection = 1;\n        this._done = false;\n        this._playing = true;\n        this._speed = 1;\n        this._reversed = false;\n        this.frames = options.frames;\n        this.speed = (_a = options.speed) !== null && _a !== void 0 ? _a : this.speed;\n        this.strategy = (_b = options.strategy) !== null && _b !== void 0 ? _b : this.strategy;\n        this.frameDuration = options.totalDuration ? options.totalDuration / this.frames.length : (_c = options.frameDuration) !== null && _c !== void 0 ? _c : this.frameDuration;\n        if (options.reverse) {\n            this.reverse();\n        }\n        this.goToFrame(0);\n    }\n    clone() {\n        return new Animation({\n            frames: this.frames.map((f) => ({ ...f })),\n            frameDuration: this.frameDuration,\n            speed: this.speed,\n            reverse: this._reversed,\n            strategy: this.strategy,\n            ...this.cloneGraphicOptions()\n        });\n    }\n    get width() {\n        const maybeFrame = this.currentFrame;\n        if (maybeFrame && maybeFrame.graphic) {\n            return Math.abs(maybeFrame.graphic.width * this.scale.x);\n        }\n        return 0;\n    }\n    get height() {\n        const maybeFrame = this.currentFrame;\n        if (maybeFrame && maybeFrame.graphic) {\n            return Math.abs(maybeFrame.graphic.height * this.scale.y);\n        }\n        return 0;\n    }\n    /**\n     * Create an Animation from a {@apilink SpriteSheet}, a list of indices into the sprite sheet, a duration per frame\n     * and optional {@apilink AnimationStrategy}\n     *\n     * Example:\n     * ```typescript\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\n     *\n     * const anim = Animation.fromSpriteSheet(spriteSheet, range(0, 5), 200, AnimationStrategy.Loop);\n     * ```\n     * @param spriteSheet ex.SpriteSheet\n     * @param spriteSheetIndex 0 based index from left to right, top down (row major order) of the ex.SpriteSheet\n     * @param durationPerFrame duration per frame in milliseconds\n     * @param strategy Optional strategy, default AnimationStrategy.Loop\n     */\n    static fromSpriteSheet(spriteSheet, spriteSheetIndex, durationPerFrame, strategy = AnimationStrategy.Loop) {\n        const maxIndex = spriteSheet.sprites.length - 1;\n        const invalidIndices = spriteSheetIndex.filter((index) => index < 0 || index > maxIndex);\n        if (invalidIndices.length) {\n            Animation._LOGGER.warn(`Indices into SpriteSheet were provided that don\\'t exist: ${invalidIndices.join(',')} no frame will be shown`);\n        }\n        return new Animation({\n            frames: spriteSheet.sprites\n                .filter((_, index) => spriteSheetIndex.indexOf(index) > -1)\n                .map((f) => ({\n                graphic: f,\n                duration: durationPerFrame\n            })),\n            strategy: strategy\n        });\n    }\n    /**\n     * Create an {@apilink Animation} from a {@apilink SpriteSheet} given a list of coordinates\n     *\n     * Example:\n     * ```typescript\n     * const spriteSheet = SpriteSheet.fromImageSource({...});\n     *\n     * const anim = Animation.fromSpriteSheetCoordinates({\n     *  spriteSheet,\n     *  frameCoordinates: [\n     *    {x: 0, y: 5, duration: 100, options { flipHorizontal: true }},\n     *    {x: 1, y: 5, duration: 200},\n     *    {x: 2, y: 5},\n     *    {x: 3, y: 5}\n     *  ],\n     *  strategy: AnimationStrategy.PingPong\n     * });\n     * ```\n     * @param options\n     * @returns Animation\n     */\n    static fromSpriteSheetCoordinates(options) {\n        var _a;\n        const { spriteSheet, frameCoordinates, durationPerFrame, durationPerFrameMs, speed, strategy, reverse } = options;\n        const defaultDuration = (_a = durationPerFrame !== null && durationPerFrame !== void 0 ? durationPerFrame : durationPerFrameMs) !== null && _a !== void 0 ? _a : 100;\n        const frames = [];\n        for (const coord of frameCoordinates) {\n            const { x, y, duration, options } = coord;\n            const sprite = spriteSheet.getSprite(x, y, options);\n            if (sprite) {\n                frames.push({\n                    graphic: sprite,\n                    duration: duration !== null && duration !== void 0 ? duration : defaultDuration\n                });\n            }\n            else {\n                Animation._LOGGER.warn(`Skipping frame! SpriteSheet does not have coordinate (${x}, ${y}), please check your SpriteSheet to confirm that sprite exists`);\n            }\n        }\n        return new Animation({\n            frames,\n            strategy,\n            speed,\n            reverse\n        });\n    }\n    /**\n     * Current animation speed\n     *\n     * 1 meaning normal 1x speed.\n     * 2 meaning 2x speed and so on.\n     */\n    get speed() {\n        return this._speed;\n    }\n    /**\n     * Current animation speed\n     *\n     * 1 meaning normal 1x speed.\n     * 2 meaning 2x speed and so on.\n     */\n    set speed(val) {\n        this._speed = clamp(Math.abs(val), 0, Infinity);\n    }\n    /**\n     * Returns the current Frame of the animation\n     *\n     * Use {@apilink Animation.currentFrameIndex} to get the frame number and\n     * {@apilink Animation.goToFrame} to set the current frame index\n     */\n    get currentFrame() {\n        if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\n            return this.frames[this._currentFrame];\n        }\n        return null;\n    }\n    /**\n     * Returns the current frame index of the animation\n     *\n     * Use {@apilink Animation.currentFrame} to grab the current {@apilink Frame} object\n     */\n    get currentFrameIndex() {\n        return this._currentFrame;\n    }\n    /**\n     * Returns the amount of time in milliseconds left in the current frame\n     */\n    get currentFrameTimeLeft() {\n        return this._timeLeftInFrame;\n    }\n    /**\n     * Returns `true` if the animation is playing\n     */\n    get isPlaying() {\n        return this._playing;\n    }\n    get isReversed() {\n        return this._reversed;\n    }\n    /**\n     * Reverses the play direction of the Animation, this preserves the current frame\n     */\n    reverse() {\n        // Don't mutate with the original frame list, create a copy\n        this.frames = this.frames.slice().reverse();\n        this._reversed = !this._reversed;\n    }\n    /**\n     * Returns the current play direction of the animation\n     */\n    get direction() {\n        // Keep logically consistent with ping-pong direction\n        // If ping-pong is forward = 1 and reversed is true then we are logically reversed\n        const reversed = this._reversed && this._pingPongDirection === 1 ? true : false;\n        return reversed ? AnimationDirection.Backward : AnimationDirection.Forward;\n    }\n    /**\n     * Plays or resumes the animation from the current frame\n     */\n    play() {\n        this._playing = true;\n    }\n    /**\n     * Pauses the animation on the current frame\n     */\n    pause() {\n        this._playing = false;\n        this._firstTick = true; // firstTick must be set to emit the proper frame event\n    }\n    /**\n     * Reset the animation back to the beginning, including if the animation were done\n     */\n    reset() {\n        this._done = false;\n        this._firstTick = true;\n        this._currentFrame = 0;\n        this._timeLeftInFrame = this.frameDuration;\n        const maybeFrame = this.frames[this._currentFrame];\n        if (maybeFrame) {\n            this._timeLeftInFrame = (maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration;\n        }\n    }\n    /**\n     * Returns `true` if the animation can end\n     */\n    get canFinish() {\n        switch (this.strategy) {\n            case AnimationStrategy.End:\n            case AnimationStrategy.Freeze: {\n                return true;\n            }\n            default: {\n                return false;\n            }\n        }\n    }\n    /**\n     * Returns `true` if the animation is done, for looping type animations\n     * `ex.AnimationStrategy.PingPong` and `ex.AnimationStrategy.Loop` this will always return `false`\n     *\n     * See the `ex.Animation.canFinish()` method to know if an animation type can end\n     */\n    get done() {\n        return this._done;\n    }\n    /**\n     * Jump the animation immediately to a specific frame if it exists\n     *\n     * Optionally specify an override for the duration of the frame, useful for\n     * keeping multiple animations in sync with one another.\n     * @param frameNumber\n     * @param duration\n     */\n    goToFrame(frameNumber, duration) {\n        this._currentFrame = frameNumber;\n        this._timeLeftInFrame = duration !== null && duration !== void 0 ? duration : this.frameDuration;\n        const maybeFrame = this.frames[this._currentFrame];\n        if (maybeFrame && !this._done) {\n            this._timeLeftInFrame = duration !== null && duration !== void 0 ? duration : ((maybeFrame === null || maybeFrame === void 0 ? void 0 : maybeFrame.duration) || this.frameDuration);\n            this.events.emit('frame', { ...maybeFrame, frameIndex: this.currentFrameIndex });\n        }\n    }\n    _nextFrame() {\n        const currentFrame = this._currentFrame;\n        if (this._done) {\n            return currentFrame;\n        }\n        let next = -1;\n        switch (this.strategy) {\n            case AnimationStrategy.Loop: {\n                next = (currentFrame + 1) % this.frames.length;\n                if (next === 0) {\n                    this.events.emit('loop', this);\n                }\n                break;\n            }\n            case AnimationStrategy.End: {\n                next = currentFrame + 1;\n                if (next >= this.frames.length) {\n                    this._done = true;\n                    this._currentFrame = this.frames.length;\n                    this.events.emit('end', this);\n                }\n                break;\n            }\n            case AnimationStrategy.Freeze: {\n                next = clamp(currentFrame + 1, 0, this.frames.length - 1);\n                if (next >= this.frames.length - 1) {\n                    this._done = true;\n                    this.events.emit('end', this);\n                }\n                break;\n            }\n            case AnimationStrategy.PingPong: {\n                if (currentFrame + this._pingPongDirection >= this.frames.length) {\n                    this._pingPongDirection = -1;\n                    this.events.emit('loop', this);\n                }\n                if (currentFrame + this._pingPongDirection < 0) {\n                    this._pingPongDirection = 1;\n                    this.events.emit('loop', this);\n                }\n                next = currentFrame + (this._pingPongDirection % this.frames.length);\n                break;\n            }\n        }\n        return next;\n    }\n    /**\n     * Called internally by Excalibur to update the state of the animation potential update the current frame\n     * @param elapsed Milliseconds elapsed\n     * @param idempotencyToken Prevents double ticking in a frame by passing a unique token to the frame\n     */\n    tick(elapsed, idempotencyToken = 0) {\n        if (this._idempotencyToken === idempotencyToken) {\n            return;\n        }\n        this._idempotencyToken = idempotencyToken;\n        if (!this._playing) {\n            return;\n        }\n        // if it's the first frame emit frame event\n        if (this._firstTick) {\n            this._firstTick = false;\n            this.events.emit('frame', { ...this.currentFrame, frameIndex: this.currentFrameIndex });\n        }\n        this._timeLeftInFrame -= elapsed * this._speed;\n        if (this._timeLeftInFrame <= 0) {\n            this.goToFrame(this._nextFrame());\n        }\n    }\n    _drawImage(ctx, x, y) {\n        if (this.currentFrame && this.currentFrame.graphic) {\n            this.currentFrame.graphic.draw(ctx, x, y);\n        }\n    }\n}\nAnimation._LOGGER = Logger.getInstance();\n\n;// ./Graphics/GraphicsGroup.ts\n\n\n\n\n\nclass GraphicsGroup extends Graphic {\n    constructor(options) {\n        var _a;\n        super(options);\n        this._logger = Logger.getInstance();\n        this.useAnchor = true;\n        this.members = [];\n        this.members = options.members;\n        this.useAnchor = (_a = options.useAnchor) !== null && _a !== void 0 ? _a : this.useAnchor;\n        this._updateDimensions();\n    }\n    clone() {\n        return new GraphicsGroup({\n            members: [...this.members],\n            ...this.cloneGraphicOptions()\n        });\n    }\n    _updateDimensions() {\n        const bb = this.localBounds;\n        this.width = bb.width;\n        this.height = bb.height;\n        return bb;\n    }\n    get localBounds() {\n        const bb = new BoundingBox();\n        for (const member of this.members) {\n            if (member instanceof Graphic) {\n                member.localBounds.combine(bb, bb);\n            }\n            else {\n                const { graphic, offset: pos, useBounds } = member;\n                const shouldUseBounds = useBounds === undefined ? true : useBounds;\n                if (graphic) {\n                    if (shouldUseBounds) {\n                        graphic.localBounds.translate(pos).combine(bb, bb);\n                    }\n                }\n                else {\n                    this._logger.warnOnce(`Graphics group member has an null or undefined graphic, member definition: ${JSON.stringify(member)}.`);\n                }\n            }\n        }\n        return bb;\n    }\n    _isAnimationOrGroup(graphic) {\n        return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n    }\n    tick(elapsed, idempotencyToken) {\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n            }\n            if (this._isAnimationOrGroup(graphic)) {\n                graphic.tick(elapsed, idempotencyToken);\n            }\n        }\n    }\n    reset() {\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n            }\n            if (this._isAnimationOrGroup(graphic)) {\n                graphic.reset();\n            }\n        }\n    }\n    _preDraw(ex, x, y) {\n        this._updateDimensions();\n        super._preDraw(ex, this.useAnchor ? x : 0, this.useAnchor ? y : 0);\n    }\n    _drawImage(ex, x, y) {\n        const pos = Vector.Zero;\n        for (const member of this.members) {\n            let graphic;\n            if (member instanceof Graphic) {\n                graphic = member;\n            }\n            else {\n                graphic = member.graphic;\n                member.offset.clone(pos);\n            }\n            if (!graphic) {\n                continue;\n            }\n            ex.save();\n            ex.translate(x, y);\n            graphic.draw(ex, pos.x, pos.y);\n            if (this.showDebug) {\n                /* istanbul ignore next */\n                ex.debug.drawRect(0, 0, this.width, this.height);\n            }\n            ex.restore();\n        }\n    }\n}\n\n;// ./Graphics/Raster.ts\n\n\n\n\n\n\n/**\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\n * {@apilink ExcaliburGraphicsContext}. This is useful for generating custom images using the 2D canvas api.\n *\n * Implementors must implement the {@apilink Raster.execute} method to rasterize their drawing.\n */\nclass Raster extends Graphic {\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        super(omit({ ...options }, ['width', 'height'])); // rasters do some special sauce with width/height\n        this.lineCap = 'butt';\n        this.quality = 1;\n        this._dirty = true;\n        this._smoothing = false;\n        this._color = watch(Color.Black, () => this.flagDirty());\n        this._lineWidth = 1;\n        this._lineDash = [];\n        this._padding = 0;\n        if (options) {\n            this.quality = (_a = options.quality) !== null && _a !== void 0 ? _a : this.quality;\n            this.color = (_b = options.color) !== null && _b !== void 0 ? _b : Color.Black;\n            this.strokeColor = options === null || options === void 0 ? void 0 : options.strokeColor;\n            this.smoothing = (_c = options.smoothing) !== null && _c !== void 0 ? _c : this.smoothing;\n            this.lineWidth = (_d = options.lineWidth) !== null && _d !== void 0 ? _d : this.lineWidth;\n            this.lineDash = (_e = options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\n            this.lineCap = (_f = options.lineCap) !== null && _f !== void 0 ? _f : this.lineCap;\n            this.padding = (_g = options.padding) !== null && _g !== void 0 ? _g : this.padding;\n            this.filtering = (_h = options.filtering) !== null && _h !== void 0 ? _h : this.filtering;\n        }\n        this._bitmap = document.createElement('canvas');\n        // get the default canvas width/height as a fallback\n        const bitmapWidth = (_j = options === null || options === void 0 ? void 0 : options.width) !== null && _j !== void 0 ? _j : this._bitmap.width;\n        const bitmapHeight = (_k = options === null || options === void 0 ? void 0 : options.height) !== null && _k !== void 0 ? _k : this._bitmap.height;\n        this.width = bitmapWidth;\n        this.height = bitmapHeight;\n        const maybeCtx = this._bitmap.getContext('2d');\n        if (!maybeCtx) {\n            /* istanbul ignore next */\n            throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\n        }\n        else {\n            this._ctx = maybeCtx;\n        }\n    }\n    cloneRasterOptions() {\n        return {\n            color: this.color ? this.color.clone() : undefined,\n            strokeColor: this.strokeColor ? this.strokeColor.clone() : undefined,\n            smoothing: this.smoothing,\n            lineWidth: this.lineWidth,\n            lineDash: this.lineDash,\n            lineCap: this.lineCap,\n            quality: this.quality,\n            padding: this.padding\n        };\n    }\n    /**\n     * Gets whether the graphic is dirty, this means there are changes that haven't been re-rasterized\n     */\n    get dirty() {\n        return this._dirty;\n    }\n    /**\n     * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\n     * This should be called any time the graphics state changes such that it affects the outputted drawing\n     */\n    flagDirty() {\n        this._dirty = true;\n    }\n    /**\n     * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     *\n     * Any `padding`s or `quality` set will be factored into the width\n     */\n    get width() {\n        return Math.abs(this._getTotalWidth() * this.scale.x);\n    }\n    set width(value) {\n        value /= Math.abs(this.scale.x);\n        this._bitmap.width = value;\n        this._originalWidth = value;\n        this.flagDirty();\n    }\n    /**\n     * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     *\n     * Any `padding` or `quality` set will be factored into the height\n     */\n    get height() {\n        return Math.abs(this._getTotalHeight() * this.scale.y);\n    }\n    set height(value) {\n        value /= Math.abs(this.scale.y);\n        this._bitmap.height = value;\n        this._originalHeight = value;\n        this.flagDirty();\n    }\n    _getTotalWidth() {\n        var _a;\n        return (((_a = this._originalWidth) !== null && _a !== void 0 ? _a : this._bitmap.width) + this.padding * 2) * 1;\n    }\n    _getTotalHeight() {\n        var _a;\n        return (((_a = this._originalHeight) !== null && _a !== void 0 ? _a : this._bitmap.height) + this.padding * 2) * 1;\n    }\n    /**\n     * Returns the local bounds of the Raster including the padding\n     */\n    get localBounds() {\n        return BoundingBox.fromDimension(this._getTotalWidth() * this.scale.x, this._getTotalHeight() * this.scale.y, Vector.Zero);\n    }\n    /**\n     * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\n     * to be flagged dirty causing a re-raster on the next draw.\n     */\n    get smoothing() {\n        return this._smoothing;\n    }\n    set smoothing(value) {\n        this._smoothing = value;\n        this.flagDirty();\n    }\n    /**\n     * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get color() {\n        return this._color;\n    }\n    set color(value) {\n        this.flagDirty();\n        this._color = watch(value, () => this.flagDirty());\n    }\n    /**\n     * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get strokeColor() {\n        return this._strokeColor;\n    }\n    set strokeColor(value) {\n        this.flagDirty();\n        if (value) {\n            this._strokeColor = watch(value, () => this.flagDirty());\n        }\n    }\n    /**\n     * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\n     * flagged dirty causing a re-raster on the next draw.\n     */\n    get lineWidth() {\n        return this._lineWidth;\n    }\n    set lineWidth(value) {\n        this._lineWidth = value;\n        this.flagDirty();\n    }\n    get lineDash() {\n        return this._lineDash;\n    }\n    set lineDash(value) {\n        this._lineDash = value;\n        this.flagDirty();\n    }\n    get padding() {\n        return this._padding;\n    }\n    set padding(value) {\n        this._padding = value;\n        this.flagDirty();\n    }\n    /**\n     * Rasterize the graphic to a bitmap making it usable as in excalibur. Rasterize is called automatically if\n     * the graphic is {@apilink Raster.dirty} on the next {@apilink Graphic.draw} call\n     */\n    rasterize() {\n        this._dirty = false;\n        this._ctx.clearRect(0, 0, this._getTotalWidth(), this._getTotalHeight());\n        this._ctx.save();\n        this._applyRasterProperties(this._ctx);\n        this.execute(this._ctx);\n        this._ctx.restore();\n    }\n    _applyRasterProperties(ctx) {\n        var _a, _b, _c, _d;\n        this._bitmap.width = this._getTotalWidth() * this.quality;\n        this._bitmap.height = this._getTotalHeight() * this.quality;\n        // Do a bad thing to pass the filtering as an attribute\n        this._bitmap.setAttribute('filtering', this.filtering);\n        this._bitmap.setAttribute('forceUpload', 'true');\n        ctx.scale(this.quality, this.quality);\n        ctx.translate(this.padding, this.padding);\n        ctx.imageSmoothingEnabled = this.smoothing;\n        ctx.lineWidth = this.lineWidth;\n        ctx.setLineDash((_a = this.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\n        ctx.lineCap = this.lineCap;\n        ctx.strokeStyle = (_c = (_b = this.strokeColor) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : '';\n        ctx.fillStyle = (_d = this.color) === null || _d === void 0 ? void 0 : _d.toString();\n    }\n    _drawImage(ex, x, y) {\n        if (this._dirty) {\n            this.rasterize();\n        }\n        ex.scale(1 / this.quality, 1 / this.quality);\n        ex.drawImage(this._bitmap, x, y);\n    }\n}\n\n;// ./Graphics/FontCommon.ts\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nvar FontUnit;\n(function (FontUnit) {\n    /**\n     * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n     */\n    FontUnit[\"Em\"] = \"em\";\n    /**\n     * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n     */\n    FontUnit[\"Rem\"] = \"rem\";\n    /**\n     * Pixel is a unit of length in screen pixels\n     */\n    FontUnit[\"Px\"] = \"px\";\n    /**\n     * Point is a physical unit length (1/72 of an inch)\n     */\n    FontUnit[\"Pt\"] = \"pt\";\n    /**\n     * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n     */\n    FontUnit[\"Percent\"] = \"%\";\n})(FontUnit || (FontUnit = {}));\n/**\n * Enum representing the different horizontal text alignments\n */\nvar TextAlign;\n(function (TextAlign) {\n    /**\n     * The text is left-aligned.\n     */\n    TextAlign[\"Left\"] = \"left\";\n    /**\n     * The text is right-aligned.\n     */\n    TextAlign[\"Right\"] = \"right\";\n    /**\n     * The text is centered.\n     */\n    TextAlign[\"Center\"] = \"center\";\n    /**\n     * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n     * right-aligned for right-to-left locales).\n     */\n    TextAlign[\"Start\"] = \"start\";\n    /**\n     * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n     * left-aligned for right-to-left locales).\n     */\n    TextAlign[\"End\"] = \"end\";\n})(TextAlign || (TextAlign = {}));\n/**\n * Enum representing the different baseline text alignments\n */\nvar BaseAlign;\n(function (BaseAlign) {\n    /**\n     * The text baseline is the top of the em square.\n     */\n    BaseAlign[\"Top\"] = \"top\";\n    /**\n     * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n     * alphabetic.\n     */\n    BaseAlign[\"Hanging\"] = \"hanging\";\n    /**\n     * The text baseline is the middle of the em square.\n     */\n    BaseAlign[\"Middle\"] = \"middle\";\n    /**\n     * The text baseline is the normal alphabetic baseline.\n     */\n    BaseAlign[\"Alphabetic\"] = \"alphabetic\";\n    /**\n     * The text baseline is the ideographic baseline; this is the bottom of\n     * the body of the characters, if the main body of characters protrudes\n     * beneath the alphabetic baseline.  Currently unsupported; this will\n     * act like alphabetic.\n     */\n    BaseAlign[\"Ideographic\"] = \"ideographic\";\n    /**\n     * The text baseline is the bottom of the bounding box.  This differs\n     * from the ideographic baseline in that the ideographic baseline\n     * doesn't consider descenders.\n     */\n    BaseAlign[\"Bottom\"] = \"bottom\";\n})(BaseAlign || (BaseAlign = {}));\n/**\n * Enum representing the different possible font styles\n */\nvar FontStyle;\n(function (FontStyle) {\n    FontStyle[\"Normal\"] = \"normal\";\n    FontStyle[\"Italic\"] = \"italic\";\n    FontStyle[\"Oblique\"] = \"oblique\";\n})(FontStyle || (FontStyle = {}));\n/**\n * Enum representing the text direction, useful for other languages, or writing text in reverse\n */\nvar Direction;\n(function (Direction) {\n    Direction[\"LeftToRight\"] = \"ltr\";\n    Direction[\"RightToLeft\"] = \"rtl\";\n})(Direction || (Direction = {}));\n\n;// ./Util/DrawUtil.ts\n\n/* istanbul ignore next */\n/**\n * Draw a line on canvas context\n * @param ctx The canvas context\n * @param color The color of the line\n * @param x1 The start x coordinate\n * @param y1 The start y coordinate\n * @param x2 The ending x coordinate\n * @param y2 The ending y coordinate\n * @param thickness The line thickness\n * @param cap The {@apilink LineCapStyle} (butt, round, or square)\n */\nfunction line(ctx, color = Color.Red, x1, y1, x2, y2, thickness = 1, cap = 'butt') {\n    ctx.save();\n    ctx.beginPath();\n    ctx.lineWidth = thickness;\n    ctx.lineCap = cap;\n    ctx.strokeStyle = color.toString();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.restore();\n}\n/* istanbul ignore next */\n/**\n * Draw the vector as a point onto the canvas.\n */\nfunction point(ctx, color = Color.Red, point) {\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n}\n/**\n * Draw the vector as a line onto the canvas starting a origin point.\n */\n/* istanbul ignore next */\n/**\n *\n */\nfunction vector(ctx, color, origin, vector, scale = 1.0) {\n    const c = color ? color.toString() : 'blue';\n    const v = vector.scale(scale);\n    ctx.beginPath();\n    ctx.strokeStyle = c;\n    ctx.moveTo(origin.x, origin.y);\n    ctx.lineTo(origin.x + v.x, origin.y + v.y);\n    ctx.closePath();\n    ctx.stroke();\n}\n/**\n * Draw a round rectangle on a canvas context\n * @param ctx The canvas context\n * @param x The top-left x coordinate\n * @param y The top-left y coordinate\n * @param width The width of the rectangle\n * @param height The height of the rectangle\n * @param radius The border radius of the rectangle\n * @param stroke The {@apilink Color} to stroke rectangle with\n * @param fill The {@apilink Color} to fill rectangle with\n */\nfunction roundRect(ctx, x, y, width, height, radius = 5, stroke = Color.White, fill = null) {\n    let br;\n    if (typeof radius === 'number') {\n        br = { tl: radius, tr: radius, br: radius, bl: radius };\n    }\n    else {\n        const defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n        for (const prop in defaultRadius) {\n            if (defaultRadius.hasOwnProperty(prop)) {\n                const side = prop;\n                br[side] = radius[side] || defaultRadius[side];\n            }\n        }\n    }\n    ctx.beginPath();\n    ctx.moveTo(x + br.tl, y);\n    ctx.lineTo(x + width - br.tr, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\n    ctx.lineTo(x + width, y + height - br.br);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\n    ctx.lineTo(x + br.bl, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\n    ctx.lineTo(x, y + br.tl);\n    ctx.quadraticCurveTo(x, y, x + br.tl, y);\n    ctx.closePath();\n    if (fill) {\n        ctx.fillStyle = fill.toString();\n        ctx.fill();\n    }\n    if (stroke) {\n        ctx.strokeStyle = stroke.toString();\n        ctx.stroke();\n    }\n}\n/**\n *\n */\nfunction circle(ctx, x, y, radius, stroke = Color.White, fill = null) {\n    ctx.beginPath();\n    ctx.arc(x, y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    if (fill) {\n        ctx.fillStyle = fill.toString();\n        ctx.fill();\n    }\n    if (stroke) {\n        ctx.strokeStyle = stroke.toString();\n        ctx.stroke();\n    }\n}\n\n;// ./Graphics/FontTextInstance.ts\n\n\n\n\nclass FontTextInstance {\n    constructor(font, text, color, maxWidth) {\n        this.font = font;\n        this.text = text;\n        this.color = color;\n        this.maxWidth = maxWidth;\n        this._textFragments = [];\n        this.disposed = false;\n        this._dirty = true;\n        this.canvas = document.createElement('canvas');\n        const ctx = this.canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Unable to create FontTextInstance, internal canvas failed to create');\n        }\n        this.ctx = ctx;\n        this.dimensions = this.measureText(text);\n        this._setDimension(this.dimensions, this.ctx);\n        this._lastHashCode = this.getHashCode();\n    }\n    measureText(text, maxWidth) {\n        if (this.disposed) {\n            throw Error('Accessing disposed text instance! ' + this.text);\n        }\n        let lines = null;\n        if (maxWidth != null) {\n            lines = this._getLinesFromText(text, maxWidth);\n        }\n        else {\n            lines = text.split('\\n');\n        }\n        const maxWidthLine = lines.reduce((a, b) => {\n            return a.length > b.length ? a : b;\n        });\n        this._applyFont(this.ctx); // font must be applied to the context to measure it\n        const metrics = this.ctx.measureText(maxWidthLine);\n        let textHeight = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);\n        // TODO line height makes the text bounds wonky\n        const lineAdjustedHeight = textHeight * lines.length;\n        textHeight = lineAdjustedHeight;\n        const bottomBounds = lineAdjustedHeight - Math.abs(metrics.actualBoundingBoxAscent);\n        const x = 0;\n        const y = 0;\n        const measurement = new BoundingBox({\n            left: x - Math.abs(metrics.actualBoundingBoxLeft) - this.font.padding,\n            top: y - Math.abs(metrics.actualBoundingBoxAscent) - this.font.padding,\n            bottom: y + bottomBounds + this.font.padding,\n            right: x + Math.abs(metrics.actualBoundingBoxRight) + this.font.padding\n        });\n        return measurement;\n    }\n    _setDimension(textBounds, bitmap) {\n        let lineHeightRatio = 1;\n        if (this.font.lineHeight) {\n            lineHeightRatio = this.font.lineHeight / this.font.size;\n        }\n        // Changing the width and height clears the context properties\n        // We double the bitmap width to account for all possible alignment\n        // We scale by \"quality\" so we render text without jaggies\n        bitmap.canvas.width = (textBounds.width + this.font.padding * 2) * 2 * this.font.quality;\n        bitmap.canvas.height = (textBounds.height + this.font.padding * 2) * 2 * this.font.quality * lineHeightRatio;\n    }\n    static getHashCode(font, text, color) {\n        var _a;\n        const hash = text +\n            '__hashcode__' +\n            font.fontString +\n            font.showDebug +\n            font.textAlign +\n            font.baseAlign +\n            font.direction +\n            font.lineHeight +\n            JSON.stringify(font.shadow) +\n            (font.padding.toString() +\n                font.smoothing.toString() +\n                font.lineWidth.toString() +\n                font.lineDash.toString() +\n                ((_a = font.strokeColor) === null || _a === void 0 ? void 0 : _a.toString()) +\n                (color ? color.toString() : font.color.toString()));\n        return hash;\n    }\n    getHashCode(includeColor = true) {\n        return FontTextInstance.getHashCode(this.font, this.text, includeColor ? this.color : undefined);\n    }\n    _applyRasterProperties(ctx) {\n        var _a, _b, _c;\n        ctx.translate(this.font.padding, this.font.padding);\n        ctx.imageSmoothingEnabled = this.font.smoothing;\n        ctx.lineWidth = this.font.lineWidth;\n        ctx.setLineDash((_a = this.font.lineDash) !== null && _a !== void 0 ? _a : ctx.getLineDash());\n        ctx.strokeStyle = (_c = (_b = this.font.strokeColor) === null || _b === void 0 ? void 0 : _b.toString()) !== null && _c !== void 0 ? _c : '';\n        ctx.fillStyle = this.color.toString();\n    }\n    _applyFont(ctx) {\n        ctx.resetTransform();\n        ctx.translate(this.font.padding + ctx.canvas.width / 2, this.font.padding + ctx.canvas.height / 2);\n        ctx.scale(this.font.quality, this.font.quality);\n        ctx.textAlign = this.font.textAlign;\n        ctx.textBaseline = this.font.baseAlign;\n        ctx.font = this.font.fontString;\n        ctx.direction = this.font.direction;\n        if (this.font.shadow) {\n            if (this.font.shadow.color) {\n                ctx.shadowColor = this.font.shadow.color.toString();\n            }\n            if (this.font.shadow.blur) {\n                ctx.shadowBlur = this.font.shadow.blur;\n            }\n            if (this.font.shadow.offset) {\n                ctx.shadowOffsetX = this.font.shadow.offset.x;\n                ctx.shadowOffsetY = this.font.shadow.offset.y;\n            }\n        }\n    }\n    _drawText(ctx, lines, lineHeight) {\n        this._applyRasterProperties(ctx);\n        this._applyFont(ctx);\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i];\n            if (this.color) {\n                ctx.fillText(line, 0, i * lineHeight);\n            }\n            if (this.font.strokeColor) {\n                ctx.strokeText(line, 0, i * lineHeight);\n            }\n        }\n        if (this.font.showDebug) {\n            // Horizontal line\n            /* istanbul ignore next */\n            line(ctx, Color.Green, -ctx.canvas.width / 2, 0, ctx.canvas.width / 2, 0, 2);\n            // Vertical line\n            /* istanbul ignore next */\n            line(ctx, Color.Red, 0, -ctx.canvas.height / 2, 0, ctx.canvas.height / 2, 2);\n        }\n    }\n    _splitTextBitmap(bitmap) {\n        const textImages = [];\n        let currentX = 0;\n        let currentY = 0;\n        // 4k is the max for mobile devices\n        const width = Math.min(4096, bitmap.canvas.width);\n        const height = Math.min(4096, bitmap.canvas.height);\n        // Splits the original bitmap into 4k max chunks\n        while (currentX < bitmap.canvas.width) {\n            while (currentY < bitmap.canvas.height) {\n                // create new bitmap\n                const canvas = document.createElement('canvas');\n                canvas.width = width;\n                canvas.height = height;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    throw new Error('Unable to split internal FontTextInstance bitmap, failed to create internal canvas');\n                }\n                // draw current slice to new bitmap in < 4k chunks\n                ctx.drawImage(bitmap.canvas, currentX, currentY, width, height, 0, 0, width, height);\n                textImages.push({ x: currentX, y: currentY, canvas });\n                currentY += height;\n            }\n            currentX += width;\n            currentY = 0;\n        }\n        return textImages;\n    }\n    flagDirty() {\n        this._dirty = true;\n    }\n    render(ex, x, y, maxWidth) {\n        var _a;\n        if (this.disposed) {\n            throw Error('Accessing disposed text instance! ' + this.text);\n        }\n        this._ex = ex;\n        const hashCode = this.getHashCode();\n        if (this._lastHashCode !== hashCode) {\n            this._dirty = true;\n        }\n        // Calculate image chunks\n        if (this._dirty) {\n            this.dimensions = this.measureText(this.text, maxWidth);\n            this._setDimension(this.dimensions, this.ctx);\n            const lines = this._getLinesFromText(this.text, maxWidth);\n            const lineHeight = (_a = this.font.lineHeight) !== null && _a !== void 0 ? _a : this.dimensions.height / lines.length;\n            // draws the text to the main bitmap\n            this._drawText(this.ctx, lines, lineHeight);\n            // clear any out old fragments\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\n                for (const frag of this._textFragments) {\n                    ex.textureLoader.delete(frag.canvas);\n                }\n            }\n            // splits to < 4k fragments for large text\n            this._textFragments = this._splitTextBitmap(this.ctx);\n            if (ex instanceof ExcaliburGraphicsContextWebGL) {\n                for (const frag of this._textFragments) {\n                    ex.textureLoader.load(frag.canvas, { filtering: this.font.filtering }, true);\n                }\n            }\n            this._lastHashCode = hashCode;\n            this._dirty = false;\n        }\n        // draws the bitmap fragments to excalibur graphics context\n        for (const frag of this._textFragments) {\n            ex.drawImage(frag.canvas, 0, 0, frag.canvas.width, frag.canvas.height, frag.x / this.font.quality + x - this.ctx.canvas.width / this.font.quality / 2, frag.y / this.font.quality + y - this.ctx.canvas.height / this.font.quality / 2, frag.canvas.width / this.font.quality, frag.canvas.height / this.font.quality);\n        }\n    }\n    dispose() {\n        this.disposed = true;\n        this.dimensions = undefined;\n        this.canvas = undefined;\n        this.ctx = undefined;\n        if (this._ex instanceof ExcaliburGraphicsContextWebGL) {\n            for (const frag of this._textFragments) {\n                this._ex.textureLoader.delete(frag.canvas);\n            }\n        }\n        this._textFragments.length = 0;\n    }\n    _getLinesFromText(text, maxWidth) {\n        var _a;\n        if (this._cachedText === text && this._cachedRenderWidth === maxWidth && ((_a = this._cachedLines) === null || _a === void 0 ? void 0 : _a.length)) {\n            return this._cachedLines;\n        }\n        const lines = text.split('\\n');\n        if (maxWidth == null) {\n            return lines;\n        }\n        // If the current line goes past the maxWidth, append a new line without modifying the underlying text.\n        for (let i = 0; i < lines.length; i++) {\n            let line = lines[i];\n            let newLine = '';\n            if (this.measureText(line).width > maxWidth) {\n                while (this.measureText(line).width > maxWidth) {\n                    newLine = line[line.length - 1] + newLine;\n                    line = line.slice(0, -1); // Remove last character from line\n                }\n                // Update the array with our new values\n                lines[i] = line;\n                lines[i + 1] = newLine;\n            }\n        }\n        this._cachedText = text;\n        this._cachedLines = lines;\n        this._cachedRenderWidth = maxWidth;\n        return lines;\n    }\n}\n\n;// ./Graphics/FontCache.ts\n\n\nclass FontCache {\n    static measureText(text, font, maxWidth) {\n        const hash = FontTextInstance.getHashCode(font, text);\n        if (FontCache._MEASURE_CACHE.has(hash)) {\n            return FontCache._MEASURE_CACHE.get(hash);\n        }\n        FontCache._LOGGER.debug('Font text measurement cache miss');\n        const measurement = font.measureTextWithoutCache(text, maxWidth);\n        FontCache._MEASURE_CACHE.set(hash, measurement);\n        return measurement;\n    }\n    static getTextInstance(text, font, color) {\n        const hash = FontTextInstance.getHashCode(font, text, color);\n        let textInstance = FontCache._TEXT_CACHE.get(hash);\n        if (!textInstance) {\n            textInstance = new FontTextInstance(font, text, color);\n            FontCache._TEXT_CACHE.set(hash, textInstance);\n            FontCache._LOGGER.debug('Font text instance cache miss');\n        }\n        // Cache the bitmap for certain amount of time\n        FontCache._TEXT_USAGE.set(textInstance, performance.now());\n        return textInstance;\n    }\n    static checkAndClearCache() {\n        const deferred = [];\n        const currentHashCodes = new Set();\n        for (const [textInstance, time] of FontCache._TEXT_USAGE.entries()) {\n            // if bitmap hasn't been used in 100 ms clear it\n            if (time + FontCache.FONT_TIMEOUT < performance.now()) {\n                FontCache._LOGGER.debug(`Text cache entry timed out ${textInstance.text}`);\n                deferred.push(textInstance);\n                textInstance.dispose();\n            }\n            else {\n                const hash = textInstance.getHashCode(false);\n                currentHashCodes.add(hash);\n            }\n        }\n        // Deferred removal of text instances\n        deferred.forEach((t) => {\n            FontCache._TEXT_USAGE.delete(t);\n        });\n        // Regenerate text instance cache\n        this._TEXT_CACHE.clear();\n        for (const [textInstance] of this._TEXT_USAGE.entries()) {\n            this._TEXT_CACHE.set(textInstance.getHashCode(), textInstance);\n        }\n        // Regenerated measurement cache\n        const newTextMeasurementCache = new Map();\n        for (const current of currentHashCodes) {\n            if (FontCache._MEASURE_CACHE.has(current)) {\n                newTextMeasurementCache.set(current, FontCache._MEASURE_CACHE.get(current));\n            }\n        }\n        this._MEASURE_CACHE.clear();\n        this._MEASURE_CACHE = newTextMeasurementCache;\n    }\n    static get cacheSize() {\n        return FontCache._TEXT_USAGE.size;\n    }\n    /**\n     * Force clear all cached text bitmaps\n     */\n    static clearCache() {\n        for (const [textInstance] of FontCache._TEXT_USAGE.entries()) {\n            textInstance.dispose();\n        }\n        FontCache._TEXT_USAGE.clear();\n        FontCache._TEXT_CACHE.clear();\n        FontCache._MEASURE_CACHE.clear();\n    }\n}\nFontCache.FONT_TIMEOUT = 500;\nFontCache._LOGGER = Logger.getInstance();\nFontCache._TEXT_USAGE = new Map();\nFontCache._TEXT_CACHE = new Map();\nFontCache._MEASURE_CACHE = new Map();\n\n;// ./Graphics/Font.ts\n\n\n\n\n\n\n\n/**\n * Represents a system or web font in Excalibur\n *\n * If no options specified, the system sans-serif 10 pixel is used\n *\n * If loading a custom web font be sure to have the font loaded before you use it https://erikonarheim.com/posts/dont-test-fonts/\n */\nclass Font extends Graphic {\n    constructor(options = {}) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v;\n        super(options); // <- Graphics properties\n        /**\n         * Set the font filtering mode, by default set to {@apilink ImageFiltering.Blended} regardless of the engine default smoothing\n         *\n         * If you have a pixel style font that may be a reason to switch this to {@apilink ImageFiltering.Pixel}\n         */\n        this.filtering = ImageFiltering.Blended;\n        /**\n         * Font quality determines the size of the underlying raster text, higher quality means less jagged edges.\n         * If quality is set to 1, then just enough raster bitmap is generated to render the text.\n         *\n         * You can think of quality as how zoomed in to the text you can get before seeing jagged edges.\n         *\n         * (Default 2)\n         */\n        this.quality = 2;\n        // Raster properties for fonts\n        this.padding = 2;\n        this.smoothing = false;\n        this.lineWidth = 1;\n        this.lineDash = [];\n        this.color = Color.Black;\n        this.family = 'sans-serif';\n        this.style = FontStyle.Normal;\n        this.bold = false;\n        this.unit = FontUnit.Px;\n        this.textAlign = TextAlign.Left;\n        this.baseAlign = BaseAlign.Top;\n        this.direction = Direction.LeftToRight;\n        /**\n         * Font line height in pixels, default line height if unset\n         */\n        this.lineHeight = undefined;\n        this.size = 10;\n        this._textBounds = new BoundingBox();\n        this._textMeasurement = new FontTextInstance(this, '', Color.Black);\n        // Raster properties\n        this.smoothing = (_a = options === null || options === void 0 ? void 0 : options.smoothing) !== null && _a !== void 0 ? _a : this.smoothing;\n        this.padding = (_b = options === null || options === void 0 ? void 0 : options.padding) !== null && _b !== void 0 ? _b : this.padding;\n        this.color = (_c = options === null || options === void 0 ? void 0 : options.color) !== null && _c !== void 0 ? _c : this.color;\n        this.strokeColor = (_d = options === null || options === void 0 ? void 0 : options.strokeColor) !== null && _d !== void 0 ? _d : this.strokeColor;\n        this.lineDash = (_e = options === null || options === void 0 ? void 0 : options.lineDash) !== null && _e !== void 0 ? _e : this.lineDash;\n        this.lineWidth = (_f = options === null || options === void 0 ? void 0 : options.lineWidth) !== null && _f !== void 0 ? _f : this.lineWidth;\n        this.filtering = (_g = options === null || options === void 0 ? void 0 : options.filtering) !== null && _g !== void 0 ? _g : this.filtering;\n        // Font specific properties\n        this.family = (_h = options === null || options === void 0 ? void 0 : options.family) !== null && _h !== void 0 ? _h : this.family;\n        this.style = (_j = options === null || options === void 0 ? void 0 : options.style) !== null && _j !== void 0 ? _j : this.style;\n        this.bold = (_k = options === null || options === void 0 ? void 0 : options.bold) !== null && _k !== void 0 ? _k : this.bold;\n        this.size = (_l = options === null || options === void 0 ? void 0 : options.size) !== null && _l !== void 0 ? _l : this.size;\n        this.unit = (_m = options === null || options === void 0 ? void 0 : options.unit) !== null && _m !== void 0 ? _m : this.unit;\n        this.textAlign = (_o = options === null || options === void 0 ? void 0 : options.textAlign) !== null && _o !== void 0 ? _o : this.textAlign;\n        this.baseAlign = (_p = options === null || options === void 0 ? void 0 : options.baseAlign) !== null && _p !== void 0 ? _p : this.baseAlign;\n        this.direction = (_q = options === null || options === void 0 ? void 0 : options.direction) !== null && _q !== void 0 ? _q : this.direction;\n        this.lineHeight = (_r = options === null || options === void 0 ? void 0 : options.lineHeight) !== null && _r !== void 0 ? _r : this.lineHeight;\n        this.quality = (_s = options === null || options === void 0 ? void 0 : options.quality) !== null && _s !== void 0 ? _s : this.quality;\n        if (options === null || options === void 0 ? void 0 : options.shadow) {\n            this.shadow = {};\n            this.shadow.blur = (_t = options.shadow.blur) !== null && _t !== void 0 ? _t : this.shadow.blur;\n            this.shadow.offset = (_u = options.shadow.offset) !== null && _u !== void 0 ? _u : this.shadow.offset;\n            this.shadow.color = (_v = options.shadow.color) !== null && _v !== void 0 ? _v : this.shadow.color;\n        }\n    }\n    clone() {\n        return new Font({\n            ...this.cloneGraphicOptions(),\n            size: this.size,\n            unit: this.unit,\n            family: this.family,\n            style: this.style,\n            bold: this.bold,\n            textAlign: this.textAlign,\n            baseAlign: this.baseAlign,\n            direction: this.direction,\n            shadow: this.shadow\n                ? {\n                    blur: this.shadow.blur,\n                    offset: this.shadow.offset,\n                    color: this.shadow.color\n                }\n                : undefined\n        });\n    }\n    get fontString() {\n        return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\n    }\n    get localBounds() {\n        return this._textBounds;\n    }\n    _drawImage(_ex, _x, _y) {\n        // TODO weird vestigial drawimage\n    }\n    _rotate(ex) {\n        var _a;\n        // TODO this needs to change depending on the bounding box...\n        const origin = (_a = this.origin) !== null && _a !== void 0 ? _a : this._textBounds.center;\n        ex.translate(origin.x, origin.y);\n        ex.rotate(this.rotation);\n        ex.translate(-origin.x, -origin.y);\n    }\n    _flip(ex) {\n        if (this.flipHorizontal) {\n            ex.translate(this._textBounds.width / this.scale.x, 0);\n            ex.scale(-1, 1);\n        }\n        if (this.flipVertical) {\n            ex.translate(0, -this._textBounds.height / 2 / this.scale.y);\n            ex.scale(1, -1);\n        }\n    }\n    measureTextWithoutCache(text, maxWidth) {\n        return this._textMeasurement.measureText(text, maxWidth);\n    }\n    /**\n     * Returns a BoundingBox that is the total size of the text including multiple lines\n     *\n     * Does not include any padding or adjustment\n     * @param text\n     * @returns BoundingBox\n     */\n    measureText(text, maxWidth) {\n        return FontCache.measureText(text, this, maxWidth);\n    }\n    _postDraw(ex) {\n        ex.restore();\n    }\n    render(ex, text, colorOverride, x, y, maxWidth) {\n        const textInstance = FontCache.getTextInstance(text, this, colorOverride);\n        // Apply affine transformations\n        this._textBounds = textInstance.dimensions;\n        this._preDraw(ex, x, y);\n        textInstance.render(ex, x, y, maxWidth);\n        this._postDraw(ex);\n    }\n}\n\n;// ./Graphics/Text.ts\n\n\n\n/**\n * Represent Text graphics in excalibur\n *\n * Useful for in game labels, ui, or overlays\n */\nclass Text extends Graphic {\n    constructor(options) {\n        var _a, _b;\n        super(options);\n        this._text = '';\n        this._textWidth = 0;\n        this._textHeight = 0;\n        // This order is important font, color, then text\n        this.font = (_a = options.font) !== null && _a !== void 0 ? _a : new Font();\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : this.color;\n        this.text = options.text;\n        this.maxWidth = options.maxWidth;\n    }\n    clone() {\n        var _a, _b;\n        return new Text({\n            text: this.text.slice(),\n            color: (_b = (_a = this.color) === null || _a === void 0 ? void 0 : _a.clone()) !== null && _b !== void 0 ? _b : Color.Black,\n            font: this.font.clone(),\n            maxWidth: this.maxWidth\n        });\n    }\n    get text() {\n        return this._text;\n    }\n    set text(value) {\n        this._text = value;\n        this._calculateDimension();\n    }\n    get font() {\n        return this._font;\n    }\n    set font(font) {\n        this._font = font;\n    }\n    get width() {\n        if (this._textWidth === 0) {\n            this._calculateDimension();\n        }\n        return this._textWidth * this.scale.x;\n    }\n    get height() {\n        if (this._textHeight === 0) {\n            this._calculateDimension();\n        }\n        return this._textHeight * this.scale.y;\n    }\n    _calculateDimension() {\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\n        this._textWidth = width;\n        this._textHeight = height;\n    }\n    get localBounds() {\n        return this.font.measureText(this._text, this.maxWidth).scale(this.scale);\n    }\n    _rotate(_ex) {\n        // None this is delegated to font\n        // This override erases the default behavior\n    }\n    _flip(_ex) {\n        // None this is delegated to font\n        // This override erases the default behavior\n    }\n    _preDraw(ex, x, y) {\n        if (this.isStale() || this.font.isStale()) {\n            this.font.flipHorizontal = this.flipHorizontal;\n            this.font.flipVertical = this.flipVertical;\n            this.font.rotation = this.rotation;\n            this.font.origin = this.origin;\n            this.font.opacity = this.opacity;\n        }\n        this.font.tint = this.tint;\n        super._preDraw(ex, x, y);\n    }\n    _drawImage(ex, x, y) {\n        var _a;\n        let color = Color.Black;\n        if (this.font instanceof Font) {\n            color = (_a = this.color) !== null && _a !== void 0 ? _a : this.font.color;\n        }\n        const { width, height } = this.font.measureText(this._text, this.maxWidth);\n        this._textWidth = width;\n        this._textHeight = height;\n        this.font.render(ex, this._text, color, x, y, this.maxWidth);\n        if (this.font.showDebug) {\n            ex.debug.drawRect(x - width, y - height, width * 2, height * 2);\n            if (this.maxWidth != null) {\n                ex.debug.drawRect(x, y, this.maxWidth, this.height, {\n                    color: Color.Yellow\n                });\n            }\n        }\n    }\n}\n\n;// ./Graphics/GraphicsComponent.ts\n\n\n\n\n\n\n\n\n\n\n/**\n * Type guard for checking if a Graphic HasTick (used for graphics that change over time like animations)\n * @param graphic\n */\nfunction hasGraphicsTick(graphic) {\n    return !!graphic.tick;\n}\n/**\n * Component to manage drawings, using with the position component\n */\nclass GraphicsComponent extends Component {\n    /**\n     * Sets or gets wether any drawing should be visible in this component\n     * @deprecated use isVisible\n     */\n    get visible() {\n        return this.isVisible;\n    }\n    /**\n     * Sets or gets wether any drawing should be visible in this component\n     * @deprecated use isVisible\n     */\n    set visible(val) {\n        this.isVisible = val;\n    }\n    /**\n     * Offset to apply to graphics by default\n     */\n    get offset() {\n        return this._offset;\n    }\n    set offset(value) {\n        this._offset = new WatchVector(value, () => this.recalculateBounds());\n        this.recalculateBounds();\n    }\n    /**\n     * Anchor to apply to graphics by default\n     */\n    get anchor() {\n        return this._anchor;\n    }\n    set anchor(value) {\n        this._anchor = new WatchVector(value, () => this.recalculateBounds());\n        this.recalculateBounds();\n    }\n    /**\n     * Sets the color of the actor's current graphic\n     */\n    get color() {\n        return this._color;\n    }\n    set color(v) {\n        if (v) {\n            this._color = v.clone();\n            const currentGraphic = this.graphics.current;\n            if (currentGraphic instanceof Raster || currentGraphic instanceof Text) {\n                currentGraphic.color = this._color;\n            }\n        }\n    }\n    constructor(options) {\n        super();\n        this._logger = Logger.getInstance();\n        this._current = 'default';\n        this._graphics = {};\n        this._options = {};\n        this.material = null;\n        /**\n         * Sets or gets wether any drawing should be visible in this component\n         */\n        this.isVisible = true;\n        /**\n         * Optionally force the graphic onscreen, default false. Not recommend to use for perf reasons, only if you known what you're doing.\n         */\n        this.forceOnScreen = false;\n        /**\n         * Sets or gets wither all drawings should have an opacity applied\n         */\n        this.opacity = 1;\n        this._offset = new WatchVector(Vector.Zero, () => this.recalculateBounds());\n        this._anchor = new WatchVector(Vector.Half, () => this.recalculateBounds());\n        /**\n         * Flip all graphics horizontally along the y-axis\n         */\n        this.flipHorizontal = false;\n        /**\n         * Flip all graphics vertically along the x-axis\n         */\n        this.flipVertical = false;\n        /**\n         * If set to true graphics added to the component will be copied. This can effect performance, but is useful if you don't want\n         * changes to a graphic to effect all the places it is used.\n         */\n        this.copyGraphics = false;\n        // Defaults\n        options = {\n            visible: this.isVisible,\n            graphics: {},\n            ...options\n        };\n        const { current, anchor, color, opacity, visible, graphics, offset, copyGraphics, onPreDraw, onPostDraw, onPreTransformDraw, onPostTransformDraw } = options;\n        for (const [key, graphicOrOptions] of Object.entries(graphics)) {\n            if (graphicOrOptions instanceof Graphic) {\n                this._graphics[key] = graphicOrOptions;\n            }\n            else {\n                this._graphics[key] = graphicOrOptions.graphic;\n                this._options[key] = graphicOrOptions.options;\n            }\n        }\n        this.offset = offset !== null && offset !== void 0 ? offset : this.offset;\n        this.opacity = opacity !== null && opacity !== void 0 ? opacity : this.opacity;\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : this.anchor;\n        this.color = color !== null && color !== void 0 ? color : this.color;\n        this.copyGraphics = copyGraphics !== null && copyGraphics !== void 0 ? copyGraphics : this.copyGraphics;\n        this.onPreDraw = onPreDraw !== null && onPreDraw !== void 0 ? onPreDraw : this.onPreDraw;\n        this.onPostDraw = onPostDraw !== null && onPostDraw !== void 0 ? onPostDraw : this.onPostDraw;\n        this.onPreDraw = onPreTransformDraw !== null && onPreTransformDraw !== void 0 ? onPreTransformDraw : this.onPreTransformDraw;\n        this.onPostTransformDraw = onPostTransformDraw !== null && onPostTransformDraw !== void 0 ? onPostTransformDraw : this.onPostTransformDraw;\n        this.isVisible = !!visible;\n        this._current = current !== null && current !== void 0 ? current : this._current;\n        if (current && this._graphics[current]) {\n            this.use(current);\n        }\n    }\n    getGraphic(name) {\n        return this._graphics[name];\n    }\n    getOptions(name) {\n        return this._options[name];\n    }\n    /**\n     * Get registered graphics names\n     */\n    getNames() {\n        return Object.keys(this._graphics);\n    }\n    /**\n     * Returns the currently displayed graphic\n     */\n    get current() {\n        return this._graphics[this._current];\n    }\n    /**\n     * Returns the currently displayed graphic offsets\n     */\n    get currentOptions() {\n        return this._options[this._current];\n    }\n    /**\n     * Returns all graphics associated with this component\n     */\n    get graphics() {\n        return this._graphics;\n    }\n    /**\n     * Returns all graphics options associated with this component\n     */\n    get options() {\n        return this._options;\n    }\n    add(nameOrGraphic, graphicOrOptions, options) {\n        let name = 'default';\n        let graphicToSet = null;\n        let optionsToSet = undefined;\n        if (typeof nameOrGraphic === 'string' && graphicOrOptions instanceof Graphic) {\n            name = nameOrGraphic;\n            graphicToSet = graphicOrOptions;\n            optionsToSet = options;\n        }\n        if (nameOrGraphic instanceof Graphic && !(graphicOrOptions instanceof Graphic)) {\n            graphicToSet = nameOrGraphic;\n            optionsToSet = graphicOrOptions;\n        }\n        if (!graphicToSet) {\n            throw new Error('Need to provide a graphic or valid graphic string');\n        }\n        this._graphics[name] = this.copyGraphics ? graphicToSet.clone() : graphicToSet;\n        this._options[name] = this.copyGraphics ? { ...optionsToSet } : optionsToSet;\n        if (name === 'default') {\n            this.use('default');\n        }\n        return graphicToSet;\n    }\n    /**\n     * Removes a registered graphic, if the removed graphic is the current it will switch to the default\n     * @param name\n     */\n    remove(name) {\n        delete this._graphics[name];\n        delete this._options[name];\n        if (this._current === name) {\n            this._current = 'default';\n            this.recalculateBounds();\n        }\n    }\n    /**\n     * Use a graphic only, will set the default graphic. Returns the new {@apilink Graphic}\n     *\n     * Optionally override the stored options\n     * @param nameOrGraphic\n     * @param options\n     */\n    use(nameOrGraphic, options) {\n        var _a;\n        if (nameOrGraphic instanceof Graphic) {\n            let graphic = nameOrGraphic;\n            if (this.copyGraphics) {\n                graphic = nameOrGraphic.clone();\n            }\n            this._current = 'default';\n            this._graphics[this._current] = graphic;\n            this._options[this._current] = options;\n        }\n        else {\n            this._current = nameOrGraphic;\n            this._options[this._current] = options;\n            if (!(this._current in this._graphics)) {\n                this._logger.warn(`Graphic ${this._current} is not registered with the graphics component owned by ${(_a = this.owner) === null || _a === void 0 ? void 0 : _a.name}. Nothing will be drawn.`);\n            }\n        }\n        this.recalculateBounds();\n        return this.current;\n    }\n    /**\n     * Hide currently shown graphic\n     */\n    hide() {\n        this._current = 'ex.none';\n    }\n    set localBounds(bounds) {\n        this._localBounds = bounds;\n    }\n    recalculateBounds() {\n        let bb = new BoundingBox();\n        const graphic = this._graphics[this._current];\n        const options = this._options[this._current];\n        if (!graphic) {\n            this._localBounds = bb;\n            return;\n        }\n        let anchor = this.anchor;\n        let offset = this.offset;\n        if (options === null || options === void 0 ? void 0 : options.anchor) {\n            anchor = options.anchor;\n        }\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            offset = options.offset;\n        }\n        const bounds = graphic.localBounds;\n        const offsetX = -bounds.width * anchor.x + offset.x;\n        const offsetY = -bounds.height * anchor.y + offset.y;\n        if (graphic instanceof GraphicsGroup && !graphic.useAnchor) {\n            bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.combine(bb);\n        }\n        else {\n            bb = graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(vec(offsetX, offsetY)).combine(bb);\n        }\n        this._localBounds = bb;\n    }\n    /**\n     * Get local bounds of graphics component\n     */\n    get localBounds() {\n        if (!this._localBounds || this._localBounds.hasZeroDimensions()) {\n            this.recalculateBounds();\n        }\n        return this._localBounds; // recalc guarantees type\n    }\n    /**\n     * Get world bounds of graphics component\n     */\n    get bounds() {\n        let bounds = this.localBounds;\n        if (this.owner) {\n            const tx = this.owner.get(TransformComponent);\n            if (tx) {\n                bounds = bounds.transform(tx.get().matrix);\n            }\n        }\n        return bounds;\n    }\n    /**\n     * Update underlying graphics if necessary, called internally\n     * @param elapsed\n     * @internal\n     */\n    update(elapsed, idempotencyToken = 0) {\n        const graphic = this.current;\n        if (graphic && hasGraphicsTick(graphic)) {\n            graphic.tick(elapsed, idempotencyToken);\n        }\n    }\n    clone() {\n        const graphics = new GraphicsComponent();\n        graphics._graphics = { ...this._graphics };\n        graphics._options = { ...this._options };\n        graphics.offset = this.offset.clone();\n        if (this.color) {\n            graphics.color = this.color.clone();\n        }\n        graphics.opacity = this.opacity;\n        graphics.anchor = this.anchor.clone();\n        graphics.copyGraphics = this.copyGraphics;\n        graphics.onPreDraw = this.onPreDraw;\n        graphics.onPostDraw = this.onPostDraw;\n        graphics.isVisible = this.isVisible;\n        return graphics;\n    }\n}\n\n;// ./Events.ts\nvar EventTypes;\n(function (EventTypes) {\n    EventTypes[\"Kill\"] = \"kill\";\n    EventTypes[\"PreKill\"] = \"prekill\";\n    EventTypes[\"PostKill\"] = \"postkill\";\n    EventTypes[\"PreDraw\"] = \"predraw\";\n    EventTypes[\"PostDraw\"] = \"postdraw\";\n    EventTypes[\"PreDebugDraw\"] = \"predebugdraw\";\n    EventTypes[\"PostDebugDraw\"] = \"postdebugdraw\";\n    EventTypes[\"PreUpdate\"] = \"preupdate\";\n    EventTypes[\"PostUpdate\"] = \"postupdate\";\n    EventTypes[\"PreFrame\"] = \"preframe\";\n    EventTypes[\"PostFrame\"] = \"postframe\";\n    EventTypes[\"PreCollision\"] = \"precollision\";\n    EventTypes[\"CollisionStart\"] = \"collisionstart\";\n    EventTypes[\"CollisionEnd\"] = \"collisionend\";\n    EventTypes[\"PostCollision\"] = \"postcollision\";\n    EventTypes[\"Initialize\"] = \"initialize\";\n    EventTypes[\"Activate\"] = \"activate\";\n    EventTypes[\"Deactivate\"] = \"deactivate\";\n    EventTypes[\"ExitViewport\"] = \"exitviewport\";\n    EventTypes[\"EnterViewport\"] = \"enterviewport\";\n    EventTypes[\"ExitTrigger\"] = \"exit\";\n    EventTypes[\"EnterTrigger\"] = \"enter\";\n    EventTypes[\"Connect\"] = \"connect\";\n    EventTypes[\"Disconnect\"] = \"disconnect\";\n    EventTypes[\"Button\"] = \"button\";\n    EventTypes[\"Axis\"] = \"axis\";\n    EventTypes[\"Visible\"] = \"visible\";\n    EventTypes[\"Hidden\"] = \"hidden\";\n    EventTypes[\"Start\"] = \"start\";\n    EventTypes[\"Stop\"] = \"stop\";\n    EventTypes[\"PointerUp\"] = \"pointerup\";\n    EventTypes[\"PointerDown\"] = \"pointerdown\";\n    EventTypes[\"PointerMove\"] = \"pointermove\";\n    EventTypes[\"PointerEnter\"] = \"pointerenter\";\n    EventTypes[\"PointerLeave\"] = \"pointerleave\";\n    EventTypes[\"PointerCancel\"] = \"pointercancel\";\n    EventTypes[\"PointerWheel\"] = \"pointerwheel\";\n    EventTypes[\"Up\"] = \"up\";\n    EventTypes[\"Down\"] = \"down\";\n    EventTypes[\"Move\"] = \"move\";\n    EventTypes[\"Enter\"] = \"enter\";\n    EventTypes[\"Leave\"] = \"leave\";\n    EventTypes[\"Cancel\"] = \"cancel\";\n    EventTypes[\"Wheel\"] = \"wheel\";\n    EventTypes[\"Press\"] = \"press\";\n    EventTypes[\"Release\"] = \"release\";\n    EventTypes[\"Hold\"] = \"hold\";\n    EventTypes[\"PointerDragStart\"] = \"pointerdragstart\";\n    EventTypes[\"PointerDragEnd\"] = \"pointerdragend\";\n    EventTypes[\"PointerDragEnter\"] = \"pointerdragenter\";\n    EventTypes[\"PointerDragLeave\"] = \"pointerdragleave\";\n    EventTypes[\"PointerDragMove\"] = \"pointerdragmove\";\n    EventTypes[\"ActionStart\"] = \"actionstart\";\n    EventTypes[\"ActionComplete\"] = \"actioncomplete\";\n    EventTypes[\"Add\"] = \"add\";\n    EventTypes[\"Remove\"] = \"remove\";\n})(EventTypes || (EventTypes = {}));\n/**\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\n * some events are unique to a type, others are not.\n *\n */\nclass GameEvent {\n    constructor() {\n        /**\n         * Other target object for this event\n         */\n        this.other = null;\n        this._bubbles = true;\n    }\n    /**\n     * If set to false, prevents event from propagating to other actors. If true it will be propagated\n     * to all actors that apply.\n     */\n    get bubbles() {\n        return this._bubbles;\n    }\n    set bubbles(value) {\n        this._bubbles = value;\n    }\n    /**\n     * Prevents event from bubbling\n     */\n    stopPropagation() {\n        this.bubbles = false;\n    }\n}\n/**\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\n */\nclass KillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'prekill' event is emitted directly before an actor is killed.\n */\nclass PreKillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postkill' event is emitted directly after the actor is killed.\n */\nclass PostKillEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'start' event is emitted on engine when has started and is ready for interaction.\n */\nclass GameStartEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\n */\nclass GameStopEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nclass PreDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nclass PostDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'pretransformdraw' event is emitted on actors/entities before any graphics transforms have taken place.\n * Useful if you need to completely customize the draw or modify the transform before drawing in the draw step (for example needing\n * latest camera positions)\n *\n */\nclass PreTransformDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'posttransformdraw' event is emitted on actors/entities after all graphics have been draw and transforms reset.\n * Useful if you need to completely custom the draw after everything is done.\n *\n */\nclass PostTransformDrawEvent extends GameEvent {\n    constructor(ctx, elapsed, self) {\n        super();\n        this.ctx = ctx;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\n */\nclass PreDebugDrawEvent extends GameEvent {\n    constructor(ctx, self) {\n        super();\n        this.ctx = ctx;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\n */\nclass PostDebugDrawEvent extends GameEvent {\n    constructor(ctx, self) {\n        super();\n        this.ctx = ctx;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\n */\nclass PreUpdateEvent extends GameEvent {\n    constructor(engine, elapsed, self) {\n        super();\n        this.engine = engine;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\n */\nclass PostUpdateEvent extends GameEvent {\n    constructor(engine, elapsed, self) {\n        super();\n        this.engine = engine;\n        this.elapsed = elapsed;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * The 'preframe' event is emitted on the engine, before the frame begins.\n */\nclass PreFrameEvent extends GameEvent {\n    constructor(engine, prevStats) {\n        super();\n        this.engine = engine;\n        this.prevStats = prevStats;\n        this.target = engine;\n    }\n}\n/**\n * The 'postframe' event is emitted on the engine, after a frame ends.\n */\nclass PostFrameEvent extends GameEvent {\n    constructor(engine, stats) {\n        super();\n        this.engine = engine;\n        this.stats = stats;\n        this.target = engine;\n    }\n}\n/**\n * Event received when a gamepad is connected to Excalibur. {@apilink Gamepads} receives this event.\n */\nclass GamepadConnectEvent extends GameEvent {\n    constructor(index, gamepad) {\n        super();\n        this.index = index;\n        this.gamepad = gamepad;\n        this.target = gamepad;\n    }\n}\n/**\n * Event received when a gamepad is disconnected from Excalibur. {@apilink Gamepads} receives this event.\n */\nclass GamepadDisconnectEvent extends GameEvent {\n    constructor(index, gamepad) {\n        super();\n        this.index = index;\n        this.gamepad = gamepad;\n        this.target = gamepad;\n    }\n}\n/**\n * Gamepad button event. See {@apilink Gamepads} for information on responding to controller input. {@apilink Gamepad} instances receive this event;\n */\nclass GamepadButtonEvent extends GameEvent {\n    /**\n     * @param button  The Gamepad button\n     * @param value   A numeric value between 0 and 1\n     */\n    constructor(button, value, self) {\n        super();\n        this.button = button;\n        this.value = value;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Gamepad axis event. See {@apilink Gamepads} for information on responding to controller input. {@apilink Gamepad} instances receive this event;\n */\nclass GamepadAxisEvent extends GameEvent {\n    /**\n     * @param axis  The Gamepad axis\n     * @param value A numeric value between -1 and 1\n     */\n    constructor(axis, value, self) {\n        super();\n        this.axis = axis;\n        this.value = value;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event received by the {@apilink Engine} when the browser window is visible on a screen.\n */\nclass VisibleEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event received by the {@apilink Engine} when the browser window is hidden from all screens.\n */\nclass HiddenEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor | `actor`} when a collision will occur this frame if it resolves\n */\nclass PreCollisionEvent extends GameEvent {\n    /**\n     * @param self          The actor the event was thrown on\n     * @param other         The actor that will collided with the current actor\n     * @param side          The side that will be collided with the current actor\n     * @param intersection  Intersection vector\n     */\n    constructor(self, other, side, intersection, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor | `actor`} when a collision has been resolved (body reacted) this frame\n */\nclass PostCollisionEvent extends GameEvent {\n    /**\n     * @param self          The actor the event was thrown on\n     * @param other         The actor that did collide with the current actor\n     * @param side          The side that did collide with the current actor\n     * @param intersection  Intersection vector\n     */\n    constructor(self, other, side, intersection, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n        this.target = self;\n    }\n}\nclass ContactStartEvent {\n    constructor(self, other, side, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.contact = contact;\n    }\n}\nclass ContactEndEvent {\n    constructor(self, other, side, lastContact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.lastContact = lastContact;\n    }\n}\nclass CollisionPreSolveEvent {\n    constructor(self, other, side, intersection, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n    }\n}\nclass CollisionPostSolveEvent {\n    constructor(self, other, side, intersection, contact) {\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.intersection = intersection;\n        this.contact = contact;\n    }\n}\n/**\n * Event thrown the first time an {@apilink Actor | `actor`} collides with another, after an actor is in contact normal collision events are fired.\n */\nclass CollisionStartEvent extends GameEvent {\n    /**\n     *\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    constructor(self, other, side, contact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.contact = contact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown when the {@apilink Actor | `actor`} is no longer colliding with another\n */\nclass CollisionEndEvent extends GameEvent {\n    /**\n     *\n     */\n    constructor(self, other, side, lastContact) {\n        super();\n        this.self = self;\n        this.other = other;\n        this.side = side;\n        this.lastContact = lastContact;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor}, {@apilink Scene}, and {@apilink Engine} only once before the first update call\n */\nclass InitializeEvent extends GameEvent {\n    /**\n     * @param engine  The reference to the current engine\n     */\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on a {@apilink Scene} on activation\n */\nclass ActivateEvent extends GameEvent {\n    /**\n     * @param context  The context for the scene activation\n     */\n    constructor(context, self) {\n        super();\n        this.context = context;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on a {@apilink Scene} on deactivation\n */\nclass DeactivateEvent extends GameEvent {\n    /**\n     * @param context  The context for the scene deactivation\n     */\n    constructor(context, self) {\n        super();\n        this.context = context;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when the graphics bounds completely leaves the screen.\n */\nclass ExitViewPortEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when any part of the graphics bounds are on screen.\n */\nclass EnterViewPortEvent extends GameEvent {\n    constructor(self) {\n        super();\n        this.self = self;\n        this.target = self;\n    }\n}\nclass EnterTriggerEvent extends GameEvent {\n    constructor(self, entity) {\n        super();\n        this.self = self;\n        this.entity = entity;\n        this.target = self;\n    }\n}\nclass ExitTriggerEvent extends GameEvent {\n    constructor(self, entity) {\n        super();\n        this.self = self;\n        this.entity = entity;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when an action starts.\n */\nclass ActionStartEvent extends GameEvent {\n    constructor(action, self) {\n        super();\n        this.action = action;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an {@apilink Actor} when an action completes.\n */\nclass ActionCompleteEvent extends GameEvent {\n    constructor(action, self) {\n        super();\n        this.action = action;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an [[Actor]] when an Actor added to scene.\n */\nclass AddEvent extends GameEvent {\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n/**\n * Event thrown on an [[Actor]] when an Actor removed from scene.\n */\nclass RemoveEvent extends GameEvent {\n    constructor(engine, self) {\n        super();\n        this.engine = engine;\n        this.self = self;\n        this.target = self;\n    }\n}\n\n;// ./EntityComponentSystem/Entity.ts\n\n\n\n\n\n\n\n/**\n * AddedComponent message\n */\nclass AddedComponent {\n    constructor(data) {\n        this.data = data;\n        this.type = 'Component Added';\n    }\n}\n/**\n * Type guard to know if message is f an Added Component\n */\nfunction isAddedComponent(x) {\n    return !!x && x.type === 'Component Added';\n}\n/**\n * RemovedComponent message\n */\nclass RemovedComponent {\n    constructor(data) {\n        this.data = data;\n        this.type = 'Component Removed';\n    }\n}\n/**\n * Type guard to know if message is for a Removed Component\n */\nfunction isRemovedComponent(x) {\n    return !!x && x.type === 'Component Removed';\n}\nconst EntityEvents = {\n    Add: 'add',\n    Remove: 'remove',\n    Initialize: 'initialize',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    Kill: 'kill'\n};\n/**\n * An Entity is the base type of anything that can have behavior in Excalibur, they are part of the built in entity component system\n *\n * Entities can be strongly typed with the components they contain\n *\n * ```typescript\n * const entity = new Entity<ComponentA | ComponentB>();\n * entity.components.a; // Type ComponentA\n * entity.components.b; // Type ComponentB\n * ```\n */\nclass Entity {\n    constructor(componentsOrOptions, name) {\n        /**\n         * The unique identifier for the entity\n         */\n        this.id = Entity._ID++;\n        this.name = `Entity#${this.id}`;\n        /**\n         * Listen to or emit events for an entity\n         */\n        this.events = new EventEmitter();\n        this._tags = new Set();\n        this.componentAdded$ = new Observable();\n        this.componentRemoved$ = new Observable();\n        this.tagAdded$ = new Observable();\n        this.tagRemoved$ = new Observable();\n        /**\n         * Current components on the entity\n         *\n         * **Do not modify**\n         *\n         * Use addComponent/removeComponent otherwise the ECS will not be notified of changes.\n         */\n        this.components = new Map();\n        this.componentValues = [];\n        this._componentsToRemove = [];\n        /**\n         * The current scene that the entity is in, if any\n         */\n        this.scene = null;\n        /**\n         * Whether this entity is active, if set to false it will be reclaimed\n         */\n        this.isActive = true;\n        this._parent = null;\n        this.childrenAdded$ = new Observable();\n        this.childrenRemoved$ = new Observable();\n        this._children = [];\n        this._isInitialized = false;\n        this._isAdded = false;\n        let componentsToAdd;\n        let nameToAdd;\n        let silence = false;\n        if (Array.isArray(componentsOrOptions)) {\n            componentsToAdd = componentsOrOptions;\n            nameToAdd = name;\n        }\n        else if (componentsOrOptions && typeof componentsOrOptions === 'object') {\n            const { components, name, silenceWarnings } = componentsOrOptions;\n            componentsToAdd = components !== null && components !== void 0 ? components : [];\n            nameToAdd = name;\n            silence = !!silenceWarnings;\n        }\n        if (nameToAdd) {\n            this.name = nameToAdd;\n        }\n        if (componentsToAdd) {\n            for (const component of componentsToAdd) {\n                this.addComponent(component);\n            }\n        }\n        if (false) {}\n    }\n    /**\n     * Whether this entity is active, if set to false it will be reclaimed\n     * @deprecated use isActive\n     */\n    get active() {\n        return this.isActive;\n    }\n    /**\n     * Whether this entity is active, if set to false it will be reclaimed\n     * @deprecated use isActive\n     */\n    set active(val) {\n        this.isActive = val;\n    }\n    /**\n     * Kill the entity, means it will no longer be updated. Kills are deferred to the end of the update.\n     * If parented it will be removed from the parent when killed.\n     */\n    kill() {\n        if (this.isActive) {\n            this.isActive = false;\n            this.unparent();\n        }\n        this.emit('kill', new KillEvent(this));\n    }\n    isKilled() {\n        return !this.isActive;\n    }\n    /**\n     * Specifically get the tags on the entity from {@apilink TagsComponent}\n     */\n    get tags() {\n        return this._tags;\n    }\n    /**\n     * Check if a tag exists on the entity\n     * @param tag name to check for\n     */\n    hasTag(tag) {\n        return this._tags.has(tag);\n    }\n    /**\n     * Adds a tag to an entity\n     * @param tag\n     */\n    addTag(tag) {\n        this._tags.add(tag);\n        this.tagAdded$.notifyAll(tag);\n        return this;\n    }\n    /**\n     * Removes a tag on the entity\n     *\n     * Removals are deferred until the end of update\n     * @param tag\n     */\n    removeTag(tag) {\n        this._tags.delete(tag);\n        this.tagRemoved$.notifyAll(tag);\n        return this;\n    }\n    /**\n     * The types of the components on the Entity\n     */\n    get types() {\n        return Array.from(this.components.keys());\n    }\n    /**\n     * Returns all component instances on entity\n     */\n    getComponents() {\n        return Array.from(this.components.values());\n    }\n    /**\n     * Verifies that an entity has all the required types\n     * @param requiredTypes\n     */\n    hasAll(requiredTypes) {\n        for (let i = 0; i < requiredTypes.length; i++) {\n            if (!this.components.has(requiredTypes[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Verifies that an entity has all the required tags\n     * @param requiredTags\n     */\n    hasAllTags(requiredTags) {\n        for (let i = 0; i < requiredTags.length; i++) {\n            if (!this.tags.has(requiredTags[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    get(type) {\n        return this.components.get(type);\n    }\n    get parent() {\n        return this._parent;\n    }\n    /**\n     * Get the direct children of this entity\n     */\n    get children() {\n        return this._children;\n    }\n    /**\n     * Unparents this entity, if there is a parent. Otherwise it does nothing.\n     */\n    unparent() {\n        if (this._parent) {\n            this._parent.removeChild(this);\n            this._parent = null;\n        }\n    }\n    /**\n     * Adds an entity to be a child of this entity\n     * @param entity\n     */\n    addChild(entity) {\n        if (entity.parent === null) {\n            if (this.getAncestors().includes(entity)) {\n                throw new Error('Cycle detected, cannot add entity');\n            }\n            this._children.push(entity);\n            entity._parent = this;\n            this.childrenAdded$.notifyAll(entity);\n        }\n        else {\n            throw new Error('Entity already has a parent, cannot add without unparenting');\n        }\n        return this;\n    }\n    /**\n     * Remove an entity from children if it exists\n     * @param entity\n     */\n    removeChild(entity) {\n        if (entity.parent === this) {\n            removeItemFromArray(entity, this._children);\n            entity._parent = null;\n            this.childrenRemoved$.notifyAll(entity);\n        }\n        return this;\n    }\n    /**\n     * Removes all children from this entity\n     */\n    removeAllChildren() {\n        // Avoid modifying the array issue by walking backwards\n        for (let i = this.children.length - 1; i >= 0; i--) {\n            this.removeChild(this.children[i]);\n        }\n        return this;\n    }\n    /**\n     * Returns a list of parent entities starting with the topmost parent. Includes the current entity.\n     */\n    getAncestors() {\n        const result = [this];\n        let current = this.parent;\n        while (current) {\n            result.push(current);\n            current = current.parent;\n        }\n        return result.reverse();\n    }\n    /**\n     * Returns a list of all the entities that descend from this entity. Includes the current entity.\n     */\n    getDescendants() {\n        let result = [this];\n        let queue = [this];\n        while (queue.length > 0) {\n            const curr = queue.pop();\n            if (curr) {\n                queue = queue.concat(curr.children);\n                result = result.concat(curr.children);\n            }\n        }\n        return result;\n    }\n    /**\n     * Creates a deep copy of the entity and a copy of all its components\n     */\n    clone() {\n        const newEntity = new Entity();\n        for (const c of this.types) {\n            const componentInstance = this.get(c);\n            if (componentInstance) {\n                newEntity.addComponent(componentInstance.clone());\n            }\n        }\n        for (const child of this.children) {\n            newEntity.addChild(child.clone());\n        }\n        return newEntity;\n    }\n    /**\n     * Adds a copy of all the components from another template entity as a \"prefab\"\n     * @param templateEntity Entity to use as a template\n     * @param force Force component replacement if it already exists on the target entity\n     */\n    addTemplate(templateEntity, force = false) {\n        for (const c of templateEntity.getComponents()) {\n            this.addComponent(c.clone(), force);\n        }\n        for (const child of templateEntity.children) {\n            this.addChild(child.clone().addTemplate(child));\n        }\n        return this;\n    }\n    _getClassHierarchyRoot(componentType) {\n        var _a, _b;\n        let current = componentType;\n        let parent = (_a = Object.getPrototypeOf(current.prototype)) === null || _a === void 0 ? void 0 : _a.constructor;\n        while (parent && parent !== Object && parent !== Component) {\n            current = parent;\n            parent = (_b = Object.getPrototypeOf(current.prototype)) === null || _b === void 0 ? void 0 : _b.constructor;\n        }\n        return current;\n    }\n    /**\n     * Adds a component to the entity\n     * @param component Component or Entity to add copy of components from\n     * @param force Optionally overwrite any existing components of the same type\n     */\n    addComponent(component, force = false) {\n        // if component already exists, skip if not forced\n        if (this.has(component.constructor)) {\n            if (force) {\n                // Remove existing component type if exists when forced\n                this.removeComponent(component.constructor, true);\n            }\n            else {\n                // early exit component exits\n                return this;\n            }\n        }\n        // TODO circular dependencies will be a problem\n        if (component.dependencies && component.dependencies.length) {\n            for (const ctor of component.dependencies) {\n                this.addComponent(new ctor());\n            }\n        }\n        component.owner = this;\n        const rootComponent = this._getClassHierarchyRoot(component.constructor);\n        this.components.set(rootComponent, component);\n        this.components.set(component.constructor, component);\n        this.componentValues.push(component);\n        if (component.onAdd) {\n            component.onAdd(this);\n        }\n        this.componentAdded$.notifyAll(component);\n        return this;\n    }\n    /**\n     * Removes a component from the entity, by default removals are deferred to the end of entity update to avoid consistency issues\n     *\n     * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\n     * @param typeOrInstance\n     * @param force\n     */\n    removeComponent(typeOrInstance, force = false) {\n        let type;\n        if (isComponentCtor(typeOrInstance)) {\n            type = typeOrInstance;\n        }\n        else {\n            type = typeOrInstance.constructor;\n        }\n        if (force) {\n            const componentToRemove = this.components.get(type);\n            if (componentToRemove) {\n                this.componentRemoved$.notifyAll(componentToRemove);\n                componentToRemove.owner = undefined;\n                if (componentToRemove.onRemove) {\n                    componentToRemove.onRemove(this);\n                }\n                const componentIndex = this.componentValues.indexOf(componentToRemove);\n                if (componentIndex > -1) {\n                    this.componentValues.splice(componentIndex, 1);\n                }\n            }\n            const rootComponent = this._getClassHierarchyRoot(type);\n            this.components.delete(rootComponent);\n            this.components.delete(type); // remove after the notify to preserve typing\n        }\n        else {\n            this._componentsToRemove.push(type);\n        }\n        return this;\n    }\n    clearComponents() {\n        const components = this.types;\n        for (const c of components) {\n            this.removeComponent(c);\n        }\n    }\n    /**\n     * @hidden\n     * @internal\n     */\n    processComponentRemoval() {\n        for (const type of this._componentsToRemove) {\n            this.removeComponent(type, true);\n        }\n        this._componentsToRemove.length = 0;\n    }\n    /**\n     * Check if a component type exists\n     * @param type\n     */\n    has(type) {\n        return this.components.has(type);\n    }\n    /**\n     * Gets whether the actor is Initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    get isAdded() {\n        return this._isAdded;\n    }\n    /**\n     * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _initialize(engine) {\n        if (!this.isInitialized) {\n            this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Adds this Actor, meant to be called by the Scene when Actor is added.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _add(engine) {\n        if (!this.isAdded && this.isActive) {\n            this.onAdd(engine);\n            this.events.emit('add', new AddEvent(engine, this));\n            this._isAdded = true;\n        }\n    }\n    /**\n     * Removes Actor, meant to be called by the Scene when Actor is added.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _remove(engine) {\n        if (this.isAdded && !this.isActive) {\n            this.onRemove(engine);\n            this.events.emit('remove', new RemoveEvent(engine, this));\n            this._isAdded = false;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * `onInitialize` is called before the first update of the entity. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n     */\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * `onAdd` is called when Actor is added to scene. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('add', (evt) => {...})`\n     */\n    onAdd(engine) {\n        // Override me\n    }\n    /**\n     * `onRemove` is called when Actor is added to scene. This method is meant to be\n     * overridden.\n     *\n     * Synonymous with the event handler `.on('remove', (evt) => {...})`\n     */\n    onRemove(engine) {\n        // Override me\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before an entity is updated.\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after an entity is updated.\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     *\n     * Entity update lifecycle, called internally\n     * @internal\n     * @param engine\n     * @param elapsed\n     */\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._add(engine);\n        this._preupdate(engine, elapsed);\n        for (const child of this.children) {\n            child.update(engine, elapsed);\n        }\n        this._postupdate(engine, elapsed);\n        this._remove(engine);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        if (handler) {\n            this.events.off(eventName, handler);\n        }\n        else {\n            this.events.off(eventName);\n        }\n    }\n}\nEntity._ID = 0;\n\n;// ./EntityComponentSystem/Components/MotionComponent.ts\n\n\nclass MotionComponent extends Component {\n    constructor() {\n        super(...arguments);\n        /**\n         * The velocity of an entity in pixels per second\n         */\n        this.vel = Vector.Zero;\n        /**\n         * The acceleration of entity in pixels per second^2\n         */\n        this.acc = Vector.Zero;\n        /**\n         * The scale rate of change in scale units per second\n         */\n        this.scaleFactor = Vector.Zero;\n        /**\n         * The angular velocity which is how quickly the entity is rotating in radians per second\n         */\n        this.angularVelocity = 0;\n        /**\n         * The amount of torque applied to the entity, angular acceleration is torque * inertia\n         */\n        this.torque = 0;\n        /**\n         * Inertia can be thought of as the resistance to motion\n         */\n        this.inertia = 1;\n    }\n}\n\n;// ./Collision/Integrator.ts\n\nclass EulerIntegrator {\n    static integrate(transform, motion, totalAcc, elapsed) {\n        const seconds = elapsed / 1000;\n        // This code looks a little wild, but it's to avoid creating any new Vector instances\n        // integration is done in a tight loop so this is key to avoid GC'ing\n        motion.vel.addEqual(totalAcc.scale(seconds, EulerIntegrator._ACC));\n        transform.pos\n            .add(motion.vel.scale(seconds, EulerIntegrator._VEL), EulerIntegrator._POS)\n            .addEqual(totalAcc.scale(0.5 * seconds * seconds, EulerIntegrator._VEL_ACC));\n        motion.angularVelocity += motion.torque * (1.0 / motion.inertia) * seconds;\n        const rotation = transform.rotation + motion.angularVelocity * seconds;\n        transform.scale.add(motion.scaleFactor.scale(seconds, this._SCALE_FACTOR), EulerIntegrator._SCALE);\n        const tx = transform.get();\n        tx.setTransform(EulerIntegrator._POS, rotation, EulerIntegrator._SCALE);\n    }\n}\n// Scratch vectors to avoid allocation\nEulerIntegrator._POS = new Vector(0, 0);\nEulerIntegrator._SCALE = new Vector(1, 1);\nEulerIntegrator._ACC = new Vector(0, 0);\nEulerIntegrator._VEL = new Vector(0, 0);\nEulerIntegrator._VEL_ACC = new Vector(0, 0);\nEulerIntegrator._SCALE_FACTOR = new Vector(0, 0);\n\n;// ./Particles/Particles.ts\n\n\n\n\n\n\n\n\n\n/**\n/**\n * CPU Particle is used in a {@apilink ParticleEmitter}\n */\nclass Particle extends Entity {\n    constructor(options) {\n        super({ silenceWarnings: true });\n        this.beginColor = Color.White;\n        this.endColor = Color.White;\n        // Life is counted in ms\n        this.life = 300;\n        this.fade = false;\n        // Color transitions\n        this._rRate = 1;\n        this._gRate = 1;\n        this._bRate = 1;\n        this._aRate = 0;\n        this._currentColor = Color.White;\n        this.size = 5;\n        this.sizeRate = 0;\n        this.visible = true;\n        this.isOffscreen = false;\n        this.particleTransform = ParticleTransform.Global;\n        this.name = `Particle#${this.id}`;\n        this.addComponent((this.transform = new TransformComponent()));\n        this.addComponent((this.motion = new MotionComponent()));\n        this.addComponent((this.graphics = new GraphicsComponent()));\n        this.configure(options);\n    }\n    registerEmitter(emitter) {\n        this._emitter = emitter;\n        if (this.particleTransform === ParticleTransform.Global) {\n            const globalPos = this._emitter.transform.globalPos;\n            this.transform.pos = this.transform.pos.add(globalPos);\n            this.motion.vel = this.motion.vel.rotate(this._emitter.transform.globalRotation);\n        }\n    }\n    configure(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n        this.particleTransform = (_a = options.transform) !== null && _a !== void 0 ? _a : this.particleTransform;\n        this.life = (_b = options.life) !== null && _b !== void 0 ? _b : this.life;\n        this.fade = (_c = options.fade) !== null && _c !== void 0 ? _c : this.fade;\n        this.size = (_d = options.size) !== null && _d !== void 0 ? _d : this.size;\n        this.endColor = (_e = options.endColor) !== null && _e !== void 0 ? _e : this.endColor.clone();\n        this.beginColor = (_f = options.beginColor) !== null && _f !== void 0 ? _f : this.beginColor.clone();\n        this._currentColor = this.beginColor.clone();\n        this.graphic = options.graphic;\n        this.graphics.opacity = (_g = options.opacity) !== null && _g !== void 0 ? _g : this.graphics.opacity;\n        this.transform.pos = (_h = options.pos) !== null && _h !== void 0 ? _h : this.transform.pos;\n        this.transform.rotation = (_j = options.rotation) !== null && _j !== void 0 ? _j : 0;\n        this.transform.scale = vec(1, 1);\n        this.motion.vel = (_k = options.vel) !== null && _k !== void 0 ? _k : this.motion.vel;\n        this.motion.angularVelocity = (_l = options.angularVelocity) !== null && _l !== void 0 ? _l : 0;\n        this.motion.acc = (_m = options.acc) !== null && _m !== void 0 ? _m : this.motion.acc;\n        this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\n        this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\n        this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\n        this._aRate = this.graphics.opacity / this.life;\n        this.startSize = (_o = options.startSize) !== null && _o !== void 0 ? _o : 0;\n        this.endSize = (_p = options.endSize) !== null && _p !== void 0 ? _p : 0;\n        if (this.endSize > 0 && this.startSize > 0) {\n            this.sizeRate = (this.endSize - this.startSize) / this.life;\n            this.size = this.startSize;\n        }\n        if (this.graphic) {\n            this.graphics.use(this.graphic);\n            this.graphics.onPostDraw = undefined;\n        }\n        else {\n            this.graphics.localBounds = BoundingBox.fromDimension(this.size, this.size, Vector.Half);\n            this.graphics.onPostDraw = (ctx) => {\n                ctx.save();\n                ctx.debug.drawPoint(vec(0, 0), { color: this._currentColor, size: this.size });\n                ctx.restore();\n            };\n        }\n    }\n    kill() {\n        var _a;\n        if ((_a = this._emitter) === null || _a === void 0 ? void 0 : _a.isActive) {\n            this._emitter.removeParticle(this);\n        }\n        else {\n            super.kill();\n        }\n    }\n    update(engine, elapsed) {\n        this.life = this.life - elapsed;\n        if (this.life < 0) {\n            this.kill();\n        }\n        if (this.fade) {\n            this.graphics.opacity = clamp(this._aRate * this.life, 0.0001, 1);\n        }\n        if (this.startSize && this.endSize && this.startSize > 0 && this.endSize > 0) {\n            this.size = clamp(this.sizeRate * elapsed + this.size, Math.min(this.startSize, this.endSize), Math.max(this.startSize, this.endSize));\n        }\n        this._currentColor.r = clamp(this._currentColor.r + this._rRate * elapsed, 0, 255);\n        this._currentColor.g = clamp(this._currentColor.g + this._gRate * elapsed, 0, 255);\n        this._currentColor.b = clamp(this._currentColor.b + this._bRate * elapsed, 0, 255);\n        this._currentColor.a = this.graphics.opacity;\n        let accel = this.motion.acc;\n        if (this.focus) {\n            accel = this.focus\n                .sub(this.transform.pos)\n                .normalize()\n                .scale(this.focusAccel || 0)\n                .scale(elapsed / 1000);\n        }\n        // Update transform and motion based on Euler linear algebra\n        EulerIntegrator.integrate(this.transform, this.motion, accel, elapsed);\n    }\n}\nParticle.DefaultConfig = {\n    beginColor: Color.White,\n    endColor: Color.White,\n    life: 300,\n    fade: false,\n    size: 5,\n    graphic: undefined,\n    startSize: undefined,\n    endSize: undefined\n};\nvar ParticleTransform;\n(function (ParticleTransform) {\n    /**\n     * {@apilink ParticleTransform.Global} is the default and emits particles as if\n     * they were world space objects, useful for most effects.\n     */\n    ParticleTransform[\"Global\"] = \"global\";\n    /**\n     * {@apilink ParticleTransform.Local} particles are children of the emitter and move relative to the emitter\n     * as they would in a parent/child actor relationship.\n     */\n    ParticleTransform[\"Local\"] = \"local\";\n})(ParticleTransform || (ParticleTransform = {}));\n\n;// ./Graphics/Context/particle-renderer/particle-renderer.ts\n\n\n\n\n\n\n\n\n\nclass ParticleRenderer {\n    constructor() {\n        this.type = 'ex.particle';\n        this.priority = 0;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        this._shader = new Shader({\n            gl,\n            vertexSource: particle_vertex,\n            fragmentSource: particle_fragment,\n            onPreLink: (program) => {\n                gl.transformFeedbackVaryings(program, ['finalPosition', 'finalVelocity', 'finalRotation', 'finalAngularVelocity', 'finalLifeMs'], gl.INTERLEAVED_ATTRIBS);\n            }\n        });\n        this._shader.compile();\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n    }\n    _getTexture(image) {\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        return texture;\n    }\n    draw(renderer, elapsed) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        const gl = this._gl;\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        const transform = renderer.particle.transform === ParticleTransform.Local\n            ? this._context.getTransform()\n            : this._context.getTransform().multiply(renderer.emitter.transform.get().inverse);\n        this._shader.setUniformAffineMatrix('u_transform', transform);\n        this._shader.setUniformBoolean('fade', renderer.particle.fade ? true : false);\n        this._shader.setUniformBoolean('useTexture', renderer.particle.graphic ? true : false);\n        this._shader.setUniformFloat('maxLifeMs', (_a = renderer.particle.life) !== null && _a !== void 0 ? _a : 2000);\n        this._shader.setUniformFloat('deltaMs', elapsed);\n        this._shader.setUniformFloatVector('gravity', (_b = renderer.particle.acc) !== null && _b !== void 0 ? _b : vec(0, 0));\n        this._shader.setUniformFloatColor('beginColor', (_c = renderer.particle.beginColor) !== null && _c !== void 0 ? _c : Color.Transparent);\n        this._shader.setUniformFloatColor('endColor', (_d = renderer.particle.endColor) !== null && _d !== void 0 ? _d : Color.Transparent);\n        let startSize = (_e = renderer.particle.startSize) !== null && _e !== void 0 ? _e : 0;\n        let endSize = (_f = renderer.particle.endSize) !== null && _f !== void 0 ? _f : 0;\n        const size = (_g = renderer.particle.size) !== null && _g !== void 0 ? _g : 0;\n        if (size > 0) {\n            startSize = size;\n            endSize = size;\n        }\n        this._shader.setUniformFloat('startSize', startSize !== null && startSize !== void 0 ? startSize : 10);\n        this._shader.setUniformFloat('endSize', endSize !== null && endSize !== void 0 ? endSize : 10);\n        this._shader.setUniformFloat('startOpacity', (_h = renderer.particle.opacity) !== null && _h !== void 0 ? _h : 1);\n        if (renderer.particle.focus) {\n            this._shader.setUniformFloatVector('focus', renderer.particle.focus);\n            this._shader.setUniformFloat('focusAccel', (_j = renderer.particle.focusAccel) !== null && _j !== void 0 ? _j : 0);\n        }\n        // Particle Graphic (only Sprites right now)\n        if (renderer.particle.graphic) {\n            const graphic = renderer.particle.graphic;\n            const texture = this._getTexture(graphic.image.image);\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            this._shader.setUniformInt('graphic', 0);\n        }\n        // Collision Mask\n        // gl.activeTexture(gl.TEXTURE0 + 1);\n        // gl.bindTexture(gl.TEXTURE_2D, obstacleTex);\n        // gl.uniform1i(u_obstacle, 1);\n        renderer.draw(gl);\n    }\n    hasPendingDraws() {\n        return false;\n    }\n    flush() {\n        // pass\n    }\n    dispose() {\n        // pass\n    }\n}\n\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.frag.glsl\n/* harmony default export */ const image_renderer_v2_frag = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n\\r\\n// UV coord\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// Textures in the current draw\\r\\nuniform sampler2D u_textures[%%count%%];\\r\\n\\r\\nuniform bool u_pixelart;\\r\\n\\r\\nin float v_texture_index;\\r\\n\\r\\nin float v_opacity;\\r\\n\\r\\nin vec4 v_tint;\\r\\n\\r\\n// texture resolution\\r\\nin vec2 v_res;\\r\\n\\r\\nin vec2 v_size;\\r\\n\\r\\nin vec2 v_uv_min;\\r\\nin vec2 v_uv_max;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\n// Inigo Quilez pixel art filter https://jorenjoestar.github.io/post/pixel_art_filtering/\\r\\nvec2 uv_iq(in vec2 uv, in vec2 texture_size) {\\r\\n  vec2 pixel = uv * texture_size;\\r\\n\\r\\n  vec2 seam=floor(pixel+.5);\\r\\n  vec2 dudv=fwidth(pixel);\\r\\n  pixel=seam+clamp((pixel-seam)/dudv,-.5,.5);\\r\\n\\r\\n  return pixel/texture_size;\\r\\n}\\r\\n\\r\\nfloat lerp(float from, float to, float rel){\\r\\n  return ((1. - rel) * from) + (rel * to);\\r\\n}\\r\\n\\r\\nfloat invLerp(float from, float to, float value){\\r\\n  return (value - from) / (to - from);\\r\\n}\\r\\n\\r\\nfloat remap(float origFrom, float origTo, float targetFrom, float targetTo, float value){\\r\\n  float rel = invLerp(origFrom, origTo, value);\\r\\n  return lerp(targetFrom, targetTo, rel);\\r\\n}\\r\\n\\r\\nvoid main(){\\r\\n  // In order to support the most efficient sprite batching, we have multiple\\r\\n  // textures loaded into the gpu (usually 8) this picker logic skips over textures\\r\\n  // that do not apply to a particular sprite.\\r\\n\\r\\n  vec4 color=vec4(1.,0,0,1.);\\r\\n  vec2 remapped_uv = v_texcoord;\\r\\n  remapped_uv.x = remap(0.,1., v_uv_min.x, v_uv_max.x, v_texcoord.x);\\r\\n  remapped_uv.y = remap(0.,1., v_uv_min.y, v_uv_max.y, v_texcoord.y);\\r\\n  vec2 uv = u_pixelart ? uv_iq(remapped_uv, v_size) : remapped_uv;\\r\\n\\r\\n  // GLSL is templated out to pick the right texture and set the vec4 color\\r\\n  %%texture_picker%%\\r\\n\\r\\n  color.rgb = color.rgb * v_opacity;\\r\\n  color.a = color.a * v_opacity;\\r\\n  fragColor = color * v_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.vert.glsl\n/* harmony default export */ const image_renderer_v2_vert = (\"#version 300 es\\r\\nlayout(location=0) in vec2 pos;\\r\\nlayout(location=1) in vec2 a_texcoord;\\r\\nout vec2 v_texcoord;\\r\\n\\r\\nlayout(location=2) in vec2 a_offset;\\r\\nlayout(location=3) in vec2 a_mat_column1;\\r\\nlayout(location=4) in vec2 a_mat_column2;\\r\\nlayout(location=5) in vec2 a_mat_column3;\\r\\n\\r\\nlayout(location=6) in float a_opacity;\\r\\nout float v_opacity;\\r\\n\\r\\n// Texture resolution (could be bigger than a_size)\\r\\nlayout(location=7) in vec2 a_res;\\r\\nout vec2 v_res;\\r\\n\\r\\n// Final size of graphic\\r\\nlayout(location=8) in vec2 a_size;\\r\\nout vec2 v_size;\\r\\n\\r\\nlayout(location=9) in lowp float a_texture_index;\\r\\nout lowp float v_texture_index;\\r\\n\\r\\nlayout(location=10) in vec2 a_uv_min;\\r\\nout vec2 v_uv_min;\\r\\n\\r\\nlayout(location=11) in vec2 a_uv_max;\\r\\nout vec2 v_uv_max;\\r\\n\\r\\nlayout(location=12) in vec4 a_tint;\\r\\nout vec4 v_tint;\\r\\n\\r\\nuniform mat4 u_matrix;\\r\\n\\r\\nvoid main(){\\r\\n  mat4 world_mat = mat4(\\r\\n    a_mat_column1.x, a_mat_column1.y, 0., 0.,\\r\\n    a_mat_column2.x, a_mat_column2.y, 0., 0.,\\r\\n    0.             , 0.             , 1., 0.,\\r\\n    a_mat_column3.x, a_mat_column3.y, 0., 1.\\r\\n  );\\r\\n\\r\\n  vec2 newPos = vec2(pos.x * a_res.x, pos.y * a_res.y);\\r\\n  gl_Position = u_matrix * world_mat * vec4(newPos + a_offset, 0., 1.);\\r\\n\\r\\n  v_opacity = a_opacity;\\r\\n  v_texcoord = a_texcoord;\\r\\n  v_uv_min = a_uv_min;\\r\\n  v_uv_max = a_uv_max;\\r\\n  v_res = a_res;\\r\\n  v_size = a_size;\\r\\n  v_texture_index = a_texture_index;\\r\\n  v_tint = a_tint;\\r\\n}\");\n;// ./Graphics/Context/image-renderer-v2/image-renderer-v2.ts\n// import { Color } from '../../../Color';\n// import { parseImageFiltering } from '../../Filtering';\n\n\n\n\n\n\n\n\n\n\n\nclass ImageRendererV2 {\n    constructor(options) {\n        this.type = 'ex.image-v2';\n        this.priority = 0;\n        // TODO this could be bigger probably\n        this._maxImages = 20000; // max(uint16) / 6 verts\n        this._maxTextures = 0;\n        this._components = 2 + 2 + 2 + 2 + 1 + 2 + 2 + 1 + 2 + 2 + 4;\n        // Per flush vars\n        this._imageCount = 0;\n        this._textures = [];\n        this._textureIndex = 0;\n        this._textureToIndex = new Map();\n        this._images = new Set();\n        this._vertexIndex = 0;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this._view = [0, 0, 0, 0];\n        this._dest = [0, 0];\n        this._defaultTint = Color.White;\n        this.pixelArtSampler = options.pixelArtSampler;\n        this.uvPadding = options.uvPadding;\n    }\n    initialize(gl, context) {\n        this._gl = gl;\n        this._context = context;\n        // Transform shader source\n        const maxTexture = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n        const maxComplexity = getMaxShaderComplexity(gl, maxTexture);\n        this._maxTextures = Math.min(maxTexture, maxComplexity);\n        const transformedFrag = this._transformFragmentSource(image_renderer_v2_frag, this._maxTextures);\n        // Compile shader\n        this._shader = new Shader({\n            gl,\n            fragmentSource: transformedFrag,\n            vertexSource: image_renderer_v2_vert\n        });\n        this._shader.compile();\n        // setup uniforms\n        this._shader.use();\n        this._shader.setUniformMatrix('u_matrix', context.ortho);\n        // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\n        this._shader.setUniformIntArray('u_textures', [...Array(this._maxTextures)].map((_, i) => i));\n        this._vao = gl.createVertexArray();\n        gl.bindVertexArray(this._vao);\n        this._quadMesh = new Float32Array([\n            // pos       uv\n            0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0,\n            1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1\n        ]);\n        this._meshBuffer = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._meshBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this._quadMesh, gl.STATIC_DRAW);\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 16, 0);\n        gl.enableVertexAttribArray(0);\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, 16, 8);\n        gl.enableVertexAttribArray(1);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        // Setup memory layout\n        const components = this._components;\n        this._transformData = new VertexBuffer({\n            gl,\n            size: components * this._maxImages, // components * images\n            type: 'dynamic'\n        });\n        this._transformData.bind();\n        // attributes\n        let offset = 0;\n        let start = 2;\n        const bytesPerFloat = 4;\n        const totalSize = components * 4;\n        // a_offset vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(2);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column1 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(3);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column2 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(4);\n        offset += 2 * bytesPerFloat;\n        // a_mat_column3 vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(5);\n        offset += 2 * bytesPerFloat;\n        // a_opacity float - 1\n        gl.vertexAttribPointer(start++, 1, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(6);\n        offset += 1 * bytesPerFloat;\n        // a_res vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(7);\n        offset += 2 * bytesPerFloat;\n        // a_size vec2 - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(8);\n        offset += 2 * bytesPerFloat;\n        // a_texture_index - 1\n        gl.vertexAttribPointer(start++, 1, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(9);\n        offset += 1 * bytesPerFloat;\n        // a_uv_min - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(10);\n        offset += 2 * bytesPerFloat;\n        // a_uv_max - 2\n        gl.vertexAttribPointer(start++, 2, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(11);\n        offset += 2 * bytesPerFloat;\n        // a_tint - 4\n        gl.vertexAttribPointer(start++, 4, gl.FLOAT, false, totalSize, offset);\n        gl.enableVertexAttribArray(12);\n        offset += 4 * bytesPerFloat;\n        gl.vertexAttribDivisor(2, 1);\n        gl.vertexAttribDivisor(3, 1);\n        gl.vertexAttribDivisor(4, 1);\n        gl.vertexAttribDivisor(5, 1);\n        gl.vertexAttribDivisor(6, 1);\n        gl.vertexAttribDivisor(7, 1);\n        gl.vertexAttribDivisor(8, 1);\n        gl.vertexAttribDivisor(9, 1);\n        gl.vertexAttribDivisor(10, 1);\n        gl.vertexAttribDivisor(11, 1);\n        gl.vertexAttribDivisor(12, 1);\n        gl.bindVertexArray(null);\n    }\n    _bindData(gl) {\n        // Setup memory layout\n        const components = this._components;\n        this._transformData.bind();\n        this._transformData.upload(components * this._imageCount);\n        gl.bindVertexArray(this._vao);\n    }\n    dispose() {\n        this._transformData.dispose();\n        this._shader.dispose();\n        this._textures.length = 0;\n        this._context = null;\n        this._gl = null;\n    }\n    _transformFragmentSource(source, maxTextures) {\n        let newSource = source.replace('%%count%%', maxTextures.toString());\n        let texturePickerBuilder = '';\n        for (let i = 0; i < maxTextures; i++) {\n            if (i === 0) {\n                texturePickerBuilder += `if (v_texture_index <= ${i}.5) {\\n`;\n            }\n            else {\n                texturePickerBuilder += `   else if (v_texture_index <= ${i}.5) {\\n`;\n            }\n            texturePickerBuilder += `      color = texture(u_textures[${i}], uv);\\n`;\n            texturePickerBuilder += `   }\\n`;\n        }\n        newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n        return newSource;\n    }\n    _addImageAsTexture(image) {\n        if (this._images.has(image)) {\n            return;\n        }\n        const maybeFiltering = image.getAttribute(ImageSourceAttributeConstants.Filtering);\n        const filtering = maybeFiltering ? parseImageFiltering(maybeFiltering) : undefined;\n        const wrapX = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingX));\n        const wrapY = parseImageWrapping(image.getAttribute(ImageSourceAttributeConstants.WrappingY));\n        const force = image.getAttribute('forceUpload') === 'true' ? true : false;\n        const texture = this._context.textureLoader.load(image, {\n            filtering,\n            wrapping: { x: wrapX, y: wrapY }\n        }, force);\n        // remove force attribute after upload\n        image.removeAttribute('forceUpload');\n        if (this._textures.indexOf(texture) === -1) {\n            this._textures.push(texture);\n            this._textureToIndex.set(texture, this._textureIndex++);\n            this._images.add(image);\n        }\n    }\n    _bindTextures(gl) {\n        // Bind textures in the correct order\n        const max = Math.min(this._textureIndex, this._maxTextures);\n        for (let i = 0; i < max; i++) {\n            gl.activeTexture(gl.TEXTURE0 + i);\n            gl.bindTexture(gl.TEXTURE_2D, this._textures[i] || this._textures[0]);\n        }\n    }\n    _getTextureIdForImage(image) {\n        var _a;\n        if (image) {\n            const maybeTexture = this._context.textureLoader.get(image);\n            return (_a = this._textureToIndex.get(maybeTexture)) !== null && _a !== void 0 ? _a : -1; //this._textures.indexOf(maybeTexture);\n        }\n        return -1;\n    }\n    _isFull() {\n        if (this._imageCount >= this._maxImages) {\n            return true;\n        }\n        if (this._textures.length >= this._maxTextures) {\n            return true;\n        }\n        return false;\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    draw(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        var _a, _b, _c, _d;\n        // Force a render if the batch is full\n        if (this._isFull()) {\n            this.flush();\n        }\n        this._imageCount++;\n        // This creates and uploads the texture if not already done\n        this._addImageAsTexture(image);\n        const maybeImageWidth = this._getImageWidth(image);\n        const maybeImageHeight = this._getImageHeight(image);\n        let width = maybeImageWidth || swidth || 0;\n        let height = maybeImageHeight || sheight || 0;\n        this._view[0] = 0;\n        this._view[1] = 0;\n        this._view[2] = (_a = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _a !== void 0 ? _a : 0;\n        this._view[3] = (_b = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _b !== void 0 ? _b : 0;\n        this._dest[0] = sx !== null && sx !== void 0 ? sx : 1;\n        this._dest[1] = sy !== null && sy !== void 0 ? sy : 1;\n        // If destination is specified, update view and dest\n        if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n            this._view[0] = sx !== null && sx !== void 0 ? sx : 1;\n            this._view[1] = sy !== null && sy !== void 0 ? sy : 1;\n            this._view[2] = (_c = swidth !== null && swidth !== void 0 ? swidth : maybeImageWidth) !== null && _c !== void 0 ? _c : 0;\n            this._view[3] = (_d = sheight !== null && sheight !== void 0 ? sheight : maybeImageHeight) !== null && _d !== void 0 ? _d : 0;\n            this._dest[0] = dx;\n            this._dest[1] = dy;\n            width = dwidth;\n            height = dheight;\n        }\n        sx = this._view[0];\n        sy = this._view[1];\n        const sw = this._view[2];\n        const sh = this._view[3];\n        // transform based on current context\n        const transform = this._context.getTransform();\n        const opacity = this._context.opacity;\n        const snapToPixel = this._context.snapToPixel;\n        if (snapToPixel) {\n            this._dest[0] = ~~(this._dest[0] + pixelSnapEpsilon);\n            this._dest[1] = ~~(this._dest[1] + pixelSnapEpsilon);\n        }\n        const tint = this._context.tint || this._defaultTint;\n        const textureId = this._getTextureIdForImage(image);\n        const imageWidth = maybeImageWidth || width;\n        const imageHeight = maybeImageHeight || height;\n        const uvx0 = (sx + this.uvPadding) / imageWidth;\n        const uvy0 = (sy + this.uvPadding) / imageHeight;\n        const uvx1 = (sx + sw - this.uvPadding) / imageWidth;\n        const uvy1 = (sy + sh - this.uvPadding) / imageHeight;\n        const txWidth = maybeImageWidth;\n        const txHeight = maybeImageHeight;\n        // update data\n        const vertexBuffer = this._transformData.bufferData;\n        vertexBuffer[this._vertexIndex++] = this._dest[0];\n        vertexBuffer[this._vertexIndex++] = this._dest[1];\n        vertexBuffer[this._vertexIndex++] = transform.data[0];\n        vertexBuffer[this._vertexIndex++] = transform.data[1];\n        vertexBuffer[this._vertexIndex++] = transform.data[2];\n        vertexBuffer[this._vertexIndex++] = transform.data[3];\n        vertexBuffer[this._vertexIndex++] = transform.data[4];\n        vertexBuffer[this._vertexIndex++] = transform.data[5];\n        vertexBuffer[this._vertexIndex++] = opacity;\n        vertexBuffer[this._vertexIndex++] = width;\n        vertexBuffer[this._vertexIndex++] = height;\n        vertexBuffer[this._vertexIndex++] = txWidth;\n        vertexBuffer[this._vertexIndex++] = txHeight;\n        vertexBuffer[this._vertexIndex++] = textureId;\n        vertexBuffer[this._vertexIndex++] = uvx0;\n        vertexBuffer[this._vertexIndex++] = uvy0;\n        vertexBuffer[this._vertexIndex++] = uvx1;\n        vertexBuffer[this._vertexIndex++] = uvy1;\n        vertexBuffer[this._vertexIndex++] = tint.r / 255;\n        vertexBuffer[this._vertexIndex++] = tint.g / 255;\n        vertexBuffer[this._vertexIndex++] = tint.b / 255;\n        vertexBuffer[this._vertexIndex++] = tint.a;\n    }\n    hasPendingDraws() {\n        return this._imageCount !== 0;\n    }\n    flush() {\n        // nothing to draw early exit\n        if (this._imageCount === 0) {\n            return;\n        }\n        const gl = this._gl;\n        // Bind the shader\n        this._shader.use();\n        // Bind the memory layout and upload data\n        this._bindData(gl);\n        // Update ortho matrix uniform\n        this._shader.setUniformMatrix('u_matrix', this._context.ortho);\n        // Turn on pixel art aa sampler\n        this._shader.setUniformBoolean('u_pixelart', this.pixelArtSampler);\n        // Bind textures to\n        this._bindTextures(gl);\n        // Draw all the quads\n        gl.drawArraysInstanced(gl.TRIANGLES, 0, 6, this._imageCount);\n        GraphicsDiagnostics.DrawnImagesCount += this._imageCount;\n        GraphicsDiagnostics.DrawCallCount++;\n        gl.bindVertexArray(null);\n        // Reset\n        this._imageCount = 0;\n        this._vertexIndex = 0;\n        this._textures.length = 0;\n        this._textureIndex = 0;\n        this._textureToIndex.clear();\n        this._images.clear();\n        this._imageToWidth.clear();\n        this._imageToHeight.clear();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContextWebGL.ts\n\n\n\n\n\n\n\n\n\n// renderers\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst pixelSnapEpsilon = 0.0001;\nclass ExcaliburGraphicsContextWebGLDebug {\n    constructor(_webglCtx) {\n        this._webglCtx = _webglCtx;\n        this._debugText = new DebugText();\n    }\n    /**\n     * Draw a debugging rectangle to the context\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    drawRect(x, y, width, height, rectOptions = { color: Color.Black }) {\n        this.drawLine(vec(x, y), vec(x + width, y), { ...rectOptions });\n        this.drawLine(vec(x + width, y), vec(x + width, y + height), { ...rectOptions });\n        this.drawLine(vec(x + width, y + height), vec(x, y + height), { ...rectOptions });\n        this.drawLine(vec(x, y + height), vec(x, y), { ...rectOptions });\n    }\n    /**\n     * Draw a debugging line to the context\n     * @param start\n     * @param end\n     * @param lineOptions\n     */\n    drawLine(start, end, lineOptions) {\n        var _a;\n        this._webglCtx.draw('ex.line', start, end, (_a = lineOptions === null || lineOptions === void 0 ? void 0 : lineOptions.color) !== null && _a !== void 0 ? _a : Color.Black);\n    }\n    /**\n     * Draw a debugging point to the context\n     * @param point\n     * @param pointOptions\n     */\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\n        this._webglCtx.draw('ex.point', point, pointOptions.color, pointOptions.size);\n    }\n    drawText(text, pos) {\n        this._debugText.write(this._webglCtx, text, pos);\n    }\n}\nclass ExcaliburGraphicsContextWebGL {\n    get z() {\n        return this._state.current.z;\n    }\n    set z(value) {\n        this._state.current.z = value;\n    }\n    get opacity() {\n        return this._state.current.opacity;\n    }\n    set opacity(value) {\n        this._state.current.opacity = value;\n    }\n    get tint() {\n        return this._state.current.tint;\n    }\n    set tint(color) {\n        this._state.current.tint = color;\n    }\n    get width() {\n        return this.__gl.canvas.width;\n    }\n    get height() {\n        return this.__gl.canvas.height;\n    }\n    get ortho() {\n        return this._ortho;\n    }\n    /**\n     * Checks the underlying webgl implementation if the requested internal resolution is supported\n     * @param dim\n     */\n    checkIfResolutionSupported(dim) {\n        // Slight hack based on this thread https://groups.google.com/g/webgl-dev-list/c/AHONvz3oQTo\n        let supported = true;\n        if (dim.width > 4096 || dim.height > 4096) {\n            supported = false;\n        }\n        return supported;\n    }\n    constructor(options) {\n        this._logger = Logger.getInstance();\n        this._renderers = new Map();\n        this._lazyRenderersFactory = new Map();\n        this.imageRenderer = Flags.isEnabled('use-legacy-image-renderer') ? 'ex.image' : 'ex.image-v2';\n        this._isDrawLifecycle = false;\n        this.useDrawSorting = true;\n        this._drawCallPool = new Pool(() => new DrawCall(), undefined, 4000);\n        this._drawCallIndex = 0;\n        this._drawCalls = new Array(4000).fill(null);\n        // Postprocessing is a tuple with 2 render targets, these are flip-flopped during the postprocessing process\n        this._postProcessTargets = [];\n        this._postprocessors = [];\n        this._transform = new TransformStack();\n        this._state = new StateStack();\n        /**\n         * Snaps the drawing x/y coordinate to the nearest whole pixel\n         */\n        this.snapToPixel = false;\n        /**\n         * Native context smoothing\n         */\n        this.smoothing = false;\n        /**\n         * Whether the pixel art sampler is enabled for smooth sub pixel anti-aliasing\n         */\n        this.pixelArtSampler = false;\n        /**\n         * UV padding in pixels to use in internal image rendering to prevent texture bleed\n         *\n         */\n        this.uvPadding = 0.01;\n        this.backgroundColor = Color.ExcaliburBlue;\n        this.multiSampleAntialiasing = true;\n        this.transparency = true;\n        this._isContextLost = false;\n        this._disposed = false;\n        this._imageToWidth = new Map();\n        this._imageToHeight = new Map();\n        this.debug = new ExcaliburGraphicsContextWebGLDebug(this);\n        this._totalPostProcessorTime = 0;\n        const { canvasElement, context, enableTransparency, antialiasing, uvPadding, multiSampleAntialiasing, pixelArtSampler, powerPreference, snapToPixel, backgroundColor, useDrawSorting, garbageCollector, handleContextLost, handleContextRestored } = options;\n        this.__gl =\n            context !== null && context !== void 0 ? context : canvasElement.getContext('webgl2', {\n                antialias: antialiasing !== null && antialiasing !== void 0 ? antialiasing : this.smoothing,\n                premultipliedAlpha: false,\n                alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : this.transparency,\n                depth: false,\n                powerPreference: powerPreference !== null && powerPreference !== void 0 ? powerPreference : 'high-performance'\n            });\n        if (!this.__gl) {\n            throw Error('Failed to retrieve webgl context from browser');\n        }\n        if (handleContextLost) {\n            this.__gl.canvas.addEventListener('webglcontextlost', handleContextLost, false);\n        }\n        if (handleContextRestored) {\n            this.__gl.canvas.addEventListener('webglcontextrestored', handleContextRestored, false);\n        }\n        this.__gl.canvas.addEventListener('webglcontextlost', () => {\n            this._isContextLost = true;\n        });\n        this.__gl.canvas.addEventListener('webglcontextrestored', () => {\n            this._isContextLost = false;\n        });\n        this.textureLoader = new TextureLoader(this.__gl, garbageCollector);\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\n        this.smoothing = antialiasing !== null && antialiasing !== void 0 ? antialiasing : this.smoothing;\n        this.transparency = enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : this.transparency;\n        this.pixelArtSampler = pixelArtSampler !== null && pixelArtSampler !== void 0 ? pixelArtSampler : this.pixelArtSampler;\n        this.uvPadding = uvPadding !== null && uvPadding !== void 0 ? uvPadding : this.uvPadding;\n        this.multiSampleAntialiasing = typeof multiSampleAntialiasing === 'boolean' ? multiSampleAntialiasing : this.multiSampleAntialiasing;\n        this.samples = typeof multiSampleAntialiasing === 'object' ? multiSampleAntialiasing.samples : undefined;\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\n        this.useDrawSorting = useDrawSorting !== null && useDrawSorting !== void 0 ? useDrawSorting : this.useDrawSorting;\n        this._drawCallPool.disableWarnings = true;\n        this._drawCallPool.preallocate();\n        this._init();\n    }\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            this.textureLoader.dispose();\n            for (const renderer of this._renderers.values()) {\n                renderer.dispose();\n            }\n            this._renderers.clear();\n            this._drawCallPool.dispose();\n            this._drawCalls.length = 0;\n            this.__gl = null;\n        }\n    }\n    _init() {\n        const gl = this.__gl;\n        // Setup viewport and view matrix\n        this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\n        gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n        // Clear background\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        // Enable alpha blending\n        // https://www.realtimerendering.com/blog/gpus-prefer-premultiplication/\n        gl.enable(gl.BLEND);\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.depthMask(false);\n        // Setup builtin renderers\n        this.register(new ImageRenderer({\n            uvPadding: this.uvPadding,\n            pixelArtSampler: this.pixelArtSampler\n        }));\n        this.register(new MaterialRenderer());\n        this.register(new RectangleRenderer());\n        this.register(new CircleRenderer());\n        this.register(new PointRenderer());\n        this.register(new LineRenderer());\n        this.lazyRegister('ex.particle', () => new ParticleRenderer());\n        this.register(new ImageRendererV2({\n            uvPadding: this.uvPadding,\n            pixelArtSampler: this.pixelArtSampler\n        }));\n        this.materialScreenTexture = gl.createTexture();\n        if (!this.materialScreenTexture) {\n            throw new Error('Could not create screen texture!');\n        }\n        gl.bindTexture(gl.TEXTURE_2D, this.materialScreenTexture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.width, this.height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n        this._screenRenderer = new ScreenPassPainter(gl);\n        this._renderTarget = new RenderTarget({\n            gl,\n            transparency: this.transparency,\n            width: gl.canvas.width,\n            height: gl.canvas.height\n        });\n        this._postProcessTargets = [\n            new RenderTarget({\n                gl,\n                transparency: this.transparency,\n                width: gl.canvas.width,\n                height: gl.canvas.height\n            }),\n            new RenderTarget({\n                gl,\n                transparency: this.transparency,\n                width: gl.canvas.width,\n                height: gl.canvas.height\n            })\n        ];\n        this._msaaTarget = new RenderTarget({\n            gl,\n            transparency: this.transparency,\n            width: gl.canvas.width,\n            height: gl.canvas.height,\n            antialias: this.multiSampleAntialiasing,\n            samples: this.samples\n        });\n    }\n    register(renderer) {\n        this._renderers.set(renderer.type, renderer);\n        renderer.initialize(this.__gl, this);\n    }\n    lazyRegister(type, renderer) {\n        this._lazyRenderersFactory.set(type, renderer);\n    }\n    get(rendererName) {\n        let maybeRenderer = this._renderers.get(rendererName);\n        if (!maybeRenderer) {\n            const lazyFactory = this._lazyRenderersFactory.get(rendererName);\n            if (lazyFactory) {\n                this._logger.debug('lazy init renderer:', rendererName);\n                maybeRenderer = lazyFactory();\n                this.register(maybeRenderer);\n            }\n        }\n        return maybeRenderer;\n    }\n    _isCurrentRenderer(renderer) {\n        if (!this._currentRenderer || this._currentRenderer === renderer) {\n            return true;\n        }\n        return false;\n    }\n    beginDrawLifecycle() {\n        this._isDrawLifecycle = true;\n    }\n    endDrawLifecycle() {\n        this._isDrawLifecycle = false;\n    }\n    draw(rendererName, ...args) {\n        if (false) {}\n        if (!this._isDrawLifecycle) {\n            this._logger.warnOnce(`Attempting to draw outside the the drawing lifecycle (preDraw/postDraw) is not supported and is a source of bugs/errors.\\n` +\n                `If you want to do custom drawing, use Actor.graphics, or any onPreDraw or onPostDraw handler.`);\n        }\n        if (this._isContextLost) {\n            this._logger.errorOnce(`Unable to draw ${rendererName}, the webgl context is lost`);\n            return;\n        }\n        const renderer = this.get(rendererName);\n        if (renderer) {\n            if (this.useDrawSorting) {\n                const drawCall = this._drawCallPool.get();\n                drawCall.z = this._state.current.z;\n                drawCall.priority = renderer.priority;\n                drawCall.renderer = rendererName;\n                this.getTransform().clone(drawCall.transform);\n                drawCall.state.z = this._state.current.z;\n                drawCall.state.opacity = this._state.current.opacity;\n                drawCall.state.tint = this._state.current.tint;\n                drawCall.state.material = this._state.current.material;\n                drawCall.args[0] = args[0];\n                drawCall.args[1] = args[1];\n                drawCall.args[2] = args[2];\n                drawCall.args[3] = args[3];\n                drawCall.args[4] = args[4];\n                drawCall.args[5] = args[5];\n                drawCall.args[6] = args[6];\n                drawCall.args[7] = args[7];\n                drawCall.args[8] = args[8];\n                drawCall.args[9] = args[9];\n                this._drawCalls[this._drawCallIndex++] = drawCall;\n            }\n            else {\n                // Set the current renderer if not defined\n                if (!this._currentRenderer) {\n                    this._currentRenderer = renderer;\n                }\n                if (!this._isCurrentRenderer(renderer)) {\n                    // switching graphics means we must flush the previous\n                    this._currentRenderer.flush();\n                }\n                // If we are still using the same renderer we can add to the current batch\n                renderer.draw(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]);\n                this._currentRenderer = renderer;\n            }\n        }\n        else {\n            throw Error(`No renderer with name ${rendererName} has been registered`);\n        }\n    }\n    resetTransform() {\n        this._transform.reset();\n    }\n    updateViewport(resolution) {\n        const gl = this.__gl;\n        this._ortho = this._ortho = Matrix.ortho(0, resolution.width, resolution.height, 0, 400, -400);\n        this._renderTarget.setResolution(gl.canvas.width, gl.canvas.height);\n        this._msaaTarget.setResolution(gl.canvas.width, gl.canvas.height);\n        this._postProcessTargets[0].setResolution(gl.canvas.width, gl.canvas.height);\n        this._postProcessTargets[1].setResolution(gl.canvas.width, gl.canvas.height);\n    }\n    _getImageWidth(image) {\n        let maybeWidth = this._imageToWidth.get(image);\n        if (maybeWidth === undefined) {\n            maybeWidth = image.width;\n            this._imageToWidth.set(image, maybeWidth);\n        }\n        return maybeWidth;\n    }\n    _getImageHeight(image) {\n        let maybeHeight = this._imageToHeight.get(image);\n        if (maybeHeight === undefined) {\n            maybeHeight = image.height;\n            this._imageToHeight.set(image, maybeHeight);\n        }\n        return maybeHeight;\n    }\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        if (swidth === 0 || sheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (dwidth === 0 || dheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (this._getImageWidth(image) === 0 || this._getImageHeight(image) === 0) {\n            return; // zero dimension source exit early\n        }\n        if (!image) {\n            Logger.getInstance().warn('Cannot draw a null or undefined image');\n            // tslint:disable-next-line: no-console\n            if (console.trace) {\n                // tslint:disable-next-line: no-console\n                console.trace();\n            }\n            return;\n        }\n        if (this._state.current.material) {\n            this.draw('ex.material', image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n        }\n        else {\n            if (this.imageRenderer === 'ex.image') {\n                this.draw(this.imageRenderer, image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n            }\n            else {\n                this.draw(this.imageRenderer, image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n            }\n        }\n    }\n    drawLine(start, end, color, thickness = 1) {\n        this.draw('ex.rectangle', start, end, color, thickness);\n    }\n    drawRectangle(pos, width, height, color, stroke, strokeThickness) {\n        this.draw('ex.rectangle', pos, width, height, color, stroke, strokeThickness);\n    }\n    drawCircle(pos, radius, color, stroke, thickness) {\n        this.draw('ex.circle', pos, radius, color, stroke, thickness);\n    }\n    save() {\n        this._transform.save();\n        this._state.save();\n    }\n    restore() {\n        this._transform.restore();\n        this._state.restore();\n    }\n    translate(x, y) {\n        this._transform.translate(this.snapToPixel ? ~~(x + pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + pixelSnapEpsilon) : y);\n    }\n    rotate(angle) {\n        this._transform.rotate(angle);\n    }\n    scale(x, y) {\n        this._transform.scale(x, y);\n    }\n    transform(matrix) {\n        this._transform.current = matrix;\n    }\n    getTransform() {\n        return this._transform.current;\n    }\n    multiply(m) {\n        this._transform.current.multiply(m, this._transform.current);\n    }\n    addPostProcessor(postprocessor) {\n        this._postprocessors.push(postprocessor);\n        postprocessor.initialize(this.__gl);\n    }\n    removePostProcessor(postprocessor) {\n        const index = this._postprocessors.indexOf(postprocessor);\n        if (index !== -1) {\n            this._postprocessors.splice(index, 1);\n        }\n    }\n    clearPostProcessors() {\n        this._postprocessors.length = 0;\n    }\n    updatePostProcessors(elapsed) {\n        for (const postprocessor of this._postprocessors) {\n            const shader = postprocessor.getShader();\n            shader.use();\n            const uniforms = shader.getUniforms();\n            this._totalPostProcessorTime += elapsed;\n            if (uniforms.find((u) => u.name === 'u_time_ms')) {\n                shader.setUniformFloat('u_time_ms', this._totalPostProcessorTime);\n            }\n            if (uniforms.find((u) => u.name === 'u_elapsed_ms')) {\n                shader.setUniformFloat('u_elapsed_ms', elapsed);\n            }\n            if (uniforms.find((u) => u.name === 'u_resolution')) {\n                shader.setUniformFloatVector('u_resolution', vec(this.width, this.height));\n            }\n            if (postprocessor.onUpdate) {\n                postprocessor.onUpdate(elapsed);\n            }\n        }\n    }\n    set material(material) {\n        this._state.current.material = material;\n    }\n    get material() {\n        return this._state.current.material;\n    }\n    /**\n     * Creates and initializes the material which compiles the internal shader\n     * @param options\n     * @returns Material\n     */\n    createMaterial(options) {\n        const material = new Material({ ...options, graphicsContext: this });\n        return material;\n    }\n    createShader(options) {\n        const gl = this.__gl;\n        const { vertexSource, fragmentSource } = options;\n        const shader = new Shader({\n            gl,\n            vertexSource,\n            fragmentSource\n        });\n        shader.compile();\n        return shader;\n    }\n    clear() {\n        const gl = this.__gl;\n        const currentTarget = this.multiSampleAntialiasing ? this._msaaTarget : this._renderTarget;\n        currentTarget.use();\n        gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n        // Clear the context with the newly set color. This is\n        // the function call that actually does the drawing.\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    /**\n     * Flushes all batched rendering to the screen\n     */\n    flush() {\n        var _a;\n        if (this._isContextLost) {\n            this._logger.errorOnce(`Unable to flush the webgl context is lost`);\n            return;\n        }\n        // render target captures all draws and redirects to the render target\n        let currentTarget = this.multiSampleAntialiasing ? this._msaaTarget : this._renderTarget;\n        currentTarget.use();\n        if (this.useDrawSorting) {\n            // null out unused draw calls\n            for (let i = this._drawCallIndex; i < this._drawCalls.length; i++) {\n                this._drawCalls[i] = null;\n            }\n            // sort draw calls\n            // Find the original order of the first instance of the draw call\n            const originalSort = new Map();\n            for (const [name] of this._renderers) {\n                let firstIndex = 0;\n                for (firstIndex = 0; firstIndex < this._drawCallIndex; firstIndex++) {\n                    if (this._drawCalls[firstIndex].renderer === name) {\n                        break;\n                    }\n                }\n                originalSort.set(name, firstIndex);\n            }\n            this._drawCalls.sort((a, b) => {\n                if (a === null || b === null) {\n                    return 0;\n                }\n                const zIndex = a.z - b.z;\n                const originalSortOrder = originalSort.get(a.renderer) - originalSort.get(b.renderer);\n                const priority = a.priority - b.priority;\n                if (zIndex === 0) {\n                    // sort by z first\n                    if (priority === 0) {\n                        // sort by priority\n                        return originalSortOrder; // use the original order to inform draw call packing to maximally preserve painter order\n                    }\n                    return priority;\n                }\n                return zIndex;\n            });\n            const oldTransform = this._transform.current;\n            const oldState = this._state.current;\n            if (this._drawCalls.length && this._drawCallIndex) {\n                let currentRendererName = this._drawCalls[0].renderer;\n                let currentRenderer = this.get(currentRendererName);\n                for (let i = 0; i < this._drawCallIndex; i++) {\n                    // hydrate the state for renderers\n                    this._transform.current = this._drawCalls[i].transform;\n                    this._state.current = this._drawCalls[i].state;\n                    if (this._drawCalls[i].renderer !== currentRendererName) {\n                        // switching graphics renderer means we must flush the previous\n                        currentRenderer.flush();\n                        currentRendererName = this._drawCalls[i].renderer;\n                        currentRenderer = this.get(currentRendererName);\n                    }\n                    // ! hack to grab screen texture before materials run because they might want it\n                    if (currentRenderer instanceof MaterialRenderer && ((_a = this.material) === null || _a === void 0 ? void 0 : _a.isUsingScreenTexture)) {\n                        currentTarget.copyToTexture(this.materialScreenTexture);\n                        currentTarget.use();\n                    }\n                    // If we are still using the same renderer we can add to the current batch\n                    currentRenderer.draw(...this._drawCalls[i].args);\n                }\n                if (currentRenderer.hasPendingDraws()) {\n                    currentRenderer.flush();\n                }\n            }\n            // reset state\n            this._transform.current = oldTransform;\n            this._state.current = oldState;\n            // reclaim draw calls\n            this._drawCallPool.done();\n            this._drawCallIndex = 0;\n            this._imageToHeight.clear();\n            this._imageToWidth.clear();\n        }\n        else {\n            // This is the final flush at the moment to draw any leftover pending draw\n            for (const renderer of this._renderers.values()) {\n                if (renderer.hasPendingDraws()) {\n                    renderer.flush();\n                }\n            }\n        }\n        currentTarget.disable();\n        // post process step\n        if (this._postprocessors.length > 0) {\n            currentTarget.toRenderSource().use();\n        }\n        // flip flop render targets for post processing\n        for (let i = 0; i < this._postprocessors.length; i++) {\n            currentTarget = this._postProcessTargets[i % 2];\n            this._postProcessTargets[i % 2].use();\n            this._screenRenderer.renderWithPostProcessor(this._postprocessors[i]);\n            this._postProcessTargets[i % 2].toRenderSource().use();\n        }\n        // Final blit to the screen\n        currentTarget.blitToScreen();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts\n\n\n\n\nconst ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon = 0.0001;\nclass ExcaliburGraphicsContext2DCanvasDebug {\n    constructor(_ex) {\n        this._ex = _ex;\n        this._debugText = new DebugText();\n    }\n    /**\n     * Draw a debug rectangle to the context\n     * @param x\n     * @param y\n     * @param width\n     * @param height\n     */\n    drawRect(x, y, width, height) {\n        this._ex.__ctx.save();\n        this._ex.__ctx.strokeStyle = 'red';\n        this._ex.__ctx.strokeRect(this._ex.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this._ex.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y, this._ex.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this._ex.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\n        this._ex.__ctx.restore();\n    }\n    drawLine(start, end, lineOptions = { color: Color.Black }) {\n        var _a, _b;\n        this._ex.__ctx.save();\n        this._ex.__ctx.beginPath();\n        this._ex.__ctx.strokeStyle = (_b = (_a = lineOptions.color) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '';\n        this._ex.__ctx.moveTo(this._ex.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this._ex.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\n        this._ex.__ctx.lineTo(this._ex.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this._ex.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\n        this._ex.__ctx.lineWidth = 2;\n        this._ex.__ctx.stroke();\n        this._ex.__ctx.closePath();\n        this._ex.__ctx.restore();\n    }\n    drawPoint(point, pointOptions = { color: Color.Black, size: 5 }) {\n        this._ex.__ctx.save();\n        this._ex.__ctx.beginPath();\n        this._ex.__ctx.fillStyle = pointOptions.color.toString();\n        this._ex.__ctx.arc(this._ex.snapToPixel ? ~~(point.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.x, this._ex.snapToPixel ? ~~(point.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : point.y, pointOptions.size, 0, Math.PI * 2);\n        this._ex.__ctx.fill();\n        this._ex.__ctx.closePath();\n        this._ex.__ctx.restore();\n    }\n    drawText(text, pos) {\n        this._debugText.write(this._ex, text, pos);\n    }\n}\nclass ExcaliburGraphicsContext2DCanvas {\n    get width() {\n        return this.__ctx.canvas.width;\n    }\n    get height() {\n        return this.__ctx.canvas.height;\n    }\n    get opacity() {\n        return this._state.current.opacity;\n    }\n    set opacity(value) {\n        this._state.current.opacity = value;\n    }\n    get tint() {\n        return this._state.current.tint;\n    }\n    set tint(color) {\n        this._state.current.tint = color;\n    }\n    get smoothing() {\n        return this.__ctx.imageSmoothingEnabled;\n    }\n    set smoothing(value) {\n        this.__ctx.imageSmoothingEnabled = value;\n    }\n    constructor(options) {\n        /**\n         * Unused in Canvas implementation\n         */\n        this.useDrawSorting = false;\n        /**\n         * Unused in Canvas implementation\n         */\n        this.z = 0;\n        this.backgroundColor = Color.ExcaliburBlue;\n        this._state = new StateStack();\n        this.snapToPixel = false;\n        this.debug = new ExcaliburGraphicsContext2DCanvasDebug(this);\n        const { canvasElement, context, enableTransparency, snapToPixel, antialiasing: smoothing, backgroundColor } = options;\n        this.__ctx =\n            context !== null && context !== void 0 ? context : canvasElement.getContext('2d', {\n                alpha: enableTransparency !== null && enableTransparency !== void 0 ? enableTransparency : true\n            });\n        if (!this.__ctx) {\n            throw new Error('Cannot build new ExcaliburGraphicsContext2D for some reason!');\n        }\n        this.backgroundColor = backgroundColor !== null && backgroundColor !== void 0 ? backgroundColor : this.backgroundColor;\n        this.snapToPixel = snapToPixel !== null && snapToPixel !== void 0 ? snapToPixel : this.snapToPixel;\n        this.smoothing = smoothing !== null && smoothing !== void 0 ? smoothing : this.smoothing;\n    }\n    resetTransform() {\n        this.__ctx.resetTransform();\n    }\n    updateViewport(_resolution) {\n        // pass\n    }\n    drawImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight) {\n        if (swidth === 0 || sheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (dwidth === 0 || dheight === 0) {\n            return; // zero dimension dest exit early\n        }\n        else if (image.width === 0 || image.height === 0) {\n            return; // zero dimension source exit early\n        }\n        this.__ctx.globalAlpha = this.opacity;\n        const args = [image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\n            .filter((a) => a !== undefined)\n            .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\n        this.__ctx.drawImage.apply(this.__ctx, args);\n        GraphicsDiagnostics.DrawCallCount++;\n        GraphicsDiagnostics.DrawnImagesCount = 1;\n    }\n    drawLine(start, end, color, thickness = 1) {\n        this.__ctx.save();\n        this.__ctx.beginPath();\n        this.__ctx.strokeStyle = color.toString();\n        this.__ctx.moveTo(this.snapToPixel ? ~~(start.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.x, this.snapToPixel ? ~~(start.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : start.y);\n        this.__ctx.lineTo(this.snapToPixel ? ~~(end.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.x, this.snapToPixel ? ~~(end.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : end.y);\n        this.__ctx.lineWidth = thickness;\n        this.__ctx.stroke();\n        this.__ctx.closePath();\n        this.__ctx.restore();\n    }\n    drawRectangle(pos, width, height, color) {\n        this.__ctx.save();\n        this.__ctx.fillStyle = color.toString();\n        this.__ctx.fillRect(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, this.snapToPixel ? ~~(width + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : width, this.snapToPixel ? ~~(height + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : height);\n        this.__ctx.restore();\n    }\n    drawCircle(pos, radius, color, stroke, thickness) {\n        this.__ctx.save();\n        this.__ctx.beginPath();\n        if (stroke) {\n            this.__ctx.strokeStyle = stroke.toString();\n        }\n        if (thickness) {\n            this.__ctx.lineWidth = thickness;\n        }\n        this.__ctx.fillStyle = color.toString();\n        this.__ctx.arc(this.snapToPixel ? ~~(pos.x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.x, this.snapToPixel ? ~~(pos.y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : pos.y, radius, 0, Math.PI * 2);\n        this.__ctx.fill();\n        if (stroke) {\n            this.__ctx.stroke();\n        }\n        this.__ctx.closePath();\n        this.__ctx.restore();\n    }\n    /**\n     * Save the current state of the canvas to the stack (transforms and opacity)\n     */\n    save() {\n        this.__ctx.save();\n        this._state.save();\n    }\n    /**\n     * Restore the state of the canvas from the stack\n     */\n    restore() {\n        this.__ctx.restore();\n        this._state.restore();\n    }\n    /**\n     * Translate the origin of the context by an x and y\n     * @param x\n     * @param y\n     */\n    translate(x, y) {\n        this.__ctx.translate(this.snapToPixel ? ~~(x + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : x, this.snapToPixel ? ~~(y + ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon) : y);\n    }\n    /**\n     * Rotate the context about the current origin\n     */\n    rotate(angle) {\n        this.__ctx.rotate(angle);\n    }\n    /**\n     * Scale the context by an x and y factor\n     * @param x\n     * @param y\n     */\n    scale(x, y) {\n        this.__ctx.scale(x, y);\n    }\n    getTransform() {\n        throw new Error('Not implemented');\n    }\n    multiply(_m) {\n        this.__ctx.setTransform(this.__ctx.getTransform().multiply(_m.toDOMMatrix()));\n    }\n    addPostProcessor(_postprocessor) {\n        // pass\n    }\n    removePostProcessor(_postprocessor) {\n        // pass\n    }\n    clearPostProcessors() {\n        // pass\n    }\n    updatePostProcessors(elapsed) {\n        // pass\n    }\n    beginDrawLifecycle() {\n        // pass\n    }\n    endDrawLifecycle() {\n        // pass\n    }\n    set material(material) {\n        this._state.current.material = material;\n    }\n    get material() {\n        return this._state.current.material;\n    }\n    createMaterial(options) {\n        // pass\n        return null;\n    }\n    clear() {\n        // Clear frame\n        this.__ctx.clearRect(0, 0, this.width, this.height);\n        this.__ctx.fillStyle = this.backgroundColor.toString();\n        this.__ctx.fillRect(0, 0, this.width, this.height);\n        GraphicsDiagnostics.clear();\n    }\n    /**\n     * Flushes the batched draw calls to the screen\n     */\n    flush() {\n        // pass\n    }\n    dispose() {\n        this.__ctx = undefined;\n    }\n}\n\n;// ./Screen.ts\n\n\n\n\n\n\n\n/**\n * Enum representing the different display modes available to Excalibur.\n */\nvar DisplayMode;\n(function (DisplayMode) {\n    /**\n     * Default, use a specified resolution for the game. Like 800x600 pixels for example.\n     */\n    DisplayMode[\"Fixed\"] = \"Fixed\";\n    /**\n     * Fit the aspect ratio given by the game resolution within the container at all times will fill any gaps with canvas.\n     * The displayed area outside the aspect ratio is not guaranteed to be on the screen, only the {@apilink Screen.contentArea}\n     * is guaranteed to be on screen.\n     */\n    DisplayMode[\"FitContainerAndFill\"] = \"FitContainerAndFill\";\n    /**\n     * Fit the aspect ratio given by the game resolution the screen at all times will fill the screen.\n     * This displayed area outside the aspect ratio is not guaranteed to be on the screen, only the {@apilink Screen.contentArea}\n     * is guaranteed to be on screen.\n     */\n    DisplayMode[\"FitScreenAndFill\"] = \"FitScreenAndFill\";\n    /**\n     * Fit the viewport to the parent element maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\n     * (letterbox) that would otherwise be present in {@apilink FitContainer}.\n     *\n     * **warning** This will clip some drawable area from the user because of the zoom,\n     * use {@apilink Screen.contentArea} to know the safe to draw area.\n     */\n    DisplayMode[\"FitContainerAndZoom\"] = \"FitContainerAndZoom\";\n    /**\n     * Fit the viewport to the device screen maintaining aspect ratio given by the game resolution, but zooms in to avoid the black bars\n     * (letterbox) that would otherwise be present in {@apilink FitScreen}.\n     *\n     * **warning** This will clip some drawable area from the user because of the zoom,\n     * use {@apilink Screen.contentArea} to know the safe to draw area.\n     */\n    DisplayMode[\"FitScreenAndZoom\"] = \"FitScreenAndZoom\";\n    /**\n     * Fit to screen using as much space as possible while maintaining aspect ratio and resolution.\n     * This is not the same as {@apilink Screen.goFullScreen} but behaves in a similar way maintaining aspect ratio.\n     *\n     * You may want to center your game here is an example\n     * ```html\n     * <!-- html -->\n     * <body>\n     * <main>\n     *   <canvas id=\"game\"></canvas>\n     * </main>\n     * </body>\n     * ```\n     *\n     * ```css\n     * // css\n     * main {\n     *   display: flex;\n     *   align-items: center;\n     *   justify-content: center;\n     *   height: 100%;\n     *   width: 100%;\n     * }\n     * ```\n     */\n    DisplayMode[\"FitScreen\"] = \"FitScreen\";\n    /**\n     * Fill the entire screen's css width/height for the game resolution dynamically. This means the resolution of the game will\n     * change dynamically as the window is resized. This is not the same as {@apilink Screen.goFullScreen}\n     */\n    DisplayMode[\"FillScreen\"] = \"FillScreen\";\n    /**\n     * Fit to parent element width/height using as much space as possible while maintaining aspect ratio and resolution.\n     */\n    DisplayMode[\"FitContainer\"] = \"FitContainer\";\n    /**\n     * Use the parent DOM container's css width/height for the game resolution dynamically\n     */\n    DisplayMode[\"FillContainer\"] = \"FillContainer\";\n})(DisplayMode || (DisplayMode = {}));\n/**\n * Convenience class for quick resolutions\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\n */\nclass Resolution {\n    /* istanbul ignore next */\n    static get SVGA() {\n        return { width: 800, height: 600 };\n    }\n    /* istanbul ignore next */\n    static get Standard() {\n        return { width: 1920, height: 1080 };\n    }\n    /* istanbul ignore next */\n    static get Atari2600() {\n        return { width: 160, height: 192 };\n    }\n    /* istanbul ignore next */\n    static get GameBoy() {\n        return { width: 160, height: 144 };\n    }\n    /* istanbul ignore next */\n    static get GameBoyAdvance() {\n        return { width: 240, height: 160 };\n    }\n    /* istanbul ignore next */\n    static get NintendoDS() {\n        return { width: 256, height: 192 };\n    }\n    /* istanbul ignore next */\n    static get NES() {\n        return { width: 256, height: 224 };\n    }\n    /* istanbul ignore next */\n    static get SNES() {\n        return { width: 256, height: 244 };\n    }\n}\nconst ScreenEvents = {\n    ScreenResize: 'resize',\n    PixelRatioChange: 'pixelratio',\n    FullScreenChange: 'fullscreen'\n};\n/**\n * The Screen handles all aspects of interacting with the screen for Excalibur.\n */\nclass Screen {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        /**\n         * Listen to screen events {@apilink ScreenEvents}\n         */\n        this.events = new EventEmitter();\n        this._antialiasing = true;\n        this._canvasImageRendering = 'auto';\n        this._resolutionStack = [];\n        this._viewportStack = [];\n        this._pixelRatioOverride = null;\n        this._isFullscreen = false;\n        this._isDisposed = false;\n        this._logger = Logger.getInstance();\n        this._fullscreenChangeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            this._isFullscreen = !this._isFullscreen;\n            this._logger.debug('Fullscreen Change', this._isFullscreen);\n            this.events.emit('fullscreen', {\n                fullscreen: this.isFullScreen\n            });\n        };\n        this._pixelRatioChangeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\n            this._listenForPixelRatio();\n            this._devicePixelRatio = this._calculateDevicePixelRatio();\n            this.applyResolutionAndViewport();\n            this.events.emit('pixelratio', {\n                pixelRatio: this.pixelRatio\n            });\n        };\n        this._resizeHandler = () => {\n            if (this._isDisposed) {\n                return;\n            }\n            const parent = this.parent;\n            this._logger.debug('View port resized');\n            this._setResolutionAndViewportByDisplayMode(parent);\n            this.applyResolutionAndViewport();\n            // Emit resize event\n            this.events.emit('resize', {\n                resolution: this.resolution,\n                viewport: this.viewport\n            });\n        };\n        // Asking the window.devicePixelRatio is expensive we do it once\n        this._devicePixelRatio = this._calculateDevicePixelRatio();\n        this._contentArea = new BoundingBox();\n        this._unsafeArea = new BoundingBox();\n        this.viewport = options.viewport;\n        this.resolution = (_a = options.resolution) !== null && _a !== void 0 ? _a : { ...this.viewport };\n        this._contentResolution = this.resolution;\n        this._displayMode = (_b = options.displayMode) !== null && _b !== void 0 ? _b : DisplayMode.Fixed;\n        this._canvas = options.canvas;\n        this.graphicsContext = options.context;\n        this._antialiasing = (_c = options.antialiasing) !== null && _c !== void 0 ? _c : this._antialiasing;\n        this._canvasImageRendering = (_d = options.canvasImageRendering) !== null && _d !== void 0 ? _d : this._canvasImageRendering;\n        this._browser = options.browser;\n        this._pixelRatioOverride = options.pixelRatio;\n        this._applyDisplayMode();\n        this._listenForPixelRatio();\n        this._canvas.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\n        this.applyResolutionAndViewport();\n    }\n    _listenForPixelRatio() {\n        if (this._mediaQueryList && !this._mediaQueryList.addEventListener) {\n            // Safari <=13.1 workaround, remove any existing handlers\n            this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\n        }\n        this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n        // Safari <=13.1 workaround\n        if (this._mediaQueryList.addEventListener) {\n            this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler, { once: true });\n        }\n        else {\n            this._mediaQueryList.addListener(this._pixelRatioChangeHandler);\n        }\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            // Clean up handlers\n            this._isDisposed = true;\n            this.events.clear();\n            this._browser.window.off('resize', this._resizeHandler);\n            this._browser.window.clear();\n            if (this._resizeObserver) {\n                this._resizeObserver.disconnect();\n            }\n            this.parent.removeEventListener('resize', this._resizeHandler);\n            // Safari <=13.1 workaround\n            if (this._mediaQueryList.removeEventListener) {\n                this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\n            }\n            else {\n                this._mediaQueryList.removeListener(this._pixelRatioChangeHandler);\n            }\n            this._canvas.removeEventListener('fullscreenchange', this._fullscreenChangeHandler);\n            this._canvas = null;\n        }\n    }\n    _calculateDevicePixelRatio() {\n        if (window.devicePixelRatio < 1) {\n            return 1;\n        }\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        return devicePixelRatio;\n    }\n    /**\n     * Returns the computed pixel ratio, first using any override, then the device pixel ratio\n     */\n    get pixelRatio() {\n        if (this._pixelRatioOverride) {\n            return this._pixelRatioOverride;\n        }\n        return this._devicePixelRatio;\n    }\n    /**\n     * This calculates the ratio between excalibur pixels and the HTML pixels.\n     *\n     * This is useful for scaling HTML UI so that it matches your game.\n     */\n    get worldToPagePixelRatio() {\n        if (this._canvas) {\n            const pageOrigin = this.worldToPageCoordinates(Vector.Zero);\n            const pageDistance = this.worldToPageCoordinates(vec(1, 0)).sub(pageOrigin);\n            const pixelConversion = pageDistance.x;\n            return pixelConversion;\n        }\n        else {\n            return 1;\n        }\n    }\n    /**\n     * Get or set the pixel ratio override\n     *\n     * You will need to call applyResolutionAndViewport() affect change on the screen\n     */\n    get pixelRatioOverride() {\n        return this._pixelRatioOverride;\n    }\n    set pixelRatioOverride(value) {\n        this._pixelRatioOverride = value;\n    }\n    get isHiDpi() {\n        return this.pixelRatio !== 1;\n    }\n    get displayMode() {\n        return this._displayMode;\n    }\n    get canvas() {\n        return this._canvas;\n    }\n    get parent() {\n        switch (this.displayMode) {\n            case DisplayMode.FillContainer:\n            case DisplayMode.FitContainer:\n            case DisplayMode.FitContainerAndFill:\n            case DisplayMode.FitContainerAndZoom:\n                return this.canvas.parentElement || document.body;\n            default:\n                return window;\n        }\n    }\n    get resolution() {\n        return this._resolution;\n    }\n    set resolution(resolution) {\n        this._resolution = resolution;\n    }\n    /**\n     * Returns screen dimensions in pixels or percentage\n     */\n    get viewport() {\n        if (this._viewport) {\n            return this._viewport;\n        }\n        return this._resolution;\n    }\n    set viewport(viewport) {\n        this._viewport = viewport;\n    }\n    get aspectRatio() {\n        return this._resolution.width / this._resolution.height;\n    }\n    get scaledWidth() {\n        return this._resolution.width * this.pixelRatio;\n    }\n    get scaledHeight() {\n        return this._resolution.height * this.pixelRatio;\n    }\n    setCurrentCamera(camera) {\n        this._camera = camera;\n    }\n    pushResolutionAndViewport() {\n        this._resolutionStack.push(this.resolution);\n        this._viewportStack.push(this.viewport);\n        this.resolution = { ...this.resolution };\n        this.viewport = { ...this.viewport };\n    }\n    peekViewport() {\n        return this._viewportStack[this._viewportStack.length - 1];\n    }\n    peekResolution() {\n        return this._resolutionStack[this._resolutionStack.length - 1];\n    }\n    popResolutionAndViewport() {\n        if (this._resolutionStack.length && this._viewportStack.length) {\n            this.resolution = this._resolutionStack.pop();\n            this.viewport = this._viewportStack.pop();\n        }\n    }\n    applyResolutionAndViewport() {\n        if (this.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            const scaledResolutionSupported = this.graphicsContext.checkIfResolutionSupported({\n                width: this.scaledWidth,\n                height: this.scaledHeight\n            });\n            if (!scaledResolutionSupported) {\n                this._logger.warnOnce(`The currently configured resolution (${this.resolution.width}x${this.resolution.height}) and pixel ratio (${this.pixelRatio})` +\n                    ' are too large for the platform WebGL implementation, this may work but cause WebGL rendering to behave oddly.' +\n                    ' Try reducing the resolution or disabling Hi DPI scaling to avoid this' +\n                    ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\n                // Attempt to recover if the user hasn't configured a specific ratio for up scaling\n                if (!this.pixelRatioOverride) {\n                    let currentPixelRatio = Math.max(1, this.pixelRatio - 0.5);\n                    let newResolutionSupported = false;\n                    while (currentPixelRatio > 1 && !newResolutionSupported) {\n                        currentPixelRatio = Math.max(1, currentPixelRatio - 0.5);\n                        const width = this._resolution.width * currentPixelRatio;\n                        const height = this._resolution.height * currentPixelRatio;\n                        newResolutionSupported = this.graphicsContext.checkIfResolutionSupported({ width, height });\n                    }\n                    this.pixelRatioOverride = currentPixelRatio;\n                    this._logger.warnOnce('Scaled resolution too big attempted recovery!' +\n                        ` Pixel ratio was automatically reduced to (${this.pixelRatio}) to avoid 4k texture limit.` +\n                        ' Setting `ex.Engine({pixelRatio: ...}) will override any automatic recalculation, do so at your own risk.` ' +\n                        ' (read more here https://excaliburjs.com/docs/screens#understanding-viewport--resolution).');\n                }\n            }\n        }\n        this._canvas.width = this.scaledWidth;\n        this._canvas.height = this.scaledHeight;\n        if (this._canvasImageRendering === 'auto') {\n            this._canvas.style.imageRendering = 'auto';\n        }\n        else {\n            this._canvas.style.imageRendering = 'pixelated';\n            // Fall back to 'crisp-edges' if 'pixelated' is not supported\n            // Currently for firefox https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\n            if (this._canvas.style.imageRendering === '') {\n                this._canvas.style.imageRendering = 'crisp-edges';\n            }\n        }\n        const widthUnit = this.viewport.widthUnit === 'percent' ? '%' : 'px';\n        const heightUnit = this.viewport.heightUnit === 'percent' ? '%' : 'px';\n        this._canvas.style.width = this.viewport.width + widthUnit;\n        this._canvas.style.height = this.viewport.height + heightUnit;\n        // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\n        this.graphicsContext.updateViewport(this.resolution);\n        this.graphicsContext.resetTransform();\n        this.graphicsContext.smoothing = this._antialiasing;\n        if (this.graphicsContext instanceof ExcaliburGraphicsContext2DCanvas) {\n            this.graphicsContext.scale(this.pixelRatio, this.pixelRatio);\n        }\n        // Add the excalibur world pixel to page pixel\n        document.documentElement.style.setProperty('--ex-pixel-ratio', this.worldToPagePixelRatio.toString());\n    }\n    /**\n     * Get or set screen antialiasing,\n     *\n     * If true smoothing is applied\n     */\n    get antialiasing() {\n        return this._antialiasing;\n    }\n    /**\n     * Get or set screen antialiasing\n     */\n    set antialiasing(isSmooth) {\n        this._antialiasing = isSmooth;\n        this.graphicsContext.smoothing = this._antialiasing;\n    }\n    /**\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\n     * @deprecated use isFullscreen()\n     */\n    get isFullScreen() {\n        return this._isFullscreen;\n    }\n    /**\n     * Returns true if excalibur is fullscreen using the browser fullscreen api\n     */\n    get isFullscreen() {\n        return this._isFullscreen;\n    }\n    /**\n     * Requests to go fullscreen using the browser fullscreen api, requires user interaction to be successful.\n     * For example, wire this to a user click handler.\n     *\n     * Optionally specify a target element id to go fullscreen, by default the game canvas is used\n     * @param elementId\n     * @deprecated use enterFullscreen(...)\n     */\n    goFullScreen(elementId) {\n        return this.enterFullscreen(elementId);\n    }\n    /**\n     * Requests to enter fullscreen using the browser fullscreen api, requires user interaction to be successful.\n     * For example, wire this to a user click handler.\n     *\n     * Optionally specify a target element id to go fullscreen, by default the game canvas is used\n     * @param elementId\n     */\n    enterFullscreen(elementId) {\n        if (elementId) {\n            const maybeElement = document.getElementById(elementId);\n            if (maybeElement) {\n                if (!maybeElement.getAttribute('ex-fullscreen-listener')) {\n                    maybeElement.setAttribute('ex-fullscreen-listener', 'true');\n                    maybeElement.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\n                }\n                const fullscreenPromise = maybeElement.requestFullscreen();\n                return fullscreenPromise;\n            }\n        }\n        return this._canvas.requestFullscreen();\n    }\n    /**\n     * Requests to exit fullscreen using the browser fullscreen api\n     * @deprecated use exitFullscreen()\n     */\n    exitFullScreen() {\n        return this.exitFullscreen();\n    }\n    exitFullscreen() {\n        return document.exitFullscreen();\n    }\n    _viewportToPixels(viewport) {\n        return {\n            width: viewport.widthUnit === 'percent' ? this.canvas.offsetWidth : viewport.width,\n            height: viewport.heightUnit === 'percent' ? this.canvas.offsetHeight : viewport.height\n        };\n    }\n    /**\n     * Takes a coordinate in normal html page space, for example from a pointer move event, and translates it to\n     * Excalibur screen space.\n     *\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n     * bottom right corner (resolutionX, resolutionY). When using *AndFill suffixed display modes screen space\n     * (0, 0) is the top left of the safe content area bounding box not the viewport.\n     * @param point\n     */\n    pageToScreenCoordinates(point) {\n        let newX = point.x;\n        let newY = point.y;\n        if (!this._isFullscreen) {\n            newX -= getPosition(this._canvas).x;\n            newY -= getPosition(this._canvas).y;\n        }\n        const viewport = this._viewportToPixels(this.viewport);\n        // if fullscreen api on it centers with black bars\n        // we need to adjust the screen to world coordinates in this case\n        if (this._isFullscreen) {\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n                const screenHeight = window.innerWidth / this.aspectRatio;\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\n                newY = ((newY - screenMarginY) / screenHeight) * viewport.height;\n                newX = (newX / window.innerWidth) * viewport.width;\n            }\n            else {\n                const screenWidth = window.innerHeight * this.aspectRatio;\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\n                newX = ((newX - screenMarginX) / screenWidth) * viewport.width;\n                newY = (newY / window.innerHeight) * viewport.height;\n            }\n        }\n        newX = (newX / viewport.width) * this.resolution.width;\n        newY = (newY / viewport.height) * this.resolution.height;\n        // offset by content area\n        newX = newX - this.contentArea.left;\n        newY = newY - this.contentArea.top;\n        return new Vector(newX, newY);\n    }\n    /**\n     * Takes a coordinate in Excalibur screen space, and translates it to normal html page space. For example,\n     * this is where html elements might live if you want to position them relative to Excalibur.\n     *\n     * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n     * bottom right corner (resolutionX, resolutionY)\n     * @param point\n     */\n    screenToPageCoordinates(point) {\n        let newX = point.x;\n        let newY = point.y;\n        // no need to offset by content area, drawing is already offset by this\n        const viewport = this._viewportToPixels(this.viewport);\n        newX = (newX / this.resolution.width) * viewport.width;\n        newY = (newY / this.resolution.height) * viewport.height;\n        if (this._isFullscreen) {\n            if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n                const screenHeight = window.innerWidth / this.aspectRatio;\n                const screenMarginY = (window.innerHeight - screenHeight) / 2;\n                newY = (newY / viewport.height) * screenHeight + screenMarginY;\n                newX = (newX / viewport.width) * window.innerWidth;\n            }\n            else {\n                const screenWidth = window.innerHeight * this.aspectRatio;\n                const screenMarginX = (window.innerWidth - screenWidth) / 2;\n                newX = (newX / viewport.width) * screenWidth + screenMarginX;\n                newY = (newY / viewport.height) * window.innerHeight;\n            }\n        }\n        if (!this._isFullscreen) {\n            newX += getPosition(this._canvas).x;\n            newY += getPosition(this._canvas).y;\n        }\n        return new Vector(newX, newY);\n    }\n    /**\n     * Takes a coordinate in Excalibur screen space, and translates it to Excalibur world space.\n     *\n     * World space is where {@apilink Entity | `entities`} in Excalibur live by default {@apilink CoordPlane.World}\n     * and extends infinitely out relative from the {@apilink Camera}.\n     * @param point  Screen coordinate to convert\n     */\n    screenToWorldCoordinates(point) {\n        // offset by content area\n        point = point.add(vec(this.contentArea.left, this.contentArea.top));\n        // the only difference between screen & world is the camera transform\n        if (this._camera) {\n            return this._camera.inverse.multiply(point);\n        }\n        return point.sub(vec(this.resolution.width / 2, this.resolution.height / 2));\n    }\n    /**\n     * Takes a coordinate in Excalibur world space, and translates it to Excalibur screen space.\n     *\n     * Screen space is where {@apilink ScreenElement | `screen elements`} and {@apilink Entity | `entities`} with {@apilink CoordPlane.Screen} live.\n     * @param point  World coordinate to convert\n     */\n    worldToScreenCoordinates(point) {\n        if (this._camera) {\n            return this._camera.transform.multiply(point);\n        }\n        return point.add(vec(this.resolution.width / 2, this.resolution.height / 2));\n    }\n    pageToWorldCoordinates(point) {\n        const screen = this.pageToScreenCoordinates(point);\n        return this.screenToWorldCoordinates(screen);\n    }\n    worldToPageCoordinates(point) {\n        const screen = this.worldToScreenCoordinates(point);\n        return this.screenToPageCoordinates(screen);\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen\n     * and the bottom right corner of the screen.\n     *\n     * World bounds are in world coordinates, useful for culling objects offscreen that are in world space\n     */\n    getWorldBounds() {\n        const bounds = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Half)\n            .scale(vec(1 / this._camera.zoom, 1 / this._camera.zoom))\n            .rotate(this._camera.rotation)\n            .translate(this._camera.drawPos);\n        return bounds;\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen and the bottom right corner of the screen.\n     *\n     * Screen bounds are in screen coordinates, useful for culling objects offscreen that are in screen space\n     */\n    getScreenBounds() {\n        const bounds = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero, Vector.Zero);\n        return bounds;\n    }\n    /**\n     * The width of the game canvas in pixels (physical width component of the\n     * resolution of the canvas element)\n     */\n    get canvasWidth() {\n        return this.canvas.width;\n    }\n    /**\n     * Returns half width of the game canvas in pixels (half physical width component)\n     */\n    get halfCanvasWidth() {\n        return this.canvas.width / 2;\n    }\n    /**\n     * The height of the game canvas in pixels, (physical height component of\n     * the resolution of the canvas element)\n     */\n    get canvasHeight() {\n        return this.canvas.height;\n    }\n    /**\n     * Returns half height of the game canvas in pixels (half physical height component)\n     */\n    get halfCanvasHeight() {\n        return this.canvas.height / 2;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawWidth() {\n        if (this._camera) {\n            return this.resolution.width / this._camera.zoom;\n        }\n        return this.resolution.width;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get width() {\n        if (this._camera) {\n            return this.resolution.width / this._camera.zoom;\n        }\n        return this.resolution.width;\n    }\n    /**\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawWidth() {\n        return this.drawWidth / 2;\n    }\n    /**\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawHeight() {\n        if (this._camera) {\n            return this.resolution.height / this._camera.zoom;\n        }\n        return this.resolution.height;\n    }\n    get height() {\n        if (this._camera) {\n            return this.resolution.height / this._camera.zoom;\n        }\n        return this.resolution.height;\n    }\n    /**\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawHeight() {\n        return this.drawHeight / 2;\n    }\n    /**\n     * Returns screen center coordinates including zoom and device pixel ratio.\n     */\n    get center() {\n        return vec(this.halfDrawWidth, this.halfDrawHeight);\n    }\n    /**\n     * Returns the content area in screen space where it is safe to place content\n     */\n    get contentArea() {\n        return this._contentArea;\n    }\n    /**\n     * Returns the unsafe area in screen space, this is the full screen and some space may not be onscreen.\n     */\n    get unsafeArea() {\n        return this._unsafeArea;\n    }\n    _computeFit() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        if (window.innerWidth / aspect < window.innerHeight) {\n            adjustedWidth = window.innerWidth;\n            adjustedHeight = window.innerWidth / aspect;\n        }\n        else {\n            adjustedWidth = window.innerHeight * aspect;\n            adjustedHeight = window.innerHeight;\n        }\n        this.viewport = {\n            width: adjustedWidth,\n            height: adjustedHeight\n        };\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this._unsafeArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitScreenAndFill() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        this._computeFitAndFill(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitContainerAndFill() {\n        this.canvas.style.width = '100%';\n        this.canvas.style.height = '100%';\n        this._computeFitAndFill(this.canvas.offsetWidth, this.canvas.offsetHeight, {\n            width: 100,\n            widthUnit: 'percent',\n            height: 100,\n            heightUnit: 'percent'\n        });\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitAndFill(vw, vh, viewport) {\n        this.viewport = viewport !== null && viewport !== void 0 ? viewport : {\n            width: vw,\n            height: vh\n        };\n        // if the current screen aspectRatio is less than the original aspectRatio\n        if (vw / vh <= this._contentResolution.width / this._contentResolution.height) {\n            // compute new resolution to match the original aspect ratio\n            this.resolution = {\n                width: (vw * this._contentResolution.width) / vw,\n                height: (((vw * this._contentResolution.width) / vw) * vh) / vw\n            };\n            const clip = (this.resolution.height - this._contentResolution.height) / 2;\n            this._contentArea = new BoundingBox({\n                top: clip,\n                left: 0,\n                right: this._contentResolution.width,\n                bottom: this.resolution.height - clip\n            });\n            this._unsafeArea = new BoundingBox({\n                top: -clip,\n                left: 0,\n                right: this._contentResolution.width,\n                bottom: this.resolution.height + clip\n            });\n        }\n        else {\n            this.resolution = {\n                width: (((vh * this._contentResolution.height) / vh) * vw) / vh,\n                height: (vh * this._contentResolution.height) / vh\n            };\n            const clip = (this.resolution.width - this._contentResolution.width) / 2;\n            this._contentArea = new BoundingBox({\n                top: 0,\n                left: clip,\n                right: this.resolution.width - clip,\n                bottom: this._contentResolution.height\n            });\n            this._unsafeArea = new BoundingBox({\n                top: 0,\n                left: -clip,\n                right: this.resolution.width + clip,\n                bottom: this._contentResolution.height\n            });\n        }\n    }\n    _computeFitScreenAndZoom() {\n        document.body.style.margin = '0px';\n        document.body.style.overflow = 'hidden';\n        this.canvas.style.position = 'absolute';\n        const vw = window.innerWidth;\n        const vh = window.innerHeight;\n        this._computeFitAndZoom(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitContainerAndZoom() {\n        this.canvas.style.width = '100%';\n        this.canvas.style.height = '100%';\n        this.canvas.style.position = 'relative';\n        const parent = this.canvas.parentElement;\n        parent.style.overflow = 'hidden';\n        const { offsetWidth: vw, offsetHeight: vh } = this.canvas;\n        this._computeFitAndZoom(vw, vh);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _computeFitAndZoom(vw, vh) {\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        if (vw / aspect < vh) {\n            adjustedWidth = vw;\n            adjustedHeight = vw / aspect;\n        }\n        else {\n            adjustedWidth = vh * aspect;\n            adjustedHeight = vh;\n        }\n        const scaleX = vw / adjustedWidth;\n        const scaleY = vh / adjustedHeight;\n        const maxScaleFactor = Math.max(scaleX, scaleY);\n        const zoomedWidth = adjustedWidth * maxScaleFactor;\n        const zoomedHeight = adjustedHeight * maxScaleFactor;\n        // Center zoomed dimension if bigger than the screen\n        if (zoomedWidth > vw) {\n            this.canvas.style.left = -(zoomedWidth - vw) / 2 + 'px';\n        }\n        else {\n            this.canvas.style.left = '';\n        }\n        if (zoomedHeight > vh) {\n            this.canvas.style.top = -(zoomedHeight - vh) / 2 + 'px';\n        }\n        else {\n            this.canvas.style.top = '';\n        }\n        this.viewport = {\n            width: zoomedWidth,\n            height: zoomedHeight\n        };\n        const bounds = BoundingBox.fromDimension(this.viewport.width, this.viewport.height, Vector.Zero);\n        // return safe area\n        if (this.viewport.width > vw) {\n            const clip = ((this.viewport.width - vw) / this.viewport.width) * this.resolution.width;\n            bounds.top = 0;\n            bounds.left = clip / 2;\n            bounds.right = this.resolution.width - clip / 2;\n            bounds.bottom = this.resolution.height;\n        }\n        if (this.viewport.height > vh) {\n            const clip = ((this.viewport.height - vh) / this.viewport.height) * this.resolution.height;\n            bounds.top = clip / 2;\n            bounds.left = 0;\n            bounds.bottom = this.resolution.height - clip / 2;\n            bounds.right = this.resolution.width;\n        }\n        this._contentArea = bounds;\n    }\n    _computeFitContainer() {\n        const aspect = this.aspectRatio;\n        let adjustedWidth = 0;\n        let adjustedHeight = 0;\n        let widthUnit = 'pixel';\n        let heightUnit = 'pixel';\n        const parent = this.canvas.parentElement;\n        if (parent.clientWidth / aspect < parent.clientHeight) {\n            this.canvas.style.width = '100%';\n            adjustedWidth = 100;\n            widthUnit = 'percent';\n            adjustedHeight = this.canvas.offsetWidth / aspect;\n        }\n        else {\n            this.canvas.style.height = '100%';\n            adjustedHeight = 100;\n            heightUnit = 'percent';\n            adjustedWidth = this.canvas.offsetHeight * aspect;\n        }\n        this.viewport = {\n            width: adjustedWidth,\n            widthUnit,\n            height: adjustedHeight,\n            heightUnit\n        };\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        this.events.emit('resize', {\n            resolution: this.resolution,\n            viewport: this.viewport\n        });\n    }\n    _applyDisplayMode() {\n        this._setResolutionAndViewportByDisplayMode(this.parent);\n        // watch resizing\n        if (this.parent instanceof Window) {\n            this._browser.window.on('resize', this._resizeHandler);\n        }\n        else {\n            this._resizeObserver = new ResizeObserver(() => {\n                this._resizeHandler();\n            });\n            this._resizeObserver.observe(this.parent);\n        }\n        this.parent.addEventListener('resize', this._resizeHandler);\n    }\n    /**\n     * Sets the resolution and viewport based on the selected display mode.\n     */\n    _setResolutionAndViewportByDisplayMode(parent) {\n        if (this.displayMode === DisplayMode.FillContainer) {\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            this.viewport = {\n                width: 100,\n                widthUnit: 'percent',\n                height: 100,\n                heightUnit: 'percent'\n            };\n            this.resolution = {\n                width: this.canvas.offsetWidth,\n                height: this.canvas.offsetHeight\n            };\n        }\n        if (this.displayMode === DisplayMode.FillScreen) {\n            document.body.style.margin = '0px';\n            document.body.style.overflow = 'hidden';\n            this.resolution = {\n                width: parent.innerWidth,\n                height: parent.innerHeight\n            };\n            this.viewport = this.resolution;\n        }\n        this._contentArea = BoundingBox.fromDimension(this.resolution.width, this.resolution.height, Vector.Zero);\n        if (this.displayMode === DisplayMode.FitScreen) {\n            this._computeFit();\n        }\n        if (this.displayMode === DisplayMode.FitContainer) {\n            this._computeFitContainer();\n        }\n        if (this.displayMode === DisplayMode.FitScreenAndFill) {\n            this._computeFitScreenAndFill();\n        }\n        if (this.displayMode === DisplayMode.FitContainerAndFill) {\n            this._computeFitContainerAndFill();\n        }\n        if (this.displayMode === DisplayMode.FitScreenAndZoom) {\n            this._computeFitScreenAndZoom();\n        }\n        if (this.displayMode === DisplayMode.FitContainerAndZoom) {\n            this._computeFitContainerAndZoom();\n        }\n    }\n}\n\n;// ./Resources/Sound/AudioContext.ts\n/**\n * Internal class used to build instances of AudioContext\n */\n/* istanbul ignore next */\nclass AudioContextFactory {\n    static create() {\n        if (!this._INSTANCE) {\n            if (window.AudioContext || window.webkitAudioContext) {\n                this._INSTANCE = new AudioContext();\n            }\n        }\n        return this._INSTANCE;\n    }\n}\n\n;// ./Util/WebAudio.ts\n\n\n/**\n * Patch for detecting legacy web audio in browsers\n * @internal\n * @param source\n */\nfunction isLegacyWebAudioSource(source) {\n    return !!source.playbackState;\n}\nclass WebAudio {\n    /**\n     * Play an empty sound to unlock Safari WebAudio context. Call this function\n     * right after a user interaction event.\n     * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     */\n    static unlock() {\n        const promise = new Promise((resolve, reject) => {\n            if (WebAudio._UNLOCKED || !AudioContextFactory.create()) {\n                return resolve(true);\n            }\n            const unlockTimeoutTimer = setTimeout(() => {\n                Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\n                resolve(false);\n            }, 200);\n            const audioContext = AudioContextFactory.create();\n            audioContext.resume().then(() => {\n                // create empty buffer and play it\n                const buffer = audioContext.createBuffer(1, 1, 22050);\n                const source = audioContext.createBufferSource();\n                let ended = false;\n                source.buffer = buffer;\n                source.connect(audioContext.destination);\n                source.onended = () => (ended = true);\n                source.start(0);\n                // by checking the play state after some time, we know if we're really unlocked\n                setTimeout(() => {\n                    if (isLegacyWebAudioSource(source)) {\n                        if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\n                            WebAudio._UNLOCKED = true;\n                        }\n                    }\n                    else {\n                        if (audioContext.currentTime > 0 || ended) {\n                            WebAudio._UNLOCKED = true;\n                        }\n                    }\n                }, 0);\n                clearTimeout(unlockTimeoutTimer);\n                resolve(true);\n            }, () => {\n                reject();\n            });\n        });\n        return promise;\n    }\n    static isUnlocked() {\n        return this._UNLOCKED;\n    }\n}\nWebAudio._UNLOCKED = false;\n\n;// ./Graphics/Canvas.ts\n\n/**\n * A canvas {@apilink Graphic} to provide an adapter between the 2D Canvas API and the {@apilink ExcaliburGraphicsContext}.\n *\n * The {@apilink Canvas} works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\n * to the {@apilink ExcaliburGraphicsContext} implementation as a rendered image.\n *\n * **Low performance API**\n */\nclass Canvas extends Raster {\n    /**\n     * Return the 2D graphics context of this canvas\n     */\n    get ctx() {\n        return this._ctx;\n    }\n    constructor(_options = {}) {\n        super(_options);\n        this._options = _options;\n    }\n    clone() {\n        return new Canvas({\n            ...this._options,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        var _a, _b;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.draw) {\n            (_b = this._options) === null || _b === void 0 ? void 0 : _b.draw(ctx);\n        }\n        if (!this._options.cache) {\n            this.flagDirty();\n        }\n    }\n}\n\n;// ./Interfaces/AudioImplementation.ts\nclass ExResponse {\n}\nExResponse.type = {\n    any: '',\n    blob: 'blob',\n    json: 'json',\n    text: 'text',\n    document: 'document',\n    arraybuffer: 'arraybuffer'\n};\n\n;// ./Util/StateMachine.ts\nclass StateMachine {\n    constructor() {\n        this.states = new Map();\n    }\n    get currentState() {\n        return this._currentState;\n    }\n    set currentState(state) {\n        this._currentState = state;\n    }\n    static create(machineDescription, data) {\n        const machine = new StateMachine();\n        machine.data = data;\n        for (const stateName in machineDescription.states) {\n            machine.states.set(stateName, {\n                name: stateName,\n                ...machineDescription.states[stateName]\n            });\n        }\n        // validate transitions are states\n        for (const state of machine.states.values()) {\n            for (const transitionState of state.transitions) {\n                if (transitionState === '*') {\n                    continue;\n                }\n                if (!machine.states.has(transitionState)) {\n                    throw Error(`Invalid state machine, state [${state.name}] has a transition to another state that doesn't exist [${transitionState}]`);\n                }\n            }\n        }\n        machine.currentState = machine.startState = machine.states.get(machineDescription.start);\n        return machine;\n    }\n    in(state) {\n        return this.currentState.name === state;\n    }\n    go(stateName, eventData) {\n        var _a, _b;\n        if (this.currentState.transitions.includes(stateName) || this.currentState.transitions.includes('*')) {\n            const potentialNewState = this.states.get(stateName);\n            if (this.currentState.onExit) {\n                const canExit = (_a = this.currentState) === null || _a === void 0 ? void 0 : _a.onExit({ to: potentialNewState.name, data: this.data });\n                if (canExit === false) {\n                    return false;\n                }\n            }\n            if (potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter) {\n                const canEnter = potentialNewState === null || potentialNewState === void 0 ? void 0 : potentialNewState.onEnter({ from: this.currentState.name, eventData, data: this.data });\n                if (canEnter === false) {\n                    return false;\n                }\n            }\n            this.currentState = potentialNewState;\n            if ((_b = this.currentState) === null || _b === void 0 ? void 0 : _b.onState) {\n                this.currentState.onState();\n            }\n            return true;\n        }\n        return false;\n    }\n    update(elapsed) {\n        if (this.currentState.onUpdate) {\n            this.currentState.onUpdate(this.data, elapsed);\n        }\n    }\n    save(saveKey) {\n        localStorage.setItem(saveKey, JSON.stringify({\n            currentState: this.currentState.name,\n            data: this.data\n        }));\n    }\n    restore(saveKey) {\n        const state = JSON.parse(localStorage.getItem(saveKey));\n        this.currentState = this.states.get(state.currentState);\n        this.data = state.data;\n    }\n}\n\n;// ./Resources/Sound/WebAudioInstance.ts\n\n\n\n\n/**\n * Internal class representing a Web Audio AudioBufferSourceNode instance\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n */\nclass WebAudioInstance {\n    _createNewBufferSource() {\n        this._instance = this._audioContext.createBufferSource();\n        this._instance.buffer = this._src;\n        this._instance.loop = this.loop;\n        this._instance.playbackRate.value = this._playbackRate;\n        this._instance.connect(this._volumeNode);\n        this._volumeNode.connect(this._audioContext.destination);\n    }\n    _handleEnd() {\n        if (!this.loop) {\n            this._instance.onended = () => {\n                this._playingFuture.resolve(true);\n            };\n        }\n    }\n    set loop(value) {\n        this._loop = value;\n        if (this._instance) {\n            this._instance.loop = value;\n            if (!this.loop) {\n                this._instance.onended = () => {\n                    this._playingFuture.resolve(true);\n                };\n            }\n        }\n    }\n    get loop() {\n        return this._loop;\n    }\n    set volume(value) {\n        value = clamp(value, 0, 1.0);\n        this._volume = value;\n        if (this._stateMachine.in('PLAYING') && this._volumeNode.gain.setTargetAtTime) {\n            // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\n            // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\n            // This exponential ramp provides a more pleasant transition in gain\n            this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\n        }\n        else {\n            this._volumeNode.gain.value = value;\n        }\n    }\n    get volume() {\n        return this._volume;\n    }\n    /**\n     * Returns the set duration to play, otherwise returns the total duration if unset\n     */\n    get duration() {\n        var _a;\n        return (_a = this._duration) !== null && _a !== void 0 ? _a : this.getTotalPlaybackDuration();\n    }\n    /**\n     * Set the duration that this audio should play.\n     *\n     * Note: if you seek to a specific point the duration will start from that point, for example\n     *\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\n     */\n    set duration(duration) {\n        this._duration = duration;\n    }\n    constructor(_src) {\n        this._src = _src;\n        this._audioContext = AudioContextFactory.create();\n        this._volumeNode = this._audioContext.createGain();\n        this._playingFuture = new Future();\n        this._stateMachine = StateMachine.create({\n            start: 'STOPPED',\n            states: {\n                PLAYING: {\n                    onEnter: ({ data }) => {\n                        // Buffer nodes are single use\n                        this._createNewBufferSource();\n                        this._handleEnd();\n                        if (this.loop) {\n                            // when looping don't set a duration\n                            this._instance.start(0, data.pausedAt * this._playbackRate);\n                        }\n                        else {\n                            this._instance.start(0, data.pausedAt * this._playbackRate, this.duration);\n                        }\n                        data.startedAt = this._audioContext.currentTime - data.pausedAt;\n                        data.pausedAt = 0;\n                    },\n                    onState: () => this._playStarted(),\n                    onExit: ({ to }) => {\n                        // If you've exited early only resolve if explicitly STOPPED\n                        if (to === 'STOPPED') {\n                            this._playingFuture.resolve(true);\n                        }\n                        // Whenever you're not playing... you stop!\n                        this._instance.onended = null; // disconnect the wired on-end handler\n                        this._instance.disconnect();\n                        this._instance.stop(0);\n                        this._instance = null;\n                    },\n                    transitions: ['STOPPED', 'PAUSED', 'SEEK']\n                },\n                SEEK: {\n                    onEnter: ({ eventData: position, data }) => {\n                        data.pausedAt = (position !== null && position !== void 0 ? position : 0) / this._playbackRate;\n                        data.startedAt = 0;\n                    },\n                    transitions: ['*']\n                },\n                STOPPED: {\n                    onEnter: ({ data }) => {\n                        data.pausedAt = 0;\n                        data.startedAt = 0;\n                        this._playingFuture.resolve(true);\n                    },\n                    transitions: ['PLAYING', 'PAUSED', 'SEEK']\n                },\n                PAUSED: {\n                    onEnter: ({ data }) => {\n                        // Playback rate will be a scale factor of how fast/slow the audio is being played\n                        // default is 1.0\n                        // we need to invert it to get the time scale\n                        data.pausedAt = this._audioContext.currentTime - data.startedAt;\n                    },\n                    transitions: ['PLAYING', 'STOPPED', 'SEEK']\n                }\n            }\n        }, {\n            startedAt: 0,\n            pausedAt: 0\n        });\n        this._volume = 1;\n        this._loop = false;\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        this._playStarted = () => { };\n        this._playbackRate = 1.0;\n        this._createNewBufferSource();\n    }\n    isPlaying() {\n        return this._stateMachine.in('PLAYING');\n    }\n    isPaused() {\n        return this._stateMachine.in('PAUSED') || this._stateMachine.in('SEEK');\n    }\n    isStopped() {\n        return this._stateMachine.in('STOPPED');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    play(playStarted = () => { }) {\n        this._playStarted = playStarted;\n        this._stateMachine.go('PLAYING');\n        return this._playingFuture.promise;\n    }\n    pause() {\n        this._stateMachine.go('PAUSED');\n    }\n    stop() {\n        this._stateMachine.go('STOPPED');\n    }\n    seek(position) {\n        this._stateMachine.go('PAUSED');\n        this._stateMachine.go('SEEK', position);\n    }\n    getTotalPlaybackDuration() {\n        return this._src.duration;\n    }\n    getPlaybackPosition() {\n        const { pausedAt, startedAt } = this._stateMachine.data;\n        if (pausedAt) {\n            return pausedAt * this._playbackRate;\n        }\n        if (startedAt) {\n            return (this._audioContext.currentTime - startedAt) * this._playbackRate;\n        }\n        return 0;\n    }\n    set playbackRate(playbackRate) {\n        this._instance.playbackRate.value = this._playbackRate = playbackRate;\n    }\n    get playbackRate() {\n        return this._instance.playbackRate.value;\n    }\n}\n\n;// ./Events/MediaEvents.ts\n\nclass MediaEvent extends GameEvent {\n    /**\n     * Media event cannot bubble\n     */\n    set bubbles(_value) {\n        // stubbed\n    }\n    /**\n     * Media event cannot bubble\n     */\n    get bubbles() {\n        return false;\n    }\n    /**\n     * Media event cannot bubble, so they have no path\n     */\n    get _path() {\n        return null;\n    }\n    /**\n     * Media event cannot bubble, so they have no path\n     */\n    set _path(_val) {\n        // stubbed\n    }\n    constructor(target, _name = 'MediaEvent') {\n        super();\n        this.target = target;\n        this._name = _name;\n    }\n    /**\n     * Prevents event from bubbling\n     */\n    stopPropagation() {\n        /**\n         * Stub\n         */\n    }\n    /**\n     * Action, that calls when event happens\n     */\n    action() {\n        /**\n         * Stub\n         */\n    }\n    /**\n     * Propagate event further through event path\n     */\n    propagate() {\n        /**\n         * Stub\n         */\n    }\n    layPath(_actor) {\n        /**\n         * Stub\n         */\n    }\n}\nclass NativeSoundEvent extends MediaEvent {\n    constructor(target, track) {\n        super(target, 'NativeSoundEvent');\n        this.track = track;\n    }\n}\nclass NativeSoundProcessedEvent extends MediaEvent {\n    constructor(target, _processedData) {\n        super(target, 'NativeSoundProcessedEvent');\n        this._processedData = _processedData;\n        this.data = this._processedData;\n    }\n}\n\n;// ./Util/Sound.ts\n\n/**\n * Whether or not the browser can play this file as HTML5 Audio\n */\nfunction canPlayFile(file) {\n    try {\n        const a = new Audio();\n        const filetype = /.*\\.([A-Za-z0-9]+)(?:(?:\\?|\\#).*)*$/;\n        const type = file.match(filetype)[1];\n        if (a.canPlayType('audio/' + type)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    catch (e) {\n        Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\n        return false;\n    }\n}\n\n;// ./Resources/Sound/Sound.ts\n\n\n\n\n\n\n\n\nconst SoundEvents = {\n    VolumeChange: 'volumechange',\n    Processed: 'processed',\n    Pause: 'pause',\n    Stop: 'stop',\n    PlaybackEnd: 'playbackend',\n    Resume: 'resume',\n    PlaybackStart: 'playbackstart'\n};\n/**\n * The {@apilink Sound} object allows games built in Excalibur to load audio\n * components, from soundtracks to sound effects. {@apilink Sound} is an {@apilink Loadable}\n * which means it can be passed to a {@apilink Loader} to pre-load before a game or level.\n */\nclass Sound {\n    /**\n     * Indicates whether the clip should loop when complete\n     * @param value  Set the looping flag\n     */\n    set loop(value) {\n        this._loop = value;\n        for (const track of this._tracks) {\n            track.loop = this._loop;\n        }\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\n    }\n    get loop() {\n        return this._loop;\n    }\n    set volume(value) {\n        this._volume = value;\n        for (const track of this._tracks) {\n            track.volume = this._volume;\n        }\n        this.events.emit('volumechange', new NativeSoundEvent(this));\n        this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\n    }\n    get volume() {\n        return this._volume;\n    }\n    /**\n     * Get the duration that this audio should play. If unset the total natural playback duration will be used.\n     */\n    get duration() {\n        return this._duration;\n    }\n    /**\n     * Set the duration that this audio should play. If unset the total natural playback duration will be used.\n     *\n     * Note: if you seek to a specific point the duration will start from that point, for example\n     *\n     * If you have a 10 second clip, seek to 5 seconds, then set the duration to 2, it will play the clip from 5-7 seconds.\n     */\n    set duration(duration) {\n        this._duration = duration;\n    }\n    /**\n     * Return array of Current AudioInstances playing or being paused\n     */\n    get instances() {\n        return this._tracks;\n    }\n    get path() {\n        return this._resource.path;\n    }\n    set path(val) {\n        this._resource.path = val;\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\n     */\n    constructor(...paths) {\n        this.events = new EventEmitter();\n        this.logger = Logger.getInstance();\n        this._loop = false;\n        this._volume = 1;\n        this._isStopped = false;\n        // private _isPaused = false;\n        this._tracks = [];\n        this._wasPlayingOnHidden = false;\n        this._playbackRate = 1.0;\n        this._audioContext = AudioContextFactory.create();\n        this._resource = new Resource('', ExResponse.type.arraybuffer);\n        /**\n         * Chrome : MP3, WAV, Ogg\n         * Firefox : WAV, Ogg,\n         * IE : MP3, WAV coming soon\n         * Safari MP3, WAV, Ogg\n         */\n        for (const path of paths) {\n            if (canPlayFile(path)) {\n                this.path = path;\n                break;\n            }\n        }\n        if (!this.path) {\n            this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\n            this.logger.warn('Attempting to use', paths[0]);\n            this.path = paths[0]; // select the first specified\n        }\n    }\n    isLoaded() {\n        return !!this.data;\n    }\n    async load() {\n        var _a, _b;\n        if (this.data) {\n            return this.data;\n        }\n        const arraybuffer = await this._resource.load();\n        const audiobuffer = await this.decodeAudio(arraybuffer.slice(0));\n        this._duration = (_b = (_a = this._duration) !== null && _a !== void 0 ? _a : audiobuffer === null || audiobuffer === void 0 ? void 0 : audiobuffer.duration) !== null && _b !== void 0 ? _b : undefined;\n        this.events.emit('processed', new NativeSoundProcessedEvent(this, audiobuffer));\n        return (this.data = audiobuffer);\n    }\n    async decodeAudio(data) {\n        try {\n            return await this._audioContext.decodeAudioData(data.slice(0));\n        }\n        catch (e) {\n            this.logger.error('Unable to decode ' +\n                ' this browser may not fully support this format, or the file may be corrupt, ' +\n                'if this is an mp3 try removing id3 tags and album art from the file.');\n            return await Promise.reject();\n        }\n    }\n    wireEngine(engine) {\n        if (engine) {\n            this._engine = engine;\n            this._engine.on('hidden', () => {\n                if (engine.pauseAudioWhenHidden && this.isPlaying()) {\n                    this._wasPlayingOnHidden = true;\n                    this.pause();\n                }\n            });\n            this._engine.on('visible', () => {\n                if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    this.play();\n                    this._wasPlayingOnHidden = false;\n                }\n            });\n            this._engine.on('start', () => {\n                this._isStopped = false;\n            });\n            this._engine.on('stop', () => {\n                this.stop();\n                this._isStopped = true;\n            });\n        }\n    }\n    /**\n     * Returns how many instances of the sound are currently playing\n     */\n    instanceCount() {\n        return this._tracks.length;\n    }\n    /**\n     * Whether or not the sound is playing right now\n     */\n    isPlaying() {\n        return this._tracks.some((t) => t.isPlaying());\n    }\n    isPaused() {\n        return this._tracks.some((t) => t.isPaused());\n    }\n    isStopped() {\n        return this._tracks.some((t) => t.isStopped());\n    }\n    /**\n     * Play the sound, returns a promise that resolves when the sound is done playing\n     * An optional volume argument can be passed in to play the sound. Max volume is 1.0\n     */\n    play(volume) {\n        if (!this.isLoaded()) {\n            this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\n            return Promise.resolve(true);\n        }\n        if (this._isStopped) {\n            this.logger.warn('Cannot start playing. Engine is in a stopped state.');\n            return Promise.resolve(false);\n        }\n        this.volume = volume || this.volume;\n        if (this.isPaused()) {\n            return this._resumePlayback();\n        }\n        else {\n            return this._startPlayback();\n        }\n    }\n    /**\n     * Stop the sound, and do not rewind\n     */\n    pause() {\n        if (!this.isPlaying()) {\n            return;\n        }\n        for (const track of this._tracks) {\n            track.pause();\n        }\n        this.events.emit('pause', new NativeSoundEvent(this));\n        this.logger.debug('Paused all instances of sound', this.path);\n    }\n    /**\n     * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\n     */\n    stop() {\n        for (const track of this._tracks) {\n            track.stop();\n        }\n        this.events.emit('stop', new NativeSoundEvent(this));\n        this._tracks.length = 0;\n        this.logger.debug('Stopped all instances of sound', this.path);\n    }\n    get playbackRate() {\n        return this._playbackRate;\n    }\n    set playbackRate(playbackRate) {\n        this._playbackRate = playbackRate;\n        this._tracks.forEach((t) => {\n            t.playbackRate = this._playbackRate;\n        });\n    }\n    seek(position, trackId = 0) {\n        if (this._tracks.length === 0) {\n            this._getTrackInstance(this.data);\n        }\n        this._tracks[trackId].seek(position);\n    }\n    getTotalPlaybackDuration() {\n        if (!this.isLoaded()) {\n            this.logger.warnOnce(`Sound from ${this.path} is not loaded, cannot return total playback duration.` +\n                `Did you forget to add Sound to a loader? https://excaliburjs.com/docs/loaders/`);\n            return 0;\n        }\n        return this.data.duration;\n    }\n    /**\n     * Return the current playback time of the playing track in seconds from the start.\n     *\n     * Optionally specify the track to query if multiple are playing at once.\n     * @param trackId\n     */\n    getPlaybackPosition(trackId = 0) {\n        if (this._tracks.length) {\n            return this._tracks[trackId].getPlaybackPosition();\n        }\n        return 0;\n    }\n    /**\n     * Get Id of provided AudioInstance in current trackList\n     * @param track {@apilink Audio} which Id is to be given\n     */\n    getTrackId(track) {\n        return this._tracks.indexOf(track);\n    }\n    async _resumePlayback() {\n        if (this.isPaused()) {\n            const resumed = [];\n            // ensure we resume *current* tracks (if paused)\n            for (const track of this._tracks) {\n                resumed.push(track.play().then(() => {\n                    this._tracks.splice(this.getTrackId(track), 1);\n                    return true;\n                }));\n            }\n            this.events.emit('resume', new NativeSoundEvent(this));\n            this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\n            // resolve when resumed tracks are done\n            await Promise.all(resumed);\n        }\n        return true;\n    }\n    /**\n     * Starts playback, returns a promise that resolves when playback is complete\n     */\n    async _startPlayback() {\n        const track = this._getTrackInstance(this.data);\n        const complete = await track.play(() => {\n            this.events.emit('playbackstart', new NativeSoundEvent(this, track));\n            this.logger.debug('Playing new instance for sound', this.path);\n        });\n        this.events.emit('playbackend', new NativeSoundEvent(this, track));\n        // cleanup any done tracks\n        const trackId = this.getTrackId(track);\n        if (trackId !== -1) {\n            this._tracks.splice(trackId, 1);\n        }\n        return complete;\n    }\n    _getTrackInstance(data) {\n        var _a;\n        const newTrack = new WebAudioInstance(data);\n        newTrack.loop = this.loop;\n        newTrack.volume = this.volume;\n        newTrack.duration = (_a = this.duration) !== null && _a !== void 0 ? _a : 0;\n        newTrack.playbackRate = this._playbackRate;\n        this._tracks.push(newTrack);\n        return newTrack;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n\n;// ./Director/DefaultLoader.ts\n\n\n\n\n\n\n\n\n\nconst LoaderEvents = {\n    // Add event types here\n    BeforeLoad: 'beforeload',\n    AfterLoad: 'afterload',\n    UserAction: 'useraction',\n    LoadResourceStart: 'loadresourcestart',\n    LoadResourceEnd: 'loadresourceend'\n};\n/**\n * Returns true if the constructor is for an Excalibur Loader\n */\nfunction isLoaderConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\nclass DefaultLoader {\n    get resources() {\n        return this._resources;\n    }\n    /**\n     * @param options Optionally provide the list of resources you want to load at constructor time\n     */\n    constructor(options) {\n        var _a;\n        this.events = new EventEmitter();\n        this.canvas = new Canvas({\n            filtering: ImageFiltering.Blended,\n            smoothing: true,\n            cache: false,\n            draw: this.onDraw.bind(this)\n        });\n        this._resources = [];\n        this._numLoaded = 0;\n        this._totalTimeMs = 0;\n        this._loadingFuture = new Future();\n        if (options && ((_a = options.loadables) === null || _a === void 0 ? void 0 : _a.length)) {\n            this.addResources(options.loadables);\n        }\n    }\n    /**\n     * Called by the engine before loading\n     * @param engine\n     */\n    onInitialize(engine) {\n        this.engine = engine;\n        this.canvas.width = this.engine.screen.resolution.width;\n        this.canvas.height = this.engine.screen.resolution.height;\n    }\n    /**\n     * Return a promise that resolves when the user interacts with the loading screen in some way, usually a click.\n     *\n     * It's important to implement this in order to unlock the audio context in the browser. Browsers automatically prevent\n     * audio from playing until the user performs an action.\n     *\n     */\n    async onUserAction() {\n        return await Promise.resolve();\n    }\n    /**\n     * Overridable lifecycle method, called directly before loading starts\n     */\n    async onBeforeLoad() {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called after loading has completed\n     */\n    async onAfterLoad() {\n        // override me\n        await delay(500, this.engine.clock); // avoid a flicker\n    }\n    /**\n     * Add a resource to the loader to load\n     * @param loadable  Resource to add\n     */\n    addResource(loadable) {\n        this._resources.push(loadable);\n    }\n    /**\n     * Add a list of resources to the loader to load\n     * @param loadables  The list of resources to load\n     */\n    addResources(loadables) {\n        let i = 0;\n        const len = loadables.length;\n        for (i; i < len; i++) {\n            this.addResource(loadables[i]);\n        }\n    }\n    markResourceComplete() {\n        this._numLoaded++;\n    }\n    /**\n     * Returns the progress of the loader as a number between [0, 1] inclusive.\n     */\n    get progress() {\n        const total = this._resources.length;\n        return total > 0 ? clamp(this._numLoaded, 0, total) / total : 1;\n    }\n    /**\n     * Returns true if the loader has completely loaded all resources\n     */\n    isLoaded() {\n        return this._numLoaded === this._resources.length;\n    }\n    /**\n     * Optionally override the onUpdate\n     * @param engine\n     * @param elapsed\n     */\n    onUpdate(engine, elapsed) {\n        this._totalTimeMs += elapsed;\n        // override me\n    }\n    /**\n     * Optionally override the onDraw\n     */\n    onDraw(ctx) {\n        const seconds = this._totalTimeMs / 1000;\n        ctx.fillStyle = Color.Black.toRGBA();\n        ctx.fillRect(0, 0, this.engine.screen.resolution.width, this.engine.screen.resolution.height);\n        ctx.save();\n        ctx.translate(this.engine.screen.resolution.width / 2, this.engine.screen.resolution.height / 2);\n        const speed = seconds * 10;\n        ctx.strokeStyle = 'white';\n        ctx.lineWidth = 10;\n        ctx.lineCap = 'round';\n        ctx.arc(0, 0, 40, speed, speed + (Math.PI * 3) / 2);\n        ctx.stroke();\n        ctx.fillStyle = 'white';\n        ctx.font = '16px sans-serif';\n        const text = (this.progress * 100).toFixed(0) + '%';\n        const textbox = ctx.measureText(text);\n        const width = Math.abs(textbox.actualBoundingBoxLeft) + Math.abs(textbox.actualBoundingBoxRight);\n        const height = Math.abs(textbox.actualBoundingBoxAscent) + Math.abs(textbox.actualBoundingBoxDescent);\n        ctx.fillText(text, -width / 2, height / 2); // center\n        ctx.restore();\n    }\n    areResourcesLoaded() {\n        if (this._resources.length === 0) {\n            // special case no resources mean loaded;\n            return Promise.resolve();\n        }\n        return this._loadingFuture.promise;\n    }\n    /**\n     * Not meant to be overridden\n     *\n     * Begin loading all of the supplied resources, returning a promise\n     * that resolves when loading of all is complete AND the user has interacted with the loading screen\n     */\n    async load() {\n        await this.onBeforeLoad();\n        this.events.emit('beforeload');\n        this.canvas.flagDirty();\n        await Promise.all(this._resources.map(async (r) => {\n            this.events.emit('loadresourcestart', r);\n            await r.load().finally(() => {\n                // capture progress\n                this._numLoaded++;\n                this.canvas.flagDirty();\n                this.events.emit('loadresourceend', r);\n            });\n        }));\n        // Wire all sound to the engine\n        for (const resource of this._resources) {\n            if (resource instanceof Sound) {\n                resource.wireEngine(this.engine);\n            }\n        }\n        this._loadingFuture.resolve();\n        this.canvas.flagDirty();\n        // Unlock browser AudioContext in after user gesture\n        // See: https://github.com/excaliburjs/Excalibur/issues/262\n        // See: https://github.com/excaliburjs/Excalibur/issues/1031\n        await this.onUserAction();\n        this.events.emit('useraction');\n        await WebAudio.unlock();\n        await this.onAfterLoad();\n        this.events.emit('afterload');\n        return (this.data = this._resources);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n\n;// ./Director/Loader.logo.png\n/* harmony default export */ const Loader_logo = (\"data:image/png;base64,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\");\n// EXTERNAL MODULE: ./Director/Loader.css\nvar Director_Loader = __webpack_require__(851);\n;// ./Director/Loader.ts\n\n\n\n\n\n\n\n\n\n/**\n * Pre-loading assets\n *\n * The loader provides a mechanism to preload multiple resources at\n * one time. The loader must be passed to the engine in order to\n * trigger the loading progress bar.\n *\n * The {@apilink Loader} itself implements {@apilink Loadable} so you can load loaders.\n *\n * ## Example: Pre-loading resources for a game\n *\n * ```js\n * // create a loader\n * var loader = new ex.Loader();\n *\n * // create a resource dictionary (best practice is to keep a separate file)\n * var resources = {\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\n * };\n *\n * // loop through dictionary and add to loader\n * for (var loadable in resources) {\n *   if (resources.hasOwnProperty(loadable)) {\n *     loader.addResource(resources[loadable]);\n *   }\n * }\n *\n * // start game\n * game.start(loader).then(function () {\n *   console.log(\"Game started!\");\n * });\n * ```\n *\n * ## Customize the Loader\n *\n * The loader can be customized to show different, text, logo, background color, and button.\n *\n * ```typescript\n * const loader = new ex.Loader([playerTexture]);\n *\n * // The loaders button text can simply modified using this\n * loader.playButtonText = 'Start the best game ever';\n *\n * // The logo can be changed by inserting a base64 image string here\n *\n * loader.logo = 'data:image/png;base64,iVBORw...';\n * loader.logoWidth = 15;\n * loader.logoHeight = 14;\n *\n * // The background color can be changed like so by supplying a valid CSS color string\n *\n * loader.backgroundColor = 'red'\n * loader.backgroundColor = '#176BAA'\n *\n * // To build a completely new button\n * loader.startButtonFactory = () => {\n *     let myButton = document.createElement('button');\n *     myButton.textContent = 'The best button';\n *     return myButton;\n * };\n *\n * engine.start(loader).then(() => {});\n * ```\n */\nclass Loader extends DefaultLoader {\n    get _image() {\n        if (!this._imageElement) {\n            this._imageElement = new Image();\n            this._imageElement.onload = () => this._imageLoaded.resolve();\n            this._imageElement.src = this.logo;\n        }\n        return this._imageElement;\n    }\n    get playButtonRootElement() {\n        return this._playButtonRootElement;\n    }\n    get playButtonElement() {\n        return this._playButtonElement;\n    }\n    get _playButton() {\n        const existingRoot = document.getElementById('excalibur-play-root');\n        if (existingRoot) {\n            this._playButtonRootElement = existingRoot;\n        }\n        if (!this._playButtonRootElement) {\n            this._playButtonRootElement = document.createElement('div');\n            this._playButtonRootElement.id = 'excalibur-play-root';\n            this._playButtonRootElement.style.position = 'absolute';\n            document.body.appendChild(this._playButtonRootElement);\n        }\n        if (!this._styleBlock) {\n            this._styleBlock = document.createElement('style');\n            this._styleBlock.textContent = this._playButtonStyles;\n            document.head.appendChild(this._styleBlock);\n        }\n        if (!this._playButtonElement) {\n            this._playButtonElement = this.startButtonFactory();\n            this._playButtonRootElement.appendChild(this._playButtonElement);\n        }\n        return this._playButtonElement;\n    }\n    constructor(loadablesOrOptions) {\n        const options = Array.isArray(loadablesOrOptions)\n            ? {\n                loadables: loadablesOrOptions\n            }\n            : loadablesOrOptions;\n        super(options);\n        this._logger = Logger.getInstance();\n        this._originalOptions = { loadables: [] };\n        this.events = new EventEmitter();\n        this._playButtonShown = false;\n        // logo drawing stuff\n        // base64 string encoding of the excalibur logo (logo-white.png)\n        this.logo = Loader_logo;\n        this.logoWidth = 468;\n        this.logoHeight = 118;\n        /**\n         * Gets or sets the color of the loading bar, default is {@apilink Color.White}\n         */\n        this.loadingBarColor = Color.White;\n        /**\n         * Gets or sets the background color of the loader as a hex string\n         */\n        this.backgroundColor = '#176BAA';\n        this._imageLoaded = new Future();\n        this.suppressPlayButton = false;\n        /** Loads the css from Loader.css */\n        this._playButtonStyles = Director_Loader/* default */.A.toString();\n        /**\n         * Get/set play button text\n         */\n        this.playButtonText = 'Play game';\n        /**\n         * Return a html button element for excalibur to use as a play button\n         */\n        this.startButtonFactory = () => {\n            let buttonElement = document.getElementById('excalibur-play');\n            if (!buttonElement) {\n                buttonElement = document.createElement('button');\n            }\n            buttonElement.id = 'excalibur-play';\n            buttonElement.textContent = this.playButtonText;\n            buttonElement.style.display = 'none';\n            return buttonElement;\n        };\n        this._originalOptions = { ...Loader._DEFAULT_LOADER_OPTIONS, ...options };\n    }\n    onInitialize(engine) {\n        this.engine = engine;\n        this.screen = engine.screen;\n        this.canvas.width = this.engine.canvas.width;\n        this.canvas.height = this.engine.canvas.height;\n        this.screen.events.on('resize', () => {\n            this.canvas.width = this.engine.canvas.width;\n            this.canvas.height = this.engine.canvas.height;\n        });\n    }\n    /**\n     * Shows the play button and returns a promise that resolves when clicked\n     */\n    async showPlayButton() {\n        var _a, _b;\n        if (this.suppressPlayButton) {\n            this.hidePlayButton();\n            // Delay is to give the logo a chance to show, otherwise don't delay\n            await delay(500, (_a = this.engine) === null || _a === void 0 ? void 0 : _a.clock);\n        }\n        else {\n            const resizeHandler = () => {\n                try {\n                    this._positionPlayButton();\n                }\n                catch (_a) {\n                    // swallow if can't position\n                }\n            };\n            if ((_b = this.engine) === null || _b === void 0 ? void 0 : _b.browser) {\n                this.engine.browser.window.on('resize', resizeHandler);\n            }\n            this._playButtonShown = true;\n            this._playButton.style.display = 'block';\n            document.body.addEventListener('keyup', (evt) => {\n                if (evt.key === 'Enter') {\n                    this._playButton.click();\n                }\n            });\n            this._positionPlayButton();\n            const playButtonClicked = new Promise((resolve) => {\n                const startButtonHandler = (e) => {\n                    var _a;\n                    // We want to stop propagation to keep bubbling to the engine pointer handlers\n                    e.stopPropagation();\n                    // Hide Button after click\n                    this.hidePlayButton();\n                    if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.browser) {\n                        this.engine.browser.window.off('resize', resizeHandler);\n                    }\n                    if (this._originalOptions.fullscreenAfterLoad) {\n                        try {\n                            this._logger.info('requesting fullscreen');\n                            if (this._originalOptions.fullscreenContainer instanceof HTMLElement) {\n                                this._originalOptions.fullscreenContainer.requestFullscreen();\n                            }\n                            else {\n                                this.engine.screen.goFullScreen(this._originalOptions.fullscreenContainer);\n                            }\n                        }\n                        catch (error) {\n                            this._logger.error('could not go fullscreen', error);\n                        }\n                    }\n                    resolve();\n                };\n                this._playButton.addEventListener('click', startButtonHandler);\n                this._playButton.addEventListener('touchend', startButtonHandler);\n                this._playButton.addEventListener('pointerup', startButtonHandler);\n            });\n            return await playButtonClicked;\n        }\n    }\n    hidePlayButton() {\n        this._playButtonShown = false;\n        this._playButton.style.display = 'none';\n    }\n    /**\n     * Clean up generated elements for the loader\n     */\n    dispose() {\n        if (this._playButtonRootElement.parentElement) {\n            this._playButtonRootElement.removeChild(this._playButtonElement);\n            document.body.removeChild(this._playButtonRootElement);\n            document.head.removeChild(this._styleBlock);\n            this._playButtonRootElement = null;\n            this._playButtonElement = null;\n            this._styleBlock = null;\n        }\n    }\n    async onUserAction() {\n        var _a;\n        // short delay in showing the button for aesthetics\n        await delay(200, (_a = this.engine) === null || _a === void 0 ? void 0 : _a.clock);\n        this.canvas.flagDirty();\n        // show play button\n        await this.showPlayButton();\n    }\n    async onBeforeLoad() {\n        this.screen.pushResolutionAndViewport();\n        this.screen.resolution = { width: this.canvas.width, height: this.canvas.height };\n        this.screen.applyResolutionAndViewport();\n        const image = this._image;\n        await this._imageLoaded.promise;\n        await (image === null || image === void 0 ? void 0 : image.decode()); // decode logo if it exists\n    }\n    // eslint-disable-next-line require-await\n    async onAfterLoad() {\n        this.screen.popResolutionAndViewport();\n        this.screen.applyResolutionAndViewport();\n        this.dispose();\n    }\n    _positionPlayButton() {\n        if (this.engine) {\n            const { x: left, y: top, width: screenWidth, height: screenHeight } = this.engine.canvas.getBoundingClientRect();\n            if (this._playButtonRootElement) {\n                const buttonWidth = this._playButton.clientWidth;\n                const buttonHeight = this._playButton.clientHeight;\n                if (this.playButtonPosition) {\n                    this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\n                    this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\n                }\n                else {\n                    this._playButtonRootElement.style.left = `${left + screenWidth / 2 - buttonWidth / 2}px`;\n                    this._playButtonRootElement.style.top = `${top + screenHeight / 2 - buttonHeight / 2 + 100}px`;\n                }\n            }\n        }\n    }\n    /**\n     * Loader draw function. Draws the default Excalibur loading screen.\n     * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\n     * to customize the drawing, or just override entire method.\n     */\n    onDraw(ctx) {\n        const canvasHeight = this.engine.canvasHeight / this.engine.pixelRatio;\n        const canvasWidth = this.engine.canvasWidth / this.engine.pixelRatio;\n        this._positionPlayButton();\n        ctx.fillStyle = this.backgroundColor;\n        ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n        let logoY = canvasHeight / 2;\n        const width = Math.min(this.logoWidth, canvasWidth * 0.75);\n        let logoX = canvasWidth / 2 - width / 2;\n        if (this.logoPosition) {\n            logoX = this.logoPosition.x;\n            logoY = this.logoPosition.y;\n        }\n        const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\n        const oldAntialias = this.engine.screen.antialiasing;\n        this.engine.screen.antialiasing = true;\n        if (!this.logoPosition) {\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\n        }\n        else {\n            ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\n        }\n        // loading box\n        if (!this.suppressPlayButton && this._playButtonShown) {\n            this.engine.screen.antialiasing = oldAntialias;\n            return;\n        }\n        let loadingX = logoX;\n        let loadingY = logoY;\n        if (this.loadingBarPosition) {\n            loadingX = this.loadingBarPosition.x;\n            loadingY = this.loadingBarPosition.y;\n        }\n        ctx.lineWidth = 2;\n        roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\n        const progress = width * this.progress;\n        const margin = 5;\n        const progressWidth = progress - margin * 2;\n        const height = 20 - margin * 2;\n        roundRect(ctx, loadingX + margin, loadingY + margin, progressWidth > 10 ? progressWidth : 10, height, 5, null, this.loadingBarColor);\n        this.engine.screen.antialiasing = oldAntialias;\n    }\n}\nLoader._DEFAULT_LOADER_OPTIONS = {\n    loadables: [],\n    fullscreenAfterLoad: false,\n    fullscreenContainer: undefined\n};\n\n;// ./Util/Detector.ts\n\n/**\n * This is the list of features that will be used to log the supported\n * features to the console when Detector.logBrowserFeatures() is called.\n */\nconst REPORTED_FEATURES = {\n    webgl: 'WebGL',\n    webaudio: 'WebAudio',\n    gamepadapi: 'Gamepad API'\n};\n/**\n * Excalibur internal feature detection helper class\n */\nclass Detector {\n    constructor() {\n        this._features = null;\n        this.failedTests = [];\n        // critical browser features required for ex to run\n        this._criticalTests = {\n            // Test canvas/2d context support\n            canvasSupport: function () {\n                const elem = document.createElement('canvas');\n                return !!(elem.getContext && elem.getContext('2d'));\n            },\n            // Test array buffer support ex uses for downloading binary data\n            arrayBufferSupport: function () {\n                const xhr = new XMLHttpRequest();\n                xhr.open('GET', '/');\n                try {\n                    xhr.responseType = 'arraybuffer';\n                }\n                catch (e) {\n                    return false;\n                }\n                return xhr.responseType === 'arraybuffer';\n            },\n            // Test data urls ex uses for sprites\n            dataUrlSupport: function () {\n                const canvas = document.createElement('canvas');\n                return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n            },\n            // Test object url support for loading\n            objectUrlSupport: function () {\n                return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\n            },\n            // RGBA support for colors\n            rgbaSupport: function () {\n                const style = document.createElement('a').style;\n                style.cssText = 'background-color:rgba(150,255,150,.5)';\n                return ('' + style.backgroundColor).indexOf('rgba') > -1;\n            }\n        };\n        // warnings excalibur performance will be degraded\n        this._warningTest = {\n            webAudioSupport: function () {\n                return !!(window.AudioContext ||\n                    window.webkitAudioContext ||\n                    window.mozAudioContext ||\n                    window.msAudioContext ||\n                    window.oAudioContext);\n            },\n            webglSupport: function () {\n                const elem = document.createElement('canvas');\n                return !!(elem.getContext && elem.getContext('webgl'));\n            }\n        };\n        this._features = this._loadBrowserFeatures();\n    }\n    /**\n     * Returns a map of currently supported browser features. This method\n     * treats the features as a singleton and will only calculate feature\n     * support if it has not previously been done.\n     */\n    getBrowserFeatures() {\n        if (this._features === null) {\n            this._features = this._loadBrowserFeatures();\n        }\n        return this._features;\n    }\n    /**\n     * Report on non-critical browser support for debugging purposes.\n     * Use native browser console colors for visibility.\n     */\n    logBrowserFeatures() {\n        let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\n        const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\n        const supported = this.getBrowserFeatures();\n        for (const feature of Object.keys(REPORTED_FEATURES)) {\n            if (supported[feature]) {\n                msg += '(%c\\u2713%c)'; // (✓)\n                args.push('font-weight: bold; color: green');\n                args.push('font-weight: normal; color: inherit');\n            }\n            else {\n                msg += '(%c\\u2717%c)'; // (✗)\n                args.push('font-weight: bold; color: red');\n                args.push('font-weight: normal; color: inherit');\n            }\n            msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\n        }\n        args.unshift(msg);\n        // eslint-disable-next-line no-console\n        console.log.apply(console, args);\n    }\n    /**\n     * Executes several IIFE's to get a constant reference to supported\n     * features within the current execution context.\n     */\n    _loadBrowserFeatures() {\n        return {\n            // IIFE to check canvas support\n            canvas: (() => {\n                return this._criticalTests.canvasSupport();\n            })(),\n            // IIFE to check arraybuffer support\n            arraybuffer: (() => {\n                return this._criticalTests.arrayBufferSupport();\n            })(),\n            // IIFE to check dataurl support\n            dataurl: (() => {\n                return this._criticalTests.dataUrlSupport();\n            })(),\n            // IIFE to check objecturl support\n            objecturl: (() => {\n                return this._criticalTests.objectUrlSupport();\n            })(),\n            // IIFE to check rgba support\n            rgba: (() => {\n                return this._criticalTests.rgbaSupport();\n            })(),\n            // IIFE to check webaudio support\n            webaudio: (() => {\n                return this._warningTest.webAudioSupport();\n            })(),\n            // IIFE to check webgl support\n            webgl: (() => {\n                return this._warningTest.webglSupport();\n            })(),\n            // IIFE to check gamepadapi support\n            gamepadapi: (() => {\n                return !!navigator.getGamepads;\n            })()\n        };\n    }\n    test() {\n        // Critical test will for ex not to run\n        let failedCritical = false;\n        for (const test in this._criticalTests) {\n            if (!this._criticalTests[test].call(this)) {\n                this.failedTests.push(test);\n                Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\n                failedCritical = true;\n            }\n        }\n        if (failedCritical) {\n            return false;\n        }\n        // Warning tests do not for ex to return false to compatibility\n        for (const warning in this._warningTest) {\n            if (!this._warningTest[warning]()) {\n                Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\n            }\n        }\n        return true;\n    }\n}\n\n;// ./Collision/CollisionType.ts\n/**\n * An enum that describes the types of collisions bodies can participate in\n */\nvar CollisionType;\n(function (CollisionType) {\n    /**\n     * Bodies with the `PreventCollision` setting do not participate in any\n     * collisions and do not raise collision events.\n     */\n    CollisionType[\"PreventCollision\"] = \"PreventCollision\";\n    /**\n     * Bodies with the `Passive` setting only raise collision events, but are not\n     * influenced or moved by other bodies and do not influence or move other bodies.\n     * This is useful for use in trigger type behavior.\n     */\n    CollisionType[\"Passive\"] = \"Passive\";\n    /**\n     * Bodies with the `Active` setting raise collision events and participate\n     * in collisions with other bodies and will be push or moved by bodies sharing\n     * the `Active` or `Fixed` setting.\n     */\n    CollisionType[\"Active\"] = \"Active\";\n    /**\n     * Bodies with the `Fixed` setting raise collision events and participate in\n     * collisions with other bodies. Actors with the `Fixed` setting will not be\n     * pushed or moved by other bodies sharing the `Fixed`. Think of Fixed\n     * bodies as \"immovable/unstoppable\" objects. If two `Fixed` bodies meet they will\n     * not be pushed or moved by each other, they will not interact except to throw\n     * collision events.\n     */\n    CollisionType[\"Fixed\"] = \"Fixed\";\n})(CollisionType || (CollisionType = {}));\n\n;// ./Collision/Group/CollisionGroupManager.ts\n\n/**\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\n */\nclass CollisionGroupManager {\n    /**\n     * Create a new named collision group up to a max of 32.\n     * @param name Name for the collision group\n     * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\n     */\n    static create(name, mask) {\n        if (this._CURRENT_GROUP > this._MAX_GROUPS) {\n            throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\n        }\n        if (this._GROUPS.get(name)) {\n            const existingGroup = this._GROUPS.get(name);\n            if (existingGroup.mask === mask) {\n                return existingGroup;\n            }\n            throw new Error(`Collision group ${name} already exists with a different mask!`);\n        }\n        const group = new CollisionGroup(name, this._CURRENT_BIT, mask !== undefined ? mask : ~this._CURRENT_BIT);\n        this._CURRENT_BIT = (this._CURRENT_BIT << 1) | 0;\n        this._CURRENT_GROUP++;\n        this._GROUPS.set(name, group);\n        return group;\n    }\n    /**\n     * Get all collision groups currently tracked by excalibur\n     */\n    static get groups() {\n        return Array.from(this._GROUPS.values());\n    }\n    /**\n     * Get a collision group by it's name\n     * @param name\n     */\n    static groupByName(name) {\n        return this._GROUPS.get(name);\n    }\n    /**\n     * Resets the managers internal group management state\n     */\n    static reset() {\n        this._GROUPS = new Map();\n        this._CURRENT_BIT = this._STARTING_BIT;\n        this._CURRENT_GROUP = 1;\n    }\n}\n// using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\nCollisionGroupManager._STARTING_BIT = 0b1 | 0;\nCollisionGroupManager._MAX_GROUPS = 32;\nCollisionGroupManager._CURRENT_GROUP = 1;\nCollisionGroupManager._CURRENT_BIT = CollisionGroupManager._STARTING_BIT;\nCollisionGroupManager._GROUPS = new Map();\n\n;// ./Collision/Group/CollisionGroup.ts\n\n/**\n * CollisionGroups indicate like members that do not collide with each other. Use {@apilink CollisionGroupManager} to create {@apilink CollisionGroup}s\n *\n * For example:\n *\n * Players have collision group \"player\"\n *\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\n *\n * Enemies have collision group \"enemy\"\n *\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\n *\n * Blocks have collision group \"ground\"\n *\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\n *\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\n * with players and blocks.\n *\n * This is done with bitmasking, see the following pseudo-code\n *\n * PlayerGroup = `0b001`\n * PlayerGroupMask = `0b110`\n *\n * EnemyGroup = `0b010`\n * EnemyGroupMask = `0b101`\n *\n * BlockGroup = `0b100`\n * BlockGroupMask = `0b011`\n *\n * Should Players collide? No because the bitwise mask evaluates to 0\n * `(player1.group & player2.mask) === 0`\n * `(0b001 & 0b110) === 0`\n *\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\n * `(player1.group & enemy1.mask) === 1`\n * `(0b001 & 0b101) === 1`\n *\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\n * `(player1.group & blocks1.mask) === 1`\n * `(0b001 & 0b011) === 1`\n */\nclass CollisionGroup {\n    /**\n     * STOP!!** It is preferred that {@apilink CollisionGroupManager.create} is used to create collision groups\n     *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\n     * @param name Name of the collision group\n     * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\n     * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\n     */\n    constructor(name, category, mask) {\n        this._name = name;\n        this._category = category;\n        this._mask = mask;\n    }\n    /**\n     * Get the name of the collision group\n     */\n    get name() {\n        return this._name;\n    }\n    /**\n     * Get the category of the collision group, a 32 bit number which should be a unique power of 2\n     */\n    get category() {\n        return this._category;\n    }\n    /**\n     * Get the mask for this collision group\n     */\n    get mask() {\n        return this._mask;\n    }\n    /**\n     * Evaluates whether 2 collision groups can collide\n     *\n     * This means the mask has the same bit set the other category and vice versa\n     * @param other  CollisionGroup\n     */\n    canCollide(other) {\n        const overlap1 = this.category & other.mask;\n        const overlap2 = this.mask & other.category;\n        return overlap1 !== 0 && overlap2 !== 0;\n    }\n    /**\n     * Inverts the collision group. For example, if before the group specified \"players\",\n     * inverting would specify all groups except players\n     * @returns CollisionGroup\n     */\n    invert() {\n        const group = CollisionGroupManager.create('~(' + this.name + ')', ~this.mask | 0);\n        group._category = ~this.category;\n        return group;\n    }\n    /**\n     * Combine collision groups with each other. The new group includes all of the previous groups.\n     * @param collisionGroups\n     */\n    static combine(collisionGroups) {\n        const combinedName = collisionGroups.map((c) => c.name).join('+');\n        const combinedCategory = collisionGroups.reduce((current, g) => g.category | current, 0b0);\n        const combinedMask = ~combinedCategory;\n        return CollisionGroupManager.create(combinedName, combinedMask);\n    }\n    /**\n     * Creates a collision group that collides with the listed groups\n     * @param collisionGroups\n     */\n    static collidesWith(collisionGroups) {\n        const combinedName = `collidesWith(${collisionGroups.map((c) => c.name).join('+')})`;\n        const combinedMask = collisionGroups.reduce((current, g) => g.category | current, 0b0);\n        return CollisionGroupManager.create(combinedName, combinedMask);\n    }\n    toString() {\n        return `\r\ncategory: ${this.category.toString(2).padStart(32, '0')}\r\nmask:     ${(this.mask >>> 0).toString(2).padStart(32, '0')}\r\n    `;\n    }\n}\n/**\n * The `All` {@apilink CollisionGroup} is a special group that collides with all other groups including itself,\n * it is the default collision group on colliders.\n */\nCollisionGroup.All = new CollisionGroup('Collide with all groups', -1, -1);\n\n;// ./Collision/Detection/Pair.ts\n\n\n/**\n * Models a potential collision between 2 colliders\n */\nclass Pair {\n    constructor(colliderA, colliderB) {\n        this.colliderA = colliderA;\n        this.colliderB = colliderB;\n        this.id = null;\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\n    }\n    /**\n     * Returns whether a it is allowed for 2 colliders in a Pair to collide\n     * @param colliderA\n     * @param colliderB\n     */\n    static canCollide(colliderA, colliderB) {\n        var _a, _b;\n        // Prevent self collision\n        if (colliderA.id === colliderB.id) {\n            return false;\n        }\n        // Colliders with the same owner do not collide (composite colliders)\n        if (colliderA.owner && colliderB.owner && colliderA.owner.id === colliderB.owner.id) {\n            return false;\n        }\n        // if the pair has a member with zero dimension don't collide\n        if (colliderA.localBounds.hasZeroDimensions() || colliderB.localBounds.hasZeroDimensions()) {\n            return false;\n        }\n        const bodyA = (_a = colliderA === null || colliderA === void 0 ? void 0 : colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB === null || colliderB === void 0 ? void 0 : colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        // Body's needed for collision in the current state\n        // TODO can we collide without a body?\n        if (!bodyA || !bodyB) {\n            return false;\n        }\n        // If both are in the same collision group short circuit\n        if (!bodyA.group.canCollide(bodyB.group)) {\n            return false;\n        }\n        // if both are fixed short circuit\n        if (bodyA.collisionType === CollisionType.Fixed && bodyB.collisionType === CollisionType.Fixed) {\n            return false;\n        }\n        // if the either is prevent collision short circuit\n        if (bodyB.collisionType === CollisionType.PreventCollision || bodyA.collisionType === CollisionType.PreventCollision) {\n            return false;\n        }\n        // if either is dead short circuit\n        if (!bodyA.isActive || !bodyB.isActive) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Returns whether or not it is possible for the pairs to collide\n     */\n    get canCollide() {\n        const colliderA = this.colliderA;\n        const colliderB = this.colliderB;\n        return Pair.canCollide(colliderA, colliderB);\n    }\n    /**\n     * Runs the collision intersection logic on the members of this pair\n     */\n    collide() {\n        return this.colliderA.collide(this.colliderB);\n    }\n    /**\n     * Check if the collider is part of the pair\n     * @param collider\n     */\n    hasCollider(collider) {\n        return collider === this.colliderA || collider === this.colliderB;\n    }\n    /**\n     * Calculates the unique pair hash id for this collision pair (owning id)\n     */\n    static calculatePairHash(idA, idB) {\n        if (idA.value < idB.value) {\n            return `#${idA.value}+${idB.value}`;\n        }\n        else {\n            return `#${idB.value}+${idA.value}`;\n        }\n    }\n}\n\n;// ./Math/projection.ts\n/**\n * A 1 dimensional projection on an axis, used to test overlaps\n */\nclass Projection {\n    constructor(min, max) {\n        this.min = min;\n        this.max = max;\n    }\n    overlaps(projection) {\n        return this.max > projection.min && projection.max > this.min;\n    }\n    getOverlap(projection) {\n        if (this.overlaps(projection)) {\n            if (this.max > projection.max) {\n                return projection.max - this.min;\n            }\n            else {\n                return this.max - projection.min;\n            }\n        }\n        return 0;\n    }\n}\n\n;// ./Collision/Detection/DynamicTree.ts\n\n\n\n\n/**\n * Dynamic Tree Node used for tracking bounds within the tree\n */\nclass TreeNode {\n    constructor(parent) {\n        this.parent = parent;\n        this.parent = parent || null;\n        this.data = null;\n        this.bounds = new BoundingBox();\n        this.left = null;\n        this.right = null;\n        this.height = 0;\n    }\n    isLeaf() {\n        return !this.left && !this.right;\n    }\n}\n/**\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\n *\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\n * Every non-leaf node is a bounding box that contains child bounding boxes.\n */\nclass DynamicTree {\n    constructor(_config, worldBounds = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\n        this._config = _config;\n        this.worldBounds = worldBounds;\n        this.root = null;\n        this.nodes = {};\n    }\n    /**\n     * Inserts a node into the dynamic tree\n     */\n    _insert(leaf) {\n        // If there are no nodes in the tree, make this the root leaf\n        if (this.root === null) {\n            this.root = leaf;\n            this.root.parent = null;\n            return;\n        }\n        // Search the tree for a node that is not a leaf and find the best place to insert\n        const leafAABB = leaf.bounds;\n        let currentRoot = this.root;\n        while (!currentRoot.isLeaf()) {\n            const left = currentRoot.left;\n            const right = currentRoot.right;\n            const area = currentRoot.bounds.getPerimeter();\n            const combinedAABB = currentRoot.bounds.combine(leafAABB);\n            const combinedArea = combinedAABB.getPerimeter();\n            // Calculate cost heuristic for creating a new parent and leaf\n            const cost = 2 * combinedArea;\n            // Minimum cost of pushing the leaf down the tree\n            const inheritanceCost = 2 * (combinedArea - area);\n            // Cost of descending\n            let leftCost = 0;\n            const leftCombined = leafAABB.combine(left.bounds);\n            let newArea;\n            let oldArea;\n            if (left.isLeaf()) {\n                leftCost = leftCombined.getPerimeter() + inheritanceCost;\n            }\n            else {\n                oldArea = left.bounds.getPerimeter();\n                newArea = leftCombined.getPerimeter();\n                leftCost = newArea - oldArea + inheritanceCost;\n            }\n            let rightCost = 0;\n            const rightCombined = leafAABB.combine(right.bounds);\n            if (right.isLeaf()) {\n                rightCost = rightCombined.getPerimeter() + inheritanceCost;\n            }\n            else {\n                oldArea = right.bounds.getPerimeter();\n                newArea = rightCombined.getPerimeter();\n                rightCost = newArea - oldArea + inheritanceCost;\n            }\n            // cost is acceptable\n            if (cost < leftCost && cost < rightCost) {\n                break;\n            }\n            // Descend to the depths\n            if (leftCost < rightCost) {\n                currentRoot = left;\n            }\n            else {\n                currentRoot = right;\n            }\n        }\n        // Create the new parent node and insert into the tree\n        const oldParent = currentRoot.parent;\n        const newParent = new TreeNode(oldParent);\n        newParent.bounds = leafAABB.combine(currentRoot.bounds);\n        newParent.height = currentRoot.height + 1;\n        if (oldParent !== null) {\n            // The sibling node was not the root\n            if (oldParent.left === currentRoot) {\n                oldParent.left = newParent;\n            }\n            else {\n                oldParent.right = newParent;\n            }\n            newParent.left = currentRoot;\n            newParent.right = leaf;\n            currentRoot.parent = newParent;\n            leaf.parent = newParent;\n        }\n        else {\n            // The sibling node was the root\n            newParent.left = currentRoot;\n            newParent.right = leaf;\n            currentRoot.parent = newParent;\n            leaf.parent = newParent;\n            this.root = newParent;\n        }\n        // Walk up the tree fixing heights and AABBs\n        let currentNode = leaf.parent;\n        while (currentNode) {\n            currentNode = this._balance(currentNode);\n            if (!currentNode.left) {\n                throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\n            }\n            if (!currentNode.right) {\n                throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\n            }\n            currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n            currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n            currentNode = currentNode.parent;\n        }\n    }\n    /**\n     * Removes a node from the dynamic tree\n     */\n    _remove(leaf) {\n        if (leaf === this.root) {\n            this.root = null;\n            return;\n        }\n        const parent = leaf.parent;\n        const grandParent = parent.parent;\n        let sibling;\n        if (parent.left === leaf) {\n            sibling = parent.right;\n        }\n        else {\n            sibling = parent.left;\n        }\n        if (grandParent) {\n            if (grandParent.left === parent) {\n                grandParent.left = sibling;\n            }\n            else {\n                grandParent.right = sibling;\n            }\n            sibling.parent = grandParent;\n            let currentNode = grandParent;\n            while (currentNode) {\n                currentNode = this._balance(currentNode);\n                currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n                currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n                currentNode = currentNode.parent;\n            }\n        }\n        else {\n            this.root = sibling;\n            sibling.parent = null;\n        }\n    }\n    /**\n     * Tracks a body in the dynamic tree\n     */\n    trackCollider(collider) {\n        const node = new TreeNode();\n        node.data = collider;\n        node.bounds = collider.bounds;\n        node.bounds.left -= 2;\n        node.bounds.top -= 2;\n        node.bounds.right += 2;\n        node.bounds.bottom += 2;\n        this.nodes[collider.id.value] = node;\n        this._insert(node);\n    }\n    /**\n     * Updates the dynamic tree given the current bounds of each body being tracked\n     */\n    updateCollider(collider) {\n        var _a;\n        const node = this.nodes[collider.id.value];\n        if (!node) {\n            return false;\n        }\n        const b = collider.bounds;\n        // if the body is outside the world no longer update it\n        if (!this.worldBounds.contains(b)) {\n            Logger.getInstance().warn('Collider with id ' + collider.id.value + ' is outside the world bounds and will no longer be tracked for physics');\n            this.untrackCollider(collider);\n            return false;\n        }\n        if (node.bounds.contains(b)) {\n            return false;\n        }\n        this._remove(node);\n        b.left -= this._config.boundsPadding;\n        b.top -= this._config.boundsPadding;\n        b.right += this._config.boundsPadding;\n        b.bottom += this._config.boundsPadding;\n        // THIS IS CAUSING UNNECESSARY CHECKS\n        if (collider.owner) {\n            const body = (_a = collider.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            if (body) {\n                const multdx = ((body.vel.x * 32) / 1000) * this._config.velocityMultiplier;\n                const multdy = ((body.vel.y * 32) / 1000) * this._config.velocityMultiplier;\n                if (multdx < 0) {\n                    b.left += multdx;\n                }\n                else {\n                    b.right += multdx;\n                }\n                if (multdy < 0) {\n                    b.top += multdy;\n                }\n                else {\n                    b.bottom += multdy;\n                }\n            }\n        }\n        node.bounds = b;\n        this._insert(node);\n        return true;\n    }\n    /**\n     * Untracks a body from the dynamic tree\n     */\n    untrackCollider(collider) {\n        const node = this.nodes[collider.id.value];\n        if (!node) {\n            return;\n        }\n        this._remove(node);\n        this.nodes[collider.id.value] = null;\n        delete this.nodes[collider.id.value];\n    }\n    /**\n     * Balances the tree about a node\n     */\n    _balance(node) {\n        if (node === null) {\n            throw new Error('Cannot balance at null node');\n        }\n        if (node.isLeaf() || node.height < 2) {\n            return node;\n        }\n        const left = node.left;\n        const right = node.right;\n        const a = node;\n        const b = left;\n        const c = right;\n        const d = left.left;\n        const e = left.right;\n        const f = right.left;\n        const g = right.right;\n        const balance = c.height - b.height;\n        // Rotate c node up\n        if (balance > 1) {\n            // Swap the right node with it's parent\n            c.left = a;\n            c.parent = a.parent;\n            a.parent = c;\n            // The original node's old parent should point to the right node\n            // this is mega confusing\n            if (c.parent) {\n                if (c.parent.left === a) {\n                    c.parent.left = c;\n                }\n                else {\n                    c.parent.right = c;\n                }\n            }\n            else {\n                this.root = c;\n            }\n            // Rotate\n            if (f.height > g.height) {\n                c.right = f;\n                a.right = g;\n                g.parent = a;\n                a.bounds = b.bounds.combine(g.bounds);\n                c.bounds = a.bounds.combine(f.bounds);\n                a.height = 1 + Math.max(b.height, g.height);\n                c.height = 1 + Math.max(a.height, f.height);\n            }\n            else {\n                c.right = g;\n                a.right = f;\n                f.parent = a;\n                a.bounds = b.bounds.combine(f.bounds);\n                c.bounds = a.bounds.combine(g.bounds);\n                a.height = 1 + Math.max(b.height, f.height);\n                c.height = 1 + Math.max(a.height, g.height);\n            }\n            return c;\n        }\n        // Rotate left node up\n        if (balance < -1) {\n            // swap\n            b.left = a;\n            b.parent = a.parent;\n            a.parent = b;\n            // node's old parent should point to b\n            if (b.parent) {\n                if (b.parent.left === a) {\n                    b.parent.left = b;\n                }\n                else {\n                    if (b.parent.right !== a) {\n                        throw 'Error rotating Dynamic Tree';\n                    }\n                    b.parent.right = b;\n                }\n            }\n            else {\n                this.root = b;\n            }\n            // rotate\n            if (d.height > e.height) {\n                b.right = d;\n                a.left = e;\n                e.parent = a;\n                a.bounds = c.bounds.combine(e.bounds);\n                b.bounds = a.bounds.combine(d.bounds);\n                a.height = 1 + Math.max(c.height, e.height);\n                b.height = 1 + Math.max(a.height, d.height);\n            }\n            else {\n                b.right = e;\n                a.left = d;\n                d.parent = a;\n                a.bounds = c.bounds.combine(d.bounds);\n                b.bounds = a.bounds.combine(e.bounds);\n                a.height = 1 + Math.max(c.height, d.height);\n                b.height = 1 + Math.max(a.height, e.height);\n            }\n            return b;\n        }\n        return node;\n    }\n    /**\n     * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\n     */\n    getHeight() {\n        if (this.root === null) {\n            return 0;\n        }\n        return this.root.height;\n    }\n    /**\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\n     *\n     * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\n     * that you are complete with your query and you do not want to continue. Returning false will continue searching\n     * the tree until all possible colliders have been returned.\n     */\n    query(collider, callback) {\n        const bounds = collider.bounds;\n        const helper = (currentNode) => {\n            if (currentNode && currentNode.bounds.overlaps(bounds)) {\n                if (currentNode.isLeaf() && currentNode.data !== collider) {\n                    if (callback.call(collider, currentNode.data)) {\n                        return true;\n                    }\n                }\n                else {\n                    return helper(currentNode.left) || helper(currentNode.right);\n                }\n            }\n            return false;\n        };\n        helper(this.root);\n    }\n    /**\n     * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\n     * long ray to test the tree specified by `max`.\n     *\n     * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\n     * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\n     * the tree until all possible bodies that would intersect with the ray have been returned.\n     */\n    rayCastQuery(ray, max = Infinity, callback) {\n        const helper = (currentNode) => {\n            if (currentNode && currentNode.bounds.rayCast(ray, max)) {\n                if (currentNode.isLeaf()) {\n                    if (callback.call(ray, currentNode.data)) {\n                        // ray hit a leaf! return the body\n                        return true;\n                    }\n                }\n                else {\n                    // ray hit but not at a leaf, recurse deeper\n                    return helper(currentNode.left) || helper(currentNode.right);\n                }\n            }\n            return false; // ray missed\n        };\n        helper(this.root);\n    }\n    getNodes() {\n        const helper = (currentNode) => {\n            if (currentNode) {\n                return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\n            }\n            else {\n                return [];\n            }\n        };\n        return helper(this.root);\n    }\n    debug(ex) {\n        // draw all the nodes in the Dynamic Tree\n        const helper = (currentNode) => {\n            if (currentNode) {\n                if (currentNode.isLeaf()) {\n                    currentNode.bounds.draw(ex, Color.Green);\n                }\n                else {\n                    currentNode.bounds.draw(ex, Color.White);\n                }\n                if (currentNode.left) {\n                    helper(currentNode.left);\n                }\n                if (currentNode.right) {\n                    helper(currentNode.right);\n                }\n            }\n        };\n        helper(this.root);\n    }\n}\n\n;// ./Math/ray.ts\n/**\n * A 2D ray that can be cast into the scene to do collision detection\n */\nclass Ray {\n    /**\n     * @param pos The starting position for the ray\n     * @param dir The vector indicating the direction of the ray\n     */\n    constructor(pos, dir) {\n        this.pos = pos;\n        this.dir = dir.normalize();\n    }\n    /**\n     * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\n     * This number indicates the mathematical intersection time.\n     * @param line  The line to test\n     */\n    intersect(line) {\n        const numerator = line.begin.sub(this.pos);\n        // Test is line and ray are parallel and non intersecting\n        if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\n            return -1;\n        }\n        // Lines are parallel\n        const divisor = this.dir.cross(line.getSlope());\n        if (divisor === 0) {\n            return -1;\n        }\n        const t = numerator.cross(line.getSlope()) / divisor;\n        if (t >= 0) {\n            const u = numerator.cross(this.dir) / divisor / line.getLength();\n            if (u >= 0 && u <= 1) {\n                return t;\n            }\n        }\n        return -1;\n    }\n    intersectPoint(line) {\n        const time = this.intersect(line);\n        if (time < 0) {\n            return null;\n        }\n        return this.getPoint(time);\n    }\n    /**\n     * Returns the point of intersection given the intersection time\n     */\n    getPoint(time) {\n        return this.pos.add(this.dir.scale(time));\n    }\n}\n\n;// ./Collision/Detection/DynamicTreeCollisionProcessor.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Responsible for performing the collision broadphase (locating potential collisions) and\n * the narrowphase (actual collision contacts)\n */\nclass DynamicTreeCollisionProcessor {\n    constructor(_config) {\n        this._config = _config;\n        this._pairs = new Set();\n        this._collisionPairCache = [];\n        this._colliders = [];\n        this._dynamicCollisionTree = new DynamicTree(_config.dynamicTree);\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    query(pointOrBounds) {\n        const results = [];\n        if (pointOrBounds instanceof BoundingBox) {\n            this._dynamicCollisionTree.query({\n                id: createId('collider', -1),\n                owner: null,\n                bounds: pointOrBounds\n            }, (other) => {\n                results.push(other);\n                return false;\n            });\n        }\n        else {\n            this._dynamicCollisionTree.query({\n                id: createId('collider', -1),\n                owner: null,\n                bounds: new BoundingBox(pointOrBounds.x, pointOrBounds.y, pointOrBounds.x, pointOrBounds.y)\n            }, (other) => {\n                results.push(other);\n                return false;\n            });\n        }\n        return results;\n    }\n    rayCast(ray, options) {\n        var _a, _b, _c;\n        const results = [];\n        const maxDistance = (_a = options === null || options === void 0 ? void 0 : options.maxDistance) !== null && _a !== void 0 ? _a : Infinity;\n        const collisionGroup = options === null || options === void 0 ? void 0 : options.collisionGroup;\n        const collisionMask = !collisionGroup ? (_b = options === null || options === void 0 ? void 0 : options.collisionMask) !== null && _b !== void 0 ? _b : CollisionGroup.All.category : collisionGroup.category;\n        const searchAllColliders = (_c = options === null || options === void 0 ? void 0 : options.searchAllColliders) !== null && _c !== void 0 ? _c : false;\n        this._dynamicCollisionTree.rayCastQuery(ray, maxDistance, (collider) => {\n            const owner = collider.owner;\n            const maybeBody = owner.get(BodyComponent);\n            if ((options === null || options === void 0 ? void 0 : options.ignoreCollisionGroupAll) && maybeBody.group === CollisionGroup.All) {\n                return false;\n            }\n            const canCollide = (collisionMask & maybeBody.group.category) !== 0;\n            // Early exit if not the right group\n            if ((maybeBody === null || maybeBody === void 0 ? void 0 : maybeBody.group) && !canCollide) {\n                return false;\n            }\n            const hit = collider.rayCast(ray, maxDistance);\n            if (hit) {\n                if (options === null || options === void 0 ? void 0 : options.filter) {\n                    if (options.filter(hit)) {\n                        results.push(hit);\n                        if (!searchAllColliders) {\n                            // returning true exits the search\n                            return true;\n                        }\n                    }\n                }\n                else {\n                    results.push(hit);\n                    if (!searchAllColliders) {\n                        // returning true exits the search\n                        return true;\n                    }\n                }\n            }\n            return false;\n        });\n        return results;\n    }\n    /**\n     * Tracks a physics body for collisions\n     */\n    track(target) {\n        if (!target) {\n            Logger.getInstance().warn('Cannot track null collider');\n            return;\n        }\n        if (target instanceof CompositeCollider) {\n            const colliders = target.getColliders();\n            for (const c of colliders) {\n                c.owner = target.owner;\n                this._colliders.push(c);\n                this._dynamicCollisionTree.trackCollider(c);\n            }\n        }\n        else {\n            this._colliders.push(target);\n            this._dynamicCollisionTree.trackCollider(target);\n        }\n    }\n    /**\n     * Untracks a physics body\n     */\n    untrack(target) {\n        if (!target) {\n            Logger.getInstance().warn('Cannot untrack a null collider');\n            return;\n        }\n        if (target instanceof CompositeCollider) {\n            const colliders = target.getColliders();\n            for (const c of colliders) {\n                const index = this._colliders.indexOf(c);\n                if (index !== -1) {\n                    this._colliders.splice(index, 1);\n                }\n                this._dynamicCollisionTree.untrackCollider(c);\n            }\n        }\n        else {\n            const index = this._colliders.indexOf(target);\n            if (index !== -1) {\n                this._colliders.splice(index, 1);\n            }\n            this._dynamicCollisionTree.untrackCollider(target);\n        }\n    }\n    _pairExists(colliderA, colliderB) {\n        // if the collision pair has been calculated already short circuit\n        const hash = Pair.calculatePairHash(colliderA.id, colliderB.id);\n        return this._pairs.has(hash);\n    }\n    /**\n     * Detects potential collision pairs in a broadphase approach with the dynamic AABB tree strategy\n     */\n    broadphase(targets, elapsed, stats) {\n        const seconds = elapsed / 1000;\n        // Retrieve the list of potential colliders, exclude killed, prevented, and self\n        const potentialColliders = targets.filter((other) => {\n            var _a, _b;\n            const body = (_a = other.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            return ((_b = other.owner) === null || _b === void 0 ? void 0 : _b.isActive) && body.collisionType !== CollisionType.PreventCollision;\n        });\n        // clear old list of collision pairs\n        this._collisionPairCache = [];\n        this._pairs.clear();\n        // check for normal collision pairs\n        let collider;\n        for (let j = 0, l = potentialColliders.length; j < l; j++) {\n            collider = potentialColliders[j];\n            // Query the collision tree for potential colliders\n            this._dynamicCollisionTree.query(collider, (other) => {\n                if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\n                    const pair = new Pair(collider, other);\n                    this._pairs.add(pair.id);\n                    this._collisionPairCache.push(pair);\n                }\n                // Always return false, to query whole tree. Returning true in the query method stops searching\n                return false;\n            });\n        }\n        if (stats) {\n            stats.physics.pairs = this._collisionPairCache.length;\n        }\n        // Check dynamic tree for fast moving objects\n        // Fast moving objects are those moving at least there smallest bound per frame\n        if (this._config.continuous.checkForFastBodies) {\n            for (const collider of potentialColliders) {\n                const body = collider.owner.get(BodyComponent);\n                // Skip non-active objects. Does not make sense on other collision types\n                if (body.collisionType !== CollisionType.Active) {\n                    continue;\n                }\n                // Maximum travel distance next frame\n                const updateDistance = body.vel.magnitude * seconds + // velocity term\n                    body.acc.magnitude * 0.5 * seconds * seconds; // acc term\n                // Find the minimum dimension\n                const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\n                if (this._config.continuous.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\n                    if (stats) {\n                        stats.physics.fastBodies++;\n                    }\n                    // start with the oldPos because the integration for actors has already happened\n                    // objects resting on a surface may be slightly penetrating in the current position\n                    const updateVec = body.globalPos.sub(body.oldPos);\n                    const centerPoint = collider.center;\n                    const furthestPoint = collider.getFurthestPoint(body.vel);\n                    const origin = furthestPoint.sub(updateVec);\n                    const ray = new Ray(origin, body.vel);\n                    // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\n                    ray.pos = ray.pos.add(ray.dir.scale(-2 * this._config.continuous.surfaceEpsilon));\n                    let minCollider;\n                    let minTranslate = new Vector(Infinity, Infinity);\n                    this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + this._config.continuous.surfaceEpsilon * 2, (other) => {\n                        if (!this._pairExists(collider, other) && Pair.canCollide(collider, other)) {\n                            const hit = other.rayCast(ray, updateDistance + this._config.continuous.surfaceEpsilon * 10);\n                            if (hit) {\n                                const translate = hit.point.sub(origin);\n                                if (translate.magnitude < minTranslate.magnitude) {\n                                    minTranslate = translate;\n                                    minCollider = other;\n                                }\n                            }\n                        }\n                        return false;\n                    });\n                    if (minCollider && Vector.isValid(minTranslate)) {\n                        const pair = new Pair(collider, minCollider);\n                        if (!this._pairs.has(pair.id)) {\n                            this._pairs.add(pair.id);\n                            this._collisionPairCache.push(pair);\n                        }\n                        // move the fast moving object to the other body\n                        // need to push into the surface by ex.Physics.surfaceEpsilon\n                        const shift = centerPoint.sub(furthestPoint);\n                        body.globalPos = origin\n                            .add(shift)\n                            .add(minTranslate)\n                            .add(ray.dir.scale(10 * this._config.continuous.surfaceEpsilon)); // needed to push the shape slightly into contact\n                        collider.update(body.transform.get());\n                        if (stats) {\n                            stats.physics.fastBodyCollisions++;\n                        }\n                    }\n                }\n            }\n        }\n        // return cache\n        return this._collisionPairCache;\n    }\n    /**\n     * Applies narrow phase on collision pairs to find actual area intersections\n     * Adds actual colliding pairs to stats' Frame data\n     */\n    narrowphase(pairs, stats) {\n        let contacts = [];\n        for (let i = 0; i < pairs.length; i++) {\n            const newContacts = pairs[i].collide();\n            contacts = contacts.concat(newContacts);\n            if (stats && newContacts.length > 0) {\n                for (const c of newContacts) {\n                    stats.physics.contacts.set(c.id, c);\n                }\n            }\n        }\n        if (stats) {\n            stats.physics.collisions += contacts.length;\n        }\n        return contacts;\n    }\n    /**\n     * Update the dynamic tree positions\n     */\n    update(targets) {\n        let updated = 0;\n        const len = targets.length;\n        for (let i = 0; i < len; i++) {\n            if (this._dynamicCollisionTree.updateCollider(targets[i])) {\n                updated++;\n            }\n        }\n        return updated;\n    }\n    debug(ex) {\n        this._dynamicCollisionTree.debug(ex);\n    }\n}\n\n;// ./Collision/Colliders/Collider.ts\n\n\n\n/**\n * A collision collider specifies the geometry that can detect when other collision colliders intersect\n * for the purposes of colliding 2 objects in excalibur.\n */\nclass Collider {\n    constructor() {\n        this.id = createId('collider', Collider._ID++);\n        /**\n         * Composite collider if any this collider is attached to\n         *\n         * **WARNING** do not tamper with this property\n         */\n        this.composite = null;\n        this.events = new EventEmitter();\n        /**\n         * Pixel offset of the collision collider relative to the collider, by default (0, 0) meaning the collider is positioned\n         * on top of the collider.\n         */\n        this.offset = Vector.Zero;\n    }\n    /**\n     * Returns a boolean indicating whether this body collided with\n     * or was in stationary contact with\n     * the body of the other {@apilink Collider}\n     */\n    touching(other) {\n        const contact = this.collide(other);\n        if (contact) {\n            return true;\n        }\n        return false;\n    }\n}\nCollider._ID = 0;\n\n;// ./Collision/SolverStrategy.ts\n/**\n * Possible collision resolution strategies\n *\n * The default is {@apilink SolverStrategy.Arcade} which performs simple axis aligned arcade style physics. This is useful for things\n * like platformers or top down games.\n *\n * More advanced rigid body physics are enabled by setting {@apilink SolverStrategy.Realistic} which allows for complicated\n * simulated physical interactions.\n */\nvar SolverStrategy;\n(function (SolverStrategy) {\n    SolverStrategy[\"Arcade\"] = \"arcade\";\n    SolverStrategy[\"Realistic\"] = \"realistic\";\n})(SolverStrategy || (SolverStrategy = {}));\n\n;// ./Collision/Solver/ContactBias.ts\n/**\n * Tells the Arcade collision solver to prefer certain contacts over others\n */\nvar ContactSolveBias;\n(function (ContactSolveBias) {\n    ContactSolveBias[\"None\"] = \"none\";\n    ContactSolveBias[\"VerticalFirst\"] = \"vertical-first\";\n    ContactSolveBias[\"HorizontalFirst\"] = \"horizontal-first\";\n})(ContactSolveBias || (ContactSolveBias = {}));\n/**\n * Vertical First contact solve bias Used by the {@apilink ArcadeSolver} to sort contacts\n */\nconst VerticalFirst = {\n    vertical: 1,\n    horizontal: 2\n};\n/**\n * Horizontal First contact solve bias Used by the {@apilink ArcadeSolver} to sort contacts\n */\nconst HorizontalFirst = {\n    horizontal: 1,\n    vertical: 2\n};\n/**\n * None value, {@apilink ArcadeSolver} sorts contacts using distance by default\n */\nconst None = {\n    horizontal: 0,\n    vertical: 0\n};\n\n;// ./Collision/Detection/SpatialPartitionStrategy.ts\n/**\n * Possible collision resolution strategies\n *\n * The default is {@apilink SolverStrategy.Arcade} which performs simple axis aligned arcade style physics. This is useful for things\n * like platformers or top down games.\n *\n * More advanced rigid body physics are enabled by setting {@apilink SolverStrategy.Realistic} which allows for complicated\n * simulated physical interactions.\n */\nvar SpatialPartitionStrategy;\n(function (SpatialPartitionStrategy) {\n    SpatialPartitionStrategy[\"DynamicTree\"] = \"dynamic-tree\";\n    SpatialPartitionStrategy[\"SparseHashGrid\"] = \"sparse-hash-grid\";\n})(SpatialPartitionStrategy || (SpatialPartitionStrategy = {}));\n\n;// ./Collision/PhysicsConfig.ts\n\n\n\n\nconst getDefaultPhysicsConfig = () => ({\n    enabled: true,\n    gravity: vec(0, 0).clone(),\n    solver: SolverStrategy.Arcade,\n    substep: 1,\n    colliders: {\n        compositeStrategy: 'together'\n    },\n    continuous: {\n        checkForFastBodies: true,\n        disableMinimumSpeedForFastBody: false,\n        surfaceEpsilon: 0.1\n    },\n    bodies: {\n        canSleepByDefault: false,\n        sleepEpsilon: 0.07,\n        wakeThreshold: 0.07 * 3,\n        sleepBias: 0.9,\n        defaultMass: 10\n    },\n    spatialPartition: SpatialPartitionStrategy.SparseHashGrid,\n    sparseHashGrid: {\n        size: 100\n    },\n    dynamicTree: {\n        boundsPadding: 5,\n        velocityMultiplier: 2\n    },\n    arcade: {\n        contactSolveBias: ContactSolveBias.None\n    },\n    realistic: {\n        positionIterations: 3,\n        velocityIterations: 8,\n        slop: 1,\n        steeringFactor: 0.2,\n        warmStart: true\n    }\n});\n\n;// ./Collision/Colliders/CompositeCollider.ts\n\n\n\n\n\n\n\n\n\nclass CompositeCollider extends Collider {\n    /**\n     * Treat composite collider's member colliders as either separate colliders for the purposes of onCollisionStart/onCollision\n     * or as a single collider together.\n     *\n     * This property can be overridden on individual {@apilink CompositeColliders}.\n     *\n     * For composites without gaps or small groups of colliders, you probably want 'together'\n     *\n     * For composites with deliberate gaps, like a platforming level layout, you probably want 'separate'\n     *\n     * Default is 'together' if unset\n     */\n    set compositeStrategy(value) {\n        this._compositeStrategy = value;\n    }\n    get compositeStrategy() {\n        return this._compositeStrategy;\n    }\n    constructor(colliders) {\n        super();\n        this._collisionProcessor = new DynamicTreeCollisionProcessor({\n            ...getDefaultPhysicsConfig()\n        });\n        this._dynamicAABBTree = new DynamicTree({\n            boundsPadding: 5,\n            velocityMultiplier: 2\n        });\n        this._colliders = [];\n        for (const c of colliders) {\n            this.addCollider(c);\n        }\n    }\n    clearColliders() {\n        this._colliders = [];\n    }\n    addCollider(collider) {\n        let colliders;\n        if (collider instanceof CompositeCollider) {\n            colliders = collider.getColliders();\n            colliders.forEach((c) => c.offset.addEqual(collider.offset));\n        }\n        else {\n            colliders = [collider];\n        }\n        // Flatten composites\n        for (const c of colliders) {\n            c.events.pipe(this.events);\n            c.composite = this;\n            this._colliders.push(c);\n            this._collisionProcessor.track(c);\n            this._dynamicAABBTree.trackCollider(c);\n        }\n    }\n    removeCollider(collider) {\n        collider.events.pipe(this.events);\n        collider.composite = null;\n        removeItemFromArray(collider, this._colliders);\n        this._collisionProcessor.untrack(collider);\n        this._dynamicAABBTree.untrackCollider(collider);\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    get worldPos() {\n        var _a, _b;\n        return ((_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero).add(this.offset);\n    }\n    get center() {\n        var _a, _b;\n        return ((_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : Vector.Zero).add(this.offset);\n    }\n    get bounds() {\n        var _a, _b;\n        // TODO cache this\n        const colliders = this.getColliders();\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.bounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox().translate(this.worldPos));\n        return results.translate(this.offset);\n    }\n    get localBounds() {\n        var _a, _b;\n        // TODO cache this\n        const colliders = this.getColliders();\n        const results = colliders.reduce((acc, collider) => acc.combine(collider.localBounds), (_b = (_a = colliders[0]) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox());\n        return results;\n    }\n    get axes() {\n        // TODO cache this\n        const colliders = this.getColliders();\n        let axes = [];\n        for (const collider of colliders) {\n            axes = axes.concat(collider.axes);\n        }\n        return axes;\n    }\n    getFurthestPoint(direction) {\n        const colliders = this.getColliders();\n        const furthestPoints = [];\n        for (const collider of colliders) {\n            furthestPoints.push(collider.getFurthestPoint(direction));\n        }\n        // Pick best point from all colliders\n        let bestPoint = furthestPoints[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (const point of furthestPoints) {\n            const distance = point.dot(direction);\n            if (distance > maxDistance) {\n                bestPoint = point;\n                maxDistance = distance;\n            }\n        }\n        return bestPoint;\n    }\n    getInertia(mass) {\n        const colliders = this.getColliders();\n        let totalInertia = 0;\n        for (const collider of colliders) {\n            totalInertia += collider.getInertia(mass);\n        }\n        return totalInertia;\n    }\n    collide(other) {\n        let otherColliders = [other];\n        if (other instanceof CompositeCollider) {\n            otherColliders = other.getColliders();\n        }\n        const pairs = [];\n        for (const c of otherColliders) {\n            this._dynamicAABBTree.query(c, (potentialCollider) => {\n                pairs.push(new Pair(c, potentialCollider));\n                return false;\n            });\n        }\n        let contacts = [];\n        for (const p of pairs) {\n            contacts = contacts.concat(p.collide());\n        }\n        return contacts;\n    }\n    getClosestLineBetween(other) {\n        const colliders = this.getColliders();\n        const lines = [];\n        if (other instanceof CompositeCollider) {\n            const otherColliders = other.getColliders();\n            for (const colliderA of colliders) {\n                for (const colliderB of otherColliders) {\n                    const maybeLine = colliderA.getClosestLineBetween(colliderB);\n                    if (maybeLine) {\n                        lines.push(maybeLine);\n                    }\n                }\n            }\n        }\n        else {\n            for (const collider of colliders) {\n                const maybeLine = other.getClosestLineBetween(collider);\n                if (maybeLine) {\n                    lines.push(maybeLine);\n                }\n            }\n        }\n        if (lines.length) {\n            let minLength = lines[0].getLength();\n            let minLine = lines[0];\n            for (const line of lines) {\n                const length = line.getLength();\n                if (length < minLength) {\n                    minLength = length;\n                    minLine = line;\n                }\n            }\n            return minLine;\n        }\n        return null;\n    }\n    contains(point) {\n        const colliders = this.getColliders();\n        for (const collider of colliders) {\n            if (collider.contains(point)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    rayCast(ray, max) {\n        const colliders = this.getColliders();\n        const hits = [];\n        for (const collider of colliders) {\n            const hit = collider.rayCast(ray, max);\n            if (hit) {\n                hits.push(hit);\n            }\n        }\n        if (hits.length) {\n            let minHit = hits[0];\n            let minDistance = minHit.point.dot(ray.dir);\n            for (const hit of hits) {\n                const distance = ray.dir.dot(hit.point);\n                if (distance < minDistance) {\n                    minHit = hit;\n                    minDistance = distance;\n                }\n            }\n            return minHit;\n        }\n        return null;\n    }\n    project(axis) {\n        const colliders = this.getColliders();\n        const projections = [];\n        for (const collider of colliders) {\n            const proj = collider.project(axis);\n            if (proj) {\n                projections.push(proj);\n            }\n        }\n        // Merge all proj's on the same axis\n        if (projections.length) {\n            const newProjection = new Projection(projections[0].min, projections[0].max);\n            for (const proj of projections) {\n                newProjection.min = Math.min(proj.min, newProjection.min);\n                newProjection.max = Math.max(proj.max, newProjection.max);\n            }\n            return newProjection;\n        }\n        return null;\n    }\n    update(transform) {\n        if (transform) {\n            const colliders = this.getColliders();\n            for (const collider of colliders) {\n                collider.owner = this.owner;\n                collider.update(transform);\n            }\n        }\n    }\n    debug(ex, color, options) {\n        const colliders = this.getColliders();\n        ex.save();\n        ex.translate(this.offset.x, this.offset.y);\n        for (const collider of colliders) {\n            collider.debug(ex, color, options);\n        }\n        ex.restore();\n    }\n    clone() {\n        const result = new CompositeCollider(this._colliders.map((c) => c.clone()));\n        result.offset = this.offset.clone();\n        return result;\n    }\n}\n\n;// ./Math/line-segment.ts\n\n/**\n * A 2D line segment\n */\nclass LineSegment {\n    /**\n     * @param begin  The starting point of the line segment\n     * @param end  The ending point of the line segment\n     */\n    constructor(begin, end) {\n        this.begin = begin;\n        this.end = end;\n    }\n    clone(dest) {\n        const result = dest || new LineSegment(this.begin.clone(), this.end.clone());\n        result.begin = this.begin.clone(result.begin);\n        result.end = this.end.clone(result.end);\n        return result;\n    }\n    transform(matrix, dest) {\n        const result = dest || new LineSegment(Vector.Zero, Vector.Zero);\n        result.begin = matrix.multiply(this.begin, result.begin);\n        result.end = matrix.multiply(this.end, result.end);\n        return result;\n    }\n    /**\n     * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\n     */\n    get slope() {\n        return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\n    }\n    /**\n     * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\n     */\n    get intercept() {\n        return this.begin.y - this.slope * this.begin.x;\n    }\n    /**\n     * Gets the normal of the line\n     */\n    normal() {\n        if (this._normal) {\n            return this._normal;\n        }\n        return (this._normal = this.end.sub(this.begin).normal());\n    }\n    dir() {\n        if (this._dir) {\n            return this._dir;\n        }\n        return (this._dir = this.end.sub(this.begin));\n    }\n    getPoints() {\n        return [this.begin, this.end];\n    }\n    /**\n     * Returns the slope of the line in the form of a vector of length 1\n     */\n    getSlope() {\n        if (this._slope) {\n            return this._slope;\n        }\n        const begin = this.begin;\n        const end = this.end;\n        const distance = begin.distance(end);\n        return (this._slope = end.sub(begin).scale(1 / distance));\n    }\n    /**\n     * Returns the edge of the line as vector, the length of the vector is the length of the edge\n     */\n    getEdge() {\n        const begin = this.begin;\n        const end = this.end;\n        return end.sub(begin);\n    }\n    /**\n     * Returns the length of the line segment in pixels\n     */\n    getLength() {\n        const begin = this.begin;\n        const end = this.end;\n        const distance = begin.distance(end);\n        return distance;\n    }\n    /**\n     * Returns the midpoint of the edge\n     */\n    get midpoint() {\n        return this.begin.add(this.end).scale(0.5);\n    }\n    /**\n     * Flips the direction of the line segment\n     */\n    flip() {\n        return new LineSegment(this.end, this.begin);\n    }\n    /**\n     * Tests if a given point is below the line, points in the normal direction above the line are considered above.\n     * @param point\n     */\n    below(point) {\n        const above2 = (this.end.x - this.begin.x) * (point.y - this.begin.y) - (this.end.y - this.begin.y) * (point.x - this.begin.x);\n        return above2 >= 0;\n    }\n    /**\n     * Returns the clip point\n     * @param sideVector Vector that traces the line\n     * @param length Length to clip along side\n     */\n    clip(sideVector, length, normalize = true) {\n        let dir = sideVector;\n        if (normalize) {\n            dir = dir.normalize();\n        }\n        const near = dir.dot(this.begin) - length;\n        const far = dir.dot(this.end) - length;\n        const results = [];\n        if (near <= 0) {\n            results.push(this.begin);\n        }\n        if (far <= 0) {\n            results.push(this.end);\n        }\n        if (near * far < 0) {\n            const clipTime = near / (near - far);\n            results.push(this.begin.add(this.end.sub(this.begin).scale(clipTime)));\n        }\n        if (results.length !== 2) {\n            return null;\n        }\n        return new LineSegment(results[0], results[1]);\n    }\n    /**\n     * Find the perpendicular distance from the line to a point\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n     * @param point\n     */\n    distanceToPoint(point, signed = false) {\n        const x0 = point.x;\n        const y0 = point.y;\n        const l = this.getLength();\n        const dy = this.end.y - this.begin.y;\n        const dx = this.end.x - this.begin.x;\n        const distance = (dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\n        return signed ? distance : Math.abs(distance);\n    }\n    /**\n     * Find the perpendicular line from the line to a point\n     * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n     * (a - p) - ((a - p) * n)n\n     * a is a point on the line\n     * p is the arbitrary point above the line\n     * n is a unit vector in direction of the line\n     * @param point\n     */\n    findVectorToPoint(point) {\n        const aMinusP = this.begin.sub(point);\n        const n = this.getSlope();\n        return aMinusP.sub(n.scale(aMinusP.dot(n)));\n    }\n    /**\n     * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\n     * a new point with the calculated Y value and vice-versa.\n     * @param x The known X value of the target point\n     * @param y The known Y value of the target point\n     * @returns A new point with the other calculated axis value\n     */\n    findPoint(x = null, y = null) {\n        const m = this.slope;\n        const b = this.intercept;\n        if (x !== null) {\n            return new Vector(x, m * x + b);\n        }\n        else if (y !== null) {\n            return new Vector((y - b) / m, y);\n        }\n        else {\n            throw new Error('You must provide an X or a Y value');\n        }\n    }\n    /**\n     * @see http://stackoverflow.com/a/11908158/109458\n     */\n    hasPoint() {\n        let currPoint;\n        let threshold = 0;\n        if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\n            currPoint = new Vector(arguments[0], arguments[1]);\n            threshold = arguments[2] || 0;\n        }\n        else if (arguments[0] instanceof Vector) {\n            currPoint = arguments[0];\n            threshold = arguments[1] || 0;\n        }\n        else {\n            throw 'Could not determine the arguments for Vector.hasPoint';\n        }\n        const dxc = currPoint.x - this.begin.x;\n        const dyc = currPoint.y - this.begin.y;\n        const dx1 = this.end.x - this.begin.x;\n        const dy1 = this.end.y - this.begin.y;\n        const cross = dxc * dy1 - dyc * dx1;\n        // check whether point lines on the line\n        if (Math.abs(cross) > threshold) {\n            return false;\n        }\n        // check whether point lies in-between start and end\n        if (Math.abs(dx1) >= Math.abs(dy1)) {\n            return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\n        }\n        else {\n            return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\n        }\n    }\n}\n\n;// ./Collision/Colliders/ClosestLineJumpTable.ts\n\n\n\n\n/**\n * Finds the closest line segment between two given line segments.\n */\nfunction ClosestLine(line1, line2) {\n    // https://math.stackexchange.com/questions/1993953/closest-points-between-2-lines-in-2d\n    const EPSILON = 1e-9;\n    const line1Dir = line1.dir();\n    const line2Dir = line2.dir();\n    const d1Squared = line1Dir.dot(line1Dir);\n    const d2Squared = line2Dir.dot(line2Dir);\n    if (d1Squared < EPSILON && d2Squared < EPSILON) {\n        return new LineSegment(line1.begin, line2.begin);\n    }\n    if (d1Squared < EPSILON) {\n        const t = clamp(line2Dir.dot(line1.begin.sub(line2.begin)) / d2Squared, 0, 1);\n        const closestPoint = line2.begin.add(line2Dir.scale(t));\n        return new LineSegment(line1.begin, closestPoint);\n    }\n    if (d2Squared < EPSILON) {\n        const t = clamp(line1Dir.dot(line2.begin.sub(line1.begin)) / d1Squared, 0, 1);\n        const closestPoint = line1.begin.add(line1Dir.scale(t));\n        return new LineSegment(closestPoint, line2.begin);\n    }\n    const r = line1.begin.sub(line2.begin);\n    const a = d1Squared;\n    const e = d2Squared;\n    const f = line2Dir.dot(r);\n    const denom = a * e - Math.pow(line1Dir.dot(line2Dir), 2);\n    let s = 0;\n    let t = 0;\n    if (Math.abs(denom) > EPSILON) {\n        s = clamp((line1Dir.dot(line2Dir) * f - e * line1Dir.dot(r)) / denom, 0, 1);\n    }\n    else {\n        // lines are parallel\n        s = clamp(line1Dir.dot(r) / a, 0, 1);\n    }\n    if (Math.abs(e) > EPSILON) {\n        t = clamp((line1Dir.dot(line2Dir) * s + f) / e, 0, 1);\n    }\n    else {\n        // line2 is a degenerate point\n        t = 0;\n    }\n    const closestPointOnLine1 = line1.begin.add(line1Dir.scale(s));\n    const closestPointOnLine2 = line2.begin.add(line2Dir.scale(t));\n    return new LineSegment(closestPointOnLine1, closestPointOnLine2);\n}\nconst ClosestLineJumpTable = {\n    PolygonPolygonClosestLine(polygonA, polygonB) {\n        const aSides = polygonA.getSides();\n        const bSides = polygonB.getSides();\n        let minDistance = Number.MAX_VALUE;\n        let closestLine = null;\n        for (let i = 0; i < aSides.length; i++) {\n            for (let j = 0; j < bSides.length; j++) {\n                const line = ClosestLine(aSides[i], bSides[j]);\n                const distance = line.getLength();\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    closestLine = line;\n                }\n            }\n        }\n        return closestLine;\n    },\n    PolygonEdgeClosestLine(polygon, edge) {\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = edge.worldPos;\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\n        const thisPoint = polygon.rayCast(rayTowardsOther).point.add(rayTowardsOther.dir.scale(0.1));\n        const thisFace = polygon.getClosestFace(thisPoint);\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n        const edgeLine = edge.asLine();\n        return ClosestLine(thisFace.face, edgeLine);\n    },\n    PolygonCircleClosestLine(polygon, circle) {\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = circle.worldPos;\n        const otherDirection = otherWorldPos.sub(polygon.worldPos);\n        const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\n        const thisPoint = polygon.rayCast(rayTowardsOther).point.add(rayTowardsOther.dir.scale(0.1));\n        const thisFace = polygon.getClosestFace(thisPoint);\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const p0 = thisFace.face.begin;\n        const u = thisFace.face.getEdge();\n        // Time of minimum distance\n        let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n        // If time of minimum is past the edge clamp\n        if (t > 1) {\n            t = 1;\n        }\n        else if (t < 0) {\n            t = 0;\n        }\n        // Minimum distance\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\n        const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\n        const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\n        return new LineSegment(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\n    },\n    CircleCircleClosestLine(circleA, circleB) {\n        // Find the 2 closest faces on each polygon\n        const otherWorldPos = circleB.worldPos;\n        const otherDirection = otherWorldPos.sub(circleA.worldPos);\n        const thisWorldPos = circleA.worldPos;\n        const thisDirection = thisWorldPos.sub(circleB.worldPos);\n        const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\n        const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\n        const thisPoint = circleA.rayCast(rayTowardsOther);\n        const otherPoint = circleB.rayCast(rayTowardsThis);\n        return new LineSegment(thisPoint.point, otherPoint.point);\n    },\n    CircleEdgeClosestLine(circle, edge) {\n        // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n        const circleWorldPos = circle.worldPos;\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const edgeLine = edge.asLine();\n        const edgeStart = edgeLine.begin;\n        const edgeVector = edgeLine.getEdge();\n        const p0 = edgeStart;\n        const u = edgeVector;\n        // Time of minimum distance\n        let t = (u.x * (circleWorldPos.x - p0.x) + u.y * (circleWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n        // If time of minimum is past the edge clamp to edge\n        if (t > 1) {\n            t = 1;\n        }\n        else if (t < 0) {\n            t = 0;\n        }\n        // Minimum distance\n        const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorldPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorldPos.y, 2)) - circle.radius;\n        const circlex = ((p0.x + u.x * t - circleWorldPos.x) * circle.radius) / (circle.radius + d);\n        const circley = ((p0.y + u.y * t - circleWorldPos.y) * circle.radius) / (circle.radius + d);\n        return new LineSegment(u.scale(t).add(p0), new Vector(circleWorldPos.x + circlex, circleWorldPos.y + circley));\n    },\n    EdgeEdgeClosestLine(edgeA, edgeB) {\n        // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n        const edgeLineA = edgeA.asLine();\n        // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n        const edgeLineB = edgeB.asLine();\n        return ClosestLine(edgeLineA, edgeLineB);\n    }\n};\n\n;// ./Collision/Colliders/CircleCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * This is a circle collider for the excalibur rigid body physics simulation\n */\nclass CircleCollider extends Collider {\n    get worldPos() {\n        return this._globalMatrix.getPosition();\n    }\n    /**\n     * Get the radius of the circle\n     */\n    get radius() {\n        var _a;\n        if (this._radius) {\n            return this._radius;\n        }\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\n        return (this._radius = this._naturalRadius * Math.min(scale.x, scale.y));\n    }\n    /**\n     * Set the radius of the circle\n     */\n    set radius(val) {\n        var _a;\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        // This is a trade off, the alternative is retooling circles to support ellipse collisions\n        this._naturalRadius = val / Math.min(scale.x, scale.y);\n        this._localBoundsDirty = true;\n        this._radius = val;\n    }\n    constructor(options) {\n        super();\n        /**\n         * Position of the circle relative to the collider, by default (0, 0).\n         */\n        this.offset = Vector.Zero;\n        this._globalMatrix = AffineMatrix.identity();\n        this._localBoundsDirty = true;\n        this.offset = options.offset || Vector.Zero;\n        this.radius = options.radius || 0;\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n    }\n    /**\n     * Returns a clone of this shape, not associated with any collider\n     */\n    clone() {\n        return new CircleCollider({\n            offset: this.offset.clone(),\n            radius: this.radius\n        });\n    }\n    /**\n     * Get the center of the collider in world coordinates\n     */\n    get center() {\n        return this._globalMatrix.getPosition();\n    }\n    /**\n     * Tests if a point is contained in this collider\n     */\n    contains(point) {\n        var _a, _b;\n        const pos = (_b = (_a = this._transform) === null || _a === void 0 ? void 0 : _a.pos) !== null && _b !== void 0 ? _b : this.offset;\n        const distance = pos.distance(point);\n        if (distance <= this.radius) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Casts a ray at the Circle collider and returns the nearest point of collision\n     * @param ray\n     */\n    rayCast(ray, max = Infinity) {\n        var _a, _b;\n        // https://en.wikipedia.org/wiki/Intersection_(geometry)#A_line_and_a_circle\n        const c = this.center;\n        const dir = ray.dir;\n        const orig = ray.pos;\n        const u = c.sub(orig);\n        const u1 = dir.scale(u.dot(dir));\n        const u2 = u.sub(u1);\n        const d = u2.magnitude;\n        if (d > this.radius) {\n            return null;\n        }\n        else {\n            // tangent case\n            let toi = 0;\n            if (approximatelyEqual(d, this.radius, 0.0001)) {\n                toi = -dir.dot(orig.sub(c));\n                if (toi > 0 && toi < max) {\n                    const point = ray.getPoint(toi);\n                    return {\n                        point,\n                        normal: point.sub(c).normalize(),\n                        collider: this,\n                        body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                        distance: toi\n                    };\n                }\n                return null;\n            }\n            else {\n                // two point\n                const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\n                const toi1 = -dir.dot(orig.sub(c)) + discriminant;\n                const toi2 = -dir.dot(orig.sub(c)) - discriminant;\n                const positiveToi = [];\n                if (toi1 >= 0) {\n                    positiveToi.push(toi1);\n                }\n                if (toi2 >= 0) {\n                    positiveToi.push(toi2);\n                }\n                const minToi = Math.min(...positiveToi);\n                if (minToi <= max) {\n                    const point = ray.getPoint(minToi);\n                    return {\n                        point,\n                        normal: point.sub(c).normalize(),\n                        collider: this,\n                        body: (_b = this.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent),\n                        distance: minToi\n                    };\n                }\n                return null;\n            }\n        }\n    }\n    getClosestLineBetween(shape) {\n        if (shape instanceof CircleCollider) {\n            return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\n        }\n        else if (shape instanceof EdgeCollider) {\n            return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    collide(collider) {\n        if (collider instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCircleCircle(this, collider);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return CollisionJumpTable.CollideCirclePolygon(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return CollisionJumpTable.CollideCircleEdge(this, collider);\n        }\n        else {\n            throw new Error(`Circle could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        return this.center.add(direction.normalize().scale(this.radius));\n    }\n    /**\n     * Find the local point on the shape in the direction specified\n     * @param direction\n     */\n    getFurthestLocalPoint(direction) {\n        const dir = direction.normalize();\n        return dir.scale(this.radius);\n    }\n    /**\n     * Get the axis aligned bounding box for the circle collider in world coordinates\n     */\n    get bounds() {\n        return this.localBounds.transform(this._globalMatrix);\n    }\n    /**\n     * Get the axis aligned bounding box for the circle collider in local coordinates\n     */\n    get localBounds() {\n        if (this._localBoundsDirty) {\n            this._localBounds = new BoundingBox(-this._naturalRadius, -this._naturalRadius, +this._naturalRadius, +this._naturalRadius);\n            this._localBoundsDirty = false;\n        }\n        return this._localBounds;\n    }\n    /**\n     * Get axis not implemented on circles, since there are infinite axis in a circle\n     */\n    get axes() {\n        return [];\n    }\n    /**\n     * Returns the moment of inertia of a circle given it's mass\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        return (mass * this.radius * this.radius) / 2;\n    }\n    /* istanbul ignore next */\n    update(transform) {\n        var _a;\n        this._transform = transform;\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\n        globalMat.clone(this._globalMatrix);\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n        this._radius = undefined;\n    }\n    /**\n     * Project the circle along a specified axis\n     */\n    project(axis) {\n        const scalars = [];\n        const point = this.center;\n        const dotProduct = point.dot(axis);\n        scalars.push(dotProduct);\n        scalars.push(dotProduct + this.radius);\n        scalars.push(dotProduct - this.radius);\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n    }\n    debug(ex, color, options) {\n        var _a, _b, _c, _d;\n        const { lineWidth } = { ...{ lineWidth: 1 }, ...options };\n        const tx = this._transform;\n        const scale = (_a = tx === null || tx === void 0 ? void 0 : tx.globalScale) !== null && _a !== void 0 ? _a : Vector.One;\n        const rotation = (_b = tx === null || tx === void 0 ? void 0 : tx.globalRotation) !== null && _b !== void 0 ? _b : 0;\n        const pos = (_c = tx === null || tx === void 0 ? void 0 : tx.globalPos) !== null && _c !== void 0 ? _c : Vector.Zero;\n        ex.save();\n        ex.translate(pos.x, pos.y);\n        ex.rotate(rotation);\n        ex.scale(scale.x, scale.y);\n        ex.drawCircle((_d = this.offset) !== null && _d !== void 0 ? _d : Vector.Zero, this._naturalRadius, Color.Transparent, color, lineWidth);\n        ex.restore();\n    }\n}\n\n;// ./Collision/Detection/CollisionContact.ts\n\n\n\n/**\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\n * Pair prevents collisions from being evaluated more than one time\n */\nclass CollisionContact {\n    constructor(colliderA, colliderB, mtv, normal, tangent, points, localPoints, info) {\n        var _a, _b, _c, _d, _e, _f;\n        this._canceled = false;\n        this.bodyA = null;\n        this.bodyB = null;\n        this.colliderA = colliderA;\n        this.colliderB = colliderB;\n        this.mtv = mtv;\n        this.normal = normal;\n        this.tangent = tangent;\n        this.points = points;\n        this.localPoints = localPoints;\n        this.info = info;\n        this.id = Pair.calculatePairHash(colliderA.id, colliderB.id);\n        if (colliderA.composite || colliderB.composite) {\n            // Add on the parent composite pair for start/end contact if 'together\n            const colliderAId = ((_a = colliderA.composite) === null || _a === void 0 ? void 0 : _a.compositeStrategy) === 'separate' ? colliderA.id : (_c = (_b = colliderA.composite) === null || _b === void 0 ? void 0 : _b.id) !== null && _c !== void 0 ? _c : colliderA.id;\n            const colliderBId = ((_d = colliderB.composite) === null || _d === void 0 ? void 0 : _d.compositeStrategy) === 'separate' ? colliderB.id : (_f = (_e = colliderB.composite) === null || _e === void 0 ? void 0 : _e.id) !== null && _f !== void 0 ? _f : colliderB.id;\n            this.id += '|' + Pair.calculatePairHash(colliderAId, colliderBId);\n        }\n        if (this.colliderA.owner) {\n            this.bodyA = this.colliderA.owner.get(BodyComponent);\n        }\n        if (this.colliderB.owner) {\n            this.bodyB = this.colliderB.owner.get(BodyComponent);\n        }\n    }\n    /**\n     * Match contact awake state, except if body's are Fixed\n     */\n    matchAwake() {\n        const bodyA = this.bodyA;\n        const bodyB = this.bodyB;\n        if (bodyA && bodyB) {\n            if (bodyA.isSleeping !== bodyB.isSleeping) {\n                if (bodyA.isSleeping && bodyA.collisionType !== CollisionType.Fixed && bodyB.sleepMotion >= bodyA.wakeThreshold) {\n                    bodyA.isSleeping = false;\n                }\n                if (bodyB.isSleeping && bodyB.collisionType !== CollisionType.Fixed && bodyA.sleepMotion >= bodyB.wakeThreshold) {\n                    bodyB.isSleeping = false;\n                }\n            }\n        }\n    }\n    isCanceled() {\n        return this._canceled;\n    }\n    cancel() {\n        this._canceled = true;\n    }\n    /**\n     * Biases the contact so that the given collider is colliderA\n     */\n    bias(collider) {\n        if (collider !== this.colliderA && collider !== this.colliderB) {\n            throw new Error('Collider must be either colliderA or colliderB from this contact');\n        }\n        if (collider === this.colliderA) {\n            return this;\n        }\n        const colliderA = this.colliderA;\n        const colliderB = this.colliderB;\n        this.colliderB = colliderA;\n        this.colliderA = colliderB;\n        this.mtv = this.mtv.negate();\n        this.normal = this.normal.negate();\n        this.tangent = this.tangent.negate();\n        return this;\n    }\n}\n\n;// ./Collision/Colliders/SeparatingAxis.ts\n\n\n\n\n/**\n * Specific information about a contact and it's separation\n */\nclass SeparationInfo {\n    constructor() {\n        /**\n         * Axis of separation from the collider's perspective\n         */\n        this.axis = vec(0, 0);\n        /**\n         * Local axis of separation from the collider's perspective\n         */\n        this.localAxis = vec(0, 0);\n        /**\n         * Side of separation (reference) from the collider's perspective\n         */\n        this.side = new LineSegment(vec(0, 0), vec(0, 0));\n        /**\n         * Local side of separation (reference) from the collider's perspective\n         */\n        this.localSide = new LineSegment(vec(0, 0), vec(0, 0));\n        /**\n         * Point on collider B (incident point)\n         */\n        this.point = vec(0, 0);\n        /**\n         * Local point on collider B (incident point)\n         */\n        this.localPoint = vec(0, 0);\n    }\n}\nclass SeparatingAxis {\n    static findPolygonPolygonSeparation(polyA, polyB) {\n        // if polyB has 0 scale we need to hop back to degenerate separation\n        if (polyB.transform.matrix.determinant() === 0) {\n            return SeparatingAxis.findPolygonPolygonSeparationDegenerate(polyA, polyB);\n        }\n        // Multi contact from SAT\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\n        // do a SAT test to find a min axis if it exists\n        let bestSeparation = -Number.MAX_VALUE;\n        let bestSideIndex = -1;\n        let localPoint;\n        // Work inside polyB reference frame\n        // inv polyB converts to local space from polyA world space\n        const toPolyBSpace = polyB.transform.inverse.multiply(polyA.transform.matrix, SeparatingAxis._SCRATCH_MATRIX);\n        const toPolyBSpaceRotation = toPolyBSpace.getRotation();\n        const normalsA = polyA.normals;\n        const pointsA = polyA.points;\n        const pointsB = polyB.points;\n        for (let pointsAIndex = 0; pointsAIndex < pointsA.length; pointsAIndex++) {\n            const normal = normalsA[pointsAIndex].rotate(toPolyBSpaceRotation, SeparatingAxis._ZERO, SeparatingAxis._SCRATCH_NORMAL);\n            const point = toPolyBSpace.multiply(pointsA[pointsAIndex], SeparatingAxis._SCRATCH_POINT);\n            // For every point in polyB\n            // We want to see how much overlap there is on the axis provided by the normal\n            // We want to find the minimum overlap among all points\n            let smallestPointDistance = Number.MAX_VALUE;\n            let smallestLocalPoint;\n            for (let pointsBIndex = 0; pointsBIndex < pointsB.length; pointsBIndex++) {\n                const distance = normal.dot(pointsB[pointsBIndex].sub(point, SeparatingAxis._SCRATCH_SUB_POINT));\n                if (distance < smallestPointDistance) {\n                    smallestPointDistance = distance;\n                    smallestLocalPoint = pointsB[pointsBIndex];\n                }\n            }\n            // We take the maximum overlap as the separation between the\n            // A negative separation means there were no gaps between the two shapes\n            if (smallestPointDistance > bestSeparation) {\n                bestSeparation = smallestPointDistance;\n                bestSideIndex = pointsAIndex;\n                localPoint = smallestLocalPoint;\n            }\n        }\n        // TODO can we avoid applying world space transforms?\n        const bestSide2 = (bestSideIndex + 1) % pointsA.length;\n        const separationInfo = SeparatingAxis.SeparationPool.get();\n        separationInfo.collider = polyA;\n        separationInfo.separation = bestSeparation;\n        if (bestSeparation > 0) {\n            // early out because if separation is > 0 then no local point\n            return separationInfo;\n        }\n        normalsA[bestSideIndex].clone(separationInfo.localAxis);\n        normalsA[bestSideIndex].rotate(polyA.transform.rotation, SeparatingAxis._ZERO, separationInfo.axis);\n        polyA.transform.matrix.multiply(pointsA[bestSideIndex], separationInfo.side.begin);\n        polyA.transform.matrix.multiply(pointsA[bestSide2], separationInfo.side.end);\n        polyB.transform.matrix.multiply(localPoint, separationInfo.point);\n        separationInfo.sideId = bestSideIndex;\n        localPoint.clone(separationInfo.localPoint);\n        pointsA[bestSideIndex].clone(separationInfo.localSide.begin);\n        pointsA[bestSide2].clone(separationInfo.localSide.end);\n        return separationInfo;\n    }\n    static findCirclePolygonSeparation(circle, polygon) {\n        const axes = polygon.axes;\n        const pc = polygon.center;\n        // Special SAT with circles\n        const polyDir = pc.sub(circle.worldPos);\n        const closestPointOnPoly = polygon.getFurthestPoint(polyDir.negate());\n        axes.push(closestPointOnPoly.sub(circle.worldPos).normalize());\n        let minOverlap = Number.MAX_VALUE;\n        let minAxis = null;\n        let minIndex = -1;\n        for (let i = 0; i < axes.length; i++) {\n            const proj1 = polygon.project(axes[i]);\n            const proj2 = circle.project(axes[i]);\n            const overlap = proj1.getOverlap(proj2);\n            if (overlap <= 0) {\n                return null;\n            }\n            else {\n                if (overlap < minOverlap) {\n                    minOverlap = overlap;\n                    minAxis = axes[i];\n                    minIndex = i;\n                }\n            }\n        }\n        if (minIndex < 0) {\n            return null;\n        }\n        return minAxis.normalize().scale(minOverlap);\n    }\n    static findPolygonPolygonSeparationDegenerate(polyA, polyB) {\n        let bestSeparation = -Number.MAX_VALUE;\n        let bestSide = null;\n        let bestAxis = null;\n        let bestSideIndex = -1;\n        let bestOtherPoint = null;\n        const sides = polyA.getSides();\n        const localSides = polyA.getLocalSides();\n        for (let i = 0; i < sides.length; i++) {\n            const side = sides[i];\n            const axis = side.normal();\n            const vertB = polyB.getFurthestPoint(axis.negate());\n            // Separation on side i's axis\n            // We are looking for the largest separation between poly A's sides\n            const vertSeparation = side.distanceToPoint(vertB, true);\n            if (vertSeparation > bestSeparation) {\n                bestSeparation = vertSeparation;\n                bestSide = side;\n                bestAxis = axis;\n                bestSideIndex = i;\n                bestOtherPoint = vertB;\n            }\n        }\n        return {\n            collider: polyA,\n            separation: bestAxis ? bestSeparation : 99,\n            axis: bestAxis,\n            side: bestSide,\n            localSide: localSides[bestSideIndex],\n            sideId: bestSideIndex,\n            point: bestOtherPoint,\n            localPoint: bestAxis ? polyB.getFurthestLocalPoint(bestAxis.negate()) : null\n        };\n    }\n}\nSeparatingAxis.SeparationPool = new Pool(() => new SeparationInfo(), (i) => i, // no recycle\n500);\nSeparatingAxis._ZERO = vec(0, 0);\nSeparatingAxis._SCRATCH_POINT = vec(0, 0);\nSeparatingAxis._SCRATCH_SUB_POINT = vec(0, 0);\nSeparatingAxis._SCRATCH_NORMAL = vec(0, 0);\nSeparatingAxis._SCRATCH_MATRIX = AffineMatrix.identity();\nSeparatingAxis.SeparationPool.disableWarnings = true;\n\n;// ./Collision/Colliders/CollisionJumpTable.ts\n\n\n\n\n\n\n\n\n\n\nconst ScratchZero = Vector.Zero; // TODO constant vector\nconst ScratchNormal = Vector.Zero; // TODO constant vector\nconst ScratchMatrix = AffineMatrix.identity();\nconst CollisionJumpTable = {\n    CollideCircleCircle(circleA, circleB) {\n        const circleAPos = circleA.worldPos;\n        const circleBPos = circleB.worldPos;\n        const combinedRadius = circleA.radius + circleB.radius;\n        const distance = circleAPos.distance(circleBPos);\n        if (distance > combinedRadius) {\n            return [];\n        }\n        // negative means overlap\n        const separation = combinedRadius - distance;\n        // Normal points from A -> B\n        const normal = circleBPos.sub(circleAPos).normalize();\n        const tangent = normal.perpendicular();\n        const mvt = normal.scale(separation);\n        const point = circleA.getFurthestPoint(normal);\n        const local = circleA.getFurthestLocalPoint(normal);\n        const info = {\n            collider: circleA,\n            separation,\n            axis: normal,\n            point: point\n        };\n        return [new CollisionContact(circleA, circleB, mvt, normal, tangent, [point], [local], info)];\n    },\n    CollideCirclePolygon(circle, polygon) {\n        var _a, _b;\n        let minAxis = SeparatingAxis.findCirclePolygonSeparation(circle, polygon);\n        if (!minAxis) {\n            return [];\n        }\n        // make sure that the minAxis is pointing away from circle\n        const sameDir = minAxis.dot(polygon.center.sub(circle.center));\n        minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\n        const point = circle.getFurthestPoint(minAxis);\n        const xf = (_b = (_a = circle.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent)) !== null && _b !== void 0 ? _b : new TransformComponent();\n        const local = xf.applyInverse(point);\n        const normal = minAxis.normalize();\n        const info = {\n            collider: circle,\n            separation: -minAxis.magnitude,\n            axis: normal,\n            point: point,\n            localPoint: local,\n            side: polygon.findSide(normal.negate()),\n            localSide: polygon.findLocalSide(normal.negate())\n        };\n        return [new CollisionContact(circle, polygon, minAxis, normal, normal.perpendicular(), [point], [local], info)];\n    },\n    CollideCircleEdge(circle, edge) {\n        // TODO not sure this actually abides by local/world collisions\n        // Are edge.begin and edge.end local space or world space? I think they should be local\n        // center of the circle in world pos\n        const cc = circle.center;\n        // vector in the direction of the edge\n        const edgeWorld = edge.asLine();\n        const e = edgeWorld.end.sub(edgeWorld.begin);\n        // amount of overlap with the circle's center along the edge direction\n        const u = e.dot(edgeWorld.end.sub(cc));\n        const v = e.dot(cc.sub(edgeWorld.begin));\n        const side = edge.asLine();\n        const localSide = edge.asLocalLine();\n        // Potential region A collision (circle is on the left side of the edge, before the beginning)\n        if (v <= 0) {\n            const da = edgeWorld.begin.sub(cc);\n            const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\n            // save some sqrts\n            if (dda > circle.radius * circle.radius) {\n                return []; // no collision\n            }\n            const normal = da.normalize();\n            const separation = circle.radius - Math.sqrt(dda);\n            const info = {\n                collider: circle,\n                separation: separation,\n                axis: normal,\n                point: side.begin,\n                side: side,\n                localSide: localSide\n            };\n            return [\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.begin], [localSide.begin], info)\n            ];\n        }\n        // Potential region B collision (circle is on the right side of the edge, after the end)\n        if (u <= 0) {\n            const db = edgeWorld.end.sub(cc);\n            const ddb = db.dot(db);\n            if (ddb > circle.radius * circle.radius) {\n                return [];\n            }\n            const normal = db.normalize();\n            const separation = circle.radius - Math.sqrt(ddb);\n            const info = {\n                collider: circle,\n                separation: separation,\n                axis: normal,\n                point: side.end,\n                side: side,\n                localSide: localSide\n            };\n            return [\n                new CollisionContact(circle, edge, normal.scale(separation), normal, normal.perpendicular(), [side.end], [localSide.end], info)\n            ];\n        }\n        // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\n        const den = e.dot(e);\n        const pointOnEdge = edgeWorld.begin\n            .scale(u)\n            .add(edgeWorld.end.scale(v))\n            .scale(1 / den);\n        const d = cc.sub(pointOnEdge);\n        const dd = d.dot(d);\n        if (dd > circle.radius * circle.radius) {\n            return []; // no collision\n        }\n        let normal = e.perpendicular();\n        // flip correct direction\n        if (normal.dot(cc.sub(edgeWorld.begin)) < 0) {\n            normal.x = -normal.x;\n            normal.y = -normal.y;\n        }\n        normal = normal.normalize();\n        const separation = circle.radius - Math.sqrt(dd);\n        const mvt = normal.scale(separation);\n        const info = {\n            collider: circle,\n            separation: separation,\n            axis: normal,\n            point: pointOnEdge,\n            side: side,\n            localSide: localSide\n        };\n        return [\n            new CollisionContact(circle, edge, mvt, normal.negate(), normal.negate().perpendicular(), [pointOnEdge], [pointOnEdge.sub(edge.worldPos)], info)\n        ];\n    },\n    CollideEdgeEdge() {\n        // Edge-edge collision doesn't make sense\n        return [];\n    },\n    CollidePolygonEdge(polygon, edge) {\n        var _a;\n        const pc = polygon.center;\n        const ec = edge.center;\n        const dir = ec.sub(pc).normalize();\n        // build a temporary polygon from the edge to use SAT\n        const linePoly = new PolygonCollider({\n            points: [edge.begin, edge.end, edge.end.add(dir.scale(100)), edge.begin.add(dir.scale(100))],\n            offset: edge.offset\n        });\n        linePoly.owner = edge.owner;\n        const tx = (_a = edge.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        if (tx) {\n            linePoly.update(edge.owner.get(TransformComponent).get());\n        }\n        // Gross hack but poly-poly works well\n        const contact = this.CollidePolygonPolygon(polygon, linePoly);\n        if (contact.length) {\n            // Fudge the contact back to edge\n            contact[0].colliderB = edge;\n            contact[0].id = Pair.calculatePairHash(polygon.id, edge.id);\n        }\n        return contact;\n    },\n    CollidePolygonPolygon(polyA, polyB) {\n        // Multi contact from SAT\n        // https://gamedev.stackexchange.com/questions/111390/multiple-contacts-for-sat-collision-detection\n        // do a SAT test to find a min axis if it exists\n        const separationA = SeparatingAxis.findPolygonPolygonSeparation(polyA, polyB);\n        // If there is no overlap from boxA's perspective we can end early\n        if (separationA.separation > 0) {\n            return [];\n        }\n        const separationB = SeparatingAxis.findPolygonPolygonSeparation(polyB, polyA);\n        // If there is no overlap from boxB's perspective exit now\n        if (separationB.separation > 0) {\n            return [];\n        }\n        // Separations are both negative, we want to pick the least negative (minimal movement)\n        const separation = separationA.separation > separationB.separation ? separationA : separationB;\n        // The incident side is the most opposite from the axes of collision on the other collider\n        const other = separation.collider === polyA ? polyB : polyA;\n        const main = separation.collider === polyA ? polyA : polyB;\n        const toIncidentFrame = other.transform.inverse.multiply(main.transform.matrix, ScratchMatrix);\n        const toIncidentFrameRotation = toIncidentFrame.getRotation();\n        const referenceEdgeNormal = main.normals[separation.sideId].rotate(toIncidentFrameRotation, ScratchZero, ScratchNormal);\n        let minEdge = Number.MAX_VALUE;\n        let incidentEdgeIndex = 0;\n        for (let i = 0; i < other.normals.length; i++) {\n            const value = referenceEdgeNormal.dot(other.normals[i]);\n            if (value < minEdge) {\n                minEdge = value;\n                incidentEdgeIndex = i;\n            }\n        }\n        // FIXME temporary to prevent a crash, invalid separation\n        if (!separation.localSide || !separation.localAxis || !separation.axis) {\n            return [];\n        }\n        // Clip incident side by the perpendicular lines at each end of the reference side\n        // https://en.wikipedia.org/wiki/Sutherland%E2%80%93Hodgman_algorithm\n        const referenceSide = separation.localSide.transform(toIncidentFrame);\n        const referenceDirection = separation.localAxis.perpendicular().negate().rotate(toIncidentFrameRotation);\n        const incidentSide = new LineSegment(other.points[incidentEdgeIndex], other.points[(incidentEdgeIndex + 1) % other.points.length]);\n        const clipRight = incidentSide.clip(referenceDirection.negate(), -referenceDirection.dot(referenceSide.begin), false);\n        let clipLeft = null;\n        if (clipRight) {\n            clipLeft = clipRight.clip(referenceDirection, referenceDirection.dot(referenceSide.end), false);\n        }\n        if (clipLeft) {\n            const localPoints = [];\n            const points = [];\n            const clipPoints = clipLeft.getPoints();\n            for (let i = 0; i < clipPoints.length; i++) {\n                const p = clipPoints[i];\n                if (referenceSide.below(p)) {\n                    localPoints.push(p);\n                    points.push(other.transform.apply(p));\n                }\n            }\n            let normal = separation.axis;\n            let tangent = normal.perpendicular();\n            // Point Contact A -> B\n            if (polyB.center.sub(polyA.center).dot(normal) < 0) {\n                normal = normal.negate();\n                tangent = normal.perpendicular();\n            }\n            return [new CollisionContact(polyA, polyB, normal.scale(-separation.separation), normal, tangent, points, localPoints, separation)];\n        }\n        return [];\n    },\n    FindContactSeparation(contact, localPoint) {\n        var _a, _b, _c, _d;\n        const shapeA = contact.colliderA;\n        const txA = (_b = (_a = contact.bodyA) === null || _a === void 0 ? void 0 : _a.transform) !== null && _b !== void 0 ? _b : new TransformComponent();\n        const shapeB = contact.colliderB;\n        const txB = (_d = (_c = contact.bodyB) === null || _c === void 0 ? void 0 : _c.transform) !== null && _d !== void 0 ? _d : new TransformComponent();\n        // both are circles\n        if (shapeA instanceof CircleCollider && shapeB instanceof CircleCollider) {\n            const combinedRadius = shapeA.radius + shapeB.radius;\n            const distance = txA.pos.distance(txB.pos);\n            const separation = combinedRadius - distance;\n            return -separation;\n        }\n        // both are polygons\n        if (shapeA instanceof PolygonCollider && shapeB instanceof PolygonCollider) {\n            if (contact.info.localSide) {\n                let side;\n                let worldPoint;\n                if (contact.info.collider === shapeA) {\n                    side = new LineSegment(txA.apply(contact.info.localSide.begin), txA.apply(contact.info.localSide.end));\n                    worldPoint = txB.apply(localPoint);\n                }\n                else {\n                    side = new LineSegment(txB.apply(contact.info.localSide.begin), txB.apply(contact.info.localSide.end));\n                    worldPoint = txA.apply(localPoint);\n                }\n                return side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // polygon v circle\n        if ((shapeA instanceof PolygonCollider && shapeB instanceof CircleCollider) ||\n            (shapeB instanceof PolygonCollider && shapeA instanceof CircleCollider)) {\n            const worldPoint = txA.apply(localPoint);\n            if (contact.info.side) {\n                return contact.info.side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // polygon v edge\n        if ((shapeA instanceof EdgeCollider && shapeB instanceof PolygonCollider) ||\n            (shapeB instanceof EdgeCollider && shapeA instanceof PolygonCollider)) {\n            let worldPoint;\n            if (contact.info.collider === shapeA) {\n                worldPoint = txB.apply(localPoint);\n            }\n            else {\n                worldPoint = txA.apply(localPoint);\n            }\n            if (contact.info.side) {\n                return contact.info.side.distanceToPoint(worldPoint, true);\n            }\n        }\n        // circle v edge\n        if ((shapeA instanceof CircleCollider && shapeB instanceof EdgeCollider) ||\n            (shapeB instanceof CircleCollider && shapeA instanceof EdgeCollider)) {\n            // Local point is always on the edge which is always shapeB\n            const worldPoint = txB.apply(localPoint);\n            let circlePoint;\n            if (shapeA instanceof CircleCollider) {\n                circlePoint = shapeA.getFurthestPoint(contact.normal);\n            }\n            const dist = worldPoint.distance(circlePoint);\n            if (contact.info.side) {\n                return dist > 0 ? -dist : 0;\n            }\n        }\n        return 0;\n    }\n};\n\n;// ./Collision/Colliders/EdgeCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Edge is a single line collider to create collisions with a single line.\n */\nclass EdgeCollider extends Collider {\n    constructor(options) {\n        var _a;\n        super();\n        this._globalMatrix = AffineMatrix.identity();\n        this.begin = options.begin || Vector.Zero;\n        this.end = options.end || Vector.Zero;\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\n    }\n    /**\n     * Returns a clone of this Edge, not associated with any collider\n     */\n    clone() {\n        return new EdgeCollider({\n            begin: this.begin.clone(),\n            end: this.end.clone()\n        });\n    }\n    get worldPos() {\n        var _a;\n        const tx = this._transform;\n        return (_a = tx === null || tx === void 0 ? void 0 : tx.globalPos.add(this.offset)) !== null && _a !== void 0 ? _a : this.offset;\n    }\n    /**\n     * Get the center of the collision area in world coordinates\n     */\n    get center() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const pos = begin.average(end);\n        return pos;\n    }\n    _getTransformedBegin() {\n        return this._globalMatrix.multiply(this.begin);\n    }\n    _getTransformedEnd() {\n        return this._globalMatrix.multiply(this.end);\n    }\n    /**\n     * Returns the slope of the line in the form of a vector\n     */\n    getSlope() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const distance = begin.distance(end);\n        return end.sub(begin).scale(1 / distance);\n    }\n    /**\n     * Returns the length of the line segment in pixels\n     */\n    getLength() {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        const distance = begin.distance(end);\n        return distance;\n    }\n    /**\n     * Tests if a point is contained in this collision area\n     */\n    contains() {\n        return false;\n    }\n    /**\n     * @inheritdoc\n     */\n    rayCast(ray, max = Infinity) {\n        var _a;\n        const numerator = this._getTransformedBegin().sub(ray.pos);\n        // Test is line and ray are parallel and non intersecting\n        if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\n            return null;\n        }\n        // Lines are parallel\n        const divisor = ray.dir.cross(this.getSlope());\n        if (divisor === 0) {\n            return null;\n        }\n        const t = numerator.cross(this.getSlope()) / divisor;\n        if (t >= 0 && t <= max) {\n            const u = numerator.cross(ray.dir) / divisor / this.getLength();\n            if (u >= 0 && u <= 1) {\n                return {\n                    distance: t,\n                    normal: this.asLine().normal(),\n                    collider: this,\n                    body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                    point: ray.getPoint(t)\n                };\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns the closes line between this and another collider, from this -> collider\n     * @param shape\n     */\n    getClosestLineBetween(shape) {\n        if (shape instanceof CircleCollider) {\n            return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\n        }\n        else if (shape instanceof EdgeCollider) {\n            return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    collide(shape) {\n        if (shape instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCircleEdge(shape, this);\n        }\n        else if (shape instanceof PolygonCollider) {\n            return CollisionJumpTable.CollidePolygonEdge(shape, this);\n        }\n        else if (shape instanceof EdgeCollider) {\n            return CollisionJumpTable.CollideEdgeEdge();\n        }\n        else {\n            throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        const transformedBegin = this._getTransformedBegin();\n        const transformedEnd = this._getTransformedEnd();\n        if (direction.dot(transformedBegin) > 0) {\n            return transformedBegin;\n        }\n        else {\n            return transformedEnd;\n        }\n    }\n    _boundsFromBeginEnd(begin, end, padding = 10) {\n        // A perfectly vertical or horizontal edge would have a bounds 0 width or height\n        // this causes problems for the collision system so we give them some padding\n        return new BoundingBox(Math.min(begin.x, end.x) - padding, Math.min(begin.y, end.y) - padding, Math.max(begin.x, end.x) + padding, Math.max(begin.y, end.y) + padding);\n    }\n    /**\n     * Get the axis aligned bounding box for the edge collider in world space\n     */\n    get bounds() {\n        const transformedBegin = this._getTransformedBegin();\n        const transformedEnd = this._getTransformedEnd();\n        return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\n    }\n    /**\n     * Get the axis aligned bounding box for the edge collider in local space\n     */\n    get localBounds() {\n        return this._boundsFromBeginEnd(this.begin, this.end);\n    }\n    /**\n     * Returns this edge represented as a line in world coordinates\n     */\n    asLine() {\n        return new LineSegment(this._getTransformedBegin(), this._getTransformedEnd());\n    }\n    /**\n     * Return this edge as a line in local line coordinates (relative to the position)\n     */\n    asLocalLine() {\n        return new LineSegment(this.begin, this.end);\n    }\n    /**\n     * Get the axis associated with the edge\n     */\n    get axes() {\n        const e = this._getTransformedEnd().sub(this._getTransformedBegin());\n        const edgeNormal = e.normal();\n        const axes = [];\n        axes.push(edgeNormal);\n        axes.push(edgeNormal.negate());\n        axes.push(edgeNormal.normal());\n        axes.push(edgeNormal.normal().negate());\n        return axes;\n    }\n    /**\n     * Get the moment of inertia for an edge\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        const length = this.end.sub(this.begin).distance() / 2;\n        return mass * length * length;\n    }\n    /**\n     * @inheritdoc\n     */\n    update(transform) {\n        var _a;\n        this._transform = transform;\n        const globalMat = (_a = transform.matrix) !== null && _a !== void 0 ? _a : this._globalMatrix;\n        globalMat.clone(this._globalMatrix);\n        this._globalMatrix.translate(this.offset.x, this.offset.y);\n    }\n    /**\n     * Project the edge along a specified axis\n     */\n    project(axis) {\n        const scalars = [];\n        const points = [this._getTransformedBegin(), this._getTransformedEnd()];\n        const len = points.length;\n        for (let i = 0; i < len; i++) {\n            scalars.push(points[i].dot(axis));\n        }\n        return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n    }\n    debug(ex, color) {\n        const begin = this._getTransformedBegin();\n        const end = this._getTransformedEnd();\n        ex.drawLine(begin, end, color, 2);\n        ex.drawCircle(begin, 2, color);\n        ex.drawCircle(end, 2, color);\n    }\n}\n\n;// ./Graphics/Debug.ts\n\nclass Debug {\n    static registerGraphicsContext(ctx) {\n        Debug._ctx = ctx;\n    }\n    static draw(debugDrawCall) {\n        this._drawCalls.push(debugDrawCall);\n    }\n    static drawPoint(point, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawPoint(point, options);\n        });\n    }\n    static drawLine(start, end, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawLine(start, end, options);\n        });\n    }\n    static drawLines(points, options) {\n        if (points.length > 1) {\n            Debug.draw((ctx) => {\n                for (let i = 0; i < points.length - 1; i++) {\n                    ctx.debug.drawLine(points[i], points[i + 1], options);\n                }\n            });\n        }\n    }\n    static drawText(text, pos) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawText(text, pos);\n        });\n    }\n    static drawPolygon(points, options) {\n        if (points.length > 1) {\n            Debug.draw((ctx) => {\n                const firstPoint = points[0];\n                const polygon = [...points, firstPoint];\n                for (let i = 0; i < polygon.length - 1; i++) {\n                    ctx.debug.drawLine(polygon[i], polygon[i + 1], options);\n                }\n            });\n        }\n    }\n    static drawCircle(center, radius, options) {\n        const { color, strokeColor, width } = {\n            color: Color.Black,\n            strokeColor: undefined,\n            width: undefined,\n            ...options\n        };\n        Debug.draw((ctx) => {\n            ctx.drawCircle(center, radius, color, strokeColor, width);\n        });\n    }\n    static drawBounds(boundingBox, options) {\n        Debug.draw((ctx) => {\n            ctx.debug.drawRect(boundingBox.left, boundingBox.top, boundingBox.width, boundingBox.height, options);\n        });\n    }\n    static drawRay(ray, options) {\n        const { distance, color } = {\n            color: Color.Blue,\n            distance: 10,\n            ...options\n        };\n        Debug.draw((ctx) => {\n            const start = ray.pos;\n            const end = ray.pos.add(ray.dir.scale(distance));\n            ctx.debug.drawLine(start, end, { color });\n        });\n    }\n    static flush(ctx) {\n        ctx.save();\n        ctx.z = Debug.z;\n        for (const drawCall of Debug._drawCalls) {\n            drawCall(ctx);\n        }\n        ctx.restore();\n        Debug.clear();\n    }\n    static clear() {\n        Debug._drawCalls.length = 0;\n    }\n}\nDebug._drawCalls = [];\nDebug.z = Infinity;\n\n;// ./Collision/Colliders/PolygonCollider.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Polygon collider for detecting collisions\n */\nclass PolygonCollider extends Collider {\n    flagDirty() {\n        this._localBoundsDirty = true;\n        this._localSidesDirty = true;\n        this._transformedPointsDirty = true;\n        this._sidesDirty = true;\n    }\n    get normals() {\n        return this._normals;\n    }\n    /**\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\n     * Excalibur stores these in counter-clockwise order\n     */\n    set points(points) {\n        if (points.length < 3) {\n            throw new Error('PolygonCollider cannot be created with less that 3 points');\n        }\n        this._points = points;\n        this._checkAndUpdateWinding(this._points);\n        this._calculateNormals();\n        this.flagDirty();\n    }\n    _calculateNormals() {\n        const normals = [];\n        for (let i = 0; i < this._points.length; i++) {\n            normals.push(this._points[(i + 1) % this._points.length].sub(this._points[i]).normal());\n        }\n        this._normals = normals;\n    }\n    /**\n     * Points in the polygon in order around the perimeter in local coordinates. These are relative from the body transform position.\n     * Excalibur stores these in counter-clockwise order\n     */\n    get points() {\n        return this._points;\n    }\n    get transform() {\n        return this._transform;\n    }\n    constructor(options) {\n        var _a;\n        super();\n        this._logger = Logger.getInstance();\n        this._transform = new transform_Transform();\n        this._transformedPoints = [];\n        this._sides = [];\n        this._localSides = [];\n        this._transformedPointsDirty = true;\n        this._sidesDirty = true;\n        this._localSidesDirty = true;\n        this._localBoundsDirty = true;\n        this.offset = (_a = options.offset) !== null && _a !== void 0 ? _a : Vector.Zero;\n        this._transform.pos.x += this.offset.x;\n        this._transform.pos.y += this.offset.y;\n        this.points = options.points;\n        if (!this.isConvex()) {\n            if (!options.suppressConvexWarning) {\n                this._logger.warn('Excalibur only supports convex polygon colliders and will not behave properly.' +\n                    'Call PolygonCollider.triangulate() to build a new collider composed of smaller convex triangles');\n            }\n        }\n        // calculate initial transformation\n        this._calculateTransformation();\n    }\n    _checkAndUpdateWinding(points) {\n        const counterClockwise = this._isCounterClockwiseWinding(points);\n        if (!counterClockwise) {\n            points.reverse();\n        }\n    }\n    _isCounterClockwiseWinding(points) {\n        // https://stackoverflow.com/a/1165943\n        let sum = 0;\n        for (let i = 0; i < points.length; i++) {\n            sum += (points[(i + 1) % points.length].x - points[i].x) * (points[(i + 1) % points.length].y + points[i].y);\n        }\n        return sum < 0;\n    }\n    /**\n     * Returns if the polygon collider is convex, Excalibur does not handle non-convex collision shapes.\n     * Call {@apilink Polygon.triangulate} to generate a {@apilink CompositeCollider} from this non-convex shape\n     */\n    isConvex() {\n        // From SO: https://stackoverflow.com/a/45372025\n        if (this.points.length < 3) {\n            return false;\n        }\n        let oldPoint = this.points[this.points.length - 2];\n        let newPoint = this.points[this.points.length - 1];\n        let direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\n        let oldDirection = 0;\n        let orientation = 0;\n        let angleSum = 0;\n        for (const [i, point] of this.points.entries()) {\n            oldPoint = newPoint;\n            oldDirection = direction;\n            newPoint = point;\n            direction = Math.atan2(newPoint.y - oldPoint.y, newPoint.x - oldPoint.x);\n            if (oldPoint.equals(newPoint)) {\n                return false; // repeat point\n            }\n            let angle = direction - oldDirection;\n            if (angle <= -Math.PI) {\n                angle += Math.PI * 2;\n            }\n            else if (angle > Math.PI) {\n                angle -= Math.PI * 2;\n            }\n            if (i === 0) {\n                if (angle === 0.0) {\n                    return false;\n                }\n                orientation = angle > 0 ? 1 : -1;\n            }\n            else {\n                if (orientation * angle <= 0) {\n                    return false;\n                }\n            }\n            angleSum += angle;\n        }\n        return Math.abs(Math.round(angleSum / (Math.PI * 2))) === 1;\n    }\n    /**\n     * Tessellates the polygon into a triangle fan as a {@apilink CompositeCollider} of triangle polygons\n     */\n    tessellate() {\n        const polygons = [];\n        for (let i = 1; i < this.points.length - 2; i++) {\n            polygons.push([this.points[0], this.points[i + 1], this.points[i + 2]]);\n        }\n        polygons.push([this.points[0], this.points[1], this.points[2]]);\n        return new CompositeCollider(polygons.map((points) => Shape.Polygon(points)));\n    }\n    /**\n     * Triangulate the polygon collider using the \"Ear Clipping\" algorithm.\n     * Returns a new {@apilink CompositeCollider} made up of smaller triangles.\n     */\n    triangulate() {\n        // https://www.youtube.com/watch?v=hTJFcHutls8\n        if (this.points.length < 3) {\n            throw Error('Invalid polygon');\n        }\n        const triangles = [];\n        // algorithm likes clockwise\n        const vertices = [...this.points].reverse();\n        let vertexCount = vertices.length;\n        /**\n         * Returns the previous index based on the current vertex\n         */\n        function getPrevIndex(index) {\n            return index === 0 ? vertexCount - 1 : index - 1;\n        }\n        /**\n         * Retrieves the next index based on the current vertex\n         */\n        function getNextIndex(index) {\n            return index === vertexCount - 1 ? 0 : index + 1;\n        }\n        /**\n         * Whether or not the angle at this vertex index is convex\n         */\n        function isConvex(index) {\n            const prev = getPrevIndex(index);\n            const next = getNextIndex(index);\n            const va = vertices[prev];\n            const vb = vertices[index];\n            const vc = vertices[next];\n            // Check convexity\n            const leftArm = va.sub(vb);\n            const rightArm = vc.sub(vb);\n            // Positive cross product is convex\n            if (leftArm.cross(rightArm) < 0) {\n                return false;\n            }\n            return true;\n        }\n        const convexVertices = vertices.map((_, i) => isConvex(i));\n        /**\n         * Quick test for point in triangle\n         */\n        function isPointInTriangle(point, a, b, c) {\n            const ab = b.sub(a);\n            const bc = c.sub(b);\n            const ca = a.sub(c);\n            const ap = point.sub(a);\n            const bp = point.sub(b);\n            const cp = point.sub(c);\n            const cross1 = ab.cross(ap);\n            const cross2 = bc.cross(bp);\n            const cross3 = ca.cross(cp);\n            if (cross1 > 0 || cross2 > 0 || cross3 > 0) {\n                return false;\n            }\n            return true;\n        }\n        /**\n         * Calculate the area of the triangle\n         */\n        // function triangleArea(a: Vector, b: Vector, c: Vector) {\n        //   return Math.abs(a.x * (b.y - c.y) + b.x * (c.y - a.y) + c.x * (a.y - c.y))/2;\n        // }\n        /**\n         * Find the next suitable ear tip\n         */\n        function findEarTip() {\n            for (let i = 0; i < vertexCount; i++) {\n                if (convexVertices[i]) {\n                    const prev = getPrevIndex(i);\n                    const next = getNextIndex(i);\n                    const va = vertices[prev];\n                    const vb = vertices[i];\n                    const vc = vertices[next];\n                    let isEar = true;\n                    // Check that if any vertices are in the triangle a, b, c\n                    for (let j = 0; j < vertexCount; j++) {\n                        // We can skip these verts because they are the triangle we are testing\n                        if (j === i || j === prev || j === next) {\n                            continue;\n                        }\n                        const point = vertices[j];\n                        if (isPointInTriangle(point, va, vb, vc)) {\n                            isEar = false;\n                            break;\n                        }\n                    }\n                    // Add ear to polygon list and remove from list\n                    if (isEar) {\n                        return i;\n                    }\n                }\n            }\n            // Fall back to any convex vertex\n            for (let i = 0; i < vertexCount; i++) {\n                if (convexVertices[i]) {\n                    return i;\n                }\n            }\n            // bail and return the first one?\n            return 0;\n        }\n        /**\n         * Cut the ear and produce a triangle, update internal state\n         */\n        function cutEarTip(index) {\n            const prev = getPrevIndex(index);\n            const next = getNextIndex(index);\n            const va = vertices[prev];\n            const vb = vertices[index];\n            const vc = vertices[next];\n            // Clockwise winding\n            // if (triangleArea(va, vb, vc) > 0) {\n            triangles.push([va, vb, vc]);\n            // }\n            vertices.splice(index, 1);\n            convexVertices.splice(index, 1);\n            vertexCount--;\n        }\n        // Loop over all the vertices finding ears\n        while (vertexCount > 3) {\n            const earIndex = findEarTip();\n            cutEarTip(earIndex);\n            // reclassify vertices\n            for (let i = 0; i < vertexCount; i++) {\n                convexVertices[i] = isConvex(i);\n            }\n        }\n        // Last triangle after the loop\n        triangles.push([vertices[0], vertices[1], vertices[2]]);\n        // FIXME: there is a colinear triangle that sneaks in here sometimes\n        return new CompositeCollider(triangles.map((points) => Shape.Polygon(points, Vector.Zero, true)));\n    }\n    /**\n     * Returns a clone of this ConvexPolygon, not associated with any collider\n     */\n    clone() {\n        return new PolygonCollider({\n            offset: this.offset.clone(),\n            points: this.points.map((p) => p.clone())\n        });\n    }\n    /**\n     * Returns the world position of the collider, which is the current body transform plus any defined offset\n     */\n    get worldPos() {\n        return this._transform.pos;\n    }\n    /**\n     * Get the center of the collider in world coordinates\n     */\n    get center() {\n        return this.bounds.center;\n    }\n    /**\n     * Calculates the underlying transformation from the body relative space to world space\n     */\n    _calculateTransformation() {\n        const points = this.points;\n        const len = points.length;\n        this._transformedPoints.length = 0; // clear out old transform\n        for (let i = 0; i < len; i++) {\n            this._transformedPoints[i] = this._transform.apply(points[i].clone());\n        }\n    }\n    /**\n     * Gets the points that make up the polygon in world space, from actor relative space (if specified)\n     */\n    getTransformedPoints() {\n        if (this._transformedPointsDirty) {\n            this._calculateTransformation();\n            this._transformedPointsDirty = false;\n        }\n        return this._transformedPoints;\n    }\n    /**\n     * Gets the sides of the polygon in world space\n     */\n    getSides() {\n        if (this._sidesDirty) {\n            const lines = [];\n            const points = this.getTransformedPoints();\n            const len = points.length;\n            for (let i = 0; i < len; i++) {\n                // This winding is important\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\n            }\n            this._sides = lines;\n            this._sidesDirty = false;\n        }\n        return this._sides;\n    }\n    /**\n     * Returns the local coordinate space sides\n     */\n    getLocalSides() {\n        if (this._localSidesDirty) {\n            const lines = [];\n            const points = this.points;\n            const len = points.length;\n            for (let i = 0; i < len; i++) {\n                // This winding is important\n                lines.push(new LineSegment(points[i], points[(i + 1) % len]));\n            }\n            this._localSides = lines;\n            this._localSidesDirty = false;\n        }\n        return this._localSides;\n    }\n    /**\n     * Given a direction vector find the world space side that is most in that direction\n     * @param direction\n     */\n    findSide(direction) {\n        const sides = this.getSides();\n        let bestSide = sides[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let side = 0; side < sides.length; side++) {\n            const currentSide = sides[side];\n            const sideNormal = currentSide.normal();\n            const mostDirection = sideNormal.dot(direction);\n            if (mostDirection > maxDistance) {\n                bestSide = currentSide;\n                maxDistance = mostDirection;\n            }\n        }\n        return bestSide;\n    }\n    /**\n     * Given a direction vector find the local space side that is most in that direction\n     * @param direction\n     */\n    findLocalSide(direction) {\n        const sides = this.getLocalSides();\n        let bestSide = sides[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let side = 0; side < sides.length; side++) {\n            const currentSide = sides[side];\n            const sideNormal = currentSide.normal();\n            const mostDirection = sideNormal.dot(direction);\n            if (mostDirection > maxDistance) {\n                bestSide = currentSide;\n                maxDistance = mostDirection;\n            }\n        }\n        return bestSide;\n    }\n    /**\n     * Get the axis associated with the convex polygon\n     */\n    get axes() {\n        const axes = [];\n        const sides = this.getSides();\n        for (let i = 0; i < sides.length; i++) {\n            axes.push(sides[i].normal());\n        }\n        return axes;\n    }\n    /**\n     * Updates the transform for the collision geometry\n     *\n     * Collision geometry (points/bounds) will not change until this is called.\n     * @param transform\n     */\n    update(transform) {\n        if (transform) {\n            // This change means an update must be performed in order for geometry to update\n            transform.cloneWithParent(this._transform);\n            this._transformedPointsDirty = true;\n            this._sidesDirty = true;\n            if (this.offset.x !== 0 || this.offset.y !== 0) {\n                this._transform.pos.x += this.offset.x;\n                this._transform.pos.y += this.offset.y;\n            }\n            if (this._transform.isMirrored()) {\n                // negative transforms really mess with things in collision local space\n                // flatten out the negatives by applying to geometry\n                this.points = this.points.map((p) => vec(p.x * sign(this._transform.scale.x), p.y * sign(this._transform.scale.y)));\n                this._transform.scale.x = Math.abs(this._transform.scale.x);\n                this._transform.scale.y = Math.abs(this._transform.scale.y);\n            }\n        }\n    }\n    /**\n     * Tests if a point is contained in this collider in world space\n     */\n    contains(point) {\n        // Always cast to the right, as long as we cast in a consistent fixed direction we\n        // will be fine\n        const localPoint = this._transform.applyInverse(point);\n        const testRay = new Ray(localPoint, new Vector(1, 0));\n        let intersectCount = 0;\n        const sides = this.getLocalSides();\n        for (let sideIndex = 0; sideIndex < sides.length; sideIndex++) {\n            const side = sides[sideIndex];\n            if (testRay.intersect(side) >= 0) {\n                intersectCount++;\n            }\n        }\n        if (intersectCount % 2 === 0) {\n            return false;\n        }\n        return true;\n    }\n    getClosestLineBetween(collider) {\n        if (collider instanceof CircleCollider) {\n            return ClosestLineJumpTable.PolygonCircleClosestLine(this, collider);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return ClosestLineJumpTable.PolygonPolygonClosestLine(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return ClosestLineJumpTable.PolygonEdgeClosestLine(this, collider);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Returns a collision contact if the 2 colliders collide, otherwise collide will\n     * return null.\n     * @param collider\n     */\n    collide(collider) {\n        if (collider instanceof CircleCollider) {\n            return CollisionJumpTable.CollideCirclePolygon(collider, this);\n        }\n        else if (collider instanceof PolygonCollider) {\n            return CollisionJumpTable.CollidePolygonPolygon(this, collider);\n        }\n        else if (collider instanceof EdgeCollider) {\n            return CollisionJumpTable.CollidePolygonEdge(this, collider);\n        }\n        else {\n            throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof collider}`);\n        }\n    }\n    /**\n     * Find the point on the collider furthest in the direction specified\n     */\n    getFurthestPoint(direction) {\n        const pts = this.getTransformedPoints();\n        let furthestPoint = null;\n        let maxDistance = -Number.MAX_VALUE;\n        for (let i = 0; i < pts.length; i++) {\n            const distance = direction.dot(pts[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                furthestPoint = pts[i];\n            }\n        }\n        return furthestPoint;\n    }\n    /**\n     * Find the local point on the collider furthest in the direction specified\n     * @param direction\n     */\n    getFurthestLocalPoint(direction) {\n        const pts = this.points;\n        let furthestPoint = pts[0];\n        let maxDistance = -Number.MAX_VALUE;\n        for (let i = 0; i < pts.length; i++) {\n            const distance = direction.dot(pts[i]);\n            if (distance > maxDistance) {\n                maxDistance = distance;\n                furthestPoint = pts[i];\n            }\n        }\n        return furthestPoint;\n    }\n    /**\n     * Finds the closes face to the point using perpendicular distance\n     * @param point point to test against polygon\n     */\n    getClosestFace(point) {\n        const sides = this.getSides();\n        let min = Number.POSITIVE_INFINITY;\n        let faceIndex = -1;\n        let distance = -1;\n        for (let i = 0; i < sides.length; i++) {\n            const dist = sides[i].distanceToPoint(point);\n            if (dist < min) {\n                min = dist;\n                faceIndex = i;\n                distance = dist;\n            }\n        }\n        if (faceIndex !== -1) {\n            return {\n                distance: sides[faceIndex].normal().scale(distance),\n                face: sides[faceIndex]\n            };\n        }\n        return null;\n    }\n    /**\n     * Get the axis aligned bounding box for the polygon collider in world coordinates\n     */\n    get bounds() {\n        return this.localBounds.transform(this._transform.matrix);\n    }\n    /**\n     * Get the axis aligned bounding box for the polygon collider in local coordinates\n     */\n    get localBounds() {\n        if (this._localBoundsDirty) {\n            this._localBounds = BoundingBox.fromPoints(this.points);\n            this._localBoundsDirty = false;\n        }\n        return this._localBounds;\n    }\n    /**\n     * Get the moment of inertia for an arbitrary polygon\n     * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n     */\n    getInertia(mass) {\n        if (this._cachedMass === mass && this._cachedInertia) {\n            return this._cachedInertia;\n        }\n        let numerator = 0;\n        let denominator = 0;\n        const points = this.points;\n        for (let i = 0; i < points.length; i++) {\n            const iplusone = (i + 1) % points.length;\n            const crossTerm = points[iplusone].cross(points[i]);\n            numerator += crossTerm * (points[i].dot(points[i]) + points[i].dot(points[iplusone]) + points[iplusone].dot(points[iplusone]));\n            denominator += crossTerm;\n        }\n        this._cachedMass = mass;\n        return (this._cachedInertia = (mass / 6) * (numerator / denominator));\n    }\n    /**\n     * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\n     */\n    rayCast(ray, max = Infinity) {\n        var _a;\n        // find the minimum contact time greater than 0\n        // contact times less than 0 are behind the ray and we don't want those\n        const sides = this.getSides();\n        const len = sides.length;\n        let minContactTime = Number.MAX_VALUE;\n        let contactSide;\n        let contactIndex = -1;\n        for (let i = 0; i < len; i++) {\n            const contactTime = ray.intersect(sides[i]);\n            if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\n                minContactTime = contactTime;\n                contactSide = sides[i];\n                contactIndex = i;\n            }\n        }\n        // contact was found\n        if (contactIndex >= 0) {\n            return {\n                collider: this,\n                distance: minContactTime,\n                body: (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent),\n                point: ray.getPoint(minContactTime),\n                normal: contactSide.normal()\n            };\n        }\n        // no contact found\n        return null;\n    }\n    /**\n     * Project the edges of the polygon along a specified axis\n     */\n    project(axis) {\n        const points = this.getTransformedPoints();\n        const len = points.length;\n        let min = Number.MAX_VALUE;\n        let max = -Number.MAX_VALUE;\n        for (let i = 0; i < len; i++) {\n            const scalar = points[i].dot(axis);\n            min = Math.min(min, scalar);\n            max = Math.max(max, scalar);\n        }\n        return new Projection(min, max);\n    }\n    debug(ex, color, options) {\n        const points = this.getTransformedPoints();\n        Debug.drawPolygon(points, { color });\n    }\n}\n\n;// ./Collision/Colliders/Shape.ts\n\n\n\n\n\n\n\n/**\n * Excalibur helper for defining colliders quickly\n */\nclass Shape {\n    /**\n     * Creates a box collider, under the hood defines a {@apilink PolygonCollider} collider\n     * @param width Width of the box\n     * @param height Height of the box\n     * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Box(width, height, anchor = Vector.Half, offset = Vector.Zero) {\n        return new PolygonCollider({\n            points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\n            offset: offset\n        });\n    }\n    /**\n     * Creates a new {@apilink PolygonCollider | `arbitrary polygon`} collider\n     *\n     * PolygonColliders are useful for creating convex polygon shapes\n     * @param points Points specified in counter clockwise\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Polygon(points, offset = Vector.Zero, suppressConvexWarning = false) {\n        return new PolygonCollider({\n            points: points,\n            offset: offset,\n            suppressConvexWarning\n        });\n    }\n    /**\n     * Creates a new {@apilink CircleCollider | `circle`} collider\n     *\n     * Circle colliders are useful for balls, or to make collisions more forgiving on sharp edges\n     * @param radius Radius of the circle collider\n     * @param offset Optional offset relative to the collider in local coordinates\n     */\n    static Circle(radius, offset = Vector.Zero) {\n        return new CircleCollider({\n            radius: radius,\n            offset: offset\n        });\n    }\n    /**\n     * Creates a new {@apilink EdgeCollider | `edge`} collider\n     *\n     * Edge colliders are useful for  floors, walls, and other barriers\n     * @param begin Beginning of the edge in local coordinates to the collider\n     * @param end Ending of the edge in local coordinates to the collider\n     */\n    static Edge(begin, end) {\n        return new EdgeCollider({\n            begin: begin,\n            end: end\n        });\n    }\n    /**\n     * Creates a new capsule shaped {@apilink CompositeCollider} using 2 circles and a box\n     *\n     * Capsule colliders are useful for platformers with incline or jagged floors to have a smooth\n     * player experience.\n     * @param width\n     * @param height\n     * @param offset Optional offset\n     */\n    static Capsule(width, height, offset = Vector.Zero) {\n        const logger = Logger.getInstance();\n        if (width === height) {\n            logger.warn('A capsule collider with equal width and height is a circle, consider using a ex.Shape.Circle or ex.CircleCollider');\n        }\n        const vertical = height >= width;\n        if (vertical) {\n            // height > width, if equal maybe use a circle\n            const capsule = new CompositeCollider([\n                Shape.Circle(width / 2, vec(0, -height / 2 + width / 2).add(offset)),\n                Shape.Box(width, height - width, Vector.Half, offset),\n                Shape.Circle(width / 2, vec(0, height / 2 - width / 2).add(offset))\n            ]);\n            return capsule;\n        }\n        else {\n            // width > height, if equal maybe use a circle\n            const capsule = new CompositeCollider([\n                Shape.Circle(height / 2, vec(-width / 2 + height / 2, 0).add(offset)),\n                Shape.Box(width - height, height, Vector.Half, offset),\n                Shape.Circle(height / 2, vec(width / 2 - height / 2, 0).add(offset))\n            ]);\n            return capsule;\n        }\n    }\n}\n\n;// ./Collision/ColliderComponent.ts\n\n\n\n\n\n\n\n\n\n\nclass ColliderComponent extends Component {\n    constructor(collider) {\n        super();\n        this.events = new EventEmitter();\n        /**\n         * Observable that notifies when a collider is added to the body\n         */\n        this.$colliderAdded = new Observable();\n        /**\n         * Observable that notifies when a collider is removed from the body\n         */\n        this.$colliderRemoved = new Observable();\n        this._collidersToRemove = [];\n        this.set(collider);\n    }\n    /**\n     * Get the current collider geometry\n     */\n    get() {\n        return this._collider;\n    }\n    /**\n     * Set the collider geometry\n     * @param collider\n     * @returns the collider you set\n     */\n    set(collider) {\n        this.clear();\n        if (collider) {\n            this._collider = collider;\n            this._collider.owner = this.owner;\n            collider.events.pipe(this.events);\n            this.$colliderAdded.notifyAll(collider);\n            this.update();\n        }\n        return collider;\n    }\n    /**\n     * Remove collider geometry from collider component\n     */\n    clear() {\n        if (this._collider) {\n            this._collidersToRemove.push(this._collider);\n            this._collider = null;\n        }\n    }\n    processColliderRemoval() {\n        for (const collider of this._collidersToRemove) {\n            collider.events.unpipe(this.events);\n            this.$colliderRemoved.notifyAll(collider);\n            collider.owner = null;\n        }\n    }\n    clone() {\n        const clone = new ColliderComponent(this._collider.clone());\n        return clone;\n    }\n    /**\n     * Return world space bounds\n     */\n    get bounds() {\n        var _a, _b;\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.bounds) !== null && _b !== void 0 ? _b : new BoundingBox();\n    }\n    /**\n     * Return local space bounds\n     */\n    get localBounds() {\n        var _a, _b;\n        return (_b = (_a = this._collider) === null || _a === void 0 ? void 0 : _a.localBounds) !== null && _b !== void 0 ? _b : new BoundingBox();\n    }\n    /**\n     * Update the collider's transformed geometry\n     */\n    update() {\n        var _a;\n        const tx = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        if (this._collider) {\n            this._collider.owner = this.owner;\n            if (tx) {\n                this._collider.update(tx.get());\n            }\n        }\n    }\n    /**\n     * Collide component with another\n     * @param other\n     */\n    collide(other) {\n        let colliderA = this._collider;\n        let colliderB = other._collider;\n        if (!colliderA || !colliderB) {\n            return [];\n        }\n        // If we have a composite left hand side :(\n        // Might bite us, but to avoid updating all the handlers make composite always left side\n        let flipped = false;\n        if (colliderB instanceof CompositeCollider) {\n            colliderA = colliderB;\n            colliderB = this._collider;\n            flipped = true;\n        }\n        if (this._collider) {\n            const contacts = colliderA.collide(colliderB);\n            if (contacts) {\n                if (flipped) {\n                    contacts.forEach((contact) => {\n                        contact.mtv = contact.mtv.negate();\n                        contact.normal = contact.normal.negate();\n                        contact.tangent = contact.normal.perpendicular();\n                        contact.colliderA = this._collider;\n                        contact.colliderB = other._collider;\n                    });\n                }\n                return contacts;\n            }\n            return [];\n        }\n        return [];\n    }\n    onAdd(entity) {\n        if (this._collider) {\n            this.update();\n        }\n        // Wire up the collider events to the owning entity\n        this.events.on('precollision', (evt) => {\n            const precollision = evt;\n            entity.events.emit('precollision', new PreCollisionEvent(precollision.self, precollision.other, precollision.side, precollision.intersection, precollision.contact));\n            if (entity instanceof Actor) {\n                entity.onPreCollisionResolve(precollision.self, precollision.other, precollision.side, precollision.contact);\n            }\n        });\n        this.events.on('postcollision', (evt) => {\n            const postcollision = evt;\n            entity.events.emit('postcollision', new PostCollisionEvent(postcollision.self, postcollision.other, postcollision.side, postcollision.intersection, postcollision.contact));\n            if (entity instanceof Actor) {\n                entity.onPostCollisionResolve(postcollision.self, postcollision.other, postcollision.side, postcollision.contact);\n            }\n        });\n        this.events.on('collisionstart', (evt) => {\n            const start = evt;\n            entity.events.emit('collisionstart', new CollisionStartEvent(start.self, start.other, start.side, start.contact));\n            if (entity instanceof Actor) {\n                entity.onCollisionStart(start.self, start.other, start.side, start.contact);\n            }\n        });\n        this.events.on('collisionend', (evt) => {\n            const end = evt;\n            entity.events.emit('collisionend', new CollisionEndEvent(end.self, end.other, end.side, end.lastContact));\n            if (entity instanceof Actor) {\n                entity.onCollisionEnd(end.self, end.other, end.side, end.lastContact);\n            }\n        });\n    }\n    onRemove() {\n        this.events.clear();\n        this.$colliderRemoved.notifyAll(this._collider);\n    }\n    /**\n     * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\n     *\n     * If no width/height are specified the body will attempt to use the associated actor's width/height.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useBoxCollider(width, height, anchor = Vector.Half, center = Vector.Zero) {\n        const collider = Shape.Box(width, height, anchor, center);\n        return this.set(collider);\n    }\n    /**\n     * Sets up a {@apilink PolygonCollider | `polygon`} collision geometry based on a list of of points relative\n     *  to the anchor of the associated actor\n     * of this physics body.\n     *\n     * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    usePolygonCollider(points, center = Vector.Zero) {\n        const poly = Shape.Polygon(points, center);\n        return this.set(poly);\n    }\n    /**\n     * Sets up a {@apilink Circle | `circle collision geometry`} as the only collider with a specified radius in pixels.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useCircleCollider(radius, center = Vector.Zero) {\n        const collider = Shape.Circle(radius, center);\n        return this.set(collider);\n    }\n    /**\n     * Sets up an {@apilink Edge | `edge collision geometry`} with a start point and an end point relative to the anchor of the associated actor\n     * of this physics body.\n     *\n     * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n     */\n    useEdgeCollider(begin, end) {\n        const collider = Shape.Edge(begin, end);\n        return this.set(collider);\n    }\n    /**\n     * Setups up a {@apilink CompositeCollider} which can define any arbitrary set of excalibur colliders\n     * @param colliders\n     */\n    useCompositeCollider(colliders) {\n        return this.set(new CompositeCollider(colliders));\n    }\n}\n\n;// ./Collision/BodyComponent.ts\n\n\n\n\n\n\n\n\n\n\n\n\nvar DegreeOfFreedom;\n(function (DegreeOfFreedom) {\n    DegreeOfFreedom[\"Rotation\"] = \"rotation\";\n    DegreeOfFreedom[\"X\"] = \"x\";\n    DegreeOfFreedom[\"Y\"] = \"y\";\n})(DegreeOfFreedom || (DegreeOfFreedom = {}));\n/**\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity for the purpose of\n * of physics simulation.\n */\nclass BodyComponent extends Component {\n    constructor(options) {\n        var _a, _b, _c;\n        super();\n        this.dependencies = [TransformComponent, MotionComponent];\n        this.id = createId('body', BodyComponent._ID++);\n        this.events = new EventEmitter();\n        this.oldTransform = new transform_Transform();\n        /**\n         * Indicates whether the old transform has been captured at least once for interpolation\n         * @internal\n         */\n        this.__oldTransformCaptured = false;\n        /**\n         * Enable or disabled the fixed update interpolation, by default interpolation is on.\n         */\n        this.enableFixedUpdateInterpolate = true;\n        /**\n         * Collision type for the rigidbody physics simulation, by default {@apilink CollisionType.PreventCollision}\n         */\n        this.collisionType = CollisionType.PreventCollision;\n        /**\n         * The collision group for the body's colliders, by default body colliders collide with everything\n         */\n        this.group = CollisionGroup.All;\n        this._sleeping = false;\n        /**\n         * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\n         * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\n         */\n        this.bounciness = 0.2;\n        /**\n         * The coefficient of friction on this actor.\n         *\n         * The {@apilink SolverStrategy.Arcade} does not support this property.\n         *\n         */\n        this.friction = 0.99;\n        /**\n         * Should use global gravity {@apilink Physics.gravity} in it's physics simulation, default is true\n         */\n        this.useGravity = true;\n        /**\n         * Degrees of freedom to limit\n         *\n         * Note: this only limits responses in the realistic solver, if velocity/angularVelocity is set the actor will still respond\n         */\n        this.limitDegreeOfFreedom = [];\n        this._oldGlobalPos = Vector.Zero;\n        /**\n         * The velocity of the actor last frame (vx, vy) in pixels/second\n         */\n        this.oldVel = new Vector(0, 0);\n        /**\n         * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n         */\n        this.oldAcc = Vector.Zero;\n        this._impulseScratch = vec(0, 0);\n        this._distanceFromCenterScratch = vec(0, 0);\n        if (options) {\n            this.collisionType = (_a = options.type) !== null && _a !== void 0 ? _a : this.collisionType;\n            this.group = (_b = options.group) !== null && _b !== void 0 ? _b : this.group;\n            this.useGravity = (_c = options.useGravity) !== null && _c !== void 0 ? _c : this.useGravity;\n            this._bodyConfig = {\n                ...getDefaultPhysicsConfig().bodies,\n                ...options.config\n            };\n        }\n        else {\n            this._bodyConfig = {\n                ...getDefaultPhysicsConfig().bodies\n            };\n        }\n        this.updatePhysicsConfig(this._bodyConfig);\n        this._mass = BodyComponent._DEFAULT_CONFIG.defaultMass;\n    }\n    get matrix() {\n        return this.transform.get().matrix;\n    }\n    /**\n     * Called by excalibur to update physics config defaults if they change\n     * @param config\n     */\n    updatePhysicsConfig(config) {\n        this._bodyConfig = {\n            ...getDefaultPhysicsConfig().bodies,\n            ...config\n        };\n        this.canSleep = this._bodyConfig.canSleepByDefault;\n        this.sleepMotion = this._bodyConfig.sleepEpsilon * 5;\n        this.wakeThreshold = this._bodyConfig.wakeThreshold;\n    }\n    /**\n     * Called by excalibur to update defaults\n     * @param config\n     */\n    static updateDefaultPhysicsConfig(config) {\n        BodyComponent._DEFAULT_CONFIG = config;\n    }\n    get mass() {\n        return this._mass;\n    }\n    set mass(newMass) {\n        this._mass = newMass;\n        this._cachedInertia = undefined;\n        this._cachedInverseInertia = undefined;\n    }\n    /**\n     * The inverse mass (1/mass) of the body. If {@apilink CollisionType.Fixed} this is 0, meaning \"infinite\" mass\n     */\n    get inverseMass() {\n        return this.collisionType === CollisionType.Fixed ? 0 : 1 / this.mass;\n    }\n    /**\n     * Whether this body is sleeping or not\n     * @deprecated use isSleeping\n     */\n    get sleeping() {\n        return this.isSleeping;\n    }\n    /**\n     * Whether this body is sleeping or not\n     */\n    get isSleeping() {\n        return this._sleeping;\n    }\n    /**\n     * Set the sleep state of the body\n     * @param sleeping\n     * @deprecated use isSleeping\n     */\n    setSleeping(sleeping) {\n        this.isSleeping = sleeping;\n    }\n    set isSleeping(sleeping) {\n        this._sleeping = sleeping;\n        if (!sleeping) {\n            // Give it a kick to keep it from falling asleep immediately\n            this.sleepMotion = this._bodyConfig.sleepEpsilon * 5;\n        }\n        else {\n            this.vel = Vector.Zero;\n            this.acc = Vector.Zero;\n            this.angularVelocity = 0;\n            this.sleepMotion = 0;\n        }\n    }\n    /**\n     * Update body's {@apilink BodyComponent.sleepMotion} for the purpose of sleeping\n     */\n    updateMotion() {\n        if (this._sleeping) {\n            this.isSleeping = true;\n        }\n        const currentMotion = this.vel.magnitude * this.vel.magnitude + Math.abs(this.angularVelocity * this.angularVelocity);\n        const bias = this._bodyConfig.sleepBias;\n        this.sleepMotion = bias * this.sleepMotion + (1 - bias) * currentMotion;\n        this.sleepMotion = clamp(this.sleepMotion, 0, 10 * this._bodyConfig.sleepEpsilon);\n        if (this.canSleep && this.sleepMotion < this._bodyConfig.sleepEpsilon) {\n            this.isSleeping = true;\n        }\n    }\n    /**\n     * Get the moment of inertia from the {@apilink ColliderComponent}\n     */\n    get inertia() {\n        if (this._cachedInertia) {\n            return this._cachedInertia;\n        }\n        // Inertia is a property of the geometry, so this is a little goofy but seems to be okay?\n        const collider = this.owner.get(ColliderComponent);\n        if (collider) {\n            collider.$colliderAdded.subscribe(() => {\n                this._cachedInertia = null;\n            });\n            collider.$colliderRemoved.subscribe(() => {\n                this._cachedInertia = null;\n            });\n            const maybeCollider = collider.get();\n            if (maybeCollider) {\n                return (this._cachedInertia = maybeCollider.getInertia(this.mass));\n            }\n        }\n        return 0;\n    }\n    /**\n     * Get the inverse moment of inertial from the {@apilink ColliderComponent}. If {@apilink CollisionType.Fixed} this is 0, meaning \"infinite\" mass\n     */\n    get inverseInertia() {\n        if (this._cachedInverseInertia) {\n            return this._cachedInverseInertia;\n        }\n        return (this._cachedInverseInertia = this.collisionType === CollisionType.Fixed ? 0 : 1 / this.inertia);\n    }\n    /**\n     * Returns if the owner is active\n     * @deprecated use isActive\n     */\n    get active() {\n        var _a;\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.isActive);\n    }\n    /**\n     * Returns if the owner is active\n     */\n    get isActive() {\n        var _a;\n        return !!((_a = this.owner) === null || _a === void 0 ? void 0 : _a.isActive);\n    }\n    /**\n     * @deprecated Use globalPos\n     */\n    get center() {\n        return this.globalPos;\n    }\n    onAdd(owner) {\n        var _a, _b;\n        this.transform = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(TransformComponent);\n        this.motion = (_b = this.owner) === null || _b === void 0 ? void 0 : _b.get(MotionComponent);\n    }\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(val) {\n        this.transform.pos = val;\n    }\n    /**\n     * The (x, y) position of the actor this will be in the middle of the actor if the\n     * {@apilink Actor.anchor} is set to (0.5, 0.5) which is default.\n     * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\n     */\n    get globalPos() {\n        return this.transform.globalPos;\n    }\n    set globalPos(val) {\n        this.transform.globalPos = val;\n    }\n    /**\n     * The position of the actor last frame (x, y) in pixels\n     */\n    get oldPos() {\n        return this.oldTransform.pos;\n    }\n    /**\n     * The global position of the actor last frame (x, y) in pixels\n     */\n    get oldGlobalPos() {\n        return this._oldGlobalPos;\n    }\n    /**\n     * The current velocity vector (vx, vy) of the actor in pixels/second\n     */\n    get vel() {\n        return this.motion.vel;\n    }\n    set vel(val) {\n        this.motion.vel = val;\n    }\n    /**\n     * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\n     * be useful to simulate a gravitational effect.\n     */\n    get acc() {\n        return this.motion.acc;\n    }\n    set acc(val) {\n        this.motion.acc = val;\n    }\n    /**\n     * The current torque applied to the actor\n     */\n    get torque() {\n        return this.motion.torque;\n    }\n    set torque(val) {\n        this.motion.torque = val;\n    }\n    /**\n     * Gets/sets the rotation of the body from the last frame.\n     */\n    get oldRotation() {\n        return this.oldTransform.rotation;\n    }\n    /**\n     * The rotation of the body in radians\n     */\n    get rotation() {\n        return this.transform.globalRotation;\n    }\n    set rotation(val) {\n        this.transform.globalRotation = val;\n    }\n    /**\n     * The scale vector of the actor\n     */\n    get scale() {\n        return this.transform.globalScale;\n    }\n    set scale(val) {\n        this.transform.globalScale = val;\n    }\n    /**\n     * The scale of the actor last frame\n     */\n    get oldScale() {\n        return this.oldTransform.scale;\n    }\n    /**\n     * The scale rate of change of the actor in scale/second\n     */\n    get scaleFactor() {\n        return this.motion.scaleFactor;\n    }\n    set scaleFactor(scaleFactor) {\n        this.motion.scaleFactor = scaleFactor;\n    }\n    /**\n     * Get the angular velocity in radians/second\n     */\n    get angularVelocity() {\n        return this.motion.angularVelocity;\n    }\n    /**\n     * Set the angular velocity in radians/second\n     */\n    set angularVelocity(value) {\n        this.motion.angularVelocity = value;\n    }\n    /**\n     * Apply a specific impulse to the body\n     * @param point\n     * @param impulse\n     */\n    applyImpulse(point, impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        const finalImpulse = impulse.scale(this.inverseMass, this._impulseScratch);\n        if (this.limitDegreeOfFreedom.indexOf(DegreeOfFreedom.X) > -1) {\n            finalImpulse.x = 0;\n        }\n        if (this.limitDegreeOfFreedom.indexOf(DegreeOfFreedom.Y) > -1) {\n            finalImpulse.y = 0;\n        }\n        this.vel.addEqual(finalImpulse);\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n            const distanceFromCenter = point.sub(this.globalPos, this._distanceFromCenterScratch);\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\n        }\n    }\n    /**\n     * Apply only linear impulse to the body\n     * @param impulse\n     */\n    applyLinearImpulse(impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        const finalImpulse = impulse.scale(this.inverseMass);\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n            finalImpulse.x = 0;\n        }\n        if (this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n            finalImpulse.y = 0;\n        }\n        this.vel = this.vel.add(finalImpulse);\n    }\n    /**\n     * Apply only angular impulse to the body\n     * @param point\n     * @param impulse\n     */\n    applyAngularImpulse(point, impulse) {\n        if (this.collisionType !== CollisionType.Active) {\n            return; // only active objects participate in the simulation\n        }\n        if (!this.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n            const distanceFromCenter = point.sub(this.globalPos);\n            this.angularVelocity += this.inverseInertia * distanceFromCenter.cross(impulse);\n        }\n    }\n    /**\n     * Sets the old versions of pos, vel, acc, and scale.\n     */\n    captureOldTransform() {\n        // Capture old values before integration step updates them\n        this.__oldTransformCaptured = true;\n        const tx = this.transform.get();\n        tx.clone(this.oldTransform);\n        this.oldTransform.parent = tx.parent; // also grab parent\n        this.oldVel.setTo(this.vel.x, this.vel.y);\n        this.oldAcc.setTo(this.acc.x, this.acc.y);\n        this.oldGlobalPos.setTo(this.globalPos.x, this.globalPos.y);\n    }\n    clone() {\n        const component = super.clone();\n        return component;\n    }\n}\nBodyComponent._ID = 0;\nBodyComponent._DEFAULT_CONFIG = {\n    ...getDefaultPhysicsConfig().bodies\n};\n\n;// ./Graphics/Rectangle.ts\n\n/**\n * A Rectangle {@apilink Graphic} for drawing rectangles to the {@apilink ExcaliburGraphicsContext}\n */\nclass Rectangle extends Raster {\n    constructor(options) {\n        super(options);\n        this.width = options.width;\n        this.height = options.height;\n        this.rasterize();\n    }\n    clone() {\n        return new Rectangle({\n            width: this.width,\n            height: this.height,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.color) {\n            ctx.fillRect(0, 0, this.width, this.height);\n        }\n        if (this.strokeColor) {\n            ctx.strokeRect(0, 0, this.width, this.height);\n        }\n    }\n}\n\n;// ./Graphics/Circle.ts\n\n\n/**\n * A circle {@apilink Graphic} for drawing circles to the {@apilink ExcaliburGraphicsContext}\n *\n * Circles default to {@apilink ImageFiltering.Blended}\n */\nclass Circle extends Raster {\n    get radius() {\n        return this._radius;\n    }\n    set radius(value) {\n        this._radius = value;\n        this.width = this._radius * 2;\n        this.height = this._radius * 2;\n        this.flagDirty();\n    }\n    constructor(options) {\n        var _a, _b, _c;\n        super(options);\n        this._radius = 0;\n        const lineWidth = (_a = options.lineWidth) !== null && _a !== void 0 ? _a : (options.strokeColor ? 1 : 0); // default lineWidth in canvas is 1px\n        this.padding = (_b = options.padding) !== null && _b !== void 0 ? _b : 2 + lineWidth / 2; // default 2 padding for circles looks nice\n        this.radius = options.radius;\n        this.filtering = (_c = options.filtering) !== null && _c !== void 0 ? _c : ImageFiltering.Blended;\n        this.rasterize();\n    }\n    clone() {\n        return new Circle({\n            radius: this.radius,\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.radius > 0) {\n            ctx.beginPath();\n            ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\n            if (this.color) {\n                ctx.fill();\n            }\n            if (this.strokeColor) {\n                ctx.stroke();\n            }\n        }\n    }\n}\n\n;// ./Input/PointerComponent.ts\n\n/**\n * Add this component to optionally configure how the pointer\n * system detects pointer events.\n *\n * By default the collider shape is used and graphics bounds is not.\n *\n * If both collider shape and graphics bounds are enabled it will fire events if either or\n * are intersecting the pointer.\n */\nclass PointerComponent extends Component {\n    constructor(options) {\n        var _a, _b;\n        super();\n        /**\n         * Use any existing Collider component geometry for pointer events. This is useful if you want\n         * user pointer events only to trigger on the same collision geometry used in the collider component\n         * for collision resolution. Default is `true`.\n         */\n        this.useColliderShape = true;\n        /**\n         * Use any existing Graphics component bounds for pointers. This is useful if you want the axis aligned\n         * bounds around the graphic to trigger pointer events. Default is `true`.\n         */\n        this.useGraphicsBounds = true;\n        this.useColliderShape = (_a = options === null || options === void 0 ? void 0 : options.useColliderShape) !== null && _a !== void 0 ? _a : this.useColliderShape;\n        this.useGraphicsBounds = (_b = options === null || options === void 0 ? void 0 : options.useGraphicsBounds) !== null && _b !== void 0 ? _b : this.useGraphicsBounds;\n        this.localBounds = options === null || options === void 0 ? void 0 : options.localBounds;\n    }\n}\n\n;// ./Util/EasingFunctions.ts\n\n/**\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\n * Given a time, the function will return a value from positive startValue to positive endValue.\n *\n * ```js\n * function Linear (t) {\n *    return t * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInQuad (t) {\n *    return t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutQuad (t) {\n *    return t * (2 - t);\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutQuad (t) {\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInCubic (t) {\n *    return t * t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutCubic (t) {\n *    return (--t) * t * t + 1;\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutCubic (t) {\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n * }\n * ```\n */\nclass EasingFunctions {\n    static CreateReversibleEasingFunction(easing) {\n        return (time, start, end, duration) => {\n            if (end < start) {\n                return start - (easing(time, end, start, duration) - end);\n            }\n            else {\n                return easing(time, start, end, duration);\n            }\n        };\n    }\n    static CreateVectorEasingFunction(easing) {\n        return (time, start, end, duration) => {\n            return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\n        };\n    }\n}\nEasingFunctions.Linear = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    return (endValue * currentTime) / duration + startValue;\n});\nEasingFunctions.EaseInQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return endValue * currentTime * currentTime + startValue;\n});\nEasingFunctions.EaseOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return -endValue * currentTime * (currentTime - 2) + startValue;\n});\nEasingFunctions.EaseInOutQuad = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration / 2;\n    if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime + startValue;\n    }\n    currentTime--;\n    return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\n});\nEasingFunctions.EaseInCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    return endValue * currentTime * currentTime * currentTime + startValue;\n});\nEasingFunctions.EaseOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration;\n    currentTime--;\n    return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\n});\nEasingFunctions.EaseInOutCubic = EasingFunctions.CreateReversibleEasingFunction((currentTime, startValue, endValue, duration) => {\n    endValue = endValue - startValue;\n    currentTime /= duration / 2;\n    if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\n    }\n    currentTime -= 2;\n    return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\n});\n\n;// ./Actions/ActionQueue.ts\n\n/**\n * Action Queues represent an ordered sequence of actions\n *\n * Action queues are part of the {@apilink ActionContext | `Action API`} and\n * store the list of actions to be executed for an {@apilink Actor}.\n *\n * Actors implement {@apilink Actor.actions} which can be manipulated by\n * advanced users to adjust the actions currently being executed in the\n * queue.\n */\nclass ActionQueue {\n    constructor(entity) {\n        this._actions = [];\n        this._currentAction = null;\n        this._completedActions = [];\n        this._entity = entity;\n    }\n    /**\n     * Add an action to the sequence\n     * @param action\n     */\n    add(action) {\n        this._actions.push(action);\n    }\n    /**\n     * Remove an action by reference from the sequence\n     * @param action\n     */\n    remove(action) {\n        const index = this._actions.indexOf(action);\n        this._actions.splice(index, 1);\n    }\n    /**\n     * Removes all actions from this sequence\n     */\n    clearActions() {\n        this._actions.length = 0;\n        this._completedActions.length = 0;\n        if (this._currentAction) {\n            this._currentAction.stop();\n        }\n    }\n    /**\n     *\n     * @returns The total list of actions in this sequence complete or not\n     */\n    getActions() {\n        return this._actions.concat(this._completedActions);\n    }\n    getIncompleteActions() {\n        return this._actions;\n    }\n    getCurrentAction() {\n        return this._currentAction;\n    }\n    /**\n     *\n     * @returns `true` if there are more actions to process in the sequence\n     */\n    hasNext() {\n        return this._actions.length > 0;\n    }\n    /**\n     * @returns `true` if the current sequence of actions is done\n     */\n    isComplete() {\n        return this._actions.length === 0;\n    }\n    /**\n     * Resets the sequence of actions, this is used to restart a sequence from the beginning\n     */\n    reset() {\n        this._actions = this.getActions();\n        const len = this._actions.length;\n        for (let i = 0; i < len; i++) {\n            this._actions[i].reset();\n        }\n        this._completedActions = [];\n    }\n    /**\n     * Update the queue which updates actions and handles completing actions\n     * @param elapsed\n     */\n    update(elapsed) {\n        if (this._actions.length > 0) {\n            if (this._currentAction !== this._actions[0]) {\n                this._currentAction = this._actions[0];\n                this._entity.emit('actionstart', new ActionStartEvent(this._currentAction, this._entity));\n            }\n            this._currentAction.update(elapsed);\n            if (this._currentAction.isComplete(this._entity)) {\n                this._entity.emit('actioncomplete', new ActionCompleteEvent(this._currentAction, this._entity));\n                const complete = this._actions.shift();\n                if (complete) {\n                    this._completedActions.push(complete);\n                }\n            }\n        }\n    }\n}\n\n;// ./Actions/Action.ts\nlet _ACTION_ID = 0;\n/**\n *\n */\nfunction nextActionId() {\n    return _ACTION_ID++;\n}\n\n;// ./Actions/Action/Repeat.ts\n\n\nclass Repeat {\n    constructor(entity, repeatBuilder, repeat) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._repeatBuilder = repeatBuilder;\n        this._repeatContext = new ActionContext(entity);\n        this._actionQueue = this._repeatContext.getQueue();\n        this._repeat = repeat;\n        this._originalRepeat = repeat;\n        this._repeatBuilder(this._repeatContext);\n        this._repeat--; // current execution is the first repeat\n    }\n    update(elapsed) {\n        if (this._actionQueue.isComplete()) {\n            this._actionQueue.clearActions();\n            this._repeatBuilder(this._repeatContext);\n            this._repeat--;\n        }\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped || (this._repeat <= 0 && this._actionQueue.isComplete());\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._repeat = this._originalRepeat;\n    }\n}\n\n;// ./Actions/Action/RepeatForever.ts\n\n\n/**\n * RepeatForever Action implementation, it is recommended you use the fluent action\n * context API.\n *\n *\n */\nclass RepeatForever {\n    constructor(entity, repeatBuilder) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._repeatBuilder = repeatBuilder;\n        this._repeatContext = new ActionContext(entity);\n        this._actionQueue = this._repeatContext.getQueue();\n        this._repeatBuilder(this._repeatContext);\n    }\n    update(elapsed) {\n        if (this._stopped) {\n            return;\n        }\n        if (this._actionQueue.isComplete()) {\n            this._actionQueue.clearActions();\n            this._repeatBuilder(this._repeatContext);\n        }\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped;\n    }\n    stop() {\n        this._stopped = true;\n        this._actionQueue.clearActions();\n    }\n    reset() {\n        return;\n    }\n}\n\n;// ./Math/lerp.ts\n\n\n/**\n * Linear interpolation between `a` and `b`, at `time = 0` the value will be `a` at `time = 1` the value will be `b`\n * @param a\n * @param b\n * @param time\n */\nfunction lerp(a, b, time) {\n    return (1 - time) * a + b * time;\n}\n/**\n * Linear interpolation between angles in radians\n * @param startAngle\n * @param endAngle\n * @param rotationType\n * @param time\n */\nfunction lerpAngle(startAngle, endAngle, rotationType, time) {\n    const shortestPathIsPositive = (startAngle - endAngle + TwoPI) % TwoPI >= Math.PI;\n    const distance1 = Math.abs(endAngle - startAngle);\n    const distance2 = TwoPI - distance1;\n    let shortDistance = 0;\n    let longDistance = 0;\n    if (distance1 > distance2) {\n        shortDistance = distance2;\n        longDistance = distance1;\n    }\n    else {\n        shortDistance = distance1;\n        longDistance = distance2;\n    }\n    let distance = 0;\n    let direction = 1;\n    switch (rotationType) {\n        case RotationType.ShortestPath:\n            distance = shortDistance;\n            direction = shortestPathIsPositive ? 1 : -1;\n            break;\n        case RotationType.LongestPath:\n            distance = longDistance;\n            direction = shortestPathIsPositive ? -1 : 1;\n            break;\n        case RotationType.Clockwise:\n            direction = 1;\n            distance = shortestPathIsPositive ? shortDistance : longDistance;\n            break;\n        case RotationType.CounterClockwise:\n            direction = -1;\n            distance = shortestPathIsPositive ? longDistance : shortDistance;\n            break;\n    }\n    return startAngle + direction * (distance * time);\n}\n/**\n * Linear interpolation between `a` and `b`, at `time = 0` the value will be `a` at `time = 1` the value will be `b`\n * @param a\n * @param b\n * @param time\n */\nfunction lerpVector(a, b, time) {\n    return a.scale(1 - time).add(b.scale(time));\n}\n/**\n * Inverse of a linear interpolation, given a `value` in between `a` and `b` return how close to `a` or `b` the `value` is.\n *\n * Example: `a=1`, `b=5`, `value=4` will return `.75`\n * @param a\n * @param b\n * @param value\n */\nfunction inverseLerp(a, b, value) {\n    return (value - a) / (b - a);\n}\n/**\n * Inverse of a linear interpolation, given a `value` in between `a` and `b` return how close to `a` or `b` the `value` is.\n *\n * **Warning** assumes that the `value` vector is co-linear with vector `a` and `b`\n *\n * Example: `a=1`, `b=5`, `value=4` will return `.75`\n * @param a\n * @param b\n * @param value\n */\nfunction inverseLerpVector(a, b, value) {\n    const numerator = value.sub(a);\n    const denominator = b.sub(a);\n    const x = numerator.x / denominator.x;\n    const y = numerator.y / denominator.y;\n    return Math.min(x, y);\n}\n/**\n * Remaps a value from a source domain to a destination\n * @param minSource\n * @param maxSource\n * @param minDestination\n * @param maxDestination\n * @param value\n */\nfunction remap(minSource, maxSource, minDestination, maxDestination, value) {\n    const time = inverseLerp(minSource, maxSource, value);\n    return lerp(minDestination, maxDestination, time);\n}\n/**\n * Remaps a value from a source domain to a destination\n *\n * **Warning** assumes that the `value` vector is co-linear with vector `minSource` and `maxSource`\n * @param minSource\n * @param maxSource\n * @param minDestination\n * @param maxDestination\n * @param value\n */\nfunction remapVector(minSource, maxSource, minDestination, maxDestination, value) {\n    const time = inverseLerpVector(minSource, maxSource, value);\n    return lerpVector(minDestination, maxDestination, time);\n}\n\n;// ./Actions/Action/MoveBy.ts\n\n\n\n\n\n\n\n/**\n *\n */\nfunction isMoveByOptions(x) {\n    return x.offset instanceof Vector && typeof x.duration === 'number';\n}\nclass MoveByWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._easing = EasingFunctions.Linear;\n        this._offset = options.offset;\n        this._easing = (_a = options.easing) !== null && _a !== void 0 ? _a : this._easing;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only MoveBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._start = this._tx.pos.clone();\n            this._end = this._start.add(this._offset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const currentPos = this._tx.pos;\n        const newPosX = this._easing(t, this._start.x, this._end.x, 1);\n        const newPosY = this._easing(t, this._start.y, this._end.y, 1);\n        const velX = (newPosX - currentPos.x) / (elapsed / 1000);\n        const velY = (newPosY - currentPos.y) / (elapsed / 1000);\n        this._motion.vel.x = velX;\n        this._motion.vel.y = velY;\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass MoveBy {\n    constructor(entity, offsetX, offsetY, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._entity = entity;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._speed = speed;\n        this._offset = new Vector(offsetX, offsetY);\n        if (speed <= 0) {\n            Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\n            throw new Error('Speed must be greater than 0 pixels per second');\n        }\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\n            this._end = this._start.add(this._offset);\n            this._distance = this._offset.magnitude;\n            this._dir = this._end.sub(this._start).normalize();\n        }\n        if (this.isComplete(this._entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n        else {\n            this._motion.vel = this._dir.scale(this._speed);\n        }\n    }\n    isComplete(entity) {\n        const tx = entity.get(TransformComponent);\n        return this._stopped || tx.pos.distance(this._start) >= this._distance;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/MoveTo.ts\n\n\n\n\n\n\n/**\n *\n */\nfunction isMoveToOptions(x) {\n    return x.pos instanceof Vector && typeof x.duration === 'number';\n}\nclass MoveToWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._easing = EasingFunctions.Linear;\n        this._end = options.pos;\n        this._easing = (_a = options.easing) !== null && _a !== void 0 ? _a : this._easing;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only moveTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._start = this._tx.pos.clone();\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const currentPos = this._tx.pos;\n        const newPosX = this._easing(t, this._start.x, this._end.x, 1);\n        const newPosY = this._easing(t, this._start.y, this._end.y, 1);\n        const velX = (newPosX - currentPos.x) / (elapsed / 1000);\n        const velY = (newPosY - currentPos.y) / (elapsed / 1000);\n        this._motion.vel.x = velX;\n        this._motion.vel.y = velY;\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass MoveTo {\n    constructor(entity, destX, destY, speed) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._end = new Vector(destX, destY);\n        this._speed = speed;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = new Vector(this._tx.pos.x, this._tx.pos.y);\n            this._distance = this._start.distance(this._end);\n            this._dir = this._end.sub(this._start).normalize();\n        }\n        const m = this._dir.scale(this._speed);\n        this._motion.vel = vec(m.x, m.y);\n        if (this.isComplete(this.entity)) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete(entity) {\n        const tx = entity.get(TransformComponent);\n        return this._stopped || new Vector(tx.pos.x, tx.pos.y).distance(this._start) >= this._distance;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/RotateTo.ts\n\n\n\n\n\n\n/**\n *\n */\nfunction isRotateToOptions(x) {\n    return typeof x.angle === 'number' && typeof x.duration === 'number';\n}\nclass RotateToWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endAngle = 0;\n        this._startAngle = 0;\n        this._endAngle = options.angle;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only RotateTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._rotationType = (_a = options.rotationType) !== null && _a !== void 0 ? _a : RotationType.ShortestPath;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startAngle = this._tx.rotation;\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newAngle = lerpAngle(this._startAngle, this._endAngle, this._rotationType, t);\n        const currentAngle = this._tx.rotation;\n        const rx = (newAngle - currentAngle) / (elapsed / 1000);\n        this._motion.angularVelocity = rx;\n        if (this.isComplete(this.entity)) {\n            this._tx.rotation = this._endAngle;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass RotateTo {\n    constructor(entity, angle, speed, rotationType) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._end = angle;\n        this._speed = speed;\n        this._rotationType = rotationType || RotationType.ShortestPath;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = this._tx.rotation;\n            this._currentNonCannonAngle = this._tx.rotation;\n            const distance1 = Math.abs(this._end - this._start);\n            const distance2 = TwoPI - distance1;\n            if (distance1 > distance2) {\n                this._shortDistance = distance2;\n                this._longDistance = distance1;\n            }\n            else {\n                this._shortDistance = distance1;\n                this._longDistance = distance2;\n            }\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\n            switch (this._rotationType) {\n                case RotationType.ShortestPath:\n                    this._distance = this._shortDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = 1;\n                    }\n                    else {\n                        this._direction = -1;\n                    }\n                    break;\n                case RotationType.LongestPath:\n                    this._distance = this._longDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = -1;\n                    }\n                    else {\n                        this._direction = 1;\n                    }\n                    break;\n                case RotationType.Clockwise:\n                    this._direction = 1;\n                    if (this._shortestPathIsPositive) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n                case RotationType.CounterClockwise:\n                    this._direction = -1;\n                    if (!this._shortestPathIsPositive) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n            }\n        }\n        this._motion.angularVelocity = this._direction * this._speed;\n        this._currentNonCannonAngle += this._direction * this._speed * (elapsed / 1000);\n        if (this.isComplete()) {\n            this._tx.rotation = this._end;\n            this._motion.angularVelocity = 0;\n            this._stopped = true;\n        }\n    }\n    isComplete() {\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/RotateBy.ts\n\n\n\n\n\n/**\n *\n */\nfunction isRotateByOptions(x) {\n    return typeof x.angleRadiansOffset === 'number' && typeof x.duration === 'number';\n}\nclass RotateByWithOptions {\n    constructor(entity, options) {\n        var _a;\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._offset = 0;\n        this._startAngle = 0;\n        this._endAngle = 0;\n        this._offset = options.angleRadiansOffset;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only RotateBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._rotationType = (_a = options.rotationType) !== null && _a !== void 0 ? _a : RotationType.ShortestPath;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startAngle = this._tx.rotation;\n            this._endAngle = canonicalizeAngle(this._startAngle + this._offset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newAngle = lerpAngle(this._startAngle, this._endAngle, this._rotationType, t);\n        const currentAngle = this._tx.rotation;\n        const rx = (newAngle - currentAngle) / (elapsed / 1000);\n        this._motion.angularVelocity = rx;\n        if (this.isComplete()) {\n            this._tx.rotation = this._endAngle;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass RotateBy {\n    constructor(entity, angleRadiansOffset, speed, rotationType) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._speed = speed;\n        this._offset = angleRadiansOffset;\n        this._rotationType = rotationType || RotationType.ShortestPath;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._start = this._tx.rotation;\n            this._currentNonCannonAngle = this._tx.rotation;\n            this._end = this._start + this._offset;\n            const distance1 = Math.abs(this._end - this._start);\n            const distance2 = TwoPI - distance1;\n            if (distance1 > distance2) {\n                this._shortDistance = distance2;\n                this._longDistance = distance1;\n            }\n            else {\n                this._shortDistance = distance1;\n                this._longDistance = distance2;\n            }\n            this._shortestPathIsPositive = (this._start - this._end + TwoPI) % TwoPI >= Math.PI;\n            switch (this._rotationType) {\n                case RotationType.ShortestPath:\n                    this._distance = this._shortDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = 1;\n                    }\n                    else {\n                        this._direction = -1;\n                    }\n                    break;\n                case RotationType.LongestPath:\n                    this._distance = this._longDistance;\n                    if (this._shortestPathIsPositive) {\n                        this._direction = -1;\n                    }\n                    else {\n                        this._direction = 1;\n                    }\n                    break;\n                case RotationType.Clockwise:\n                    this._direction = 1;\n                    if (this._shortDistance >= 0) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n                case RotationType.CounterClockwise:\n                    this._direction = -1;\n                    if (this._shortDistance <= 0) {\n                        this._distance = this._shortDistance;\n                    }\n                    else {\n                        this._distance = this._longDistance;\n                    }\n                    break;\n            }\n        }\n        this._motion.angularVelocity = this._direction * this._speed;\n        this._currentNonCannonAngle += this._direction * this._speed * (elapsed / 1000);\n        if (this.isComplete()) {\n            this._tx.rotation = this._end;\n            this._motion.angularVelocity = 0;\n            this._stopped = true;\n        }\n    }\n    isComplete() {\n        const distanceTraveled = Math.abs(this._currentNonCannonAngle - this._start);\n        return this._stopped || distanceTraveled >= Math.abs(this._distance);\n    }\n    stop() {\n        this._motion.angularVelocity = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._start = undefined;\n        this._currentNonCannonAngle = undefined;\n        this._distance = undefined;\n    }\n}\n\n;// ./Actions/Action/ScaleTo.ts\n\n\n\n\n\n/**\n *\n */\nfunction isScaleToOptions(x) {\n    return typeof x.scale === 'object' && typeof x.duration === 'number';\n}\nclass ScaleToWithOptions {\n    constructor(entity, options) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endScale = vec(1, 1);\n        this._startScale = vec(1, 1);\n        this._endScale = options.scale;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only ScaleTo on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startScale = this._tx.scale;\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newScale = lerpVector(this._startScale, this._endScale, t);\n        const currentScale = this._tx.scale;\n        const sx = newScale.sub(currentScale).scale(1 / (elapsed / 1000));\n        this._motion.scaleFactor = sx;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.scaleFactor = Vector.Zero;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass ScaleTo {\n    constructor(entity, scaleX, scaleY, speedX, speedY) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._endX = scaleX;\n        this._endY = scaleY;\n        this._speedX = speedX;\n        this._speedY = speedY;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._startX = this._tx.scale.x;\n            this._startY = this._tx.scale.y;\n            this._distanceX = Math.abs(this._endX - this._startX);\n            this._distanceY = Math.abs(this._endY - this._startY);\n        }\n        if (!(Math.abs(this._tx.scale.x - this._startX) >= this._distanceX)) {\n            const directionX = this._endY < this._startY ? -1 : 1;\n            this._motion.scaleFactor.x = this._speedX * directionX;\n        }\n        else {\n            this._motion.scaleFactor.x = 0;\n        }\n        if (!(Math.abs(this._tx.scale.y - this._startY) >= this._distanceY)) {\n            const directionY = this._endY < this._startY ? -1 : 1;\n            this._motion.scaleFactor.y = this._speedY * directionY;\n        }\n        else {\n            this._motion.scaleFactor.y = 0;\n        }\n        if (this.isComplete()) {\n            this._tx.scale = vec(this._endX, this._endY);\n            this._motion.scaleFactor.x = 0;\n            this._motion.scaleFactor.y = 0;\n        }\n    }\n    isComplete() {\n        return (this._stopped ||\n            (Math.abs(this._tx.scale.x - this._startX) >= this._distanceX - 0.01 &&\n                Math.abs(this._tx.scale.y - this._startY) >= this._distanceY - 0.01));\n    }\n    stop() {\n        this._motion.scaleFactor.x = 0;\n        this._motion.scaleFactor.y = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/ScaleBy.ts\n\n\n\n\n\n/**\n *\n */\nfunction isScaleByOptions(x) {\n    return typeof x.scaleOffset === 'object' && typeof x.duration === 'number';\n}\nclass ScaleByWithOptions {\n    constructor(entity, options) {\n        this.entity = entity;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._endScale = vec(1, 1);\n        this._scaleOffset = vec(0, 0);\n        this._startScale = vec(1, 1);\n        this._scaleOffset = options.scaleOffset;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only ScaleBy on Entities with TransformComponents.`);\n        }\n        this._durationMs = options.duration;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._startScale = this._tx.scale;\n            this._endScale = this._startScale.add(this._scaleOffset);\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        const newScale = lerpVector(this._startScale, this._endScale, t);\n        const currentScale = this._tx.scale;\n        const sx = newScale.sub(currentScale).scale(1 / (elapsed / 1000));\n        this._motion.scaleFactor = sx;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.angularVelocity = 0;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentMs < 0;\n    }\n    stop() {\n        this._motion.scaleFactor = Vector.Zero;\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n}\nclass ScaleBy {\n    constructor(entity, scaleOffsetX, scaleOffsetY, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._offset = new Vector(scaleOffsetX, scaleOffsetY);\n        this._speedX = this._speedY = speed;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._startScale = this._tx.scale.clone();\n            this._endScale = this._startScale.add(this._offset);\n            this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\n            this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\n            this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\n            this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\n        }\n        this._motion.scaleFactor.x = this._speedX * this._directionX;\n        this._motion.scaleFactor.y = this._speedY * this._directionY;\n        if (this.isComplete()) {\n            this._tx.scale = this._endScale;\n            this._motion.scaleFactor.x = 0;\n            this._motion.scaleFactor.y = 0;\n        }\n    }\n    isComplete() {\n        return (this._stopped ||\n            (Math.abs(this._tx.scale.x - this._startScale.x) >= this._distanceX - 0.01 &&\n                Math.abs(this._tx.scale.y - this._startScale.y) >= this._distanceY - 0.01));\n    }\n    stop() {\n        this._motion.scaleFactor.x = 0;\n        this._motion.scaleFactor.y = 0;\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/CallMethod.ts\n\nclass CallMethod {\n    constructor(method) {\n        this.id = nextActionId();\n        this._hasBeenCalled = false;\n        this._method = method;\n    }\n    update(elapsed) {\n        this._method();\n        this._hasBeenCalled = true;\n    }\n    isComplete() {\n        return this._hasBeenCalled;\n    }\n    reset() {\n        this._hasBeenCalled = false;\n    }\n    stop() {\n        this._hasBeenCalled = true;\n    }\n}\n\n;// ./Actions/Action/EaseTo.ts\n\n\n\n\n/**\n * @deprecated use moveTo({pos: Vector, duration: number, easing: EasingFunction})\n */\nclass EaseTo {\n    constructor(entity, x, y, duration, easingFcn) {\n        this.easingFcn = easingFcn;\n        this.id = nextActionId();\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1 * 1000; // 1 second\n        this._lerpStart = new Vector(0, 0);\n        this._lerpEnd = new Vector(0, 0);\n        this._initialized = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._lerpDuration = duration;\n        this._lerpEnd = new Vector(x, y);\n    }\n    _initialize() {\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._currentLerpTime = 0;\n    }\n    update(elapsed) {\n        if (!this._initialized) {\n            this._initialize();\n            this._initialized = true;\n        }\n        // Need to update lerp time first, otherwise the first update will always be zero\n        this._currentLerpTime += elapsed;\n        let newX = this._tx.pos.x;\n        let newY = this._tx.pos.y;\n        if (this._currentLerpTime < this._lerpDuration) {\n            if (this._lerpEnd.x < this._lerpStart.x) {\n                newX =\n                    this._lerpStart.x -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n            }\n            else {\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n            }\n            if (this._lerpEnd.y < this._lerpStart.y) {\n                newY =\n                    this._lerpStart.y -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n            }\n            else {\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n            }\n            // Given the lerp position figure out the velocity in pixels per second\n            this._motion.vel = vec((newX - this._tx.pos.x) / (elapsed / 1000), (newY - this._tx.pos.y) / (elapsed / 1000));\n        }\n        else {\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\n            this._motion.vel = Vector.Zero;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\n    }\n    reset() {\n        this._initialized = false;\n        this._stopped = false;\n        this._currentLerpTime = 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/Action/EaseBy.ts\n\n\n\n\n/**\n * @deprecated use moveBy({offset: Vector, duration: number, easing: EasingFunction})\n */\nclass EaseBy {\n    constructor(entity, offsetX, offsetY, duration, easingFcn) {\n        this.easingFcn = easingFcn;\n        this.id = nextActionId();\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1 * 1000; // 1 second\n        this._lerpStart = new Vector(0, 0);\n        this._lerpEnd = new Vector(0, 0);\n        this._initialized = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._lerpDuration = duration;\n        this._offset = new Vector(offsetX, offsetY);\n    }\n    _initialize() {\n        this._lerpStart = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._currentLerpTime = 0;\n        this._lerpEnd = this._lerpStart.add(this._offset);\n    }\n    update(elapsed) {\n        if (!this._initialized) {\n            this._initialize();\n            this._initialized = true;\n        }\n        // Need to update lerp time first, otherwise the first update will always be zero\n        this._currentLerpTime += elapsed;\n        let newX = this._tx.pos.x;\n        let newY = this._tx.pos.y;\n        if (this._currentLerpTime < this._lerpDuration) {\n            if (this._lerpEnd.x < this._lerpStart.x) {\n                newX =\n                    this._lerpStart.x -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n            }\n            else {\n                newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n            }\n            if (this._lerpEnd.y < this._lerpStart.y) {\n                newY =\n                    this._lerpStart.y -\n                        (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n            }\n            else {\n                newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n            }\n            // Given the lerp position figure out the velocity in pixels per second\n            this._motion.vel = vec((newX - this._tx.pos.x) / (elapsed / 1000), (newY - this._tx.pos.y) / (elapsed / 1000));\n        }\n        else {\n            this._tx.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\n            this._motion.vel = Vector.Zero;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentLerpTime >= this._lerpDuration;\n    }\n    reset() {\n        this._initialized = false;\n        this._stopped = false;\n        this._currentLerpTime = 0;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/Action/Blink.ts\n\n\nclass Blink {\n    constructor(entity, timeVisible, timeNotVisible, numBlinks = 1) {\n        this.id = nextActionId();\n        this._timeVisible = 0;\n        this._timeNotVisible = 0;\n        this._elapsedTime = 0;\n        this._totalTime = 0;\n        this._stopped = false;\n        this._started = false;\n        this._graphics = entity.get(GraphicsComponent);\n        this._timeVisible = timeVisible;\n        this._timeNotVisible = timeNotVisible;\n        this._duration = (timeVisible + timeNotVisible) * numBlinks;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._elapsedTime = 0;\n            this._totalTime = 0;\n        }\n        if (!this._graphics) {\n            return;\n        }\n        this._elapsedTime += elapsed;\n        this._totalTime += elapsed;\n        if (this._graphics.isVisible && this._elapsedTime >= this._timeVisible) {\n            this._graphics.isVisible = false;\n            this._elapsedTime = 0;\n        }\n        if (!this._graphics.isVisible && this._elapsedTime >= this._timeNotVisible) {\n            this._graphics.isVisible = true;\n            this._elapsedTime = 0;\n        }\n        if (this.isComplete()) {\n            this._graphics.isVisible = true;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._totalTime >= this._duration;\n    }\n    stop() {\n        if (this._graphics) {\n            this._graphics.isVisible = true;\n        }\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._elapsedTime = 0;\n        this._totalTime = 0;\n    }\n}\n\n;// ./Actions/Action/Fade.ts\n\n\n\nclass Fade {\n    constructor(entity, endOpacity, duration) {\n        this.id = nextActionId();\n        this._multiplier = 1;\n        this._started = false;\n        this._stopped = false;\n        this._graphics = entity.get(GraphicsComponent);\n        this._endOpacity = endOpacity;\n        this._remainingTime = this._originalTime = duration;\n    }\n    update(elapsed) {\n        if (!this._graphics) {\n            return;\n        }\n        if (!this._started) {\n            this._started = true;\n            this._remainingTime = this._originalTime;\n            // determine direction when we start\n            if (this._endOpacity < this._graphics.opacity) {\n                this._multiplier = -1;\n            }\n            else {\n                this._multiplier = 1;\n            }\n        }\n        if (this._remainingTime > 0) {\n            this._graphics.opacity += (this._multiplier * (Math.abs(this._graphics.opacity - this._endOpacity) * elapsed)) / this._remainingTime;\n        }\n        this._remainingTime -= elapsed;\n        if (this.isComplete()) {\n            this._graphics.opacity = this._endOpacity;\n        }\n        Logger.getInstance().debug('[Action fade] Actor opacity:', this._graphics.opacity);\n    }\n    isComplete() {\n        return this._stopped || this._remainingTime <= 0;\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._remainingTime = this._originalTime;\n    }\n}\n\n;// ./Actions/Action/Delay.ts\n\nclass Delay {\n    constructor(duration) {\n        this.id = nextActionId();\n        this._elapsedTime = 0;\n        this._started = false;\n        this._stopped = false;\n        this._delay = duration;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n        }\n        this._elapsedTime += elapsed;\n    }\n    isComplete() {\n        return this._stopped || this._elapsedTime >= this._delay;\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._elapsedTime = 0;\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/Die.ts\n\n\nclass Die {\n    constructor(entity) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._entity = entity;\n    }\n    update(elapsed) {\n        this._entity.get(ActionsComponent).clearActions();\n        this._entity.kill();\n        this._stopped = true;\n    }\n    isComplete() {\n        return this._stopped;\n    }\n    stop() {\n        return;\n    }\n    reset() {\n        return;\n    }\n}\n\n;// ./Actions/Action/Follow.ts\n\n\n\n\nclass Follow {\n    constructor(entity, entityToFollow, followDistance) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._tx = entity.get(TransformComponent);\n        this._motion = entity.get(MotionComponent);\n        this._followTx = entityToFollow.get(TransformComponent);\n        this._followMotion = entityToFollow.get(MotionComponent);\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._end = new Vector(this._followTx.pos.x, this._followTx.pos.y);\n        this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\n        this._speed = 0;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._distanceBetween = this._current.distance(this._end);\n            this._dir = this._end.sub(this._current).normalize();\n        }\n        const actorToFollowSpeed = Math.sqrt(Math.pow(this._followMotion.vel.x, 2) + Math.pow(this._followMotion.vel.y, 2));\n        if (actorToFollowSpeed !== 0) {\n            this._speed = actorToFollowSpeed;\n        }\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\n        this._end = vec(this._followTx.pos.x, this._followTx.pos.y);\n        this._distanceBetween = this._current.distance(this._end);\n        this._dir = this._end.sub(this._current).normalize();\n        if (this._distanceBetween >= this._maximumDistance) {\n            const m = this._dir.scale(this._speed);\n            this._motion.vel = vec(m.x, m.y);\n        }\n        else {\n            this._motion.vel = vec(0, 0);\n        }\n        if (this.isComplete()) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    isComplete() {\n        // the actor following should never stop unless specified to do so\n        return this._stopped;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Actions/Action/Meet.ts\n\n\n\n\nclass Meet {\n    constructor(actor, actorToMeet, speed) {\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._speedWasSpecified = false;\n        this._tx = actor.get(TransformComponent);\n        this._motion = actor.get(MotionComponent);\n        this._meetTx = actorToMeet.get(TransformComponent);\n        this._meetMotion = actorToMeet.get(MotionComponent);\n        this._current = new Vector(this._tx.pos.x, this._tx.pos.y);\n        this._end = new Vector(this._meetTx.pos.x, this._meetTx.pos.y);\n        this._speed = speed || 0;\n        if (speed !== undefined) {\n            this._speedWasSpecified = true;\n        }\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._started = true;\n            this._distanceBetween = this._current.distance(this._end);\n            this._dir = this._end.sub(this._current).normalize();\n        }\n        const actorToMeetSpeed = Math.sqrt(Math.pow(this._meetMotion.vel.x, 2) + Math.pow(this._meetMotion.vel.y, 2));\n        if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\n            this._speed = actorToMeetSpeed;\n        }\n        this._current = vec(this._tx.pos.x, this._tx.pos.y);\n        this._end = vec(this._meetTx.pos.x, this._meetTx.pos.y);\n        this._distanceBetween = this._current.distance(this._end);\n        this._dir = this._end.sub(this._current).normalize();\n        const m = this._dir.scale(this._speed);\n        this._motion.vel = vec(m.x, m.y);\n        if (this.isComplete()) {\n            this._tx.pos = vec(this._end.x, this._end.y);\n            this._motion.vel = vec(0, 0);\n        }\n    }\n    isComplete() {\n        return this._stopped || this._distanceBetween <= 1;\n    }\n    stop() {\n        this._motion.vel = vec(0, 0);\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n        this._distanceBetween = Infinity;\n    }\n}\n\n;// ./Actions/Action/Flash.ts\n\n\nclass Flash {\n    constructor(entity, color, duration = 1000) {\n        var _a;\n        this.id = nextActionId();\n        this._stopped = false;\n        this._started = false;\n        this._total = 0;\n        this._currentDuration = 0;\n        this._graphics = entity.get(GraphicsComponent);\n        this._duration = duration;\n        this._entity = entity;\n        this._material = (_a = entity.scene) === null || _a === void 0 ? void 0 : _a.engine.graphicsContext.createMaterial({\n            name: 'flash-material',\n            color,\n            fragmentSource: `#version 300 es\r\n    \r\n        precision mediump float;\r\n        uniform float u_blend;\r\n        uniform sampler2D u_graphic;\r\n        uniform vec4 u_color;\r\n    \r\n        in vec2 v_uv; \r\n        out vec4 color;\r\n    \r\n        void main() { \r\n            vec4 textureColor = texture(u_graphic, v_uv); \r\n            color = mix(textureColor, u_color, u_blend * textureColor.a);\r\n            color.rgb = color.rgb * color.a;\r\n        }`\n        });\n        this._total = duration;\n    }\n    update(elapsed) {\n        var _a;\n        if (!this._started) {\n            this._started = true;\n            this._total = this._duration;\n            this._currentDuration = this._duration;\n            this._entity.graphics.material = this._material;\n        }\n        if (!this._graphics) {\n            return;\n        }\n        this._currentDuration -= elapsed;\n        if (this._graphics) {\n            (_a = this._material) === null || _a === void 0 ? void 0 : _a.update((shader) => {\n                shader.trySetUniformFloat('u_blend', this._currentDuration / this._total);\n            });\n        }\n        if (this.isComplete()) {\n            this._entity.graphics.material = null;\n        }\n    }\n    isComplete() {\n        return this._stopped || this._currentDuration <= 0;\n    }\n    stop() {\n        if (this._graphics) {\n            this._graphics.isVisible = true;\n        }\n        this._stopped = true;\n    }\n    reset() {\n        this._started = false;\n        this._stopped = false;\n    }\n}\n\n;// ./Math/bezier-curve.ts\n\n/**\n * BezierCurve that supports cubic Bezier curves.\n */\nclass BezierCurve {\n    constructor(options) {\n        var _a;\n        // Thanks Freya! https://www.youtube.com/watch?v=aVwxzDHniEw\n        this._distLookup = [];\n        this.quality = 4;\n        if (options.controlPoints.length !== 4) {\n            throw new Error('Only cubic bezier curves are supported');\n        }\n        this._controlPoints = [...options.controlPoints];\n        this.quality = (_a = options.quality) !== null && _a !== void 0 ? _a : this.quality;\n        this._calculateLookup();\n    }\n    get arcLength() {\n        return this._arcLength;\n    }\n    get controlPoints() {\n        return this._controlPoints;\n    }\n    set controlPoints(points) {\n        this._controlPoints = [...points];\n        this._calculateLookup();\n    }\n    setControlPoint(index, point) {\n        this._controlPoints[index] = point;\n        this._calculateLookup();\n    }\n    _calculateLookup() {\n        let totalLength = 0;\n        this._distLookup.length = 0;\n        let prev = this.controlPoints[0];\n        const n = this.controlPoints.length * this.quality;\n        for (let i = 0; i < n; i++) {\n            const t = i / (n - 1);\n            const pt = this.getPoint(t);\n            const diff = prev.distance(pt);\n            totalLength += diff;\n            this._distLookup.push(totalLength);\n            prev = pt;\n        }\n        this._arcLength = totalLength;\n    }\n    _getTimeGivenDistance(distance) {\n        const n = this._distLookup.length;\n        const arcLength = this.arcLength;\n        if (distance >= 0 && distance < arcLength) {\n            for (let i = 0; i < n - 1; i++) {\n                if (this._distLookup[i] <= distance && distance < this._distLookup[i + 1]) {\n                    return remap(this._distLookup[i], this._distLookup[i + 1], i / (n - 1), (i + 1) / (n - 1), distance);\n                }\n            }\n        }\n        return distance / arcLength;\n    }\n    /**\n     * Get the point on the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getPoint(time) {\n        const points = [...this.controlPoints];\n        for (let r = 1; r < points.length; r++) {\n            for (let i = 0; i < points.length - r; i++) {\n                points[i] = lerpVector(points[i], points[i + 1], time);\n            }\n        }\n        return points[0];\n    }\n    /**\n     * Get the tangent of the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getTangent(time) {\n        const timeSquared = time * time;\n        const p0 = this.controlPoints[0];\n        const p1 = this.controlPoints[1];\n        const p2 = this.controlPoints[2];\n        const p3 = this.controlPoints[3];\n        // Derivative of Bernstein polynomial\n        const pPrime = p0\n            .scale(-3 * timeSquared + 6 * time - 3)\n            .add(p1.scale(9 * timeSquared - 12 * time + 3).add(p2.scale(-9 * timeSquared + 6 * time).add(p3.scale(3 * timeSquared))));\n        return pPrime.normalize();\n    }\n    /**\n     * Get the tangent of the Bezier curve where the distance is uniformly distributed over time\n     * @param time\n     */\n    getUniformTangent(time) {\n        const desiredDistance = time * this.arcLength;\n        const uniformTime = this._getTimeGivenDistance(desiredDistance);\n        return this.getTangent(uniformTime);\n    }\n    /**\n     * Get the normal of the Bezier curve at a certain time\n     * @param time Between 0-1\n     */\n    getNormal(time) {\n        return this.getTangent(time).normal();\n    }\n    /**\n     * Get the normal of the Bezier curve where the distance is uniformly distributed over time\n     * @param time\n     */\n    getUniformNormal(time) {\n        return this.getUniformTangent(time).normal();\n    }\n    /**\n     * Points are spaced uniformly across the length of the curve over time\n     * @param time\n     */\n    getUniformPoint(time) {\n        const desiredDistance = time * this.arcLength;\n        const uniformTime = this._getTimeGivenDistance(desiredDistance);\n        return this.getPoint(uniformTime);\n    }\n    clone() {\n        return new BezierCurve({\n            controlPoints: [...this.controlPoints],\n            quality: this.quality\n        });\n    }\n}\n\n;// ./Actions/Action/CurveTo.ts\n\n\n\nclass CurveTo {\n    constructor(entity, options) {\n        var _a;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._mode = 'dynamic';\n        this._entity = entity;\n        this._tx = this._entity.get(TransformComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only curveTo on Entities with TransformComponents.`);\n        }\n        this._curve = new BezierCurve({\n            controlPoints: [vec(0, 0), ...options.controlPoints],\n            quality: options.quality\n        });\n        this._durationMs = options.duration;\n        this._mode = (_a = options.mode) !== null && _a !== void 0 ? _a : this._mode;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._curve.setControlPoint(0, this._tx.globalPos.clone());\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        if (this._mode === 'dynamic') {\n            this._tx.pos = this._curve.getPoint(t);\n        }\n        else {\n            this._tx.pos = this._curve.getUniformPoint(t);\n        }\n        if (this.isComplete(this._entity)) {\n            if (this._mode === 'dynamic') {\n                this._tx.pos = this._curve.getPoint(1);\n            }\n            else {\n                this._tx.pos = this._curve.getUniformPoint(1);\n            }\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n    stop() {\n        this._stopped = true;\n        this._currentMs = 0;\n    }\n}\n\n;// ./Actions/Action/CurveBy.ts\n\n\n\nclass CurveBy {\n    constructor(entity, options) {\n        var _a;\n        this.id = nextActionId();\n        this._started = false;\n        this._stopped = false;\n        this._mode = 'dynamic';\n        this._entity = entity;\n        this._tx = this._entity.get(TransformComponent);\n        if (!this._tx) {\n            throw new Error(`Entity ${entity.name} has no TransformComponent, can only curveTo on Entities with TransformComponents.`);\n        }\n        this._curve = this._curve = new BezierCurve({\n            controlPoints: [vec(0, 0), ...options.controlPoints],\n            quality: options.quality\n        });\n        this._durationMs = options.duration;\n        this._mode = (_a = options.mode) !== null && _a !== void 0 ? _a : this._mode;\n        this._currentMs = this._durationMs;\n    }\n    update(elapsed) {\n        if (!this._started) {\n            this._curve.setControlPoint(0, this._tx.globalPos);\n            this._curve.setControlPoint(1, this._curve.controlPoints[1].add(this._tx.globalPos));\n            this._curve.setControlPoint(2, this._curve.controlPoints[2].add(this._tx.globalPos));\n            this._curve.setControlPoint(3, this._curve.controlPoints[3].add(this._tx.globalPos));\n            this._started = true;\n        }\n        this._currentMs -= elapsed;\n        const t = clamp(remap(0, this._durationMs, 0, 1, this._durationMs - this._currentMs), 0, 1);\n        if (this._mode === 'dynamic') {\n            this._tx.pos = this._curve.getPoint(t);\n        }\n        else {\n            this._tx.pos = this._curve.getUniformPoint(t);\n        }\n        if (this.isComplete(this._entity)) {\n            if (this._mode === 'dynamic') {\n                this._tx.pos = this._curve.getPoint(1);\n            }\n            else {\n                this._tx.pos = this._curve.getUniformPoint(1);\n            }\n        }\n    }\n    isComplete(entity) {\n        return this._stopped || this._currentMs < 0;\n    }\n    reset() {\n        this._currentMs = this._durationMs;\n        this._started = false;\n        this._stopped = false;\n    }\n    stop() {\n        this._stopped = true;\n    }\n}\n\n;// ./Actions/ActionContext.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * The fluent Action API allows you to perform \"actions\" on\n * {@apilink Actor | `actors`} such as following, moving, rotating, and\n * more. You can implement your own actions by implementing\n * the {@apilink Action} interface.\n */\nclass ActionContext {\n    constructor(entity) {\n        this._entity = entity;\n        this._queue = new ActionQueue(entity);\n    }\n    getQueue() {\n        return this._queue;\n    }\n    update(elapsed) {\n        this._queue.update(elapsed);\n    }\n    /**\n     * Clears all queued actions from the Actor\n     */\n    clearActions() {\n        this._queue.clearActions();\n    }\n    runAction(action) {\n        action.reset();\n        this._queue.add(action);\n        return this;\n    }\n    /**\n     * Animates an actor with a specified bezier curve by an offset to the current position, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveBy(options) {\n        this._queue.add(new CurveBy(this._entity, options));\n        return this;\n    }\n    /**\n     * Animates an actor with a specified bezier curve to an absolute world space coordinate, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveTo(options) {\n        this._queue.add(new CurveTo(this._entity, options));\n        return this;\n    }\n    easeTo(...args) {\n        var _a, _b;\n        let x = 0;\n        let y = 0;\n        let duration = 0;\n        let easingFcn = EasingFunctions.Linear;\n        if (args[0] instanceof Vector) {\n            x = args[0].x;\n            y = args[0].y;\n            duration = args[1];\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\n        }\n        else {\n            x = args[0];\n            y = args[1];\n            duration = args[2];\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\n        }\n        this._queue.add(new EaseTo(this._entity, x, y, duration, easingFcn));\n        return this;\n    }\n    easeBy(...args) {\n        var _a, _b;\n        let offsetX = 0;\n        let offsetY = 0;\n        let duration = 0;\n        let easingFcn = EasingFunctions.Linear;\n        if (args[0] instanceof Vector) {\n            offsetX = args[0].x;\n            offsetY = args[0].y;\n            duration = args[1];\n            easingFcn = (_a = args[2]) !== null && _a !== void 0 ? _a : easingFcn;\n        }\n        else {\n            offsetX = args[0];\n            offsetY = args[1];\n            duration = args[2];\n            easingFcn = (_b = args[3]) !== null && _b !== void 0 ? _b : easingFcn;\n        }\n        this._queue.add(new EaseBy(this._entity, offsetX, offsetY, duration, easingFcn));\n        return this;\n    }\n    moveTo(xOrPosOrOptions, yOrSpeed, speedOrUndefined) {\n        let x = 0;\n        let y = 0;\n        let speed = 0;\n        if (xOrPosOrOptions instanceof Vector) {\n            x = xOrPosOrOptions.x;\n            y = xOrPosOrOptions.y;\n            speed = +(yOrSpeed !== null && yOrSpeed !== void 0 ? yOrSpeed : 0);\n            this._queue.add(new MoveTo(this._entity, x, y, speed));\n        }\n        else if (typeof xOrPosOrOptions === 'number' && typeof yOrSpeed === 'number' && typeof speedOrUndefined === 'number') {\n            x = xOrPosOrOptions;\n            y = yOrSpeed;\n            speed = speedOrUndefined;\n            this._queue.add(new MoveTo(this._entity, x, y, speed));\n        }\n        else if (isMoveToOptions(xOrPosOrOptions)) {\n            this._queue.add(new MoveToWithOptions(this._entity, xOrPosOrOptions));\n        }\n        return this;\n    }\n    moveBy(xOffsetOrVectorOrOptions, yOffsetOrSpeed, speedOrUndefined) {\n        let xOffset = 0;\n        let yOffset = 0;\n        let speed = 0;\n        if (xOffsetOrVectorOrOptions instanceof Vector && typeof yOffsetOrSpeed === 'number') {\n            xOffset = xOffsetOrVectorOrOptions.x;\n            yOffset = xOffsetOrVectorOrOptions.y;\n            speed = yOffsetOrSpeed;\n            this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\n        }\n        else if (typeof xOffsetOrVectorOrOptions === 'number' && typeof yOffsetOrSpeed === 'number' && typeof speedOrUndefined === 'number') {\n            xOffset = xOffsetOrVectorOrOptions;\n            yOffset = yOffsetOrSpeed;\n            speed = speedOrUndefined;\n            this._queue.add(new MoveBy(this._entity, xOffset, yOffset, speed));\n        }\n        else if (isMoveByOptions(xOffsetOrVectorOrOptions)) {\n            this._queue.add(new MoveByWithOptions(this._entity, xOffsetOrVectorOrOptions));\n        }\n        return this;\n    }\n    rotateTo(angleRadiansOrOptions, speed, rotationType) {\n        if (typeof angleRadiansOrOptions === 'number' && typeof speed === 'number') {\n            this._queue.add(new RotateTo(this._entity, angleRadiansOrOptions, speed, rotationType));\n        }\n        else if (typeof angleRadiansOrOptions === 'object') {\n            this._queue.add(new RotateToWithOptions(this._entity, angleRadiansOrOptions));\n        }\n        return this;\n    }\n    rotateBy(angleRadiansOffsetOrOptions, speed, rotationType) {\n        if (typeof angleRadiansOffsetOrOptions === 'object') {\n            this._queue.add(new RotateByWithOptions(this._entity, angleRadiansOffsetOrOptions));\n        }\n        else {\n            this._queue.add(new RotateBy(this._entity, angleRadiansOffsetOrOptions, speed, rotationType));\n        }\n        return this;\n    }\n    scaleTo(sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\n        let sizeX = 1;\n        let sizeY = 1;\n        let speedX = 0;\n        let speedY = 0;\n        if (isScaleToOptions(sizeXOrVectorOrOptions)) {\n            this._queue.add(new ScaleToWithOptions(this._entity, sizeXOrVectorOrOptions));\n            return this;\n        }\n        if (sizeXOrVectorOrOptions instanceof Vector && sizeYOrSpeed instanceof Vector) {\n            sizeX = sizeXOrVectorOrOptions.x;\n            sizeY = sizeXOrVectorOrOptions.y;\n            speedX = sizeYOrSpeed.x;\n            speedY = sizeYOrSpeed.y;\n        }\n        if (typeof sizeXOrVectorOrOptions === 'number' && typeof sizeYOrSpeed === 'number') {\n            sizeX = sizeXOrVectorOrOptions;\n            sizeY = sizeYOrSpeed;\n            speedX = speedXOrUndefined;\n            speedY = speedYOrUndefined;\n        }\n        this._queue.add(new ScaleTo(this._entity, sizeX, sizeY, speedX, speedY));\n        return this;\n    }\n    scaleBy(sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed) {\n        if (isScaleByOptions(sizeOffsetXOrVectorOrOptions)) {\n            this._queue.add(new ScaleByWithOptions(this._entity, sizeOffsetXOrVectorOrOptions));\n            return this;\n        }\n        let sizeOffsetX = 1;\n        let sizeOffsetY = 1;\n        if (sizeOffsetXOrVectorOrOptions instanceof Vector) {\n            sizeOffsetX = sizeOffsetXOrVectorOrOptions.x;\n            sizeOffsetY = sizeOffsetXOrVectorOrOptions.y;\n            speed = sizeOffsetYOrSpeed;\n        }\n        if (typeof sizeOffsetXOrVectorOrOptions === 'number' && typeof sizeOffsetYOrSpeed === 'number') {\n            sizeOffsetX = sizeOffsetXOrVectorOrOptions;\n            sizeOffsetY = sizeOffsetYOrSpeed;\n        }\n        this._queue.add(new ScaleBy(this._entity, sizeOffsetX, sizeOffsetY, speed));\n        return this;\n    }\n    /**\n     * This method will cause an actor to blink (become visible and not\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n     * the actor should be visible per blink, and the amount of time not visible.\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n     * @param numBlinks       The number of times to blink\n     */\n    blink(timeVisible, timeNotVisible, numBlinks = 1) {\n        this._queue.add(new Blink(this._entity, timeVisible, timeNotVisible, numBlinks));\n        return this;\n    }\n    /**\n     * This method will cause an actor's opacity to change from its current value\n     * to the provided value by a specified time (in milliseconds). This method is\n     * part of the actor 'Action' fluent API allowing action chaining.\n     * @param opacity  The ending opacity\n     * @param duration     The time it should take to fade the actor (in milliseconds)\n     */\n    fade(opacity, duration) {\n        this._queue.add(new Fade(this._entity, opacity, duration));\n        return this;\n    }\n    /**\n     * This will cause an actor to flash a specific color for a period of time\n     * @param color\n     * @param duration The duration in milliseconds\n     */\n    flash(color, duration = 1000) {\n        this._queue.add(new Flash(this._entity, color, duration));\n        return this;\n    }\n    /**\n     * This method will delay the next action from executing for a certain\n     * amount of time (in milliseconds). This method is part of the actor\n     * 'Action' fluent API allowing action chaining.\n     * @param duration  The amount of time to delay the next action in the queue from executing in milliseconds\n     */\n    delay(duration) {\n        this._queue.add(new Delay(duration));\n        return this;\n    }\n    /**\n     * This method will add an action to the queue that will remove the actor from the\n     * scene once it has completed its previous  Any actions on the\n     * action queue after this action will not be executed.\n     */\n    die() {\n        this._queue.add(new Die(this._entity));\n        return this;\n    }\n    /**\n     * This method allows you to call an arbitrary method as the next action in the\n     * action queue. This is useful if you want to execute code in after a specific\n     * action, i.e An actor arrives at a destination after traversing a path\n     */\n    callMethod(method) {\n        this._queue.add(new CallMethod(method));\n        return this;\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n     * will repeat forever\n     */\n    repeat(repeatBuilder, times) {\n        if (!times) {\n            this.repeatForever(repeatBuilder);\n            return this;\n        }\n        this._queue.add(new Repeat(this._entity, repeatBuilder, times));\n        return this;\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     */\n    repeatForever(repeatBuilder) {\n        this._queue.add(new RepeatForever(this._entity, repeatBuilder));\n        return this;\n    }\n    /**\n     * This method will cause the entity to follow another at a specified distance\n     * @param entity           The entity to follow\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n     */\n    follow(entity, followDistance) {\n        if (followDistance === undefined) {\n            this._queue.add(new Follow(this._entity, entity));\n        }\n        else {\n            this._queue.add(new Follow(this._entity, entity, followDistance));\n        }\n        return this;\n    }\n    /**\n     * This method will cause the entity to move towards another until they\n     * collide \"meet\" at a specified speed.\n     * @param entity  The entity to meet\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n     */\n    meet(entity, speed) {\n        if (speed === undefined) {\n            this._queue.add(new Meet(this._entity, entity));\n        }\n        else {\n            this._queue.add(new Meet(this._entity, entity, speed));\n        }\n        return this;\n    }\n    /**\n     * Returns a promise that resolves when the current action queue up to now\n     * is finished.\n     */\n    toPromise() {\n        const temp = new Promise((resolve) => {\n            this._queue.add(new CallMethod(() => {\n                resolve();\n            }));\n        });\n        return temp;\n    }\n}\n\n;// ./Actions/ActionsComponent.ts\n\n\n\n\nclass ActionsComponent extends Component {\n    constructor() {\n        super(...arguments);\n        this.dependencies = [TransformComponent, MotionComponent];\n        this._ctx = null;\n    }\n    onAdd(entity) {\n        this._ctx = new ActionContext(entity);\n    }\n    onRemove() {\n        this._ctx = null;\n    }\n    _getCtx() {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, no context available');\n        }\n        return this._ctx;\n    }\n    /**\n     * Returns the internal action queue\n     * @returns action queue\n     */\n    getQueue() {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, no queue available');\n        }\n        return this._ctx.getQueue();\n    }\n    /**\n     * Runs a specific action in the action queue\n     * @param action\n     */\n    runAction(action) {\n        if (!this._ctx) {\n            throw new Error('Actions component not attached to an entity, cannot run action');\n        }\n        return this._ctx.runAction(action);\n    }\n    /**\n     * Updates the internal action context, performing action and moving through the internal queue\n     * @param elapsed\n     */\n    update(elapsed) {\n        var _a;\n        return (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.update(elapsed);\n    }\n    /**\n     * Clears all queued actions from the Actor\n     */\n    clearActions() {\n        var _a;\n        (_a = this._ctx) === null || _a === void 0 ? void 0 : _a.clearActions();\n    }\n    /**\n     * Animates an actor with a specified bezier curve by an offset to the current position, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveBy(options) {\n        return this._getCtx().curveBy.apply(this._ctx, [options]);\n    }\n    /**\n     * Animates an actor with a specified bezier curve to an absolute world space coordinate, the start point is assumed\n     * to be the actors current position\n     * @param options\n     */\n    curveTo(options) {\n        return this._getCtx().curveTo.apply(this._ctx, [options]);\n    }\n    easeTo(...args) {\n        return this._getCtx().easeTo.apply(this._ctx, args);\n    }\n    easeBy(...args) {\n        return this._getCtx().easeBy.apply(this._ctx, args);\n    }\n    moveTo(xOrPosOrOptions, yOrSpeed, speedOrUndefined) {\n        return this._getCtx().moveTo.apply(this._ctx, [xOrPosOrOptions, yOrSpeed, speedOrUndefined]);\n    }\n    moveBy(xOffsetOrVectorOptions, yOffsetOrSpeed, speedOrUndefined) {\n        return this._getCtx().moveBy.apply(this._ctx, [xOffsetOrVectorOptions, yOffsetOrSpeed, speedOrUndefined]);\n    }\n    rotateTo(angle, speed, rotationType) {\n        return this._getCtx().rotateTo.apply(this._ctx, [angle, speed, rotationType]);\n    }\n    rotateBy(angleRadiansOffsetOrOptions, speed, rotationType) {\n        return this._getCtx().rotateBy.apply(this._ctx, [angleRadiansOffsetOrOptions, speed, rotationType]);\n    }\n    scaleTo(sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined) {\n        return this._getCtx().scaleTo.apply(this._ctx, [sizeXOrVectorOrOptions, sizeYOrSpeed, speedXOrUndefined, speedYOrUndefined]);\n    }\n    scaleBy(sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed) {\n        return this._getCtx().scaleBy.apply(this._ctx, [sizeOffsetXOrVectorOrOptions, sizeOffsetYOrSpeed, speed]);\n    }\n    /**\n     * This method will cause an actor to blink (become visible and not\n     * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n     * the actor should be visible per blink, and the amount of time not visible.\n     * This method is part of the actor 'Action' fluent API allowing action chaining.\n     * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n     * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n     * @param numBlinks       The number of times to blink\n     */\n    blink(timeVisible, timeNotVisible, numBlinks) {\n        return this._getCtx().blink(timeVisible, timeNotVisible, numBlinks);\n    }\n    /**\n     * This method will cause an actor's opacity to change from its current value\n     * to the provided value by a specified time (in milliseconds). This method is\n     * part of the actor 'Action' fluent API allowing action chaining.\n     * @param opacity  The ending opacity\n     * @param duration     The time it should take to fade the actor (in milliseconds)\n     */\n    fade(opacity, duration) {\n        return this._getCtx().fade(opacity, duration);\n    }\n    /**\n     * This will cause an actor to flash a specific color for a period of time\n     * @param color\n     * @param duration The duration in milliseconds\n     */\n    flash(color, duration = 1000) {\n        return this._getCtx().flash(color, duration);\n    }\n    /**\n     * This method will delay the next action from executing for a certain\n     * amount of time (in milliseconds). This method is part of the actor\n     * 'Action' fluent API allowing action chaining.\n     * @param duration  The amount of time to delay the next action in the queue from executing in milliseconds\n     */\n    delay(duration) {\n        return this._getCtx().delay(duration);\n    }\n    /**\n     * This method will add an action to the queue that will remove the actor from the\n     * scene once it has completed its previous  Any actions on the\n     * action queue after this action will not be executed.\n     */\n    die() {\n        return this._getCtx().die();\n    }\n    /**\n     * This method allows you to call an arbitrary method as the next action in the\n     * action queue. This is useful if you want to execute code in after a specific\n     * action, i.e An actor arrives at a destination after traversing a path\n     */\n    callMethod(method) {\n        return this._getCtx().callMethod(method);\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n     * will repeat forever\n     */\n    repeat(repeatBuilder, times) {\n        return this._getCtx().repeat(repeatBuilder, times);\n    }\n    /**\n     * This method will cause the actor to repeat all of the actions built in\n     * the `repeatBuilder` callback. If the number of repeats\n     * is not specified it will repeat forever. This method is part of\n     * the actor 'Action' fluent API allowing action chaining\n     *\n     * ```typescript\n     * // Move up in a zig-zag by repeated moveBy's\n     * actor.actions.repeat(repeatCtx => {\n     * repeatCtx.moveBy(10, 0, 10);\n     * repeatCtx.moveBy(0, 10, 10);\n     * }, 5);\n     * ```\n     * @param repeatBuilder The builder to specify the repeatable list of actions\n     */\n    repeatForever(repeatBuilder) {\n        return this._getCtx().repeatForever(repeatBuilder);\n    }\n    /**\n     * This method will cause the entity to follow another at a specified distance\n     * @param entity           The entity to follow\n     * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n     */\n    follow(entity, followDistance) {\n        return this._getCtx().follow(entity, followDistance);\n    }\n    /**\n     * This method will cause the entity to move towards another until they\n     * collide \"meet\" at a specified speed.\n     * @param entity  The entity to meet\n     * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n     */\n    meet(entity, speed) {\n        return this._getCtx().meet(entity, speed);\n    }\n    /**\n     * Returns a promise that resolves when the current action queue up to now\n     * is finished.\n     */\n    toPromise() {\n        return this._getCtx().toPromise();\n    }\n}\n\n;// ./Actor.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Type guard for checking if something is an Actor\n * @param x\n */\nfunction isActor(x) {\n    return x instanceof Actor;\n}\nconst ActorEvents = {\n    CollisionStart: 'collisionstart',\n    CollisionEnd: 'collisionend',\n    PreCollision: 'precollision',\n    PostCollision: 'postcollision',\n    Kill: 'kill',\n    PreKill: 'prekill',\n    PostKill: 'postkill',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PreTransformDraw: 'pretransformdraw',\n    PostTransformDraw: 'posttransformdraw',\n    PreDebugDraw: 'predebugdraw',\n    PostDebugDraw: 'postdebugdraw',\n    PointerUp: 'pointerup',\n    PointerDown: 'pointerdown',\n    PointerEnter: 'pointerenter',\n    PointerLeave: 'pointerleave',\n    PointerMove: 'pointermove',\n    PointerCancel: 'pointercancel',\n    Wheel: 'pointerwheel',\n    PointerDrag: 'pointerdragstart',\n    PointerDragEnd: 'pointerdragend',\n    PointerDragEnter: 'pointerdragenter',\n    PointerDragLeave: 'pointerdragleave',\n    PointerDragMove: 'pointerdragmove',\n    EnterViewPort: 'enterviewport',\n    ExitViewPort: 'exitviewport',\n    ActionStart: 'actionstart',\n    ActionComplete: 'actioncomplete'\n};\n/**\n * The most important primitive in Excalibur is an `Actor`. Anything that\n * can move on the screen, collide with another `Actor`, respond to events,\n * or interact with the current scene, must be an actor. An `Actor` **must**\n * be part of a {@apilink Scene} for it to be drawn to the screen.\n */\nclass Actor extends Entity {\n    /**\n     * Gets the position vector of the actor in pixels\n     */\n    get pos() {\n        return this.transform.pos;\n    }\n    /**\n     * Sets the position vector of the actor in pixels\n     */\n    set pos(thePos) {\n        this.transform.pos = thePos.clone();\n    }\n    /**\n     * Gets the position vector of the actor from the last frame\n     */\n    get oldPos() {\n        return this.body.oldPos;\n    }\n    /**\n     * Gets the global position vector of the actor from the last frame\n     */\n    get oldGlobalPos() {\n        return this.body.oldGlobalPos;\n    }\n    /**\n     * Sets the position vector of the actor in the last frame\n     */\n    set oldPos(thePos) {\n        this.body.oldPos.setTo(thePos.x, thePos.y);\n    }\n    /**\n     * Gets the velocity vector of the actor in pixels/sec\n     */\n    get vel() {\n        return this.motion.vel;\n    }\n    /**\n     * Sets the velocity vector of the actor in pixels/sec\n     */\n    set vel(theVel) {\n        this.motion.vel = theVel.clone();\n    }\n    /**\n     * Gets the velocity vector of the actor from the last frame\n     */\n    get oldVel() {\n        return this.body.oldVel;\n    }\n    /**\n     * Sets the velocity vector of the actor from the last frame\n     */\n    set oldVel(theVel) {\n        this.body.oldVel.setTo(theVel.x, theVel.y);\n    }\n    /**\n     * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\n     * useful to simulate a gravitational effect.\n     */\n    get acc() {\n        return this.motion.acc;\n    }\n    /**\n     * Sets the acceleration vector of teh actor in pixels/second/second\n     */\n    set acc(theAcc) {\n        this.motion.acc = theAcc.clone();\n    }\n    /**\n     * Sets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n     */\n    set oldAcc(theAcc) {\n        this.body.oldAcc.setTo(theAcc.x, theAcc.y);\n    }\n    /**\n     * Gets the acceleration of the actor from the last frame. This does not include the global acc {@apilink Physics.acc}.\n     */\n    get oldAcc() {\n        return this.body.oldAcc;\n    }\n    /**\n     * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n     */\n    get rotation() {\n        return this.transform.rotation;\n    }\n    /**\n     * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n     */\n    set rotation(theAngle) {\n        this.transform.rotation = theAngle;\n    }\n    /**\n     * Gets the rotational velocity of the actor in radians/second\n     */\n    get angularVelocity() {\n        return this.motion.angularVelocity;\n    }\n    /**\n     * Sets the rotational velocity of the actor in radians/sec\n     */\n    set angularVelocity(angularVelocity) {\n        this.motion.angularVelocity = angularVelocity;\n    }\n    get scale() {\n        return this.get(TransformComponent).scale;\n    }\n    set scale(scale) {\n        this.get(TransformComponent).scale = scale;\n    }\n    /**\n     * The anchor to apply all actor related transformations like rotation,\n     * translation, and scaling. By default the anchor is in the center of\n     * the actor. By default it is set to the center of the actor (.5, .5)\n     *\n     * An anchor of (.5, .5) will ensure that drawings are centered.\n     *\n     * Use `anchor.setTo` to set the anchor to a different point using\n     * values between 0 and 1. For example, anchoring to the top-left would be\n     * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\n     */\n    get anchor() {\n        return this._anchor;\n    }\n    set anchor(vec) {\n        this._anchor = watch(vec, (v) => this._handleAnchorChange(v));\n        this._handleAnchorChange(vec);\n    }\n    _handleAnchorChange(v) {\n        if (this.graphics) {\n            this.graphics.anchor = v;\n        }\n    }\n    /**\n     * The offset in pixels to apply to all actor graphics\n     *\n     * Default offset of (0, 0)\n     */\n    get offset() {\n        return this._offset;\n    }\n    set offset(vec) {\n        this._offset = watch(vec, (v) => this._handleOffsetChange(v));\n        this._handleOffsetChange(vec);\n    }\n    _handleOffsetChange(v) {\n        if (this.graphics) {\n            this.graphics.offset = v;\n        }\n    }\n    /**\n     * Indicates whether the actor is physically in the viewport\n     */\n    get isOffScreen() {\n        return this.hasTag('ex.offscreen');\n    }\n    get draggable() {\n        return this._draggable;\n    }\n    set draggable(isDraggable) {\n        if (isDraggable) {\n            if (isDraggable && !this._draggable) {\n                this.events.on('pointerdragstart', this._pointerDragStartHandler);\n                this.events.on('pointerdragend', this._pointerDragEndHandler);\n                this.events.on('pointerdragmove', this._pointerDragMoveHandler);\n                this.events.on('pointerdragleave', this._pointerDragLeaveHandler);\n            }\n            else if (!isDraggable && this._draggable) {\n                this.events.off('pointerdragstart', this._pointerDragStartHandler);\n                this.events.off('pointerdragend', this._pointerDragEndHandler);\n                this.events.off('pointerdragmove', this._pointerDragMoveHandler);\n                this.events.off('pointerdragleave', this._pointerDragLeaveHandler);\n            }\n            this._draggable = isDraggable;\n        }\n    }\n    /**\n     * Sets the color of the actor's current graphic\n     */\n    get color() {\n        return this.graphics.color;\n    }\n    set color(v) {\n        this.graphics.color = v;\n    }\n    // #endregion\n    /**\n     *\n     * @param config\n     */\n    constructor(config) {\n        super();\n        this.events = new EventEmitter();\n        this._anchor = watch(Vector.Half, (v) => this._handleAnchorChange(v));\n        this._offset = watch(Vector.Zero, (v) => this._handleOffsetChange(v));\n        /**\n         * Convenience reference to the global logger\n         */\n        this.logger = Logger.getInstance();\n        /**\n         * Draggable helper\n         */\n        this._draggable = false;\n        this._dragging = false;\n        this._pointerDragStartHandler = () => {\n            this._dragging = true;\n        };\n        this._pointerDragEndHandler = () => {\n            this._dragging = false;\n        };\n        this._pointerDragMoveHandler = (pe) => {\n            if (this._dragging) {\n                this.pos = pe.worldPos;\n            }\n        };\n        this._pointerDragLeaveHandler = (pe) => {\n            if (this._dragging) {\n                this.pos = pe.worldPos;\n            }\n        };\n        const { name, x, y, pos, coordPlane, scale, width, height, radius, collider, vel, acc, rotation, angularVelocity, z, color, visible, opacity, anchor, offset, collisionType, collisionGroup, silenceWarnings } = {\n            ...config\n        };\n        this.name = name !== null && name !== void 0 ? name : this.name;\n        this.anchor = anchor !== null && anchor !== void 0 ? anchor : Actor.defaults.anchor.clone();\n        this.offset = offset !== null && offset !== void 0 ? offset : Vector.Zero;\n        this.transform = new TransformComponent();\n        this.addComponent(this.transform);\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.rotation = rotation !== null && rotation !== void 0 ? rotation : 0;\n        this.scale = scale !== null && scale !== void 0 ? scale : vec(1, 1);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.transform.coordPlane = coordPlane !== null && coordPlane !== void 0 ? coordPlane : CoordPlane.World;\n        this._silenceWarnings = silenceWarnings !== null && silenceWarnings !== void 0 ? silenceWarnings : false;\n        this.pointer = new PointerComponent();\n        this.addComponent(this.pointer);\n        this.graphics = new GraphicsComponent({\n            anchor: this.anchor,\n            offset: this.offset,\n            opacity: opacity\n        });\n        this.addComponent(this.graphics);\n        this.motion = new MotionComponent();\n        this.addComponent(this.motion);\n        this.vel = vel !== null && vel !== void 0 ? vel : Vector.Zero;\n        this.acc = acc !== null && acc !== void 0 ? acc : Vector.Zero;\n        this.angularVelocity = angularVelocity !== null && angularVelocity !== void 0 ? angularVelocity : 0;\n        this.actions = new ActionsComponent();\n        this.addComponent(this.actions);\n        this.body = new BodyComponent();\n        this.addComponent(this.body);\n        this.body.collisionType = collisionType !== null && collisionType !== void 0 ? collisionType : CollisionType.Passive;\n        if (collisionGroup) {\n            this.body.group = collisionGroup;\n        }\n        if (color) {\n            this.color = color;\n        }\n        if (collider) {\n            this.collider = new ColliderComponent(collider);\n            this.addComponent(this.collider);\n        }\n        else if (radius) {\n            this.collider = new ColliderComponent(Shape.Circle(radius));\n            this.addComponent(this.collider);\n            if (color) {\n                this.graphics.add(new Circle({\n                    color: color,\n                    radius\n                }));\n            }\n        }\n        else {\n            if (width > 0 && height > 0) {\n                this.collider = new ColliderComponent(Shape.Box(width, height, this.anchor));\n                this.addComponent(this.collider);\n                if (color && width && height) {\n                    this.graphics.add(new Rectangle({\n                        color: color,\n                        width,\n                        height\n                    }));\n                }\n            }\n            else {\n                this.collider = new ColliderComponent();\n                this.addComponent(this.collider); // no collider\n            }\n        }\n        this.graphics.isVisible = visible !== null && visible !== void 0 ? visible : true;\n    }\n    clone() {\n        const clone = new Actor({\n            silenceWarnings: this._silenceWarnings,\n            color: this.color.clone(),\n            anchor: this.anchor.clone(),\n            offset: this.offset.clone()\n        });\n        clone.clearComponents();\n        clone.processComponentRemoval();\n        // Clone builtins, order is important, same as ctor\n        clone.addComponent((clone.transform = this.transform.clone()), true);\n        clone.addComponent((clone.pointer = this.pointer.clone()), true);\n        clone.addComponent((clone.graphics = this.graphics.clone()), true);\n        clone.addComponent((clone.motion = this.motion.clone()), true);\n        clone.addComponent((clone.actions = this.actions.clone()), true);\n        clone.addComponent((clone.body = this.body.clone()), true);\n        clone.addComponent((clone.collider = this.collider.clone()), true);\n        const builtInComponents = [\n            this.transform,\n            this.pointer,\n            this.graphics,\n            this.motion,\n            this.actions,\n            this.body,\n            this.collider\n        ];\n        // Clone non-builtin the current actors components\n        const components = this.getComponents();\n        for (const c of components) {\n            if (!builtInComponents.includes(c)) {\n                clone.addComponent(c.clone(), true);\n            }\n        }\n        return clone;\n    }\n    /**\n     * `onInitialize` is called before the first update of the actor. This method is meant to be\n     * overridden. This is where initialization of child actors should take place.\n     *\n     * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n     */\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\n     *\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     * @internal\n     */\n    _initialize(engine) {\n        super._initialize(engine);\n        for (const child of this.children) {\n            child._initialize(engine);\n        }\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    // #endregion\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _prekill handler for {@apilink onPreKill} lifecycle event\n     * @internal\n     */\n    _prekill(scene) {\n        this.events.emit('prekill', new PreKillEvent(this));\n        this.onPreKill(scene);\n    }\n    /**\n     * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\n     *\n     * `onPreKill` is called directly before an actor is killed and removed from its current {@apilink Scene}.\n     */\n    onPreKill(scene) {\n        // Override me\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _prekill handler for {@apilink onPostKill} lifecycle event\n     * @internal\n     */\n    _postkill(scene) {\n        this.events.emit('postkill', new PostKillEvent(this));\n        this.onPostKill(scene);\n    }\n    /**\n     * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\n     *\n     * `onPostKill` is called directly after an actor is killed and remove from its current {@apilink Scene}.\n     */\n    onPostKill(scene) {\n        // Override me\n    }\n    /**\n     * If the current actor is a member of the scene, this will remove\n     * it from the scene graph. It will no longer be drawn or updated.\n     */\n    kill() {\n        if (this.scene) {\n            this._prekill(this.scene);\n            this.events.emit('kill', new KillEvent(this));\n            super.kill();\n            this._postkill(this.scene);\n        }\n        else {\n            this.logger.warn(`Cannot kill actor named \"${this.name}\", it was never added to the Scene`);\n        }\n    }\n    /**\n     * If the current actor is killed, it will now not be killed.\n     */\n    unkill() {\n        this.isActive = true;\n    }\n    /**\n     * Indicates wether the actor has been killed.\n     */\n    isKilled() {\n        return !this.isActive;\n    }\n    /**\n     * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\n     */\n    get z() {\n        return this.get(TransformComponent).z;\n    }\n    /**\n     * Sets the z-index of an actor and updates it in the drawing list for the scene.\n     * The z-index determines the relative order an actor is drawn in.\n     * Actors with a higher z-index are drawn on top of actors with a lower z-index\n     * @param newZ new z-index to assign\n     */\n    set z(newZ) {\n        this.get(TransformComponent).z = newZ;\n    }\n    /**\n     * Get the center point of an actor (global position)\n     */\n    get center() {\n        const globalPos = this.getGlobalPos();\n        return new Vector(globalPos.x + this.width / 2 - this.anchor.x * this.width, globalPos.y + this.height / 2 - this.anchor.y * this.height);\n    }\n    /**\n     * Get the local center point of an actor\n     */\n    get localCenter() {\n        return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\n    }\n    get width() {\n        return this.collider.localBounds.width * this.getGlobalScale().x;\n    }\n    get height() {\n        return this.collider.localBounds.height * this.getGlobalScale().y;\n    }\n    /**\n     * Gets this actor's rotation taking into account any parent relationships\n     * @returns Rotation angle in radians\n     * @deprecated Use {@apilink globalRotation} instead\n     */\n    getGlobalRotation() {\n        return this.get(TransformComponent).globalRotation;\n    }\n    /**\n     * The actor's rotation (in radians) taking into account any parent relationships\n     */\n    get globalRotation() {\n        return this.get(TransformComponent).globalRotation;\n    }\n    /**\n     * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\n     * @returns Position in world coordinates\n     * @deprecated Use {@apilink globalPos} instead\n     */\n    getGlobalPos() {\n        return this.get(TransformComponent).globalPos;\n    }\n    /**\n     * The actor's world position taking into account parent relationships, scaling, rotation, and translation\n     */\n    get globalPos() {\n        return this.get(TransformComponent).globalPos;\n    }\n    /**\n     * Gets the global scale of the Actor\n     * @deprecated Use {@apilink globalScale} instead\n     */\n    getGlobalScale() {\n        return this.get(TransformComponent).globalScale;\n    }\n    /**\n     * The global scale of the Actor\n     */\n    get globalScale() {\n        return this.get(TransformComponent).globalScale;\n    }\n    /**\n     * The global z-index of the actor\n     */\n    get globalZ() {\n        return this.get(TransformComponent).globalZ;\n    }\n    // #region Collision\n    /**\n     * Tests whether the x/y specified are contained in the actor\n     * @param x  X coordinate to test (in world coordinates)\n     * @param y  Y coordinate to test (in world coordinates)\n     * @param recurse checks whether the x/y are contained in any child actors (if they exist).\n     */\n    contains(x, y, recurse = false) {\n        const point = vec(x, y);\n        const collider = this.get(ColliderComponent);\n        collider.update();\n        const geom = collider.get();\n        if (!geom) {\n            return false;\n        }\n        const containment = geom.contains(point);\n        if (recurse) {\n            return (containment ||\n                this.children.some((child) => {\n                    return child.contains(x, y, true);\n                }));\n        }\n        return containment;\n    }\n    /**\n     * Returns true if the two actor.collider's surfaces are less than or equal to the distance specified from each other\n     * @param actor     Actor to test\n     * @param distance  Distance in pixels to test\n     */\n    within(actor, distance) {\n        const collider = this.get(ColliderComponent);\n        const otherCollider = actor.get(ColliderComponent);\n        const me = collider.get();\n        const other = otherCollider.get();\n        if (me && other) {\n            return me.getClosestLineBetween(other).getLength() <= distance;\n        }\n        return false;\n    }\n    // #endregion\n    // #region Update\n    /**\n     * Called by the Engine, updates the state of the actor\n     * @internal\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._add(engine);\n        this._preupdate(engine, elapsed);\n        this._postupdate(engine, elapsed);\n        this._remove(engine);\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before an actor is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after an actor is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Fires before every collision resolution for a confirmed contact\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onPreCollisionResolve(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires after every resolution for a confirmed contact.\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onPostCollisionResolve(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires once when 2 entities with a ColliderComponent first start colliding or touching, if the Colliders stay in contact this\n     * does not continue firing until they separate and re-collide.\n     * @param self\n     * @param other\n     * @param side\n     * @param contact\n     */\n    onCollisionStart(self, other, side, contact) {\n        // Override me\n    }\n    /**\n     * Fires once when 2 entities with a ColliderComponent separate after having been in contact.\n     * @param self\n     * @param other\n     * @param side\n     * @param lastContact\n     */\n    onCollisionEnd(self, other, side, lastContact) {\n        // Override me\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n}\n// #region Properties\n/**\n * Set defaults for all Actors\n */\nActor.defaults = {\n    anchor: Vector.Half\n};\n\n;// ./ScreenElement.ts\n\n\n\n\n\n/**\n * Type guard to detect a screen element\n */\nfunction isScreenElement(actor) {\n    return actor instanceof ScreenElement;\n}\n/**\n * Helper {@apilink Actor} primitive for drawing UI's, optimized for UI drawing. Does\n * not participate in collisions. Drawn on top of all other actors.\n */\nclass ScreenElement extends Actor {\n    constructor(config) {\n        var _a, _b;\n        super({ ...config });\n        this.get(TransformComponent).coordPlane = CoordPlane.Screen;\n        this.anchor = (_a = config === null || config === void 0 ? void 0 : config.anchor) !== null && _a !== void 0 ? _a : vec(0, 0);\n        this.body.collisionType = (_b = config === null || config === void 0 ? void 0 : config.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n        this.pointer.useGraphicsBounds = true;\n        this.pointer.useColliderShape = false;\n        if (!(config === null || config === void 0 ? void 0 : config.collider) && (config === null || config === void 0 ? void 0 : config.width) > 0 && (config === null || config === void 0 ? void 0 : config.height) > 0) {\n            this.collider.useBoxCollider(this.width, this.height, this.anchor);\n        }\n    }\n    _initialize(engine) {\n        this._engine = engine;\n        super._initialize(engine);\n    }\n    contains(x, y, useWorld = true) {\n        if (useWorld) {\n            return super.contains(x, y);\n        }\n        const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\n        return super.contains(coords.x, coords.y);\n    }\n}\n\n;// ./Timer.ts\n\n\n/**\n * The Excalibur timer hooks into the internal timer and fires callbacks,\n * after a certain interval, optionally repeating.\n */\nclass Timer {\n    get complete() {\n        return this._complete;\n    }\n    constructor(options) {\n        var _a;\n        this._logger = Logger.getInstance();\n        this.id = 0;\n        this._elapsedTime = 0;\n        this._totalTimeAlive = 0;\n        this._running = false;\n        this._numberOfTicks = 0;\n        this.interval = 10;\n        this.repeats = false;\n        this.maxNumberOfRepeats = -1;\n        this.randomRange = [0, 0];\n        this._baseInterval = 10;\n        this._generateRandomInterval = () => {\n            return this._baseInterval + this.random.integer(this.randomRange[0], this.randomRange[1]);\n        };\n        this._complete = false;\n        this.scene = null;\n        const fcn = (_a = options.action) !== null && _a !== void 0 ? _a : options.fcn;\n        const interval = options.interval;\n        const repeats = options.repeats;\n        const numberOfRepeats = options.numberOfRepeats;\n        const randomRange = options.randomRange;\n        const random = options.random;\n        if (!!numberOfRepeats && numberOfRepeats >= 0) {\n            this.maxNumberOfRepeats = numberOfRepeats;\n            if (!repeats) {\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\n            }\n        }\n        this.id = Timer._MAX_ID++;\n        this._callbacks = [];\n        this._baseInterval = this.interval = interval;\n        if (!!randomRange) {\n            if (randomRange[0] > randomRange[1]) {\n                throw new Error('min value must be lower than max value for range');\n            }\n            //We use the instance of ex.Random to generate the range\n            this.random = random !== null && random !== void 0 ? random : new Random();\n            this.randomRange = randomRange;\n            this.interval = this._generateRandomInterval();\n            this.on(() => {\n                this.interval = this._generateRandomInterval();\n            });\n        }\n        this.repeats = repeats || this.repeats;\n        if (fcn) {\n            this.on(fcn);\n        }\n    }\n    /**\n     * Adds a new callback to be fired after the interval is complete\n     * @param action The callback to be added to the callback list, to be fired after the interval is complete.\n     */\n    on(action) {\n        this._callbacks.push(action);\n    }\n    /**\n     * Removes a callback from the callback list to be fired after the interval is complete.\n     * @param action The callback to be removed from the callback list, to be fired after the interval is complete.\n     */\n    off(action) {\n        const index = this._callbacks.indexOf(action);\n        this._callbacks.splice(index, 1);\n    }\n    /**\n     * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\n     * @param elapsed  Number of elapsed milliseconds since the last update.\n     */\n    update(elapsed) {\n        if (this._running) {\n            this._totalTimeAlive += elapsed;\n            this._elapsedTime += elapsed;\n            if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\n                this._complete = true;\n                this._running = false;\n                this._elapsedTime = 0;\n            }\n            if (!this.complete && this._elapsedTime >= this.interval) {\n                this._callbacks.forEach((c) => {\n                    c.call(this);\n                });\n                this._numberOfTicks++;\n                if (this.repeats) {\n                    this._elapsedTime = 0;\n                }\n                else {\n                    this._complete = true;\n                    this._running = false;\n                    this._elapsedTime = 0;\n                }\n            }\n        }\n    }\n    /**\n     * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\n     *\n     * Warning** you may need to call `timer.start()` again if the timer had completed\n     * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\n     * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\n     */\n    reset(newInterval, newNumberOfRepeats) {\n        if (!!newInterval && newInterval >= 0) {\n            this._baseInterval = this.interval = newInterval;\n        }\n        if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\n            this.maxNumberOfRepeats = newNumberOfRepeats;\n            if (!this.repeats) {\n                throw new Error('repeats must be set to true if numberOfRepeats is set');\n            }\n        }\n        this._complete = false;\n        this._elapsedTime = 0;\n        this._numberOfTicks = 0;\n    }\n    get timesRepeated() {\n        return this._numberOfTicks;\n    }\n    getTimeRunning() {\n        return this._totalTimeAlive;\n    }\n    /**\n     * @returns milliseconds until the next action callback, if complete will return 0\n     */\n    get timeToNextAction() {\n        if (this.complete) {\n            return 0;\n        }\n        return this.interval - this._elapsedTime;\n    }\n    /**\n     * @returns milliseconds elapsed toward the next action\n     */\n    get timeElapsedTowardNextAction() {\n        return this._elapsedTime;\n    }\n    get isRunning() {\n        return this._running;\n    }\n    /**\n     * Pauses the timer, time will no longer increment towards the next call\n     */\n    pause() {\n        this._running = false;\n        return this;\n    }\n    /**\n     * Resumes the timer, time will now increment towards the next call.\n     */\n    resume() {\n        this._running = true;\n        return this;\n    }\n    /**\n     * Starts the timer, if the timer was complete it will restart the timer and reset the elapsed time counter\n     */\n    start() {\n        if (!this.scene) {\n            this._logger.warn('Cannot start a timer not part of a scene, timer wont start until added');\n        }\n        this._running = true;\n        if (this.complete) {\n            this._complete = false;\n            this._elapsedTime = 0;\n            this._numberOfTicks = 0;\n        }\n        return this;\n    }\n    /**\n     * Stops the timer and resets the elapsed time counter towards the next action invocation\n     */\n    stop() {\n        this._running = false;\n        this._elapsedTime = 0;\n        this._numberOfTicks = 0;\n        return this;\n    }\n    /**\n     * Cancels the timer, preventing any further executions.\n     */\n    cancel() {\n        this.pause();\n        if (this.scene) {\n            this.scene.cancelTimer(this);\n        }\n    }\n}\nTimer._MAX_ID = 0;\n\n;// ./Graphics/ParallaxComponent.ts\n\n\nclass ParallaxComponent extends Component {\n    constructor(parallaxFactor) {\n        super();\n        this.parallaxFactor = vec(1.0, 1.0);\n        this.parallaxFactor = parallaxFactor !== null && parallaxFactor !== void 0 ? parallaxFactor : this.parallaxFactor;\n    }\n}\n\n;// ./Graphics/DebugGraphicsComponent.ts\n\n/**\n * Provide arbitrary drawing for the purposes of debugging your game\n *\n * Will only show when the Engine is set to debug mode {@apilink Engine.showDebug} or {@apilink Engine.toggleDebug}\n *\n */\nclass DebugGraphicsComponent extends Component {\n    constructor(draw, useTransform = true) {\n        super();\n        this.draw = draw;\n        this.useTransform = useTransform;\n    }\n}\n\n;// ./Input/PointerEventsToObjectDispatcher.ts\n\n/**\n *\n */\nfunction hasNestedEvents(object) {\n    return object && object._dispatchPointerEvents && object._processPointerToObject;\n}\nclass PointerTargetObjectProxy {\n    get events() {\n        return this.object.events;\n    }\n    init(object, contains, active) {\n        this.object = object;\n        this.contains = contains;\n        this.active = active;\n    }\n}\nclass PointerEventsToObjectDispatcher {\n    constructor() {\n        this._proxyPool = new RentalPool(() => new PointerTargetObjectProxy(), (p) => p, 100);\n        this._objectToProxy = new Map();\n        this._proxies = [];\n        this._lastFrameObjectToPointers = new Map();\n        this._currentFrameObjectToPointers = new Map();\n    }\n    /**\n     * Tracks an object to associate with pointers and their events\n     * @param object\n     * @param contains\n     * @param active\n     */\n    addObject(object, contains, active) {\n        const proxy = this._proxyPool.rent(false);\n        proxy.init(object, contains, active);\n        this._proxies.push(proxy);\n        this._objectToProxy.set(object, proxy);\n    }\n    _getProxy(object) {\n        const proxy = this._objectToProxy.get(object);\n        if (proxy) {\n            return proxy;\n        }\n        throw new Error('No PointerTargetProxy for object');\n    }\n    /**\n     * Untracks an object associated with pointers and their events\n     * @param object\n     */\n    removeObject(object) {\n        const proxy = this._objectToProxy.get(object);\n        if (proxy) {\n            const index = this._proxies.indexOf(proxy);\n            if (index > -1) {\n                this._proxies.splice(index, 1);\n            }\n            this._proxyPool.return(proxy);\n        }\n    }\n    _objectCurrentlyUnderPointer(object, pointerId) {\n        return !!(this._currentFrameObjectToPointers.has(object) && this._currentFrameObjectToPointers.get(object).includes(pointerId));\n    }\n    _objectWasUnderPointer(object, pointerId) {\n        return !!(this._lastFrameObjectToPointers.has(object) && this._lastFrameObjectToPointers.get(object).includes(pointerId));\n    }\n    _entered(object, pointerId) {\n        return this._objectCurrentlyUnderPointer(object, pointerId) && !this._lastFrameObjectToPointers.has(object);\n    }\n    _left(object, pointerId) {\n        return !this._currentFrameObjectToPointers.has(object) && this._objectWasUnderPointer(object, pointerId);\n    }\n    /**\n     * Manually associate a pointer id with an object.\n     *\n     * This assumes you've checked that the pointer is indeed over the object.\n     */\n    addPointerToObject(object, pointerId) {\n        const maybeProxy = this._objectToProxy.get(object);\n        if (maybeProxy) {\n            this._addPointerToProxy(maybeProxy, pointerId);\n        }\n    }\n    _addPointerToProxy(object, pointerId) {\n        if (!this._currentFrameObjectToPointers.has(object)) {\n            this._currentFrameObjectToPointers.set(object, [pointerId]);\n            return;\n        }\n        const pointers = this._currentFrameObjectToPointers.get(object);\n        this._currentFrameObjectToPointers.set(object, pointers.concat(pointerId));\n    }\n    /**\n     * Dispatches the appropriate pointer events in sortedObject order on tracked objects\n     * @param receiver\n     * @param sortedObjects\n     */\n    dispatchEvents(receiver, sortedObjects) {\n        const lastFrameEntities = new Set(this._lastFrameObjectToPointers.keys());\n        const currentFrameEntities = new Set(this._currentFrameObjectToPointers.keys());\n        // Filter preserves z order\n        let lastMovePerPointer;\n        let lastUpPerPointer;\n        let lastDownPerPointer;\n        // Dispatch events in proxy z order\n        for (let i = 0; i < sortedObjects.length; i++) {\n            const object = sortedObjects[i];\n            const proxy = this._getProxy(object);\n            if (hasNestedEvents(object)) {\n                object._dispatchPointerEvents(receiver);\n            }\n            if (lastFrameEntities.has(proxy) || currentFrameEntities.has(proxy)) {\n                lastDownPerPointer = this._processDownAndEmit(receiver, proxy);\n                lastUpPerPointer = this._processUpAndEmit(receiver, proxy);\n                lastMovePerPointer = this._processMoveAndEmit(receiver, proxy);\n                const lastUpDownMoveEvents = [...lastMovePerPointer.values(), ...lastDownPerPointer.values(), ...lastUpPerPointer.values()];\n                this._processEnterLeaveAndEmit(receiver, proxy, lastUpDownMoveEvents);\n                this._processCancelAndEmit(receiver, proxy);\n                this._processWheelAndEmit(receiver, proxy);\n            }\n        }\n    }\n    /**\n     * Given the tracked objects, update pointer containment given the provided contains()\n     * @param receiver\n     * @param objects\n     */\n    processPointerToObject(receiver, objects) {\n        // Pre-process find entities under pointers\n        for (let objectIndex = 0; objectIndex < objects.length; objectIndex++) {\n            const object = objects[objectIndex];\n            const proxy = this._getProxy(object);\n            if (hasNestedEvents(object)) {\n                object._processPointerToObject(receiver);\n            }\n            for (const [pointerId, pos] of receiver.currentFramePointerCoords.entries()) {\n                if (proxy.contains(pos)) {\n                    this._addPointerToProxy(proxy, pointerId);\n                }\n            }\n        }\n    }\n    /**\n     * Clear current frames pointer-object associations and track last frame pointer-object associations\n     */\n    clear() {\n        this._lastFrameObjectToPointers.clear();\n        this._lastFrameObjectToPointers = new Map(this._currentFrameObjectToPointers);\n        this._currentFrameObjectToPointers.clear();\n    }\n    _processDownAndEmit(receiver, object) {\n        const lastDownPerPointer = new Map();\n        // Loop through down and dispatch to entities\n        for (const event of receiver.currentFrameDown) {\n            if (event.active && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointerdown', event);\n                if (receiver.isDragStart(event.pointerId)) {\n                    object.events.emit('pointerdragstart', event);\n                }\n            }\n            lastDownPerPointer.set(event.pointerId, event);\n        }\n        return lastDownPerPointer;\n    }\n    _processUpAndEmit(receiver, object) {\n        const lastUpPerPointer = new Map();\n        // Loop through up and dispatch to entities\n        for (const event of receiver.currentFrameUp) {\n            if (event.active && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointerup', event);\n                if (receiver.isDragEnd(event.pointerId)) {\n                    object.events.emit('pointerdragend', event);\n                }\n            }\n            lastUpPerPointer.set(event.pointerId, event);\n        }\n        return lastUpPerPointer;\n    }\n    _processMoveAndEmit(receiver, object) {\n        const lastMovePerPointer = new Map();\n        // Loop through move and dispatch to entities\n        for (const event of receiver.currentFrameMove) {\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                // move\n                object.events.emit('pointermove', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragmove', event);\n                }\n            }\n            lastMovePerPointer.set(event.pointerId, event);\n        }\n        return lastMovePerPointer;\n    }\n    _processEnterLeaveAndEmit(receiver, object, lastUpDownMoveEvents) {\n        // up, down, and move are considered for enter and leave\n        for (const event of lastUpDownMoveEvents) {\n            // enter\n            if (event.active && object.active() && this._entered(object, event.pointerId)) {\n                object.events.emit('pointerenter', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragenter', event);\n                }\n                break;\n            }\n            if (event.active &&\n                object.active() &&\n                // leave can happen on move\n                (this._left(object, event.pointerId) ||\n                    // or leave can happen on pointer up\n                    (this._objectCurrentlyUnderPointer(object, event.pointerId) && event.type === 'up'))) {\n                object.events.emit('pointerleave', event);\n                if (receiver.isDragging(event.pointerId)) {\n                    object.events.emit('pointerdragleave', event);\n                }\n                break;\n            }\n        }\n    }\n    _processCancelAndEmit(receiver, object) {\n        // cancel\n        for (const event of receiver.currentFrameCancel) {\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, event.pointerId)) {\n                object.events.emit('pointercancel', event);\n            }\n        }\n    }\n    _processWheelAndEmit(receiver, object) {\n        // wheel\n        for (const event of receiver.currentFrameWheel) {\n            // Currently the wheel only fires under the primary pointer '0'\n            if (event.active && object.active() && this._objectCurrentlyUnderPointer(object, 0)) {\n                object.events.emit('pointerwheel', event);\n            }\n        }\n    }\n}\n\n;// ./TileMap/TileMap.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TileMapEvents = {\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PointerUp: 'pointerup',\n    PointerDown: 'pointerdown',\n    PointerMove: 'pointermove',\n    PointerCancel: 'pointercancel'\n};\n/**\n * The TileMap provides a mechanism for doing flat 2D tiles rendered in a grid.\n *\n * TileMaps are useful for top down or side scrolling grid oriented games.\n */\nclass TileMap extends Entity {\n    flagCollidersDirty() {\n        this._collidersDirty = true;\n    }\n    flagTilesDirty() {\n        for (let i = 0; i < this.tiles.length; i++) {\n            if (this.tiles[i]) {\n                this.tiles[i].flagDirty();\n            }\n        }\n    }\n    get x() {\n        var _a;\n        return (_a = this.transform.pos.x) !== null && _a !== void 0 ? _a : 0;\n    }\n    set x(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos) {\n            this.get(TransformComponent).pos = vec(val, this.y);\n        }\n    }\n    get y() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos.y) !== null && _b !== void 0 ? _b : 0;\n    }\n    set y(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.pos) {\n            this.transform.pos = vec(this.x, val);\n        }\n    }\n    get z() {\n        var _a;\n        return (_a = this.transform.z) !== null && _a !== void 0 ? _a : 0;\n    }\n    set z(val) {\n        if (this.transform) {\n            this.transform.z = val;\n        }\n    }\n    get rotation() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.rotation) !== null && _b !== void 0 ? _b : 0;\n    }\n    set rotation(val) {\n        if (this.transform) {\n            this.transform.rotation = val;\n        }\n    }\n    get scale() {\n        var _a, _b;\n        return (_b = (_a = this.transform) === null || _a === void 0 ? void 0 : _a.scale) !== null && _b !== void 0 ? _b : Vector.One;\n    }\n    set scale(val) {\n        var _a;\n        if ((_a = this.transform) === null || _a === void 0 ? void 0 : _a.scale) {\n            this.transform.scale = val;\n        }\n    }\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(val) {\n        this.transform.pos = val;\n    }\n    get vel() {\n        return this._motion.vel;\n    }\n    set vel(val) {\n        this._motion.vel = val;\n    }\n    /**\n     * Width of the whole tile map in pixels\n     */\n    get width() {\n        return this.tileWidth * this.columns * this.scale.x;\n    }\n    /**\n     * Height of the whole tilemap in pixels\n     */\n    get height() {\n        return this.tileHeight * this.rows * this.scale.y;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * @param options\n     */\n    constructor(options) {\n        var _a, _b, _c;\n        super([], options.name);\n        this.events = new EventEmitter();\n        this._token = 0;\n        this.logger = Logger.getInstance();\n        this.tiles = [];\n        this._rows = [];\n        this._cols = [];\n        this.renderFromTopOfGraphic = false;\n        this.meshingLookBehind = 10;\n        this._collidersDirty = true;\n        this._oldRotation = 0;\n        this._originalOffsets = new WeakMap();\n        this.meshingLookBehind = (_a = options.meshingLookBehind) !== null && _a !== void 0 ? _a : this.meshingLookBehind;\n        this.addComponent(new TransformComponent());\n        this.addComponent(new MotionComponent());\n        this.addComponent(new BodyComponent({\n            type: CollisionType.Fixed\n        }));\n        this.addComponent(new GraphicsComponent({\n            onPostDraw: (ctx, elapsed) => this.draw(ctx, elapsed)\n        }));\n        this.addComponent(new DebugGraphicsComponent((ctx, debugFlags) => this.debug(ctx, debugFlags), false));\n        this.addComponent(new ColliderComponent());\n        this.addComponent(new PointerComponent());\n        this.pointer = this.get(PointerComponent);\n        this._graphics = this.get(GraphicsComponent);\n        this.transform = this.get(TransformComponent);\n        this._motion = this.get(MotionComponent);\n        this.collider = this.get(ColliderComponent);\n        this._composite = this.collider.useCompositeCollider([]);\n        this.transform.pos = (_b = options.pos) !== null && _b !== void 0 ? _b : Vector.Zero;\n        this._oldPos = this.transform.pos.clone();\n        this._oldScale = this.transform.scale.clone();\n        this.renderFromTopOfGraphic = (_c = options.renderFromTopOfGraphic) !== null && _c !== void 0 ? _c : this.renderFromTopOfGraphic;\n        this.tileWidth = options.tileWidth;\n        this.tileHeight = options.tileHeight;\n        this.rows = options.rows;\n        this.columns = options.columns;\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        this.tiles = new Array(this.rows * this.columns);\n        this._rows = new Array(this.rows);\n        this._cols = new Array(this.columns);\n        let currentCol = [];\n        for (let i = 0; i < this.columns; i++) {\n            for (let j = 0; j < this.rows; j++) {\n                const tile = new Tile({\n                    x: i,\n                    y: j,\n                    map: this\n                });\n                tile.map = this;\n                this.tiles[i + j * this.columns] = tile;\n                this._pointerEventDispatcher.addObject(tile, (vec) => {\n                    // TODO handle geometry/graphics\n                    return tile.bounds.contains(vec.worldPos);\n                }, () => true);\n                currentCol.push(tile);\n                if (!this._rows[j]) {\n                    this._rows[j] = [];\n                }\n                this._rows[j].push(tile);\n            }\n            this._cols[i] = currentCol;\n            currentCol = [];\n        }\n        this._graphics.localBounds = new BoundingBox({\n            left: 0,\n            top: 0,\n            right: this.columns * this.tileWidth * this.scale.x,\n            bottom: this.rows * this.tileHeight * this.scale.y\n        });\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n        this._engine = engine;\n    }\n    _getOrSetColliderOriginalOffset(collider) {\n        var _a;\n        if (!this._originalOffsets.has(collider)) {\n            const originalOffset = collider.offset;\n            this._originalOffsets.set(collider, originalOffset);\n            return originalOffset;\n        }\n        else {\n            return (_a = this._originalOffsets.get(collider)) !== null && _a !== void 0 ? _a : Vector.Zero;\n        }\n    }\n    /**\n     * Tiles colliders based on the solid tiles in the tilemap.\n     */\n    _updateColliders() {\n        this.collider.$colliderRemoved.notifyAll(this._composite);\n        this._composite.clearColliders();\n        const colliders = [];\n        this._composite = this.collider.useCompositeCollider([]);\n        let current = null;\n        /**\n         * Returns wether or not the 2 boxes share an edge and are the same height\n         * @param prev\n         * @param next\n         * @returns true if they share and edge, false if not\n         */\n        const shareEdges = (prev, next) => {\n            if (prev && next) {\n                // same top/bottom\n                return (prev.top === next.top &&\n                    prev.bottom === next.bottom &&\n                    // Shared right/left edge\n                    prev.right === next.left);\n            }\n            return false;\n        };\n        /**\n         * Potentially merges the current collider into a list of previous ones, mutating the list\n         * If checkAndCombine returns true, the collider was successfully merged and should be thrown away\n         * @param current current collider to test\n         * @param colliders List of colliders to consider merging with\n         * @param maxLookBack The amount of colliders to look back for combination\n         * @returns false when no combination found, true when successfully combined\n         */\n        const checkAndCombine = (current, colliders, maxLookBack = this.meshingLookBehind) => {\n            if (!current) {\n                return false;\n            }\n            // walk backwards through the list of colliders and combine with the first that shares an edge\n            for (let i = colliders.length - 1; i >= 0; i--) {\n                if (maxLookBack-- < 0) {\n                    // blunt the O(n^2) algorithm a bit\n                    return false;\n                }\n                const prev = colliders[i];\n                if (shareEdges(prev, current)) {\n                    colliders[i] = prev.combine(current);\n                    return true;\n                }\n            }\n            return false;\n        };\n        // ? configurable bias perhaps, horizontal strips vs. vertical ones\n        // Bad tile collider packing algorithm\n        for (let i = 0; i < this.columns; i++) {\n            // Scan column for colliders\n            for (let j = 0; j < this.rows; j++) {\n                const tile = this.tiles[i + j * this.columns];\n                // Current tile in column is solid build up current collider\n                if (tile.solid) {\n                    // Use custom collider otherwise bounding box\n                    if (tile.getColliders().length > 0) {\n                        // tile with custom collider interrupting the current run\n                        for (const collider of tile.getColliders()) {\n                            const originalOffset = this._getOrSetColliderOriginalOffset(collider);\n                            collider.offset = vec(tile.x * this.tileWidth * this.scale.x, tile.y * this.tileHeight * this.scale.y).add(originalOffset);\n                            collider.owner = this;\n                            this._composite.addCollider(collider);\n                        }\n                        //we push any current collider before nulling the current run\n                        if (current && !checkAndCombine(current, colliders)) {\n                            colliders.push(current);\n                        }\n                        current = null;\n                        // Use the bounding box\n                    }\n                    else {\n                        if (!current) {\n                            // no current run, start one\n                            current = tile.defaultGeometry;\n                        }\n                        else {\n                            // combine with current run\n                            current = current.combine(tile.defaultGeometry);\n                        }\n                    }\n                }\n                else {\n                    // Not solid skip and cut off the current collider\n                    // End of run check and combine\n                    if (current && !checkAndCombine(current, colliders)) {\n                        colliders.push(current);\n                    }\n                    current = null;\n                }\n            }\n            // After a column is complete check to see if it can be merged into the last one\n            // Eno of run check and combine\n            if (current && !checkAndCombine(current, colliders)) {\n                // else new collider if no combination\n                colliders.push(current);\n            }\n            current = null;\n        }\n        for (const c of colliders) {\n            const collider = Shape.Box(c.width, c.height, Vector.Zero, vec(c.left - this.pos.x, c.top - this.pos.y));\n            collider.owner = this;\n            this._composite.addCollider(collider);\n        }\n        this.collider.update();\n        // Notify that colliders have been updated\n        this.collider.$colliderAdded.notifyAll(this._composite);\n    }\n    /**\n     * Returns the {@apilink Tile} by index (row major order)\n     *\n     * Returns null if out of bounds\n     */\n    getTileByIndex(index) {\n        var _a;\n        return (_a = this.tiles[index]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Returns the {@apilink Tile} by its x and y integer coordinates\n     *\n     * Returns null if out of bounds\n     *\n     * For example, if I want the tile in fifth column (x), and second row (y):\n     * `getTile(4, 1)` 0 based, so 0 is the first in row/column\n     */\n    getTile(x, y) {\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\n            return null;\n        }\n        return this.tiles[x + y * this.columns];\n    }\n    /**\n     * Returns the {@apilink Tile} by testing a point in world coordinates,\n     * returns `null` if no Tile was found.\n     */\n    getTileByPoint(point) {\n        const { x, y } = this._getTileCoordinates(point);\n        const tile = this.getTile(x, y);\n        if (x >= 0 && y >= 0 && x < this.columns && y < this.rows && tile) {\n            return tile;\n        }\n        return null;\n    }\n    _getTileCoordinates(point) {\n        // Convert to Tile Space point\n        point = this.transform.applyInverse(point);\n        const x = Math.floor(point.x / this.tileWidth);\n        const y = Math.floor(point.y / this.tileHeight);\n        return { x, y };\n    }\n    getRows() {\n        return this._rows;\n    }\n    getColumns() {\n        return this._cols;\n    }\n    /**\n     * Returns the on screen tiles for a tilemap, this will overshoot by a small amount because of the internal quad tree data structure.\n     *\n     * Useful if you need to perform specific logic on onscreen tiles\n     */\n    getOnScreenTiles() {\n        let worldBounds = this._engine.screen.getWorldBounds();\n        const maybeParallax = this.get(ParallaxComponent);\n        if (maybeParallax && this.isInitialized) {\n            let pos = this.pos;\n            const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\n            const parallaxOffset = this._engine.currentScene.camera.pos.scale(oneMinusFactor);\n            pos = pos.sub(parallaxOffset);\n            // adjust world bounds by parallax factor\n            worldBounds = worldBounds.translate(pos);\n        }\n        const bounds = this.transform.coordPlane === CoordPlane.Screen ? this._engine.screen.getScreenBounds() : worldBounds;\n        const topLeft = this._getTileCoordinates(bounds.topLeft);\n        const topRight = this._getTileCoordinates(bounds.topRight);\n        const bottomRight = this._getTileCoordinates(bounds.bottomRight);\n        const bottomLeft = this._getTileCoordinates(bounds.bottomLeft);\n        const tileStartX = Math.min(clamp(topLeft.x, 0, this.columns - 1), clamp(topRight.x, 0, this.columns - 1));\n        const tileStartY = Math.min(clamp(topLeft.y, 0, this.rows - 1), clamp(topRight.y, 0, this.rows - 1));\n        const tileEndX = Math.max(clamp(bottomRight.x, 0, this.columns - 1), clamp(bottomLeft.x, 0, this.columns - 1));\n        const tileEndY = Math.max(clamp(bottomRight.y, 0, this.rows - 1), clamp(bottomLeft.y, 0, this.rows - 1));\n        const tiles = [];\n        for (let x = tileStartX; x <= tileEndX; x++) {\n            for (let y = tileStartY; y <= tileEndY; y++) {\n                tiles.push(this.getTile(x, y));\n            }\n        }\n        return tiles;\n    }\n    /**\n     * @internal\n     */\n    _processPointerToObject(receiver) {\n        this._pointerEventDispatcher.processPointerToObject(receiver, this.tiles);\n    }\n    /**\n     * @internal\n     */\n    _dispatchPointerEvents(receiver) {\n        this._pointerEventDispatcher.dispatchEvents(receiver, this.tiles);\n    }\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this.onPreUpdate(engine, elapsed);\n        this.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        // Update colliders\n        if (!this._oldPos.equals(this.pos) || this._oldRotation !== this.rotation || !this._oldScale.equals(this.scale)) {\n            this.flagCollidersDirty();\n            this.flagTilesDirty();\n        }\n        if (this._collidersDirty) {\n            this._collidersDirty = false;\n            this._updateColliders();\n        }\n        // Clear last frame's events\n        this._pointerEventDispatcher.clear();\n        this._token++;\n        this.pos.clone(this._oldPos);\n        this._oldRotation = this.rotation;\n        this.scale.clone(this._oldScale);\n        this.transform.pos = this.pos;\n        this.onPostUpdate(engine, elapsed);\n        this.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n    }\n    /**\n     * Draws the tile map to the screen. Called by the {@apilink Scene}.\n     * @param ctx ExcaliburGraphicsContext\n     * @param elapsed  The number of milliseconds since the last draw\n     */\n    draw(ctx, elapsed) {\n        if (!this.isInitialized) {\n            return;\n        }\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this)); // TODO fix event\n        let graphics, graphicsIndex, graphicsLen;\n        const tiles = this.getOnScreenTiles();\n        for (let i = 0; i < tiles.length; i++) {\n            const tile = tiles[i];\n            // get non-negative tile sprites\n            const offsets = tile.getGraphicsOffsets();\n            graphics = tile.getGraphics();\n            for (graphicsIndex = 0, graphicsLen = graphics.length; graphicsIndex < graphicsLen; graphicsIndex++) {\n                // draw sprite, warning if sprite doesn't exist\n                const graphic = graphics[graphicsIndex];\n                const offset = offsets[graphicsIndex];\n                if (graphic) {\n                    if (hasGraphicsTick(graphic)) {\n                        graphic === null || graphic === void 0 ? void 0 : graphic.tick(elapsed, this._token);\n                    }\n                    const offsetY = this.renderFromTopOfGraphic ? 0 : graphic.height - this.tileHeight;\n                    graphic.draw(ctx, tile.x * this.tileWidth + offset.x, tile.y * this.tileHeight - offsetY + offset.y);\n                }\n            }\n        }\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n    }\n    debug(gfx, debugFlags) {\n        const { showAll, showGrid, gridColor, gridWidth, showSolidBounds: showColliderBounds, solidBoundsColor: colliderBoundsColor, showColliderGeometry } = debugFlags.tilemap;\n        const { geometryColor, geometryLineWidth, geometryPointSize } = debugFlags.collider;\n        const width = this.tileWidth * this.columns * this.scale.x;\n        const height = this.tileHeight * this.rows * this.scale.y;\n        const pos = this.pos;\n        if (showGrid || showAll) {\n            for (let r = 0; r < this.rows + 1; r++) {\n                const yOffset = vec(0, r * this.tileHeight * this.scale.y);\n                gfx.drawLine(pos.add(yOffset), pos.add(vec(width, yOffset.y)), gridColor, gridWidth);\n            }\n            for (let c = 0; c < this.columns + 1; c++) {\n                const xOffset = vec(c * this.tileWidth * this.scale.x, 0);\n                gfx.drawLine(pos.add(xOffset), pos.add(vec(xOffset.x, height)), gridColor, gridWidth);\n            }\n        }\n        if (showAll || showColliderBounds || showColliderGeometry) {\n            const colliders = this._composite.getColliders();\n            gfx.save();\n            gfx.translate(this.pos.x, this.pos.y);\n            gfx.scale(this.scale.x, this.scale.y);\n            for (const collider of colliders) {\n                const bounds = collider.localBounds;\n                const pos = collider.worldPos.sub(this.pos);\n                if (showColliderBounds) {\n                    gfx.drawRectangle(pos, bounds.width, bounds.height, colliderBoundsColor);\n                }\n            }\n            gfx.restore();\n            if (showColliderGeometry) {\n                for (const collider of colliders) {\n                    collider.debug(gfx, geometryColor, { lineWidth: geometryLineWidth, pointSize: geometryPointSize });\n                }\n            }\n        }\n        if (showAll || showColliderBounds) {\n            gfx.save();\n            gfx.z = 999;\n            if (showColliderBounds) {\n                for (let i = 0; i < this.tiles.length; i++) {\n                    this.tiles[i].bounds.draw(gfx);\n                }\n            }\n            gfx.restore();\n        }\n    }\n}\n/**\n * TileMap Tile\n *\n * A light-weight object that occupies a space in a collision map. Generally\n * created by a {@apilink TileMap}.\n *\n * Tiles can draw multiple sprites. Note that the order of drawing is the order\n * of the sprites in the array so the last one will be drawn on top. You can\n * use transparency to create layers this way.\n */\nclass Tile {\n    /**\n     * Return the world position of the top left corner of the tile\n     */\n    get pos() {\n        if (this._posDirty) {\n            this._recalculate();\n            this._posDirty = false;\n        }\n        return this._pos;\n    }\n    /**\n     * Width of the tile in pixels\n     */\n    get width() {\n        return this._width;\n    }\n    /**\n     * Height of the tile in pixels\n     */\n    get height() {\n        return this._height;\n    }\n    /**\n     * Wether this tile should be treated as solid by the tilemap\n     */\n    get solid() {\n        return this._solid;\n    }\n    /**\n     * Wether this tile should be treated as solid by the tilemap\n     */\n    set solid(val) {\n        var _a;\n        (_a = this.map) === null || _a === void 0 ? void 0 : _a.flagCollidersDirty();\n        this._solid = val;\n    }\n    /**\n     * Current list of graphics for this tile\n     */\n    getGraphics() {\n        return this._graphics;\n    }\n    /**\n     * Current list of offsets for this tile's graphics\n     */\n    getGraphicsOffsets() {\n        return this._offsets;\n    }\n    /**\n     * Add another {@apilink Graphic} to this TileMap tile\n     * @param graphic\n     */\n    addGraphic(graphic, options) {\n        this._graphics.push(graphic);\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            this._offsets.push(options.offset);\n        }\n        else {\n            this._offsets.push(Vector.Zero);\n        }\n    }\n    /**\n     * Remove an instance of a {@apilink Graphic} from this tile\n     */\n    removeGraphic(graphic) {\n        const index = this._graphics.indexOf(graphic);\n        if (index > -1) {\n            this._graphics.splice(index, 1);\n            this._offsets.splice(index, 1);\n        }\n    }\n    /**\n     * Clear all graphics from this tile\n     */\n    clearGraphics() {\n        this._graphics.length = 0;\n        this._offsets.length = 0;\n    }\n    /**\n     * Returns the list of colliders\n     */\n    getColliders() {\n        return this._colliders;\n    }\n    /**\n     * Adds a custom collider to the {@apilink Tile} to use instead of it's bounds\n     *\n     * If no collider is set but {@apilink Tile.solid} is set, the tile bounds are used as a collider.\n     *\n     * **Note!** the {@apilink Tile.solid} must be set to true for it to act as a \"fixed\" collider\n     * @param collider\n     */\n    addCollider(collider) {\n        this._colliders.push(collider);\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Removes a collider from the {@apilink Tile}\n     * @param collider\n     */\n    removeCollider(collider) {\n        const index = this._colliders.indexOf(collider);\n        if (index > -1) {\n            this._colliders.splice(index, 1);\n        }\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Clears all colliders from the {@apilink Tile}\n     */\n    clearColliders() {\n        this._colliders.length = 0;\n        this.map.flagCollidersDirty();\n    }\n    constructor(options) {\n        var _a, _b;\n        this._posDirty = false;\n        this.events = new EventEmitter();\n        this._solid = false;\n        this._graphics = [];\n        this._offsets = [];\n        /**\n         * Current list of colliders for this tile\n         */\n        this._colliders = [];\n        /**\n         * Arbitrary data storage per tile, useful for any game specific data\n         */\n        this.data = new Map();\n        this.x = options.x;\n        this.y = options.y;\n        this.map = options.map;\n        this._width = options.map.tileWidth * this.map.scale.x;\n        this._height = options.map.tileHeight * this.map.scale.y;\n        this.solid = (_a = options.solid) !== null && _a !== void 0 ? _a : this.solid;\n        this._graphics = (_b = options.graphics) !== null && _b !== void 0 ? _b : [];\n        this._recalculate();\n    }\n    flagDirty() {\n        return (this._posDirty = true);\n    }\n    _recalculate() {\n        const geometryPos = this.map.pos.add(vec(this.x * this.map.tileWidth, this.y * this.map.tileHeight));\n        this._geometry = new BoundingBox(geometryPos.x, geometryPos.y, geometryPos.x + this.map.tileWidth, geometryPos.y + this.map.tileHeight);\n        this._width = this.map.tileWidth * this.map.scale.x;\n        this._height = this.map.tileHeight * this.map.scale.y;\n        this._pos = this.map.pos.add(vec(this.x * this._width, this.y * this._height));\n        this._bounds = new BoundingBox(this._pos.x, this._pos.y, this._pos.x + this._width, this._pos.y + this._height);\n        if (this.map.rotation) {\n            this._bounds = this._bounds.rotate(this.map.rotation, this.map.pos);\n        }\n        this._posDirty = false;\n    }\n    /**\n     * Tile bounds in world space\n     */\n    get bounds() {\n        if (this._posDirty) {\n            this._recalculate();\n        }\n        return this._bounds;\n    }\n    get defaultGeometry() {\n        return this._geometry;\n    }\n    /**\n     * Tile position in world space\n     */\n    get center() {\n        if (this._posDirty) {\n            this._recalculate();\n        }\n        return new Vector(this._pos.x + this._width / 2, this._pos.y + this._height / 2);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        if (handler) {\n            this.events.off(eventName, handler);\n        }\n        else {\n            this.events.off(eventName);\n        }\n    }\n}\n\n;// ./Camera.ts\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Container to house convenience strategy methods\n * @internal\n */\nclass StrategyContainer {\n    constructor(camera) {\n        this.camera = camera;\n    }\n    /**\n     * Creates and adds the {@apilink LockCameraToActorStrategy} on the current camera.\n     * @param actor The actor to lock the camera to\n     */\n    lockToActor(actor) {\n        this.camera.addStrategy(new LockCameraToActorStrategy(actor));\n    }\n    /**\n     * Creates and adds the {@apilink LockCameraToActorAxisStrategy} on the current camera\n     * @param actor The actor to lock the camera to\n     * @param axis The axis to follow the actor on\n     */\n    lockToActorAxis(actor, axis) {\n        this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\n    }\n    /**\n     * Creates and adds the {@apilink ElasticToActorStrategy} on the current camera\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n     * correct and bounce around the target\n     * @param actor Target actor to elastically follow\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n     */\n    elasticToActor(actor, cameraElasticity, cameraFriction) {\n        this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\n    }\n    /**\n     * Creates and adds the {@apilink RadiusAroundActorStrategy} on the current camera\n     * @param actor Target actor to follow when it is \"radius\" pixels away\n     * @param radius Number of pixels away before the camera will follow\n     */\n    radiusAroundActor(actor, radius) {\n        this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\n    }\n    /**\n     * Creates and adds the {@apilink LimitCameraBoundsStrategy} on the current camera\n     * @param box The bounding box to limit the camera to.\n     */\n    limitCameraBounds(box) {\n        this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\n    }\n}\n/**\n * Camera axis enum\n */\nvar Axis;\n(function (Axis) {\n    Axis[Axis[\"X\"] = 0] = \"X\";\n    Axis[Axis[\"Y\"] = 1] = \"Y\";\n})(Axis || (Axis = {}));\n/**\n * Lock a camera to the exact x/y position of an actor.\n */\nclass LockCameraToActorStrategy {\n    constructor(target) {\n        this.target = target;\n        this.action = (target, camera, engine, elapsed) => {\n            const center = target.center;\n            return center;\n        };\n    }\n}\n/**\n * Lock a camera to a specific axis around an actor.\n */\nclass LockCameraToActorAxisStrategy {\n    constructor(target, axis) {\n        this.target = target;\n        this.axis = axis;\n        this.action = (target, cam, _eng, elapsed) => {\n            const center = target.center;\n            const currentFocus = cam.getFocus();\n            if (this.axis === Axis.X) {\n                return new Vector(center.x, currentFocus.y);\n            }\n            else {\n                return new Vector(currentFocus.x, center.y);\n            }\n        };\n    }\n}\n/**\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\n */\nclass ElasticToActorStrategy {\n    /**\n     * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n     * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n     * correct and bounce around the target\n     * @param target Target actor to elastically follow\n     * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n     * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n     */\n    constructor(target, cameraElasticity, cameraFriction) {\n        this.target = target;\n        this.cameraElasticity = cameraElasticity;\n        this.cameraFriction = cameraFriction;\n        this.action = (target, cam, _eng, elapsed) => {\n            const position = target.center;\n            let focus = cam.getFocus();\n            let cameraVel = cam.vel.clone();\n            // Calculate the stretch vector, using the spring equation\n            // F = kX\n            // https://en.wikipedia.org/wiki/Hooke's_law\n            // Apply to the current camera velocity\n            const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\n            cameraVel = cameraVel.add(stretch);\n            // Calculate the friction (-1 to apply a force in the opposition of motion)\n            // Apply to the current camera velocity\n            const friction = cameraVel.scale(-1).scale(this.cameraFriction);\n            cameraVel = cameraVel.add(friction);\n            // Update position by velocity deltas\n            focus = focus.add(cameraVel);\n            return focus;\n        };\n    }\n}\nclass RadiusAroundActorStrategy {\n    /**\n     *\n     * @param target Target actor to follow when it is \"radius\" pixels away\n     * @param radius Number of pixels away before the camera will follow\n     */\n    constructor(target, radius) {\n        this.target = target;\n        this.radius = radius;\n        this.action = (target, cam, _eng, elapsed) => {\n            const position = target.center;\n            const focus = cam.getFocus();\n            const direction = position.sub(focus);\n            const distance = direction.magnitude;\n            if (distance >= this.radius) {\n                const offset = distance - this.radius;\n                return focus.add(direction.normalize().scale(offset));\n            }\n            return focus;\n        };\n    }\n}\n/**\n * Prevent a camera from going beyond the given camera dimensions.\n */\nclass LimitCameraBoundsStrategy {\n    constructor(target) {\n        this.target = target;\n        /**\n         * Useful for limiting the camera to a {@apilink TileMap}'s dimensions, or a specific area inside the map.\n         *\n         * Note that this strategy does not perform any movement by itself.\n         * It only sets the camera position to within the given bounds when the camera has gone beyond them.\n         * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\n         *\n         * Make sure that the camera bounds are at least as large as the viewport size.\n         * @param target The bounding box to limit the camera to\n         */\n        this.boundSizeChecked = false; // Check and warn only once\n        this.action = (target, cam, _eng, elapsed) => {\n            const focus = cam.getFocus();\n            if (!this.boundSizeChecked) {\n                if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\n                    Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\n                }\n                this.boundSizeChecked = true;\n            }\n            let focusX = focus.x;\n            let focusY = focus.y;\n            if (focus.x < target.left + _eng.halfDrawWidth) {\n                focusX = target.left + _eng.halfDrawWidth;\n            }\n            else if (focus.x > target.right - _eng.halfDrawWidth) {\n                focusX = target.right - _eng.halfDrawWidth;\n            }\n            if (focus.y < target.top + _eng.halfDrawHeight) {\n                focusY = target.top + _eng.halfDrawHeight;\n            }\n            else if (focus.y > target.bottom - _eng.halfDrawHeight) {\n                focusY = target.bottom - _eng.halfDrawHeight;\n            }\n            return vec(focusX, focusY);\n        };\n    }\n}\nconst CameraEvents = {\n    Initialize: 'initialize',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate'\n};\n/**\n * Cameras\n *\n * {@apilink Camera} is the base class for all Excalibur cameras. Cameras are used\n * to move around your game and set focus. They are used to determine\n * what is \"off screen\" and can be used to scale the game.\n *\n */\nclass Camera {\n    constructor() {\n        this.events = new EventEmitter();\n        this.transform = AffineMatrix.identity();\n        this.inverse = AffineMatrix.identity();\n        this._cameraStrategies = [];\n        this.strategy = new StrategyContainer(this);\n        /**\n         * Get or set current zoom of the camera, defaults to 1\n         */\n        this._z = 1;\n        /**\n         * Get or set rate of change in zoom, defaults to 0\n         */\n        this.dz = 0;\n        /**\n         * Get or set zoom acceleration\n         */\n        this.az = 0;\n        /**\n         * Current rotation of the camera\n         */\n        this.rotation = 0;\n        this._angularVelocity = 0;\n        this._posChanged = false;\n        this._pos = new WatchVector(Vector.Zero, () => {\n            this._posChanged = true;\n        });\n        /**\n         * Interpolated camera position if more draws are running than updates\n         *\n         * Enabled when `Engine.fixedUpdateFps` is enabled, in all other cases this will be the same as pos\n         */\n        this.drawPos = this.pos.clone();\n        this._oldPos = this.pos.clone();\n        /**\n         * Get or set the camera's velocity\n         */\n        this.vel = Vector.Zero;\n        /**\n         * Get or set the camera's acceleration\n         */\n        this.acc = Vector.Zero;\n        this._cameraMoving = false;\n        this._currentLerpTime = 0;\n        this._lerpDuration = 1000; // 1 second\n        this._lerpStart = null;\n        this._lerpEnd = null;\n        //camera effects\n        this._isShaking = false;\n        this._shakeMagnitudeX = 0;\n        this._shakeMagnitudeY = 0;\n        this._shakeDuration = 0;\n        this._elapsedShakeTime = 0;\n        this._xShake = 0;\n        this._yShake = 0;\n        this._isZooming = false;\n        this._zoomStart = 1;\n        this._zoomEnd = 1;\n        this._currentZoomTime = 0;\n        this._zoomDuration = 0;\n        this._zoomEasing = EasingFunctions.EaseInOutCubic;\n        this._easing = EasingFunctions.EaseInOutCubic;\n        this._halfWidth = 0;\n        this._halfHeight = 0;\n        this._viewport = null;\n        this._isInitialized = false;\n        this._snapPos = vec(0, 0);\n    }\n    get zoom() {\n        return this._z;\n    }\n    set zoom(val) {\n        this._z = val;\n        if (this._engine) {\n            this._halfWidth = this._engine.halfDrawWidth;\n            this._halfHeight = this._engine.halfDrawHeight;\n        }\n    }\n    /**\n     * Get or set the camera's angular velocity\n     */\n    get angularVelocity() {\n        return this._angularVelocity;\n    }\n    set angularVelocity(value) {\n        this._angularVelocity = value;\n    }\n    /**\n     * Get or set the camera's position\n     */\n    get pos() {\n        return this._pos;\n    }\n    set pos(vec) {\n        this._posChanged = true;\n        this._pos = new WatchVector(vec, () => {\n            this._posChanged = true;\n        });\n    }\n    /**\n     * Has the position changed since the last update\n     */\n    hasChanged() {\n        return this._posChanged;\n    }\n    /**\n     * Get the camera's x position\n     */\n    get x() {\n        return this.pos.x;\n    }\n    /**\n     * Set the camera's x position (cannot be set when following an {@apilink Actor} or when moving)\n     */\n    set x(value) {\n        if (!this._follow && !this._cameraMoving) {\n            this.pos = vec(value, this.pos.y);\n        }\n    }\n    /**\n     * Get the camera's y position\n     */\n    get y() {\n        return this.pos.y;\n    }\n    /**\n     * Set the camera's y position (cannot be set when following an {@apilink Actor} or when moving)\n     */\n    set y(value) {\n        if (!this._follow && !this._cameraMoving) {\n            this.pos = vec(this.pos.x, value);\n        }\n    }\n    /**\n     * Get or set the camera's x velocity\n     */\n    get dx() {\n        return this.vel.x;\n    }\n    set dx(value) {\n        this.vel = vec(value, this.vel.y);\n    }\n    /**\n     * Get or set the camera's y velocity\n     */\n    get dy() {\n        return this.vel.y;\n    }\n    set dy(value) {\n        this.vel = vec(this.vel.x, value);\n    }\n    /**\n     * Get or set the camera's x acceleration\n     */\n    get ax() {\n        return this.acc.x;\n    }\n    set ax(value) {\n        this.acc = vec(value, this.acc.y);\n    }\n    /**\n     * Get or set the camera's y acceleration\n     */\n    get ay() {\n        return this.acc.y;\n    }\n    set ay(value) {\n        this.acc = vec(this.acc.x, value);\n    }\n    /**\n     * Returns the focal point of the camera, a new point giving the x and y position of the camera\n     */\n    getFocus() {\n        return this.pos;\n    }\n    /**\n     * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\n     * @param pos The target position to move to\n     * @param duration The duration in milliseconds the move should last\n     * @param [easingFn] An optional easing function ({@apilink EasingFunctions.EaseInOutCubic} by default)\n     * @returns A {@apilink Promise} that resolves when movement is finished, including if it's interrupted.\n     *          The {@apilink Promise} value is the {@apilink Vector} of the target position. It will be rejected if a move cannot be made.\n     */\n    move(pos, duration, easingFn = EasingFunctions.EaseInOutCubic) {\n        if (typeof easingFn !== 'function') {\n            throw 'Please specify an EasingFunction';\n        }\n        // cannot move when following an actor\n        if (this._follow) {\n            return Promise.reject(pos);\n        }\n        // resolve existing promise, if any\n        if (this._lerpPromise && this._lerpResolve) {\n            this._lerpResolve(pos);\n        }\n        this._lerpPromise = new Promise((resolve) => {\n            this._lerpResolve = resolve;\n        });\n        this._lerpStart = this.getFocus().clone();\n        this._lerpDuration = duration;\n        this._lerpEnd = pos;\n        this._currentLerpTime = 0;\n        this._cameraMoving = true;\n        this._easing = easingFn;\n        return this._lerpPromise;\n    }\n    /**\n     * Sets the camera to shake at the specified magnitudes for the specified duration\n     * @param magnitudeX  The x magnitude of the shake\n     * @param magnitudeY  The y magnitude of the shake\n     * @param duration    The duration of the shake in milliseconds\n     */\n    shake(magnitudeX, magnitudeY, duration) {\n        this._isShaking = true;\n        this._shakeMagnitudeX = magnitudeX;\n        this._shakeMagnitudeY = magnitudeY;\n        this._shakeDuration = duration;\n    }\n    /**\n     * Zooms the camera in or out by the specified scale over the specified duration.\n     * If no duration is specified, it take effect immediately.\n     * @param scale    The scale of the zoom\n     * @param duration The duration of the zoom in milliseconds\n     */\n    zoomOverTime(scale, duration = 0, easingFn = EasingFunctions.EaseInOutCubic) {\n        this._zoomPromise = new Promise((resolve) => {\n            this._zoomResolve = resolve;\n        });\n        if (duration) {\n            this._isZooming = true;\n            this._zoomEasing = easingFn;\n            this._currentZoomTime = 0;\n            this._zoomDuration = duration;\n            this._zoomStart = this.zoom;\n            this._zoomEnd = scale;\n        }\n        else {\n            this._isZooming = false;\n            this.zoom = scale;\n            return Promise.resolve(true);\n        }\n        return this._zoomPromise;\n    }\n    /**\n     * Gets the bounding box of the viewport of this camera in world coordinates\n     */\n    get viewport() {\n        if (this._viewport) {\n            return this._viewport;\n        }\n        return new BoundingBox(0, 0, 0, 0);\n    }\n    /**\n     * Adds a new camera strategy to this camera\n     * @param cameraStrategy Instance of an {@apilink CameraStrategy}\n     */\n    addStrategy(cameraStrategy) {\n        this._cameraStrategies.push(cameraStrategy);\n    }\n    /**\n     * Removes a camera strategy by reference\n     * @param cameraStrategy Instance of an {@apilink CameraStrategy}\n     */\n    removeStrategy(cameraStrategy) {\n        removeItemFromArray(cameraStrategy, this._cameraStrategies);\n    }\n    /**\n     * Clears all camera strategies from the camera\n     */\n    clearAllStrategies() {\n        this._cameraStrategies.length = 0;\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.events.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before a scene is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Overridable\n    }\n    /**\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.events.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Overridable\n    }\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    _initialize(engine) {\n        if (!this.isInitialized) {\n            this._engine = engine;\n            this._screen = engine.screen;\n            const currentRes = this._screen.contentArea;\n            let center = vec(currentRes.width / 2, currentRes.height / 2);\n            if (!this._engine.loadingComplete) {\n                // If there was a loading screen, we peek the configured resolution\n                const res = this._screen.peekResolution();\n                if (res) {\n                    center = vec(res.width / 2, res.height / 2);\n                }\n            }\n            this._halfWidth = center.x;\n            this._halfHeight = center.y;\n            // If the user has not set the camera pos, apply default center screen position\n            if (!this._posChanged) {\n                this.pos = center;\n            }\n            this.pos.clone(this.drawPos);\n            // First frame bootstrap\n            // Ensure camera tx is correct\n            // Run update twice to ensure properties are init'd\n            this.updateTransform(this.pos);\n            // Run strategies for first frame\n            this.runStrategies(engine, engine.clock.elapsed());\n            // Setup the first frame viewport\n            this.updateViewport();\n            // It's important to update the camera after strategies\n            // This prevents jitter\n            this.updateTransform(this.pos);\n            this.pos.clone(this._oldPos);\n            this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     */\n    onInitialize(engine) {\n        // Overridable\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    runStrategies(engine, elapsed) {\n        for (const s of this._cameraStrategies) {\n            this.pos = s.action.call(s, s.target, this, engine, elapsed);\n        }\n    }\n    updateViewport() {\n        // recalculate viewport\n        this._viewport = new BoundingBox(this.x - this._halfWidth, this.y - this._halfHeight, this.x + this._halfWidth, this.y + this._halfHeight);\n    }\n    update(engine, elapsed) {\n        this._initialize(engine);\n        this._preupdate(engine, elapsed);\n        this.pos.clone(this._oldPos);\n        // Update placements based on linear algebra\n        this.pos = this.pos.add(this.vel.scale(elapsed / 1000));\n        this.zoom += (this.dz * elapsed) / 1000;\n        this.vel = this.vel.add(this.acc.scale(elapsed / 1000));\n        this.dz += (this.az * elapsed) / 1000;\n        this.rotation += (this.angularVelocity * elapsed) / 1000;\n        if (this._isZooming) {\n            if (this._currentZoomTime < this._zoomDuration) {\n                const zoomEasing = this._zoomEasing;\n                const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\n                this.zoom = newZoom;\n                this._currentZoomTime += elapsed;\n            }\n            else {\n                this._isZooming = false;\n                this.zoom = this._zoomEnd;\n                this._currentZoomTime = 0;\n                this._zoomResolve(true);\n            }\n        }\n        if (this._cameraMoving) {\n            if (this._currentLerpTime < this._lerpDuration) {\n                const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n                const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\n                this.pos = lerpPoint;\n                this._currentLerpTime += elapsed;\n            }\n            else {\n                this.pos = this._lerpEnd;\n                const end = this._lerpEnd.clone();\n                this._lerpStart = null;\n                this._lerpEnd = null;\n                this._currentLerpTime = 0;\n                this._cameraMoving = false;\n                // Order matters here, resolve should be last so any chain promises have a clean slate\n                this._lerpResolve(end);\n            }\n        }\n        if (this._isDoneShaking()) {\n            this._isShaking = false;\n            this._elapsedShakeTime = 0;\n            this._shakeMagnitudeX = 0;\n            this._shakeMagnitudeY = 0;\n            this._shakeDuration = 0;\n            this._xShake = 0;\n            this._yShake = 0;\n        }\n        else {\n            this._elapsedShakeTime += elapsed;\n            this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\n            this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\n        }\n        this.runStrategies(engine, elapsed);\n        this.updateViewport();\n        // It's important to update the camera after strategies\n        // This prevents jitter\n        this.updateTransform(this.pos);\n        this._postupdate(engine, elapsed);\n        this._posChanged = false;\n    }\n    /**\n     * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\n     * @param ctx Canvas context to apply transformations\n     */\n    draw(ctx) {\n        // default to the current position\n        this.pos.clone(this.drawPos);\n        // interpolation if fixed update is on\n        // must happen on the draw, because more draws are potentially happening than updates\n        if (this._engine.fixedUpdateTimestep) {\n            const blend = this._engine.currentFrameLagMs / this._engine.fixedUpdateTimestep;\n            const interpolatedPos = this.pos.scale(blend).add(this._oldPos.scale(1.0 - blend));\n            interpolatedPos.clone(this.drawPos);\n            this.updateTransform(interpolatedPos);\n        }\n        // Snap camera to pixel\n        if (ctx.snapToPixel) {\n            const snapPos = this.drawPos.clone(this._snapPos);\n            snapPos.x = ~~(snapPos.x + pixelSnapEpsilon * sign(snapPos.x));\n            snapPos.y = ~~(snapPos.y + pixelSnapEpsilon * sign(snapPos.y));\n            snapPos.clone(this.drawPos);\n            this.updateTransform(snapPos);\n        }\n        ctx.multiply(this.transform);\n    }\n    updateTransform(pos) {\n        // center the camera\n        const newCanvasWidth = this._screen.resolution.width / this.zoom;\n        const newCanvasHeight = this._screen.resolution.height / this.zoom;\n        const cameraPos = vec(-pos.x + newCanvasWidth / 2 + this._xShake, -pos.y + newCanvasHeight / 2 + this._yShake);\n        // Calculate camera transform\n        this.transform.reset();\n        this.transform.scale(this.zoom, this.zoom);\n        // rotate about the focus\n        this.transform.translate(newCanvasWidth / 2, newCanvasHeight / 2);\n        this.transform.rotate(this.rotation);\n        this.transform.translate(-newCanvasWidth / 2, -newCanvasHeight / 2);\n        this.transform.translate(cameraPos.x, cameraPos.y);\n        this.transform.inverse(this.inverse);\n    }\n    _isDoneShaking() {\n        return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\n    }\n}\n\n;// ./Trigger.ts\n\n\n\n\nconst TriggerEvents = {\n    ExitTrigger: 'exit',\n    EnterTrigger: 'enter'\n};\n/**\n * Triggers are a method of firing arbitrary code on collision. These are useful\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\n * are invisible, and can only be seen when {@apilink Trigger.visible} is set to `true`.\n */\nclass Trigger extends Actor {\n    /**\n     * @param options Trigger options\n     */\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super({ ...options });\n        this.events = new EventEmitter();\n        this.filter = (_a = options.filter) !== null && _a !== void 0 ? _a : (() => true);\n        this.repeat = (_b = options.repeat) !== null && _b !== void 0 ? _b : -1;\n        this.action = (_c = options.action) !== null && _c !== void 0 ? _c : (() => undefined);\n        this.target = options.target;\n        this.graphics.isVisible = (_d = options.visible) !== null && _d !== void 0 ? _d : false;\n        this.body.collisionType = CollisionType.Passive;\n        this.events.on('collisionstart', ({ other: collider }) => {\n            if (!this._matchesTarget(collider.owner)) {\n                return;\n            }\n            this.events.emit('enter', new EnterTriggerEvent(this, collider.owner));\n            this._dispatchAction(collider.owner);\n            // remove trigger if its done, -1 repeat forever\n            if (this.repeat === 0) {\n                this.kill();\n            }\n        });\n        this.events.on('collisionend', ({ other: collider }) => {\n            if (this._matchesTarget(collider.owner)) {\n                this.events.emit('exit', new ExitTriggerEvent(this, collider.owner));\n            }\n        });\n    }\n    _matchesTarget(entity) {\n        return this.filter(entity) && (this.target === undefined || this.target === entity);\n    }\n    _dispatchAction(target) {\n        if (this.repeat !== 0) {\n            this.action.call(this, target);\n            this.repeat--;\n        }\n    }\n}\n\n;// ./EntityComponentSystem/Priority.ts\n/**\n * Higher priorities run earlier than others in the system update\n */\nconst SystemPriority = {\n    Highest: -Infinity,\n    Higher: -5,\n    Average: 0,\n    Lower: 5,\n    Lowest: Infinity\n};\n\n;// ./EntityComponentSystem/System.ts\n\n/**\n * Enum that determines whether to run the system in the update or draw phase\n */\nvar SystemType;\n(function (SystemType) {\n    SystemType[\"Update\"] = \"update\";\n    SystemType[\"Draw\"] = \"draw\";\n})(SystemType || (SystemType = {}));\n/**\n * An Excalibur {@apilink System} that updates entities of certain types.\n * Systems are scene specific\n *\n *\n *\n * Excalibur Systems currently require at least 1 Component type to operated\n *\n * Multiple types are declared as a type union\n * For example:\n *\n * ```typescript\n * class MySystem extends System {\n *   static priority = SystemPriority.Lowest;\n *   public readonly systemType = SystemType.Update;\n *   public query: Query<typeof TransformComponent>;\n *   constructor(public world: World) {\n *   super();\n *      this.query = this.world.query([TransformComponent]);\n *   }\n *   public update(elapsed: number) {\n *      ...\n *   }\n * }\n * ```\n */\nclass System {\n}\n/**\n * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\n * For a system to execute before all other a lower priority value (-1 for example) must be set.\n * For a system to execute after all other a higher priority value (10 for example) must be set.\n */\nSystem.priority = SystemPriority.Average;\n\n;// ./EntityComponentSystem/EntityManager.ts\n\n\n// Add/Remove entities and components\nclass EntityManager {\n    constructor(_world) {\n        this._world = _world;\n        this.entities = [];\n        this._entityIndex = {};\n        this._childAddedHandlerMap = new Map();\n        this._childRemovedHandlerMap = new Map();\n        this._createChildAddedHandler = () => (e) => {\n            this.addEntity(e);\n        };\n        this._createChildRemovedHandler = () => (e) => {\n            this.removeEntity(e, false);\n        };\n        this._entitiesToRemove = [];\n    }\n    /**\n     * Runs the entity lifecycle\n     * @param scene\n     * @param elapsed\n     */\n    updateEntities(scene, elapsed) {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            entity.update(scene.engine, elapsed);\n            if (!entity.isActive) {\n                this.removeEntity(entity);\n            }\n        }\n    }\n    findEntitiesForRemoval() {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            if (!entity.isActive) {\n                this.removeEntity(entity);\n            }\n        }\n    }\n    /**\n     * Adds an entity to be tracked by the EntityManager\n     * @param entity\n     */\n    addEntity(entity) {\n        entity.isActive = true;\n        entity.scene = this._world.scene;\n        if (entity && !this._entityIndex[entity.id]) {\n            this._entityIndex[entity.id] = entity;\n            this.entities.push(entity);\n            this._world.queryManager.addEntity(entity);\n            // if entity has children\n            entity.children.forEach((c) => {\n                c.scene = entity.scene;\n                this.addEntity(c);\n            });\n            const childAdded = this._createChildAddedHandler();\n            this._childAddedHandlerMap.set(entity, childAdded);\n            const childRemoved = this._createChildRemovedHandler();\n            this._childRemovedHandlerMap.set(entity, childRemoved);\n            entity.childrenAdded$.subscribe(childAdded);\n            entity.childrenRemoved$.subscribe(childRemoved);\n        }\n    }\n    removeEntity(idOrEntity, deferred = true) {\n        var _a, _b;\n        let id = 0;\n        if (idOrEntity instanceof Entity) {\n            id = idOrEntity.id;\n        }\n        else {\n            id = idOrEntity;\n        }\n        const entity = this._entityIndex[id];\n        if (entity && entity.isActive) {\n            entity.isActive = false;\n        }\n        if (entity && deferred) {\n            this._entitiesToRemove.push(entity);\n            return;\n        }\n        delete this._entityIndex[id];\n        if (entity) {\n            entity.scene = null;\n            removeItemFromArray(entity, this.entities);\n            this._world.queryManager.removeEntity(entity);\n            // if entity has children\n            entity.children.forEach((c) => {\n                c.scene = null;\n                this.removeEntity(c, deferred);\n            });\n            const childAddedHandler = this._childAddedHandlerMap.get(entity);\n            if (childAddedHandler) {\n                entity.childrenAdded$.unsubscribe(childAddedHandler);\n            }\n            const childRemovedHandler = this._childRemovedHandlerMap.get(entity);\n            if (childRemovedHandler) {\n                entity.childrenRemoved$.unsubscribe(childRemovedHandler);\n            }\n            // stats\n            if ((_b = (_a = this._world) === null || _a === void 0 ? void 0 : _a.scene) === null || _b === void 0 ? void 0 : _b.engine) {\n                this._world.scene.engine.stats.currFrame.actors.killed++;\n            }\n        }\n    }\n    processEntityRemovals() {\n        for (let entityIndex = 0; entityIndex < this._entitiesToRemove.length; entityIndex++) {\n            const entity = this._entitiesToRemove[entityIndex];\n            if (entity.isActive) {\n                continue;\n            }\n            this.removeEntity(entity, false);\n        }\n        this._entitiesToRemove.length = 0;\n    }\n    processComponentRemovals() {\n        for (let entityIndex = 0; entityIndex < this.entities.length; entityIndex++) {\n            const entity = this.entities[entityIndex];\n            entity.processComponentRemoval();\n        }\n    }\n    getById(id) {\n        return this._entityIndex[id];\n    }\n    getByName(name) {\n        return this.entities.filter((e) => e.name === name);\n    }\n    clear() {\n        for (let i = this.entities.length - 1; i >= 0; i--) {\n            this.removeEntity(this.entities[i]);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/Query.ts\n\n/**\n * Represents query for entities that match a list of types that is cached and observable\n *\n * Queries can be strongly typed by supplying a type union in the optional type parameter\n * ```typescript\n * const queryAB = new ex.Query<ComponentTypeA | ComponentTypeB>(['A', 'B']);\n * ```\n */\nclass Query {\n    constructor(requiredComponents) {\n        this.requiredComponents = requiredComponents;\n        this.components = new Set();\n        this.entities = [];\n        /**\n         * This fires right after the component is added\n         */\n        this.entityAdded$ = new Observable();\n        /**\n         * This fires right before the component is actually removed from the entity, it will still be available for cleanup purposes\n         */\n        this.entityRemoved$ = new Observable();\n        if (requiredComponents.length === 0) {\n            throw new Error('Cannot create query without components');\n        }\n        for (const type of requiredComponents) {\n            this.components.add(type);\n        }\n        this.id = Query.createId(requiredComponents);\n    }\n    static createId(requiredComponents) {\n        // TODO what happens if a user defines the same type name as a built in type\n        // ! TODO this could be dangerous depending on the bundler's settings for names\n        // Maybe some kind of hash function is better here?\n        return requiredComponents\n            .slice()\n            .map((c) => c.name)\n            .sort()\n            .join('-');\n    }\n    /**\n     * Potentially adds an entity to a query index, returns true if added, false if not\n     * @param entity\n     */\n    checkAndAdd(entity) {\n        if (!this.entities.includes(entity) && entity.hasAll(Array.from(this.components))) {\n            this.entities.push(entity);\n            this.entityAdded$.notifyAll(entity);\n            return true;\n        }\n        return false;\n    }\n    removeEntity(entity) {\n        const index = this.entities.indexOf(entity);\n        if (index > -1) {\n            this.entities.splice(index, 1);\n            this.entityRemoved$.notifyAll(entity);\n        }\n    }\n    /**\n     * Returns a list of entities that match the query\n     * @param sort Optional sorting function to sort entities returned from the query\n     */\n    getEntities(sort) {\n        if (sort) {\n            this.entities.sort(sort);\n        }\n        return this.entities;\n    }\n}\n\n;// ./EntityComponentSystem/TagQuery.ts\n\nclass TagQuery {\n    constructor(requiredTags) {\n        this.requiredTags = requiredTags;\n        this.tags = new Set();\n        this.entities = [];\n        /**\n         * This fires right after the component is added\n         */\n        this.entityAdded$ = new Observable();\n        /**\n         * This fires right before the component is actually removed from the entity, it will still be available for cleanup purposes\n         */\n        this.entityRemoved$ = new Observable();\n        if (requiredTags.length === 0) {\n            throw new Error('Cannot create tag query without tags');\n        }\n        for (const tag of requiredTags) {\n            this.tags.add(tag);\n        }\n        this.id = TagQuery.createId(requiredTags);\n    }\n    static createId(requiredComponents) {\n        return requiredComponents.slice().sort().join('-');\n    }\n    checkAndAdd(entity) {\n        if (!this.entities.includes(entity) && entity.hasAllTags(Array.from(this.tags))) {\n            this.entities.push(entity);\n            this.entityAdded$.notifyAll(entity);\n            return true;\n        }\n        return false;\n    }\n    removeEntity(entity) {\n        const index = this.entities.indexOf(entity);\n        if (index > -1) {\n            this.entities.splice(index, 1);\n            this.entityRemoved$.notifyAll(entity);\n        }\n    }\n    /**\n     * Returns a list of entities that match the query\n     * @param sort Optional sorting function to sort entities returned from the query\n     */\n    getEntities(sort) {\n        if (sort) {\n            this.entities.sort(sort);\n        }\n        return this.entities;\n    }\n}\n\n;// ./EntityComponentSystem/QueryManager.ts\n\n\n/**\n * The query manager is responsible for updating all queries when entities/components change\n */\nclass QueryManager {\n    constructor(_world) {\n        this._world = _world;\n        this._queries = new Map();\n        this._addComponentHandlers = new Map();\n        this._removeComponentHandlers = new Map();\n        this._componentToQueriesIndex = new Map();\n        this._tagQueries = new Map();\n        this._addTagHandlers = new Map();\n        this._removeTagHandlers = new Map();\n        this._tagToQueriesIndex = new Map();\n        this._createAddComponentHandler = (entity) => (c) => {\n            this.addComponent(entity, c);\n        };\n        this._createRemoveComponentHandler = (entity) => (c) => {\n            this.removeComponent(entity, c);\n        };\n        this._createAddTagHandler = (entity) => (tag) => {\n            this.addTag(entity, tag);\n        };\n        this._createRemoveTagHandler = (entity) => (tag) => {\n            this.removeTag(entity, tag);\n        };\n    }\n    createQuery(requiredComponents) {\n        const id = Query.createId(requiredComponents);\n        if (this._queries.has(id)) {\n            // short circuit if query is already created\n            return this._queries.get(id);\n        }\n        const query = new Query(requiredComponents);\n        this._queries.set(query.id, query);\n        // index maintenance\n        for (const component of requiredComponents) {\n            const queries = this._componentToQueriesIndex.get(component);\n            if (!queries) {\n                this._componentToQueriesIndex.set(component, [query]);\n            }\n            else {\n                queries.push(query);\n            }\n        }\n        for (const entity of this._world.entities) {\n            this.addEntity(entity);\n        }\n        return query;\n    }\n    createTagQuery(requiredTags) {\n        const id = TagQuery.createId(requiredTags);\n        if (this._tagQueries.has(id)) {\n            // short circuit if query is already created\n            return this._tagQueries.get(id);\n        }\n        const query = new TagQuery(requiredTags);\n        this._tagQueries.set(query.id, query);\n        // index maintenance\n        for (const tag of requiredTags) {\n            const queries = this._tagToQueriesIndex.get(tag);\n            if (!queries) {\n                this._tagToQueriesIndex.set(tag, [query]);\n            }\n            else {\n                queries.push(query);\n            }\n        }\n        for (const entity of this._world.entities) {\n            this.addEntity(entity);\n        }\n        return query;\n    }\n    /**\n     * Scans queries and locates any that need this entity added\n     * @param entity\n     */\n    addEntity(entity) {\n        const maybeAddComponent = this._addComponentHandlers.get(entity);\n        const maybeRemoveComponent = this._removeComponentHandlers.get(entity);\n        const addComponent = maybeAddComponent !== null && maybeAddComponent !== void 0 ? maybeAddComponent : this._createAddComponentHandler(entity);\n        const removeComponent = maybeRemoveComponent !== null && maybeRemoveComponent !== void 0 ? maybeRemoveComponent : this._createRemoveComponentHandler(entity);\n        this._addComponentHandlers.set(entity, addComponent);\n        this._removeComponentHandlers.set(entity, removeComponent);\n        const maybeAddTag = this._addTagHandlers.get(entity);\n        const maybeRemoveTag = this._removeTagHandlers.get(entity);\n        const addTag = maybeAddTag !== null && maybeAddTag !== void 0 ? maybeAddTag : this._createAddTagHandler(entity);\n        const removeTag = maybeRemoveTag !== null && maybeRemoveTag !== void 0 ? maybeRemoveTag : this._createRemoveTagHandler(entity);\n        this._addTagHandlers.set(entity, addTag);\n        this._removeTagHandlers.set(entity, removeTag);\n        for (const query of this._queries.values()) {\n            query.checkAndAdd(entity);\n        }\n        for (const tagQuery of this._tagQueries.values()) {\n            tagQuery.checkAndAdd(entity);\n        }\n        entity.componentAdded$.subscribe(addComponent);\n        entity.componentRemoved$.subscribe(removeComponent);\n        entity.tagAdded$.subscribe(addTag);\n        entity.tagRemoved$.subscribe(removeTag);\n    }\n    /**\n     * Scans queries and locates any that need this entity removed\n     * @param entity\n     */\n    removeEntity(entity) {\n        // Handle components\n        const addComponent = this._addComponentHandlers.get(entity);\n        const removeComponent = this._removeComponentHandlers.get(entity);\n        for (const query of this._queries.values()) {\n            query.removeEntity(entity);\n        }\n        if (addComponent) {\n            entity.componentAdded$.unsubscribe(addComponent);\n        }\n        if (removeComponent) {\n            entity.componentRemoved$.unsubscribe(removeComponent);\n        }\n        // Handle tags\n        const addTag = this._addTagHandlers.get(entity);\n        const removeTag = this._removeTagHandlers.get(entity);\n        for (const tagQuery of this._tagQueries.values()) {\n            tagQuery.removeEntity(entity);\n        }\n        if (addTag) {\n            entity.tagAdded$.unsubscribe(addTag);\n        }\n        if (removeTag) {\n            entity.tagRemoved$.unsubscribe(removeTag);\n        }\n    }\n    /**\n     * Updates any queries when a component is added to an entity\n     * @param entity\n     * @param component\n     */\n    addComponent(entity, component) {\n        var _a;\n        const queries = (_a = this._componentToQueriesIndex.get(component.constructor)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.checkAndAdd(entity);\n        }\n    }\n    /**\n     * Updates any queries when a component is removed from an entity\n     * @param entity\n     * @param component\n     */\n    removeComponent(entity, component) {\n        var _a;\n        const queries = (_a = this._componentToQueriesIndex.get(component.constructor)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.removeEntity(entity);\n        }\n    }\n    /**\n     * Updates any queries when a tag is added to an entity\n     * @param entity\n     * @param tag\n     */\n    addTag(entity, tag) {\n        var _a;\n        const queries = (_a = this._tagToQueriesIndex.get(tag)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.checkAndAdd(entity);\n        }\n    }\n    /**\n     * Updates any queries when a component is removed from an entity\n     * @param entity\n     * @param tag\n     */\n    removeTag(entity, tag) {\n        var _a;\n        const queries = (_a = this._tagToQueriesIndex.get(tag)) !== null && _a !== void 0 ? _a : [];\n        for (const query of queries) {\n            query.removeEntity(entity);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/SystemManager.ts\n\n\n/**\n *\n */\nfunction isSystemConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\n/**\n * The SystemManager is responsible for keeping track of all systems in a scene.\n * Systems are scene specific\n */\nclass SystemManager {\n    constructor(_world) {\n        this._world = _world;\n        /**\n         * List of systems, to add a new system call {@apilink SystemManager.addSystem}\n         */\n        this.systems = [];\n        this.initialized = false;\n    }\n    /**\n     * Get a system registered in the manager by type\n     * @param systemType\n     */\n    get(systemType) {\n        return this.systems.find((s) => s instanceof systemType);\n    }\n    /**\n     * Adds a system to the manager, it will now be updated every frame\n     * @param systemOrCtor\n     */\n    addSystem(systemOrCtor) {\n        let system;\n        if (systemOrCtor instanceof System) {\n            system = systemOrCtor;\n        }\n        else {\n            system = new systemOrCtor(this._world);\n        }\n        this.systems.push(system);\n        this.systems.sort((a, b) => a.constructor.priority - b.constructor.priority);\n        // If systems are added and the manager has already been init'd\n        // then immediately init the system\n        if (this.initialized && system.initialize) {\n            system.initialize(this._world, this._world.scene);\n        }\n    }\n    /**\n     * Removes a system from the manager, it will no longer be updated\n     * @param system\n     */\n    removeSystem(system) {\n        removeItemFromArray(system, this.systems);\n    }\n    /**\n     * Initialize all systems in the manager\n     *\n     * Systems added after initialize() will be initialized on add\n     */\n    initialize() {\n        if (!this.initialized) {\n            this.initialized = true;\n            for (const s of this.systems) {\n                if (s.initialize) {\n                    s.initialize(this._world, this._world.scene);\n                }\n            }\n        }\n    }\n    /**\n     * Updates all systems\n     * @param type whether this is an update or draw system\n     * @param scene context reference\n     * @param elapsed time in milliseconds\n     */\n    updateSystems(type, scene, elapsed) {\n        const systems = this.systems.filter((s) => s.systemType === type);\n        for (const s of systems) {\n            if (s.preupdate) {\n                s.preupdate(scene, elapsed);\n            }\n        }\n        for (const s of systems) {\n            s.update(elapsed);\n        }\n        for (const s of systems) {\n            if (s.postupdate) {\n                s.postupdate(scene, elapsed);\n            }\n        }\n    }\n    clear() {\n        for (let i = this.systems.length - 1; i >= 0; i--) {\n            this.removeSystem(this.systems[i]);\n        }\n    }\n}\n\n;// ./EntityComponentSystem/World.ts\n\n\n\n\n\n\n/**\n * The World is a self-contained entity component system for a particular context.\n */\nclass World {\n    /**\n     * The context type is passed to the system updates\n     * @param scene\n     */\n    constructor(scene) {\n        this.scene = scene;\n        this._logger = Logger.getInstance();\n        this.queryManager = new QueryManager(this);\n        this.entityManager = new EntityManager(this);\n        this.systemManager = new SystemManager(this);\n    }\n    /**\n     * Query the ECS world for entities that match your components\n     * @param requiredTypes\n     */\n    query(requiredTypes) {\n        return this.queryManager.createQuery(requiredTypes);\n    }\n    queryTags(requiredTags) {\n        return this.queryManager.createTagQuery(requiredTags);\n    }\n    /**\n     * Update systems by type and time elapsed in milliseconds\n     */\n    update(type, elapsed) {\n        if (type === SystemType.Update) {\n            this.entityManager.updateEntities(this.scene, elapsed);\n        }\n        this.systemManager.updateSystems(type, this.scene, elapsed);\n        this.entityManager.findEntitiesForRemoval();\n        this.entityManager.processComponentRemovals();\n        this.entityManager.processEntityRemovals();\n    }\n    add(entityOrSystem) {\n        if (entityOrSystem instanceof Entity) {\n            this.entityManager.addEntity(entityOrSystem);\n            return;\n        }\n        if (entityOrSystem instanceof System || isSystemConstructor(entityOrSystem)) {\n            this.systemManager.addSystem(entityOrSystem);\n            return;\n        }\n        this._logger.warn(`Could not add entity/system ${entityOrSystem.constructor.name} to Excalibur!\\n\\n` +\n            `If this looks like an Excalibur type, this can be caused by 2 versions of excalibur being included on the page.\\n\\n` +\n            `Check your bundler settings to make sure this is not the case! Excalibur has ESM & UMD bundles be sure one 1 is loaded.`);\n    }\n    /**\n     * Get a system out of the ECS world\n     */\n    get(system) {\n        return this.systemManager.get(system);\n    }\n    remove(entityOrSystem, deferred = true) {\n        if (entityOrSystem instanceof Entity) {\n            this.entityManager.removeEntity(entityOrSystem, deferred);\n            return;\n        }\n        if (entityOrSystem instanceof System) {\n            this.systemManager.removeSystem(entityOrSystem);\n            return;\n        }\n        this._logger.warn(`Could not remove entity/system ${entityOrSystem.constructor.name} to Excalibur!\\n\\n` +\n            `If this looks like an Excalibur type, this can be caused by 2 versions of excalibur being included on the page.\\n\\n` +\n            `Check your bundler settings to make sure this is not the case! Excalibur has ESM & UMD bundles be sure one 1 is loaded.`);\n    }\n    get entities() {\n        return this.entityManager.entities;\n    }\n    clearEntities() {\n        this.entityManager.clear();\n    }\n    clearSystems() {\n        this.systemManager.clear();\n    }\n}\n\n;// ./Collision/MotionSystem.ts\n\n\n\n\n\n\n\nclass MotionSystem extends System {\n    constructor(world, physics) {\n        super();\n        this.world = world;\n        this.physics = physics;\n        this.systemType = SystemType.Update;\n        this._physicsConfigDirty = false;\n        physics.$configUpdate.subscribe(() => (this._physicsConfigDirty = true));\n        this.query = this.world.query([TransformComponent, MotionComponent]);\n    }\n    update(elapsed) {\n        let transform;\n        let motion;\n        const entities = this.query.entities;\n        const substep = this.physics.config.substep;\n        for (let i = 0; i < entities.length; i++) {\n            transform = entities[i].get(TransformComponent);\n            motion = entities[i].get(MotionComponent);\n            const optionalBody = entities[i].get(BodyComponent);\n            if (this._physicsConfigDirty && optionalBody) {\n                optionalBody.updatePhysicsConfig(this.physics.config.bodies);\n            }\n            if (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.isSleeping) {\n                continue;\n            }\n            const totalAcc = motion.acc.clone();\n            if ((optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.collisionType) === CollisionType.Active && (optionalBody === null || optionalBody === void 0 ? void 0 : optionalBody.useGravity)) {\n                totalAcc.addEqual(this.physics.config.gravity);\n            }\n            // capture old transform of this entity and all of its children so that\n            // any transform properties that derived from their parents are properly captured\n            if (!entities[i].parent) {\n                this.captureOldTransformWithChildren(entities[i]);\n            }\n            // Update transform and motion based on Euler linear algebra\n            EulerIntegrator.integrate(transform, motion, totalAcc, elapsed / substep);\n        }\n        this._physicsConfigDirty = false;\n    }\n    captureOldTransformWithChildren(entity) {\n        var _a;\n        (_a = entity.get(BodyComponent)) === null || _a === void 0 ? void 0 : _a.captureOldTransform();\n        for (let i = 0; i < entity.children.length; i++) {\n            this.captureOldTransformWithChildren(entity.children[i]);\n        }\n    }\n}\nMotionSystem.priority = SystemPriority.Higher;\n\n;// ./Collision/Solver/ArcadeSolver.ts\n\n\n\n\n\n/**\n * ArcadeSolver is the default in Excalibur. It solves collisions so that there is no overlap between contacts,\n * and negates velocity along the collision normal.\n *\n * This is usually the type of collisions used for 2D games that don't need a more realistic collision simulation.\n *\n */\nclass ArcadeSolver {\n    constructor(config) {\n        this.config = config;\n        this.directionMap = new Map();\n        this.distanceMap = new Map();\n    }\n    solve(contacts) {\n        // Events and init\n        this.preSolve(contacts);\n        // Remove any canceled contacts\n        contacts = contacts.filter((c) => !c.isCanceled());\n        // Locate collision bias order\n        let bias;\n        switch (this.config.contactSolveBias) {\n            case ContactSolveBias.HorizontalFirst: {\n                bias = HorizontalFirst;\n                break;\n            }\n            case ContactSolveBias.VerticalFirst: {\n                bias = VerticalFirst;\n                break;\n            }\n            default: {\n                bias = None;\n            }\n        }\n        // Sort by bias (None, VerticalFirst, HorizontalFirst) to avoid artifacts with seams\n        // Sort contacts by distance to avoid artifacts with seams\n        // It's important to solve in a specific order\n        contacts.sort((a, b) => {\n            const aDir = this.directionMap.get(a.id);\n            const bDir = this.directionMap.get(b.id);\n            const aDist = this.distanceMap.get(a.id);\n            const bDist = this.distanceMap.get(b.id);\n            return bias[aDir] - bias[bDir] || aDist - bDist;\n        });\n        for (const contact of contacts) {\n            // Solve position first in arcade\n            this.solvePosition(contact);\n            // Solve velocity second in arcade\n            this.solveVelocity(contact);\n        }\n        // Events and any contact house-keeping the solver needs\n        this.postSolve(contacts);\n        return contacts;\n    }\n    preSolve(contacts) {\n        const epsilon = 0.0001;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n                // Cancel near 0 mtv collisions\n                contact.cancel();\n                continue;\n            }\n            const side = Side.fromDirection(contact.mtv);\n            const mtv = contact.mtv.negate();\n            const distance = Math.abs(contact.info.separation);\n            this.distanceMap.set(contact.id, distance);\n            this.directionMap.set(contact.id, side === Side.Left || side === Side.Right ? 'horizontal' : 'vertical');\n            // Publish collision events on both participants\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, mtv, contact));\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate(), contact));\n        }\n    }\n    postSolve(contacts) {\n        var _a, _b;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (contact.isCanceled()) {\n                continue;\n            }\n            const colliderA = contact.colliderA;\n            const colliderB = contact.colliderB;\n            const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n            const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n            if (bodyA && bodyB) {\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                    continue;\n                }\n            }\n            const side = Side.fromDirection(contact.mtv);\n            const mtv = contact.mtv.negate();\n            // Publish collision events on both participants\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, mtv, contact));\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), mtv.negate(), contact));\n        }\n    }\n    solvePosition(contact) {\n        var _a, _b;\n        const epsilon = 0.0001;\n        // if bounds no longer intersect skip to the next\n        // this removes jitter from overlapping/stacked solid tiles or a wall of solid tiles\n        if (!contact.colliderA.bounds.overlaps(contact.colliderB.bounds, epsilon)) {\n            // Cancel the contact to prevent and solving\n            contact.cancel();\n            return;\n        }\n        if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n            // Cancel near 0 mtv collisions\n            contact.cancel();\n            return;\n        }\n        let mtv = contact.mtv;\n        const colliderA = contact.colliderA;\n        const colliderB = contact.colliderB;\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        if (bodyA && bodyB) {\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                return;\n            }\n            if (bodyA.collisionType === CollisionType.Active && bodyB.collisionType === CollisionType.Active) {\n                // split overlaps if both are Active\n                mtv = mtv.scale(0.5);\n            }\n            // Resolve overlaps\n            if (bodyA.collisionType === CollisionType.Active) {\n                bodyA.globalPos.x -= mtv.x;\n                bodyA.globalPos.y -= mtv.y;\n                colliderA.update(bodyA.transform.get());\n            }\n            if (bodyB.collisionType === CollisionType.Active) {\n                bodyB.globalPos.x += mtv.x;\n                bodyB.globalPos.y += mtv.y;\n                colliderB.update(bodyB.transform.get());\n            }\n        }\n    }\n    solveVelocity(contact) {\n        var _a, _b;\n        if (contact.isCanceled()) {\n            return;\n        }\n        const colliderA = contact.colliderA;\n        const colliderB = contact.colliderB;\n        const bodyA = (_a = colliderA.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        const bodyB = (_b = colliderB.owner) === null || _b === void 0 ? void 0 : _b.get(BodyComponent);\n        if (bodyA && bodyB) {\n            if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                return;\n            }\n            const normal = contact.normal;\n            const opposite = normal.negate();\n            if (bodyA.collisionType === CollisionType.Active) {\n                // only adjust velocity if the contact normal is opposite to the current velocity\n                // this avoids catching edges on a platform when sliding off\n                if (bodyA.vel.normalize().dot(opposite) < 0) {\n                    // Cancel out velocity opposite direction of collision normal\n                    const velAdj = normal.scale(normal.dot(bodyA.vel.negate()));\n                    bodyA.vel = bodyA.vel.add(velAdj);\n                }\n            }\n            if (bodyB.collisionType === CollisionType.Active) {\n                // only adjust velocity if the contact normal is opposite to the current velocity\n                // this avoids catching edges on a platform\n                if (bodyB.vel.normalize().dot(normal) < 0) {\n                    const velAdj = opposite.scale(opposite.dot(bodyB.vel.negate()));\n                    bodyB.vel = bodyB.vel.add(velAdj);\n                }\n            }\n        }\n    }\n}\n\n;// ./Collision/Solver/ContactConstraintPoint.ts\n\n/**\n * Holds information about contact points, meant to be reused over multiple frames of contact\n */\nclass ContactConstraintPoint {\n    constructor(point, local, contact) {\n        this.point = point;\n        this.local = local;\n        this.contact = contact;\n        /**\n         * Impulse accumulated over time in normal direction\n         */\n        this.normalImpulse = 0;\n        /**\n         * Impulse accumulated over time in the tangent direction\n         */\n        this.tangentImpulse = 0;\n        /**\n         * Effective mass seen in the normal direction\n         */\n        this.normalMass = 0;\n        /**\n         * Effective mass seen in the tangent direction\n         */\n        this.tangentMass = 0;\n        /**\n         * Direction from center of mass of bodyA to contact point\n         */\n        this.aToContact = new Vector(0, 0);\n        /**\n         * Direction from center of mass of bodyB to contact point\n         */\n        this.bToContact = new Vector(0, 0);\n        /**\n         * Original contact velocity combined with bounciness\n         */\n        this.originalVelocityAndRestitution = 0;\n        this.update();\n    }\n    /**\n     * Updates the contact information\n     */\n    update() {\n        const bodyA = this.contact.bodyA;\n        const bodyB = this.contact.bodyB;\n        if (bodyA && bodyB) {\n            const normal = this.contact.normal;\n            const tangent = this.contact.tangent;\n            this.aToContact = this.point.sub(bodyA.globalPos);\n            this.bToContact = this.point.sub(bodyB.globalPos);\n            const aToContactNormal = this.aToContact.cross(normal);\n            const bToContactNormal = this.bToContact.cross(normal);\n            this.normalMass =\n                bodyA.inverseMass +\n                    bodyB.inverseMass +\n                    bodyA.inverseInertia * aToContactNormal * aToContactNormal +\n                    bodyB.inverseInertia * bToContactNormal * bToContactNormal;\n            const aToContactTangent = this.aToContact.cross(tangent);\n            const bToContactTangent = this.bToContact.cross(tangent);\n            this.tangentMass =\n                bodyA.inverseMass +\n                    bodyB.inverseMass +\n                    bodyA.inverseInertia * aToContactTangent * aToContactTangent +\n                    bodyB.inverseInertia * bToContactTangent * bToContactTangent;\n        }\n        return this;\n    }\n    /**\n     * Returns the relative velocity between bodyA and bodyB\n     */\n    getRelativeVelocity() {\n        const bodyA = this.contact.bodyA;\n        const bodyB = this.contact.bodyB;\n        if (bodyA && bodyB) {\n            // Relative velocity in linear terms\n            // Angular to linear velocity formula -> omega = velocity/radius so omega x radius = velocity\n            const velA = bodyA.vel.add(Vector.cross(bodyA.angularVelocity, this.aToContact));\n            const velB = bodyB.vel.add(Vector.cross(bodyB.angularVelocity, this.bToContact));\n            return velB.sub(velA);\n        }\n        return Vector.Zero;\n    }\n}\n\n;// ./Collision/Solver/RealisticSolver.ts\n\n\n\n\n\n\n\nclass RealisticSolver {\n    constructor(config) {\n        this.config = config;\n        this.lastFrameContacts = new Map();\n        // map contact id to contact points\n        this.idToContactConstraint = new Map();\n    }\n    getContactConstraints(id) {\n        var _a;\n        return (_a = this.idToContactConstraint.get(id)) !== null && _a !== void 0 ? _a : [];\n    }\n    solve(contacts) {\n        // Events and init\n        this.preSolve(contacts);\n        // Remove any canceled contacts\n        contacts = contacts.filter((c) => !c.isCanceled());\n        // Solve velocity first\n        this.solveVelocity(contacts);\n        // Solve position last because non-overlap is the most important\n        this.solvePosition(contacts);\n        // Events and any contact house-keeping the solver needs\n        this.postSolve(contacts);\n        return contacts;\n    }\n    preSolve(contacts) {\n        var _a, _b, _c;\n        const epsilon = 0.0001;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            if (Math.abs(contact.mtv.x) < epsilon && Math.abs(contact.mtv.y) < epsilon) {\n                // Cancel near 0 mtv collisions\n                contact.cancel();\n                continue;\n            }\n            // Publish collision events on both participants\n            const side = Side.fromDirection(contact.mtv);\n            contact.colliderA.events.emit('precollision', new PreCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderA.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderB.events.emit('precollision', new PreCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            contact.colliderB.events.emit('beforecollisionresolve', new CollisionPreSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            // Match awake state for sleeping\n            contact.matchAwake();\n        }\n        // Keep track of contacts that done\n        const finishedContactIds = Array.from(this.idToContactConstraint.keys());\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            // Remove all current contacts that are not done\n            const index = finishedContactIds.indexOf(contact.id);\n            if (index > -1) {\n                finishedContactIds.splice(index, 1);\n            }\n            const contactPoints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n            let pointIndex = 0;\n            const bodyA = contact.bodyA;\n            const bodyB = contact.bodyB;\n            if (bodyA && bodyB) {\n                for (let j = 0; j < contact.points.length; j++) {\n                    const point = contact.points[j];\n                    const normal = contact.normal;\n                    const tangent = contact.tangent;\n                    const aToContact = point.sub(bodyA.globalPos);\n                    const bToContact = point.sub(bodyB.globalPos);\n                    const aToContactNormal = aToContact.cross(normal);\n                    const bToContactNormal = bToContact.cross(normal);\n                    const normalMass = bodyA.inverseMass +\n                        bodyB.inverseMass +\n                        bodyA.inverseInertia * aToContactNormal * aToContactNormal +\n                        bodyB.inverseInertia * bToContactNormal * bToContactNormal;\n                    const aToContactTangent = aToContact.cross(tangent);\n                    const bToContactTangent = bToContact.cross(tangent);\n                    const tangentMass = bodyA.inverseMass +\n                        bodyB.inverseMass +\n                        bodyA.inverseInertia * aToContactTangent * aToContactTangent +\n                        bodyB.inverseInertia * bToContactTangent * bToContactTangent;\n                    // Preserve normal/tangent impulse by re-using the contact point if it's close\n                    if (contactPoints[pointIndex] && ((_c = (_b = contactPoints[pointIndex]) === null || _b === void 0 ? void 0 : _b.point) === null || _c === void 0 ? void 0 : _c.squareDistance(point)) < 4) {\n                        contactPoints[pointIndex].point = point;\n                        contactPoints[pointIndex].local = contact.localPoints[pointIndex];\n                    }\n                    else {\n                        // new contact if it's not close or doesn't exist\n                        contactPoints[pointIndex] = new ContactConstraintPoint(point, contact.localPoints[pointIndex], contact);\n                    }\n                    // Update contact point calculations\n                    contactPoints[pointIndex].aToContact = aToContact;\n                    contactPoints[pointIndex].bToContact = bToContact;\n                    contactPoints[pointIndex].normalMass = 1.0 / normalMass;\n                    contactPoints[pointIndex].tangentMass = 1.0 / tangentMass;\n                    // Calculate relative velocity before solving to accurately do restitution\n                    const restitution = bodyA.bounciness > bodyB.bounciness ? bodyA.bounciness : bodyB.bounciness;\n                    const relativeVelocity = contact.normal.dot(contactPoints[pointIndex].getRelativeVelocity());\n                    contactPoints[pointIndex].originalVelocityAndRestitution = 0;\n                    if (relativeVelocity < -0.1) {\n                        // TODO what's a good threshold here?\n                        contactPoints[pointIndex].originalVelocityAndRestitution = -restitution * relativeVelocity;\n                    }\n                    pointIndex++;\n                }\n            }\n            this.idToContactConstraint.set(contact.id, contactPoints);\n        }\n        // Clean up any contacts that did not occur last frame\n        for (const id of finishedContactIds) {\n            this.idToContactConstraint.delete(id);\n        }\n        // Warm contacts with accumulated impulse\n        // Useful for tall stacks\n        if (this.config.warmStart) {\n            this.warmStart(contacts);\n        }\n        else {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const contactPoints = this.getContactConstraints(contact.id);\n                for (const point of contactPoints) {\n                    point.normalImpulse = 0;\n                    point.tangentImpulse = 0;\n                }\n            }\n        }\n    }\n    postSolve(contacts) {\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            const bodyA = contact.bodyA;\n            const bodyB = contact.bodyB;\n            if (bodyA && bodyB) {\n                // Skip post solve for active+passive collisions\n                if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                    continue;\n                }\n                // Update motion values for sleeping\n                bodyA.updateMotion();\n                bodyB.updateMotion();\n            }\n            // Publish collision events on both participants\n            const side = Side.fromDirection(contact.mtv);\n            contact.colliderA.events.emit('postcollision', new PostCollisionEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderA.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderA, contact.colliderB, side, contact.mtv, contact));\n            contact.colliderB.events.emit('postcollision', new PostCollisionEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n            contact.colliderB.events.emit('aftercollisionresolve', new CollisionPostSolveEvent(contact.colliderB, contact.colliderA, Side.getOpposite(side), contact.mtv.negate(), contact));\n        }\n        // Store contacts\n        this.lastFrameContacts.clear();\n        for (let i = 0; i < contacts.length; i++) {\n            const c = contacts[i];\n            this.lastFrameContacts.set(c.id, c);\n        }\n    }\n    /**\n     * Warm up body's based on previous frame contact points\n     * @param contacts\n     */\n    warmStart(contacts) {\n        var _a;\n        for (let i = 0; i < contacts.length; i++) {\n            const contact = contacts[i];\n            const bodyA = contact.bodyA;\n            const bodyB = contact.bodyB;\n            if (bodyA && bodyB) {\n                const contactPoints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                for (const point of contactPoints) {\n                    if (this.config.warmStart) {\n                        const normalImpulse = contact.normal.scale(point.normalImpulse);\n                        const tangentImpulse = contact.tangent.scale(point.tangentImpulse);\n                        const impulse = normalImpulse.add(tangentImpulse);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                    else {\n                        point.normalImpulse = 0;\n                        point.tangentImpulse = 0;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Iteratively solve the position overlap constraint\n     * @param contacts\n     */\n    solvePosition(contacts) {\n        var _a;\n        for (let i = 0; i < this.config.positionIterations; i++) {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const bodyA = contact.bodyA;\n                const bodyB = contact.bodyB;\n                if (bodyA && bodyB) {\n                    // Skip solving active+passive\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                        continue;\n                    }\n                    const constraints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                    for (const point of constraints) {\n                        const normal = contact.normal;\n                        const separation = CollisionJumpTable.FindContactSeparation(contact, point.local);\n                        const steeringConstant = this.config.steeringFactor; //0.2;\n                        const maxCorrection = -5;\n                        const slop = this.config.slop; //1;\n                        // Clamp to avoid over-correction\n                        // Remember that we are shooting for 0 overlap in the end\n                        const steeringForce = clamp(steeringConstant * (separation + slop), maxCorrection, 0);\n                        const impulse = normal.scale(-steeringForce * point.normalMass);\n                        // This is a pseudo impulse, meaning we aren't doing a real impulse calculation\n                        // We adjust position and rotation instead of doing the velocity\n                        if (bodyA.collisionType === CollisionType.Active) {\n                            // TODO make applyPseudoImpulse function?\n                            const impulseForce = impulse.negate().scale(bodyA.inverseMass);\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n                                impulseForce.x = 0;\n                            }\n                            if (bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n                                impulseForce.y = 0;\n                            }\n                            bodyA.globalPos = bodyA.globalPos.add(impulseForce);\n                            if (!bodyA.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n                                bodyA.rotation -= point.aToContact.cross(impulse) * bodyA.inverseInertia;\n                            }\n                        }\n                        if (bodyB.collisionType === CollisionType.Active) {\n                            const impulseForce = impulse.scale(bodyB.inverseMass);\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.X)) {\n                                impulseForce.x = 0;\n                            }\n                            if (bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Y)) {\n                                impulseForce.y = 0;\n                            }\n                            bodyB.globalPos = bodyB.globalPos.add(impulseForce);\n                            if (!bodyB.limitDegreeOfFreedom.includes(DegreeOfFreedom.Rotation)) {\n                                bodyB.rotation += point.bToContact.cross(impulse) * bodyB.inverseInertia;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    solveVelocity(contacts) {\n        var _a;\n        for (let i = 0; i < this.config.velocityIterations; i++) {\n            for (let i = 0; i < contacts.length; i++) {\n                const contact = contacts[i];\n                const bodyA = contact.bodyA;\n                const bodyB = contact.bodyB;\n                if (bodyA && bodyB) {\n                    // Skip solving active+passive\n                    if (bodyA.collisionType === CollisionType.Passive || bodyB.collisionType === CollisionType.Passive) {\n                        continue;\n                    }\n                    const friction = Math.min(bodyA.friction, bodyB.friction);\n                    const constraints = (_a = this.idToContactConstraint.get(contact.id)) !== null && _a !== void 0 ? _a : [];\n                    // Friction constraint\n                    for (const point of constraints) {\n                        const relativeVelocity = point.getRelativeVelocity();\n                        // Negate velocity in tangent direction to simulate friction\n                        const tangentVelocity = -relativeVelocity.dot(contact.tangent);\n                        let impulseDelta = tangentVelocity * point.tangentMass;\n                        // Clamping based in Erin Catto's GDC 2006 talk\n                        // Correct clamping https://github.com/erincatto/box2d-lite/blob/master/docs/GDC2006_Catto_Erin_PhysicsTutorial.pdf\n                        // Accumulated fiction impulse is always between -uMaxFriction < dT < uMaxFriction\n                        // But deltas can vary\n                        const maxFriction = friction * point.normalImpulse;\n                        const newImpulse = clamp(point.tangentImpulse + impulseDelta, -maxFriction, maxFriction);\n                        impulseDelta = newImpulse - point.tangentImpulse;\n                        point.tangentImpulse = newImpulse;\n                        const impulse = contact.tangent.scale(impulseDelta);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                    // Bounce constraint\n                    for (const point of constraints) {\n                        // Need to recalc relative velocity because the previous step could have changed vel\n                        const relativeVelocity = point.getRelativeVelocity();\n                        // Compute impulse in normal direction\n                        const normalVelocity = relativeVelocity.dot(contact.normal);\n                        // Per Erin it is a mistake to apply the restitution inside the iteration\n                        // From Erin Catto's Box2D we keep original contact velocity and adjust by small impulses\n                        let impulseDelta = -point.normalMass * (normalVelocity - point.originalVelocityAndRestitution);\n                        // Clamping based in Erin Catto's GDC 2014 talk\n                        // Accumulated impulse stored in the contact is always positive (dV > 0)\n                        // But deltas can be negative\n                        const newImpulse = Math.max(point.normalImpulse + impulseDelta, 0);\n                        impulseDelta = newImpulse - point.normalImpulse;\n                        point.normalImpulse = newImpulse;\n                        const impulse = contact.normal.scale(impulseDelta);\n                        bodyA.applyImpulse(point.point, impulse.negate());\n                        bodyB.applyImpulse(point.point, impulse);\n                    }\n                }\n            }\n        }\n    }\n}\n\n;// ./Collision/CollisionSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass CollisionSystem extends System {\n    get _processor() {\n        return this._physics.collisionProcessor;\n    }\n    constructor(world, _physics) {\n        super();\n        this._physics = _physics;\n        this.systemType = SystemType.Update;\n        this._configDirty = false;\n        this._lastFrameContacts = new Map();\n        this._currentFrameContacts = new Map();\n        this._arcadeSolver = new ArcadeSolver(_physics.config.arcade);\n        this._realisticSolver = new RealisticSolver(_physics.config.realistic);\n        this._physics.$configUpdate.subscribe(() => (this._configDirty = true));\n        this._trackCollider = (c) => this._processor.track(c);\n        this._untrackCollider = (c) => this._processor.untrack(c);\n        this.query = world.query([TransformComponent, MotionComponent, ColliderComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const colliderComponent = e.get(ColliderComponent);\n            colliderComponent.$colliderAdded.subscribe(this._trackCollider);\n            colliderComponent.$colliderRemoved.subscribe(this._untrackCollider);\n            const collider = colliderComponent.get();\n            if (collider) {\n                this._processor.track(collider);\n            }\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            const colliderComponent = e.get(ColliderComponent);\n            const collider = colliderComponent.get();\n            if (colliderComponent && collider) {\n                this._processor.untrack(collider);\n            }\n        });\n        this._motionSystem = world.get(MotionSystem);\n    }\n    initialize(world, scene) {\n        this._engine = scene.engine;\n    }\n    update(elapsed) {\n        var _a, _b, _c, _d;\n        if (!this._physics.config.enabled) {\n            return;\n        }\n        // TODO do we need to do this every frame?\n        // Collect up all the colliders and update them\n        let colliders = [];\n        for (let entityIndex = 0; entityIndex < this.query.entities.length; entityIndex++) {\n            const entity = this.query.entities[entityIndex];\n            const colliderComp = entity.get(ColliderComponent);\n            const collider = colliderComp === null || colliderComp === void 0 ? void 0 : colliderComp.get();\n            if (colliderComp && ((_a = colliderComp.owner) === null || _a === void 0 ? void 0 : _a.isActive) && collider) {\n                colliderComp.update();\n                // Flatten composite colliders\n                if (collider instanceof CompositeCollider) {\n                    const compositeColliders = collider.getColliders();\n                    if (!collider.compositeStrategy) {\n                        collider.compositeStrategy = this._physics.config.colliders.compositeStrategy;\n                    }\n                    colliders = colliders.concat(compositeColliders);\n                }\n                else {\n                    colliders.push(collider);\n                }\n            }\n        }\n        // Update the spatial partitioning data structures\n        // TODO if collider invalid it will break the processor\n        // TODO rename \"update\" to something more specific\n        this._processor.update(colliders, elapsed);\n        // Run broadphase on all colliders and locates potential collisions\n        let pairs = this._processor.broadphase(colliders, elapsed);\n        this._currentFrameContacts.clear();\n        // Given possible pairs find actual contacts\n        let contacts = []; // = this._processor.narrowphase(pairs, this._engine?.debug?.stats?.currFrame);\n        const solver = this.getSolver();\n        // Solve, this resolves the position/velocity so entities aren't overlapping\n        const substep = this._physics.config.substep;\n        for (let step = 0; step < substep; step++) {\n            if (step > 0) {\n                // first step is run by the MotionSystem when configured, so skip\n                this._motionSystem.update(elapsed);\n            }\n            // Re-use pairs from previous collision\n            if (contacts.length) {\n                pairs = contacts.map((c) => new Pair(c.colliderA, c.colliderB));\n            }\n            if (pairs.length) {\n                contacts = this._processor.narrowphase(pairs, (_d = (_c = (_b = this._engine) === null || _b === void 0 ? void 0 : _b.debug) === null || _c === void 0 ? void 0 : _c.stats) === null || _d === void 0 ? void 0 : _d.currFrame);\n                contacts = solver.solve(contacts);\n                // Record contacts for start/end\n                for (const contact of contacts) {\n                    if (contact.isCanceled()) {\n                        continue;\n                    }\n                    // Process composite ids, things with the same composite id are treated as the same collider for start/end\n                    const index = contact.id.indexOf('|');\n                    if (index > 0) {\n                        const compositeId = contact.id.substring(index + 1);\n                        this._currentFrameContacts.set(compositeId, contact);\n                    }\n                    else {\n                        this._currentFrameContacts.set(contact.id, contact);\n                    }\n                }\n            }\n        }\n        // Emit contact start/end events\n        this.runContactStartEnd();\n        // reset the last frame cache\n        this._lastFrameContacts.clear();\n        // Keep track of collisions contacts that have started or ended\n        this._lastFrameContacts = new Map(this._currentFrameContacts);\n        // Process deferred collider removals\n        for (const entity of this.query.entities) {\n            const collider = entity.get(ColliderComponent);\n            if (collider) {\n                collider.processColliderRemoval();\n            }\n        }\n    }\n    postupdate() {\n        SeparatingAxis.SeparationPool.done();\n    }\n    getSolver() {\n        if (this._configDirty) {\n            this._configDirty = false;\n            this._arcadeSolver = new ArcadeSolver(this._physics.config.arcade);\n            this._realisticSolver = new RealisticSolver(this._physics.config.realistic);\n        }\n        return this._physics.config.solver === SolverStrategy.Realistic ? this._realisticSolver : this._arcadeSolver;\n    }\n    debug(ex) {\n        this._processor.debug(ex, 0);\n    }\n    runContactStartEnd() {\n        // If composite colliders are 'together' collisions may have a duplicate id because we want to treat those as a singular start/end\n        for (const [id, c] of this._currentFrameContacts) {\n            // find all new contacts\n            if (!this._lastFrameContacts.has(id)) {\n                const colliderA = c.colliderA;\n                const colliderB = c.colliderB;\n                const side = Side.fromDirection(c.mtv);\n                const opposite = Side.getOpposite(side);\n                colliderA.events.emit('collisionstart', new CollisionStartEvent(colliderA, colliderB, side, c));\n                colliderA.events.emit('contactstart', new ContactStartEvent(colliderA, colliderB, side, c));\n                colliderB.events.emit('collisionstart', new CollisionStartEvent(colliderB, colliderA, opposite, c));\n                colliderB.events.emit('contactstart', new ContactStartEvent(colliderB, colliderA, opposite, c));\n            }\n        }\n        // find all contacts that have ceased\n        for (const [id, c] of this._lastFrameContacts) {\n            if (!this._currentFrameContacts.has(id)) {\n                const colliderA = c.colliderA;\n                const colliderB = c.colliderB;\n                const side = Side.fromDirection(c.mtv);\n                const opposite = Side.getOpposite(side);\n                colliderA.events.emit('collisionend', new CollisionEndEvent(colliderA, colliderB, side, c));\n                colliderA.events.emit('contactend', new ContactEndEvent(colliderA, colliderB, side, c));\n                colliderB.events.emit('collisionend', new CollisionEndEvent(colliderB, colliderA, opposite, c));\n                colliderB.events.emit('contactend', new ContactEndEvent(colliderB, colliderA, opposite, c));\n            }\n        }\n    }\n}\nCollisionSystem.priority = SystemPriority.Higher;\n\n;// ./Graphics/TransformInterpolation.ts\n\n/**\n * Blend 2 transforms for interpolation, will interpolate from the context of newTx's parent if it exists\n */\nfunction blendTransform(oldTx, newTx, blend, target) {\n    if (oldTx.parent !== newTx.parent) {\n        // Caller expects a local transform\n        // Adjust old tx to be local to the new parent whatever that is\n        const oldTxWithNewParent = oldTx.clone();\n        const oldGlobalPos = oldTx.globalPos.clone();\n        const oldGlobalScale = oldTx.globalScale.clone();\n        const oldGlobalRotation = oldTx.globalRotation;\n        oldTxWithNewParent.parent = newTx.parent;\n        oldTxWithNewParent.globalPos = oldGlobalPos;\n        oldTxWithNewParent.globalScale = oldGlobalScale;\n        oldTxWithNewParent.globalRotation = oldGlobalRotation;\n        oldTx = oldTxWithNewParent;\n    }\n    let interpolatedPos = newTx.pos;\n    let interpolatedScale = newTx.scale;\n    let interpolatedRotation = newTx.rotation;\n    interpolatedPos = newTx.pos.scale(blend).add(oldTx.pos.scale(1.0 - blend));\n    interpolatedScale = newTx.scale.scale(blend).add(oldTx.scale.scale(1.0 - blend));\n    // Rotational lerp https://stackoverflow.com/a/30129248\n    const cosine = (1.0 - blend) * Math.cos(oldTx.rotation) + blend * Math.cos(newTx.rotation);\n    const sine = (1.0 - blend) * Math.sin(oldTx.rotation) + blend * Math.sin(newTx.rotation);\n    interpolatedRotation = Math.atan2(sine, cosine);\n    const tx = target !== null && target !== void 0 ? target : new transform_Transform();\n    tx.setTransform(interpolatedPos, interpolatedRotation, interpolatedScale);\n    return tx;\n}\n/**\n *\n */\nfunction blendGlobalTransform(oldTx, newTx, blend, target) {\n    let interpolatedPos = newTx.globalPos;\n    let interpolatedScale = newTx.globalScale;\n    let interpolatedRotation = newTx.globalRotation;\n    interpolatedPos = newTx.globalPos.scale(blend).add(oldTx.globalPos.scale(1.0 - blend));\n    interpolatedScale = newTx.globalScale.scale(blend).add(oldTx.globalScale.scale(1.0 - blend));\n    // Rotational lerp https://stackoverflow.com/a/30129248\n    const cosine = (1.0 - blend) * Math.cos(oldTx.globalRotation) + blend * Math.cos(newTx.globalRotation);\n    const sine = (1.0 - blend) * Math.sin(oldTx.globalRotation) + blend * Math.sin(newTx.globalRotation);\n    interpolatedRotation = Math.atan2(sine, cosine);\n    const tx = target !== null && target !== void 0 ? target : new Transform();\n    tx.setTransform(interpolatedPos, interpolatedRotation, interpolatedScale);\n    return tx;\n}\n\n;// ./Graphics/GraphicsSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass GraphicsSystem extends System {\n    get sortedTransforms() {\n        return this._sortedTransforms;\n    }\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this._token = 0;\n        this._sortedTransforms = [];\n        this._zHasChanged = false;\n        this._zIndexUpdate = () => {\n            this._zHasChanged = true;\n        };\n        this._targetInterpolationTransform = new transform_Transform();\n        this.query = this.world.query([TransformComponent, GraphicsComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            this._sortedTransforms.push(tx);\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\n            this._zHasChanged = true;\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\n            const index = this._sortedTransforms.indexOf(tx);\n            if (index > -1) {\n                this._sortedTransforms.splice(index, 1);\n            }\n        });\n    }\n    initialize(world, scene) {\n        this._camera = scene.camera;\n        this._engine = scene.engine;\n    }\n    preupdate() {\n        // Graphics context could be switched to fallback in a new frame\n        this._graphicsContext = this._engine.graphicsContext;\n        if (this._zHasChanged) {\n            this._sortedTransforms.sort((a, b) => {\n                return a.globalZ - b.globalZ;\n            });\n            this._zHasChanged = false;\n        }\n    }\n    update(elapsed) {\n        this._token++;\n        let graphics;\n        FontCache.checkAndClearCache();\n        // This is a performance enhancement, most things are in world space\n        // so if we can only do this once saves a ton of transform updates\n        this._graphicsContext.save();\n        if (this._camera) {\n            this._camera.draw(this._graphicsContext);\n        }\n        for (let transformIndex = 0; transformIndex < this._sortedTransforms.length; transformIndex++) {\n            const transform = this._sortedTransforms[transformIndex];\n            const entity = transform.owner;\n            // If the entity is offscreen skip\n            if (entity.hasTag('ex.offscreen')) {\n                continue;\n            }\n            graphics = entity.get(GraphicsComponent);\n            // Exit if graphics set to not visible\n            if (!graphics.isVisible) {\n                continue;\n            }\n            // Optionally run the onPreTransformDraw graphics lifecycle draw\n            if (graphics.onPreTransformDraw) {\n                graphics.onPreTransformDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('pretransformdraw', new PreTransformDrawEvent(this._graphicsContext, elapsed, entity));\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.restore();\n            }\n            this._graphicsContext.save();\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            // Tick any graphics state (but only once) for animations and graphics groups\n            graphics.update(elapsed, this._token);\n            // Apply parallax\n            const parallax = entity.get(ParallaxComponent);\n            if (parallax) {\n                // We use the Tiled formula\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\n                // cameraPos * (1 - parallaxFactor)\n                const oneMinusFactor = Vector.One.sub(parallax.parallaxFactor);\n                const parallaxOffset = this._camera.drawPos.scale(oneMinusFactor);\n                this._graphicsContext.translate(parallaxOffset.x, parallaxOffset.y);\n            }\n            // Position the entity + estimate lag\n            this._applyTransform(entity);\n            // If there is a material enable it on the context\n            if (graphics.material) {\n                this._graphicsContext.material = graphics.material;\n            }\n            // Optionally run the onPreDraw graphics lifecycle draw\n            if (graphics.onPreDraw) {\n                graphics.onPreDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('predraw', new PreDrawEvent(this._graphicsContext, elapsed, entity));\n            // this._graphicsContext.opacity *= graphics.opacity;\n            this._applyOpacity(entity);\n            // Draw the graphics component\n            this._drawGraphicsComponent(graphics, transform);\n            // Optionally run the onPostDraw graphics lifecycle draw\n            if (graphics.onPostDraw) {\n                graphics.onPostDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('postdraw', new PostDrawEvent(this._graphicsContext, elapsed, entity));\n            this._graphicsContext.restore();\n            // Reset the transform back to the original world space\n            if (transform.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.save();\n                if (this._camera) {\n                    this._camera.draw(this._graphicsContext);\n                }\n            }\n            // Optionally run the onPreTransformDraw graphics lifecycle draw\n            if (graphics.onPostTransformDraw) {\n                graphics.onPostTransformDraw(this._graphicsContext, elapsed);\n            }\n            entity.events.emit('posttransformdraw', new PostTransformDrawEvent(this._graphicsContext, elapsed, entity));\n        }\n        this._graphicsContext.restore();\n    }\n    _drawGraphicsComponent(graphicsComponent, transformComponent) {\n        var _a, _b;\n        if (graphicsComponent.isVisible) {\n            const flipHorizontal = graphicsComponent.flipHorizontal;\n            const flipVertical = graphicsComponent.flipVertical;\n            const graphic = graphicsComponent.current;\n            const options = (_a = graphicsComponent.currentOptions) !== null && _a !== void 0 ? _a : {};\n            if (graphic) {\n                let anchor = graphicsComponent.anchor;\n                let offset = graphicsComponent.offset;\n                let scaleX = 1;\n                let scaleY = 1;\n                // handle specific overrides\n                if (options === null || options === void 0 ? void 0 : options.anchor) {\n                    anchor = options.anchor;\n                }\n                if (options === null || options === void 0 ? void 0 : options.offset) {\n                    offset = options.offset;\n                }\n                const globalScale = transformComponent.globalScale;\n                scaleX *= graphic.scale.x * globalScale.x;\n                scaleY *= graphic.scale.y * globalScale.y;\n                // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n                const offsetX = -graphic.width * anchor.x + offset.x * scaleX;\n                const offsetY = -graphic.height * anchor.y + offset.y * scaleY;\n                const oldFlipHorizontal = graphic.flipHorizontal;\n                const oldFlipVertical = graphic.flipVertical;\n                if (flipHorizontal || flipVertical) {\n                    // flip any currently flipped graphics\n                    graphic.flipHorizontal = flipHorizontal ? !oldFlipHorizontal : oldFlipHorizontal;\n                    graphic.flipVertical = flipVertical ? !oldFlipVertical : oldFlipVertical;\n                }\n                graphic === null || graphic === void 0 ? void 0 : graphic.draw(this._graphicsContext, offsetX, offsetY);\n                if (flipHorizontal || flipVertical) {\n                    graphic.flipHorizontal = oldFlipHorizontal;\n                    graphic.flipVertical = oldFlipVertical;\n                }\n                // TODO move debug code out?\n                if (((_b = this._engine) === null || _b === void 0 ? void 0 : _b.isDebug) && this._engine.debug.graphics.showBounds) {\n                    const offset = vec(offsetX, offsetY);\n                    if (graphic instanceof GraphicsGroup) {\n                        for (const member of graphic.members) {\n                            let g;\n                            let pos = Vector.Zero;\n                            if (member instanceof Graphic) {\n                                g = member;\n                            }\n                            else {\n                                g = member.graphic;\n                                pos = member.offset;\n                            }\n                            if (graphic.useAnchor) {\n                                g === null || g === void 0 ? void 0 : g.localBounds.translate(offset.add(pos)).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                            }\n                            else {\n                                g === null || g === void 0 ? void 0 : g.localBounds.translate(pos).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                            }\n                        }\n                    }\n                    else {\n                        /* istanbul ignore next */\n                        graphic === null || graphic === void 0 ? void 0 : graphic.localBounds.translate(offset).draw(this._graphicsContext, this._engine.debug.graphics.boundsColor);\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * This applies the current entity transform to the graphics context\n     * @param entity\n     */\n    _applyTransform(entity) {\n        const ancestors = entity.getAncestors();\n        for (let i = 0; i < ancestors.length; i++) {\n            const ancestor = ancestors[i];\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\n            const optionalBody = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(BodyComponent);\n            if (transform) {\n                let tx = transform.get();\n                if (optionalBody) {\n                    if (this._engine.fixedUpdateTimestep && optionalBody.__oldTransformCaptured && optionalBody.enableFixedUpdateInterpolate) {\n                        // Interpolate graphics if needed\n                        const blend = this._engine.currentFrameLagMs / this._engine.fixedUpdateTimestep;\n                        tx = blendTransform(optionalBody.oldTransform, transform.get(), blend, this._targetInterpolationTransform);\n                    }\n                }\n                this._graphicsContext.z = transform.globalZ;\n                this._graphicsContext.translate(tx.pos.x, tx.pos.y);\n                this._graphicsContext.scale(tx.scale.x, tx.scale.y);\n                this._graphicsContext.rotate(tx.rotation);\n            }\n        }\n    }\n    _applyOpacity(entity) {\n        var _a;\n        const ancestors = entity.getAncestors();\n        for (let i = 0; i < ancestors.length; i++) {\n            const ancestor = ancestors[i];\n            const maybeGraphics = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(GraphicsComponent);\n            this._graphicsContext.opacity *= (_a = maybeGraphics === null || maybeGraphics === void 0 ? void 0 : maybeGraphics.opacity) !== null && _a !== void 0 ? _a : 1;\n        }\n    }\n}\nGraphicsSystem.priority = SystemPriority.Average;\n\n;// ./Debug/DebugSystem.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass DebugSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this.query = this.world.query([TransformComponent]);\n    }\n    initialize(world, scene) {\n        this._graphicsContext = scene.engine.graphicsContext;\n        this._camera = scene.camera;\n        this._engine = scene.engine;\n        this._collisionSystem = world.systemManager.get(CollisionSystem);\n    }\n    update() {\n        var _a;\n        if (!this._engine.isDebug) {\n            return;\n        }\n        const filterSettings = this._engine.debug.filter;\n        let id;\n        let name;\n        const entitySettings = this._engine.debug.entity;\n        let tx;\n        const txSettings = this._engine.debug.transform;\n        let motion;\n        const motionSettings = this._engine.debug.motion;\n        let colliderComp;\n        const colliderSettings = this._engine.debug.collider;\n        const physicsSettings = this._engine.debug.physics;\n        let graphics;\n        const graphicsSettings = this._engine.debug.graphics;\n        let debugDraw;\n        let body;\n        const bodySettings = this._engine.debug.body;\n        const cameraSettings = this._engine.debug.camera;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            if (entity.hasTag('offscreen')) {\n                // skip offscreen entities\n                continue;\n            }\n            if (entity instanceof Particle) {\n                // Particles crush the renderer :(\n                continue;\n            }\n            if (filterSettings.useFilter) {\n                const allIds = filterSettings.ids.length === 0;\n                const idMatch = allIds || filterSettings.ids.includes(entity.id);\n                if (!idMatch) {\n                    continue;\n                }\n                const allNames = filterSettings.nameQuery === '';\n                const nameMatch = allNames || entity.name.includes(filterSettings.nameQuery);\n                if (!nameMatch) {\n                    continue;\n                }\n            }\n            let cursor = Vector.Zero;\n            const lineHeight = vec(0, 16);\n            id = entity.id;\n            name = entity.name;\n            tx = entity.get(TransformComponent);\n            // This optionally sets our camera based on the entity coord plan (world vs. screen)\n            this._pushCameraTransform(tx);\n            this._graphicsContext.save();\n            if (tx.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            this._graphicsContext.z = txSettings.debugZIndex;\n            this._applyTransform(entity);\n            if (tx) {\n                if (txSettings.showAll || txSettings.showPosition) {\n                    this._graphicsContext.debug.drawPoint(Vector.Zero, { size: 4, color: txSettings.positionColor });\n                }\n                if (txSettings.showAll || txSettings.showPositionLabel) {\n                    this._graphicsContext.debug.drawText(`pos${tx.pos.toString(2)}`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showZIndex) {\n                    this._graphicsContext.debug.drawText(`z(${tx.z.toFixed(1)})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (entitySettings.showAll || entitySettings.showId) {\n                    this._graphicsContext.debug.drawText(`id(${id}) ${entity.parent ? 'child of id(' + ((_a = entity.parent) === null || _a === void 0 ? void 0 : _a.id) + ')' : ''}`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (entitySettings.showAll || entitySettings.showName) {\n                    this._graphicsContext.debug.drawText(`name(${name})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showRotation) {\n                    this._graphicsContext.drawLine(Vector.Zero, Vector.fromAngle(tx.rotation).scale(50).add(Vector.Zero), txSettings.rotationColor, 2);\n                    this._graphicsContext.debug.drawText(`rot deg(${toDegrees(tx.rotation).toFixed(2)})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (txSettings.showAll || txSettings.showScale) {\n                    this._graphicsContext.drawLine(Vector.Zero, tx.scale.add(Vector.Zero), txSettings.scaleColor, 2);\n                }\n            }\n            graphics = entity.get(GraphicsComponent);\n            if (graphics) {\n                if (graphicsSettings.showAll || graphicsSettings.showBounds) {\n                    const bounds = graphics.localBounds;\n                    bounds.draw(this._graphicsContext, graphicsSettings.boundsColor);\n                }\n            }\n            debugDraw = entity.get(DebugGraphicsComponent);\n            if (debugDraw) {\n                if (!debugDraw.useTransform) {\n                    this._graphicsContext.restore();\n                }\n                debugDraw.draw(this._graphicsContext, this._engine.debug);\n                if (!debugDraw.useTransform) {\n                    this._graphicsContext.save();\n                    this._applyTransform(entity);\n                }\n            }\n            body = entity.get(BodyComponent);\n            if (body) {\n                if (bodySettings.showAll || bodySettings.showCollisionGroup) {\n                    this._graphicsContext.debug.drawText(`collision group(${body.group.name})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showCollisionType) {\n                    this._graphicsContext.debug.drawText(`collision type(${body.collisionType})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showMass) {\n                    this._graphicsContext.debug.drawText(`mass(${body.mass})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showMotion) {\n                    this._graphicsContext.debug.drawText(`motion(${body.sleepMotion})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (bodySettings.showAll || bodySettings.showSleeping) {\n                    this._graphicsContext.debug.drawText(`sleeping(${body.canSleep ? body.isSleeping : 'cant sleep'})`, cursor);\n                    cursor = cursor.add(lineHeight);\n                }\n            }\n            this._graphicsContext.restore();\n            // World space\n            this._graphicsContext.save();\n            if (tx.coordPlane === CoordPlane.Screen) {\n                this._graphicsContext.translate(this._engine.screen.contentArea.left, this._engine.screen.contentArea.top);\n            }\n            this._graphicsContext.z = txSettings.debugZIndex;\n            motion = entity.get(MotionComponent);\n            if (motion) {\n                if (motionSettings.showAll || motionSettings.showVelocity) {\n                    this._graphicsContext.debug.drawText(`vel${motion.vel.toString(2)}`, cursor.add(tx.globalPos));\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.vel), motionSettings.velocityColor, 2);\n                    cursor = cursor.add(lineHeight);\n                }\n                if (motionSettings.showAll || motionSettings.showAcceleration) {\n                    this._graphicsContext.drawLine(tx.globalPos, tx.globalPos.add(motion.acc), motionSettings.accelerationColor, 2);\n                }\n            }\n            // Colliders live in world space already so after the restore()\n            colliderComp = entity.get(ColliderComponent);\n            if (colliderComp) {\n                const collider = colliderComp.get();\n                if ((colliderSettings.showAll || colliderSettings.showGeometry) && collider) {\n                    collider.debug(this._graphicsContext, colliderSettings.geometryColor, {\n                        lineWidth: colliderSettings.geometryLineWidth,\n                        pointSize: colliderSettings.geometryPointSize\n                    });\n                }\n                if (colliderSettings.showAll || colliderSettings.showBounds) {\n                    if (collider instanceof CompositeCollider) {\n                        const colliders = collider.getColliders();\n                        for (const collider of colliders) {\n                            const bounds = collider.bounds;\n                            const pos = vec(bounds.left, bounds.top);\n                            this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\n                            if (colliderSettings.showAll || colliderSettings.showOwner) {\n                                this._graphicsContext.debug.drawText(`owner id(${collider.owner.id})`, pos);\n                            }\n                        }\n                        colliderComp.bounds.draw(this._graphicsContext, colliderSettings.boundsColor);\n                    }\n                    else if (collider) {\n                        const bounds = colliderComp.bounds;\n                        const pos = vec(bounds.left, bounds.top);\n                        this._graphicsContext.debug.drawRect(pos.x, pos.y, bounds.width, bounds.height, { color: colliderSettings.boundsColor });\n                        if (colliderSettings.showAll || colliderSettings.showOwner) {\n                            this._graphicsContext.debug.drawText(`owner id(${colliderComp.owner.id})`, pos);\n                        }\n                    }\n                }\n            }\n            this._graphicsContext.restore();\n            this._popCameraTransform(tx);\n        }\n        this._graphicsContext.save();\n        this._camera.draw(this._graphicsContext);\n        if (physicsSettings.showAll || physicsSettings.showBroadphaseSpacePartitionDebug) {\n            this._collisionSystem.debug(this._graphicsContext);\n        }\n        if (physicsSettings.showAll || physicsSettings.showCollisionContacts || physicsSettings.showCollisionNormals) {\n            for (const [_, contact] of this._engine.debug.stats.currFrame.physics.contacts) {\n                if (physicsSettings.showAll || physicsSettings.showCollisionContacts) {\n                    for (const point of contact.points) {\n                        this._graphicsContext.debug.drawPoint(point, {\n                            size: physicsSettings.contactSize,\n                            color: physicsSettings.collisionContactColor\n                        });\n                    }\n                }\n                if (physicsSettings.showAll || physicsSettings.showCollisionNormals) {\n                    for (const point of contact.points) {\n                        this._graphicsContext.debug.drawLine(point, contact.normal.scale(30).add(point), {\n                            color: physicsSettings.collisionNormalColor\n                        });\n                    }\n                }\n            }\n        }\n        this._graphicsContext.restore();\n        if (cameraSettings) {\n            this._graphicsContext.save();\n            this._camera.draw(this._graphicsContext);\n            if (cameraSettings.showAll || cameraSettings.showFocus) {\n                this._graphicsContext.drawCircle(this._camera.pos, 4, cameraSettings.focusColor);\n            }\n            if (cameraSettings.showAll || cameraSettings.showZoom) {\n                this._graphicsContext.debug.drawText(`zoom(${this._camera.zoom})`, this._camera.pos);\n            }\n            this._graphicsContext.restore();\n        }\n        this._graphicsContext.flush();\n    }\n    postupdate(engine, elapsed) {\n        if (this._engine.isDebug) {\n            this._graphicsContext.save();\n            if (this._camera) {\n                this._camera.draw(this._graphicsContext);\n            }\n            Debug.flush(this._graphicsContext);\n            this._graphicsContext.restore();\n        }\n    }\n    /**\n     * This applies the current entity transform to the graphics context\n     * @param entity\n     */\n    _applyTransform(entity) {\n        const ancestors = entity.getAncestors();\n        for (const ancestor of ancestors) {\n            const transform = ancestor === null || ancestor === void 0 ? void 0 : ancestor.get(TransformComponent);\n            if (transform) {\n                this._graphicsContext.translate(transform.pos.x, transform.pos.y);\n                this._graphicsContext.scale(transform.scale.x, transform.scale.y);\n                this._graphicsContext.rotate(transform.rotation);\n            }\n        }\n    }\n    /**\n     * Applies the current camera transform if in world coordinates\n     * @param transform\n     */\n    _pushCameraTransform(transform) {\n        // Establish camera offset per entity\n        if (transform.coordPlane === CoordPlane.World) {\n            this._graphicsContext.save();\n            if (this._camera) {\n                this._camera.draw(this._graphicsContext);\n            }\n        }\n    }\n    /**\n     * Resets the current camera transform if in world coordinates\n     * @param transform\n     */\n    _popCameraTransform(transform) {\n        if (transform.coordPlane === CoordPlane.World) {\n            // Apply camera world offset\n            this._graphicsContext.restore();\n        }\n    }\n}\nDebugSystem.priority = SystemPriority.Lowest;\n\n;// ./Collision/Detection/SparseHashGrid.ts\n\n\n\n\nclass HashGridProxy {\n    constructor(object, gridSize) {\n        this.object = object;\n        this.id = -1;\n        this.cells = [];\n        this.hasZeroBounds = false;\n        this.gridSize = gridSize;\n        this.bounds = object.bounds;\n        this.hasZeroBounds = this.bounds.hasZeroDimensions();\n        this.leftX = Math.floor(this.bounds.left / this.gridSize);\n        this.rightX = Math.floor(this.bounds.right / this.gridSize);\n        this.bottomY = Math.floor(this.bounds.bottom / this.gridSize);\n        this.topY = Math.floor(this.bounds.top / this.gridSize);\n    }\n    /**\n     * Has the hashed bounds changed\n     */\n    hasChanged() {\n        const bounds = this.object.bounds;\n        const leftX = Math.floor(bounds.left / this.gridSize);\n        const rightX = Math.floor(bounds.right / this.gridSize);\n        const bottomY = Math.floor(bounds.bottom / this.gridSize);\n        const topY = Math.floor(bounds.top / this.gridSize);\n        if (this.leftX !== leftX || this.rightX !== rightX || this.bottomY !== bottomY || this.topY !== topY) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Clears all collider references\n     */\n    clear() {\n        for (const cell of this.cells) {\n            const index = cell.proxies.indexOf(this);\n            if (index > -1) {\n                cell.proxies.splice(index, 1);\n            }\n            // TODO reclaim cell in pool if empty?\n        }\n    }\n    /**\n     * Update bounds of the proxy\n     */\n    updateBounds() {\n        this.bounds = this.object.bounds;\n    }\n    /**\n     * Updates the hashed bounds coordinates\n     */\n    update() {\n        this.bounds = this.object.bounds;\n        this.leftX = Math.floor(this.bounds.left / this.gridSize);\n        this.rightX = Math.floor(this.bounds.right / this.gridSize);\n        this.bottomY = Math.floor(this.bounds.bottom / this.gridSize);\n        this.topY = Math.floor(this.bounds.top / this.gridSize);\n        this.hasZeroBounds = this.object.bounds.hasZeroDimensions();\n    }\n}\nclass HashGridCell {\n    constructor() {\n        this.proxies = [];\n    }\n    configure(x, y) {\n        this.x = x;\n        this.y = y;\n        this.key = HashGridCell.calculateHashKey(x, y);\n    }\n    static calculateHashKey(x, y) {\n        return `${x}+${y}`;\n    }\n}\nclass SparseHashGrid {\n    constructor(options) {\n        this.bounds = new BoundingBox();\n        this._hashGridCellPool = new RentalPool(() => new HashGridCell(), (instance) => {\n            instance.configure(0, 0);\n            instance.proxies.length = 0;\n            return instance;\n        }, 1000);\n        this.gridSize = options.size;\n        this.sparseHashGrid = new Map();\n        this.objectToProxy = new Map();\n        if (options.proxyFactory) {\n            this._buildProxy = (object) => options.proxyFactory(object, this.gridSize);\n        }\n        else {\n            this._buildProxy = (object) => new HashGridProxy(object, this.gridSize);\n        }\n        // TODO dynamic grid size potentially larger than the largest collider\n        // TODO Re-hash the objects if the median proves to be different\n    }\n    query(boundsOrPoint) {\n        const results = new Set();\n        if (boundsOrPoint instanceof BoundingBox) {\n            const bounds = boundsOrPoint;\n            const leftX = Math.floor(bounds.left / this.gridSize);\n            const rightX = Math.floor(bounds.right / this.gridSize);\n            const bottomY = Math.floor(bounds.bottom / this.gridSize);\n            const topY = Math.floor(bounds.top / this.gridSize);\n            for (let x = leftX; x <= rightX; x++) {\n                for (let y = topY; y <= bottomY; y++) {\n                    const key = HashGridCell.calculateHashKey(x, y);\n                    // Hash bounds into appropriate cell\n                    const cell = this.sparseHashGrid.get(key);\n                    if (cell) {\n                        for (let i = 0; i < cell.proxies.length; i++) {\n                            cell.proxies[i].updateBounds();\n                            if (cell.proxies[i].bounds.intersect(bounds)) {\n                                results.add(cell.proxies[i].object);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            const point = boundsOrPoint;\n            const key = HashGridCell.calculateHashKey(Math.floor(point.x / this.gridSize), Math.floor(point.y / this.gridSize));\n            // Hash points into appropriate cell\n            const cell = this.sparseHashGrid.get(key);\n            if (cell) {\n                for (let i = 0; i < cell.proxies.length; i++) {\n                    cell.proxies[i].updateBounds();\n                    if (cell.proxies[i].bounds.contains(point)) {\n                        results.add(cell.proxies[i].object);\n                    }\n                }\n            }\n        }\n        return Array.from(results);\n    }\n    get(xCoord, yCoord) {\n        const key = HashGridCell.calculateHashKey(xCoord, yCoord);\n        const cell = this.sparseHashGrid.get(key);\n        return cell;\n    }\n    _insert(x, y, proxy) {\n        const key = HashGridCell.calculateHashKey(x, y);\n        // Hash collider into appropriate cell\n        let cell = this.sparseHashGrid.get(key);\n        if (!cell) {\n            cell = this._hashGridCellPool.rent();\n            cell.configure(x, y);\n            this.sparseHashGrid.set(cell.key, cell);\n        }\n        cell.proxies.push(proxy);\n        proxy.cells.push(cell); // TODO dupes, doesn't seem to be a problem\n        this.bounds.combine(proxy.bounds, this.bounds);\n    }\n    _remove(x, y, proxy) {\n        const key = HashGridCell.calculateHashKey(x, y);\n        // Hash collider into appropriate cell\n        const cell = this.sparseHashGrid.get(key);\n        if (cell) {\n            const proxyIndex = cell.proxies.indexOf(proxy);\n            if (proxyIndex > -1) {\n                cell.proxies.splice(proxyIndex, 1);\n            }\n            const cellIndex = proxy.cells.indexOf(cell);\n            if (cellIndex > -1) {\n                proxy.cells.splice(cellIndex, 1);\n            }\n            if (cell.proxies.length === 0) {\n                this._hashGridCellPool.return(cell);\n                this.sparseHashGrid.delete(key);\n            }\n        }\n    }\n    track(target) {\n        const proxy = this._buildProxy(target);\n        this.objectToProxy.set(target, proxy);\n        for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n            for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                this._insert(x, y, proxy);\n            }\n        }\n    }\n    untrack(target) {\n        const proxy = this.objectToProxy.get(target);\n        if (proxy) {\n            proxy.clear();\n            this.objectToProxy.delete(target);\n        }\n    }\n    update(targets) {\n        let updated = 0;\n        // FIXME resetting bounds is wrong, if nothing has updated then\n        // the bounds stay 0\n        // this.bounds.reset();\n        for (const target of targets) {\n            const proxy = this.objectToProxy.get(target);\n            if (!proxy) {\n                continue;\n            }\n            if (proxy.hasChanged()) {\n                // TODO slightly wasteful only remove from changed\n                for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n                    for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                        this._remove(x, y, proxy);\n                    }\n                }\n                proxy.update();\n                // TODO slightly wasteful only add new\n                for (let x = proxy.leftX; x <= proxy.rightX; x++) {\n                    for (let y = proxy.topY; y <= proxy.bottomY; y++) {\n                        this._insert(x, y, proxy);\n                    }\n                }\n                updated++;\n            }\n        }\n        return updated;\n    }\n    debug(ex, elapsed) {\n        const transparent = Color.Transparent;\n        const color = Color.White;\n        for (const cell of this.sparseHashGrid.values()) {\n            ex.drawRectangle(vec(cell.x * this.gridSize, cell.y * this.gridSize), this.gridSize, this.gridSize, transparent, color, 2);\n        }\n    }\n}\n\n;// ./Input/PointerSystem.ts\n\n\n\n\n\n\n/**\n * The PointerSystem is responsible for dispatching pointer events to entities\n * that need them.\n *\n * The PointerSystem can be optionally configured by the {@apilink PointerComponent}, by default Entities use\n * the {@apilink Collider}'s shape for pointer events.\n */\nclass PointerSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this._graphicsHashGrid = new SparseHashGrid({ size: 100 });\n        this._graphics = [];\n        this._entityToPointer = new Map();\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        /**\n         * Optionally override component configuration for all entities\n         */\n        this.overrideUseColliderShape = false;\n        /**\n         * Optionally override component configuration for all entities\n         */\n        this.overrideUseGraphicsBounds = false;\n        this._sortedTransforms = [];\n        this._sortedEntities = [];\n        this._zHasChanged = false;\n        this._zIndexUpdate = () => {\n            this._zHasChanged = true;\n        };\n        this.query = this.world.query([TransformComponent, PointerComponent]);\n        this.query.entityAdded$.subscribe((e) => {\n            const tx = e.get(TransformComponent);\n            const pointer = e.get(PointerComponent);\n            this._pointerEventDispatcher.addObject(e, (pos) => {\n                // If pointer bounds defined\n                if (pointer && pointer.localBounds) {\n                    const pointerBounds = pointer.localBounds.transform(tx.get().matrix);\n                    return pointerBounds.contains(tx.coordPlane === CoordPlane.World ? pos.worldPos : pos.screenPos);\n                }\n                return false;\n            }, () => e.isActive);\n            this._entityToPointer.set(e, pointer);\n            const maybeGfx = e.get(GraphicsComponent);\n            if (maybeGfx) {\n                this._graphics.push(maybeGfx);\n                this._graphicsHashGrid.track(maybeGfx);\n            }\n            this._sortedTransforms.push(tx);\n            this._sortedEntities.push(tx.owner);\n            tx.zIndexChanged$.subscribe(this._zIndexUpdate);\n            this._zHasChanged = true;\n        });\n        this.query.entityRemoved$.subscribe((e) => {\n            this._pointerEventDispatcher.removeObject(e);\n            const tx = e.get(TransformComponent);\n            this._entityToPointer.delete(e);\n            const maybeGfx = e.get(GraphicsComponent);\n            if (maybeGfx) {\n                const index = this._graphics.indexOf(maybeGfx);\n                if (index > -1) {\n                    this._graphics.splice(index, 1);\n                }\n                this._graphicsHashGrid.untrack(maybeGfx);\n            }\n            tx.zIndexChanged$.unsubscribe(this._zIndexUpdate);\n            const index = this._sortedTransforms.indexOf(tx);\n            if (index > -1) {\n                this._sortedTransforms.splice(index, 1);\n                this._sortedEntities.splice(index, 1);\n            }\n        });\n    }\n    initialize(world, scene) {\n        this._engine = scene.engine;\n        this._scene = scene;\n    }\n    preupdate() {\n        if (this._scene.camera.hasChanged()) {\n            // if the camera has changed we want to force a transform update so pointers can be correctly calc'd\n            this._scene.camera.updateTransform(this._scene.camera.pos);\n        }\n        // event receiver might change per frame\n        this._receivers = [this._engine.input.pointers, this._scene.input.pointers];\n        this._engineReceiver = this._engine.input.pointers;\n        if (this._zHasChanged) {\n            this._sortedTransforms.sort((a, b) => {\n                return b.z - a.z;\n            });\n            this._sortedEntities = this._sortedTransforms.map((t) => t.owner);\n            this._zHasChanged = false;\n        }\n    }\n    update() {\n        // Update graphics\n        this._graphicsHashGrid.update(this._graphics);\n        // Locate all the pointer/entity mappings\n        for (const [pointerId, pos] of this._engineReceiver.currentFramePointerCoords.entries()) {\n            const colliders = this._scene.physics.query(pos.worldPos);\n            for (let i = 0; i < colliders.length; i++) {\n                const collider = colliders[i];\n                const maybePointer = this._entityToPointer.get(collider.owner);\n                if (maybePointer && (maybePointer.useColliderShape || this.overrideUseColliderShape)) {\n                    this._pointerEventDispatcher.addPointerToObject(collider.owner, pointerId);\n                }\n            }\n            const graphics = this._graphicsHashGrid.query(pos.worldPos);\n            for (let i = 0; i < graphics.length; i++) {\n                const graphic = graphics[i];\n                const maybePointer = this._entityToPointer.get(graphic.owner);\n                if (maybePointer && (maybePointer.useGraphicsBounds || this.overrideUseGraphicsBounds)) {\n                    this._pointerEventDispatcher.addPointerToObject(graphic.owner, pointerId);\n                }\n            }\n        }\n        this._pointerEventDispatcher.processPointerToObject(this._engineReceiver, this._sortedEntities);\n        // Dispatch pointer events on entities\n        this._pointerEventDispatcher.dispatchEvents(this._engineReceiver, this._sortedEntities);\n        // Dispatch pointer events on top level pointers\n        this._receivers.forEach((r) => r.update());\n        // Clear last frame's events\n        this._pointerEventDispatcher.clear();\n        this._receivers.forEach((r) => r.clear());\n    }\n}\nPointerSystem.priority = SystemPriority.Higher;\n\n;// ./Actions/ActionsSystem.ts\n\n\n\nclass ActionsSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this._actions = [];\n        this.query = this.world.query([ActionsComponent]);\n        this.query.entityAdded$.subscribe((e) => this._actions.push(e.get(ActionsComponent)));\n        this.query.entityRemoved$.subscribe((e) => {\n            const action = e.get(ActionsComponent);\n            const index = this._actions.indexOf(action);\n            if (index > -1) {\n                this._actions.splice(index, 1);\n            }\n        });\n    }\n    update(elapsed) {\n        for (let i = 0; i < this._actions.length; i++) {\n            const action = this._actions[i];\n            action.update(elapsed);\n        }\n    }\n}\nActionsSystem.priority = SystemPriority.Higher;\n\n;// ./TileMap/IsometricEntityComponent.ts\n\nclass IsometricEntityComponent extends Component {\n    /**\n     * Specify the isometric map to use to position this entity's z-index\n     * @param mapOrOptions\n     */\n    constructor(mapOrOptions) {\n        super();\n        /**\n         * Vertical \"height\" in the isometric world\n         */\n        this.elevation = 0;\n        this.columns = mapOrOptions.columns;\n        this.rows = mapOrOptions.rows;\n        this.tileWidth = mapOrOptions.tileWidth;\n        this.tileHeight = mapOrOptions.tileHeight;\n    }\n}\n\n;// ./TileMap/IsometricEntitySystem.ts\n\n\n\n\nclass IsometricEntitySystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Update;\n        this.query = this.world.query([TransformComponent, IsometricEntityComponent]);\n    }\n    update() {\n        let transform;\n        let iso;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            transform = entity.get(TransformComponent);\n            iso = entity.get(IsometricEntityComponent);\n            const maxZindexPerElevation = Math.max(iso.columns * iso.tileWidth, iso.rows * iso.tileHeight);\n            const newZ = maxZindexPerElevation * iso.elevation + transform.pos.y;\n            transform.z = newZ;\n        }\n    }\n}\nIsometricEntitySystem.priority = SystemPriority.Lower;\n\n;// ./Graphics/OffscreenSystem.ts\n\n\n\n\n\n\n\n\nclass OffscreenSystem extends System {\n    constructor(world) {\n        super();\n        this.world = world;\n        this.systemType = SystemType.Draw;\n        this.query = this.world.query([TransformComponent, GraphicsComponent]);\n    }\n    initialize(world, scene) {\n        this._camera = scene.camera;\n        this._screen = scene.engine.screen;\n    }\n    update() {\n        this._worldBounds = this._screen.getWorldBounds();\n        let transform;\n        let graphics;\n        let maybeParallax;\n        for (let i = 0; i < this.query.entities.length; i++) {\n            const entity = this.query.entities[i];\n            graphics = entity.get(GraphicsComponent);\n            transform = entity.get(TransformComponent);\n            maybeParallax = entity.get(ParallaxComponent);\n            let parallaxOffset;\n            if (maybeParallax) {\n                // We use the Tiled formula\n                // https://doc.mapeditor.org/en/latest/manual/layers/#parallax-scrolling-factor\n                // cameraPos * (1 - parallaxFactor)\n                const oneMinusFactor = Vector.One.sub(maybeParallax.parallaxFactor);\n                parallaxOffset = this._camera.pos.scale(oneMinusFactor);\n            }\n            // Figure out if entities are offscreen\n            const entityOffscreen = this._isOffscreen(transform, graphics, parallaxOffset);\n            if (entityOffscreen && !entity.hasTag('ex.offscreen')) {\n                entity.events.emit('exitviewport', new ExitViewPortEvent(entity));\n                entity.addTag('ex.offscreen');\n            }\n            if (!entityOffscreen && entity.hasTag('ex.offscreen')) {\n                entity.events.emit('enterviewport', new EnterViewPortEvent(entity));\n                entity.removeTag('ex.offscreen');\n            }\n        }\n    }\n    _isOffscreen(transform, graphics, parallaxOffset) {\n        if (graphics.forceOnScreen) {\n            return false;\n        }\n        if (transform.coordPlane === CoordPlane.World) {\n            let bounds = graphics.localBounds;\n            if (parallaxOffset) {\n                bounds = bounds.translate(parallaxOffset);\n            }\n            const transformedBounds = bounds.transform(transform.get().matrix);\n            const graphicsOffscreen = !this._worldBounds.overlaps(transformedBounds);\n            return graphicsOffscreen;\n        }\n        else {\n            // TODO screen coordinates\n            return false;\n        }\n    }\n}\nOffscreenSystem.priority = SystemPriority.Higher;\n\n;// ./Collision/Detection/SparseHashGridCollisionProcessor.ts\n\n\n\n\n\n\n\n\n\n/**\n * Proxy type to stash collision info\n */\nclass HashColliderProxy extends HashGridProxy {\n    constructor(collider, gridSize) {\n        var _a, _b;\n        super(collider, gridSize);\n        this.collider = collider;\n        this.id = -1;\n        this.hasZeroBounds = false;\n        /**\n         * References to the hash cell the collider is a current member of\n         */\n        this.cells = [];\n        this.gridSize = gridSize;\n        const bounds = collider.bounds;\n        this.hasZeroBounds = bounds.hasZeroDimensions();\n        this.leftX = Math.floor(bounds.left / this.gridSize);\n        this.rightX = Math.floor(bounds.right / this.gridSize);\n        this.bottomY = Math.floor(bounds.bottom / this.gridSize);\n        this.topY = Math.floor(bounds.top / this.gridSize);\n        this.owner = collider.owner;\n        this.body = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        this.collisionType = (_b = this.body.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n    }\n    /**\n     * Updates the hashed bounds coordinates\n     */\n    update() {\n        var _a, _b;\n        super.update();\n        this.body = (_a = this.owner) === null || _a === void 0 ? void 0 : _a.get(BodyComponent);\n        this.collisionType = (_b = this.body.collisionType) !== null && _b !== void 0 ? _b : CollisionType.PreventCollision;\n        this.hasZeroBounds = this.collider.localBounds.hasZeroDimensions();\n    }\n}\n/**\n * This collision processor uses a sparsely populated grid of uniform cells to bucket potential\n * colliders together for the purpose of detecting collision pairs and collisions.\n */\nclass SparseHashGridCollisionProcessor {\n    constructor(options) {\n        this._pairs = new Set();\n        this._nonPairs = new Set();\n        this._pairPool = new Pool(() => new Pair({ id: createId('collider', 0) }, { id: createId('collider', 0) }), (instance) => {\n            instance.colliderA = null;\n            instance.colliderB = null;\n            return instance;\n        }, 200);\n        this.gridSize = options.size;\n        this.hashGrid = new SparseHashGrid({\n            size: this.gridSize,\n            proxyFactory: (collider, size) => new HashColliderProxy(collider, size)\n        });\n        this._pairPool.disableWarnings = true;\n        // TODO dynamic grid size potentially larger than the largest collider\n        // TODO Re-hash the objects if the median proves to be different\n    }\n    getColliders() {\n        return Array.from(this.hashGrid.objectToProxy.keys());\n    }\n    query(boundsOrPoint) {\n        // FIXME workaround TS: https://github.com/microsoft/TypeScript/issues/14107\n        return this.hashGrid.query(boundsOrPoint);\n    }\n    rayCast(ray, options) {\n        var _a, _b, _c;\n        // DDA raycast algo\n        const results = [];\n        const maxDistance = (_a = options === null || options === void 0 ? void 0 : options.maxDistance) !== null && _a !== void 0 ? _a : Infinity;\n        const collisionGroup = options === null || options === void 0 ? void 0 : options.collisionGroup;\n        const collisionMask = !collisionGroup ? (_b = options === null || options === void 0 ? void 0 : options.collisionMask) !== null && _b !== void 0 ? _b : CollisionGroup.All.category : collisionGroup.category;\n        const searchAllColliders = (_c = options === null || options === void 0 ? void 0 : options.searchAllColliders) !== null && _c !== void 0 ? _c : false;\n        const unitRay = ray.dir.normalize();\n        const dydx = unitRay.y / unitRay.x;\n        const dxdy = unitRay.x / unitRay.y;\n        const unitStepX = Math.sqrt(1 + dydx * dydx) * this.gridSize;\n        const unitStepY = Math.sqrt(1 + dxdy * dxdy) * this.gridSize;\n        const startXCoord = ray.pos.x / this.gridSize;\n        const startYCoord = ray.pos.y / this.gridSize;\n        const stepDir = vec(1, 1);\n        let currentXCoord = ~~startXCoord;\n        let currentYCoord = ~~startYCoord;\n        let currentRayLengthX = 0;\n        let currentRayLengthY = 0;\n        if (unitRay.x < 0) {\n            stepDir.x = -1;\n            currentRayLengthX = (startXCoord - currentXCoord) * unitStepX;\n        }\n        else {\n            stepDir.x = 1;\n            currentRayLengthX = (currentXCoord + 1 - startXCoord) * unitStepX;\n        }\n        if (unitRay.y < 0) {\n            stepDir.y = -1;\n            currentRayLengthY = (startYCoord - currentYCoord) * unitStepY;\n        }\n        else {\n            stepDir.y = 1;\n            currentRayLengthY = (currentYCoord + 1 - startYCoord) * unitStepY;\n        }\n        const collidersVisited = new Set();\n        let done = false;\n        let maxIterations = 9999;\n        while (!done && maxIterations > 0) {\n            maxIterations--; // safety exit\n            // exit if exhausted max hash grid coordinate, bounds of the sparse grid\n            if (!this.hashGrid.bounds.contains(vec(currentXCoord * this.gridSize, currentYCoord * this.gridSize))) {\n                break;\n            }\n            // Test colliders at cell\n            const key = HashGridCell.calculateHashKey(currentXCoord, currentYCoord);\n            const cell = this.hashGrid.sparseHashGrid.get(key);\n            if (cell) {\n                const cellHits = [];\n                for (let colliderIndex = 0; colliderIndex < cell.proxies.length; colliderIndex++) {\n                    const collider = cell.proxies[colliderIndex];\n                    if (!collidersVisited.has(collider.collider.id.value)) {\n                        collidersVisited.add(collider.collider.id.value);\n                        if ((options === null || options === void 0 ? void 0 : options.ignoreCollisionGroupAll) && collider.body.group === CollisionGroup.All) {\n                            continue;\n                        }\n                        const canCollide = (collisionMask & collider.body.group.category) !== 0;\n                        // Early exit if not the right group\n                        if (collider.body.group && !canCollide) {\n                            continue;\n                        }\n                        const hit = collider.collider.rayCast(ray, maxDistance);\n                        // Collect up all the colliders that hit inside a cell\n                        // they can be in any order so we need to sort them next\n                        if (hit) {\n                            cellHits.push(hit);\n                        }\n                    }\n                }\n                cellHits.sort((hit1, hit2) => hit1.distance - hit2.distance);\n                for (let i = 0; i < cellHits.length; i++) {\n                    const hit = cellHits[i];\n                    if (options === null || options === void 0 ? void 0 : options.filter) {\n                        if (options.filter(hit)) {\n                            results.push(hit);\n                            if (!searchAllColliders) {\n                                done = true;\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        results.push(hit);\n                        if (!searchAllColliders) {\n                            done = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            if (currentRayLengthX < currentRayLengthY) {\n                currentXCoord += stepDir.x;\n                currentRayLengthX += unitStepX;\n            }\n            else {\n                currentYCoord += stepDir.y;\n                currentRayLengthY += unitStepY;\n            }\n        }\n        // Sort by distance\n        results.sort((hit1, hit2) => hit1.distance - hit2.distance);\n        if (!searchAllColliders && results.length) {\n            return [results[0]];\n        }\n        return results;\n    }\n    /**\n     * Adds the collider to the internal data structure for collision tracking\n     * @param target\n     */\n    track(target) {\n        let colliders = [target];\n        if (target instanceof CompositeCollider) {\n            const compColliders = target.getColliders();\n            for (const c of compColliders) {\n                c.owner = target.owner;\n            }\n            colliders = compColliders;\n        }\n        for (const target of colliders) {\n            this.hashGrid.track(target);\n        }\n    }\n    /**\n     * Removes a collider from the internal data structure for tracking collisions\n     * @param target\n     */\n    untrack(target) {\n        let colliders = [target];\n        if (target instanceof CompositeCollider) {\n            colliders = target.getColliders();\n        }\n        for (const target of colliders) {\n            this.hashGrid.untrack(target);\n        }\n    }\n    _canCollide(colliderA, colliderB) {\n        // Prevent self collision\n        if (colliderA.collider.id === colliderB.collider.id) {\n            return false;\n        }\n        // Colliders with the same owner do not collide (composite colliders)\n        if (colliderA.owner && colliderB.owner && colliderA.owner.id === colliderB.owner.id) {\n            return false;\n        }\n        // if the pair has a member with zero dimension don't collide\n        if (colliderA.hasZeroBounds || colliderB.hasZeroBounds) {\n            return false;\n        }\n        // If both are in the same collision group short circuit\n        if (!colliderA.body.group.canCollide(colliderB.body.group)) {\n            return false;\n        }\n        // if both are fixed short circuit\n        if (colliderA.collisionType === CollisionType.Fixed && colliderB.collisionType === CollisionType.Fixed) {\n            return false;\n        }\n        // if the either is prevent collision short circuit\n        if (colliderA.collisionType === CollisionType.PreventCollision || colliderB.collisionType === CollisionType.PreventCollision) {\n            return false;\n        }\n        // if either is dead short circuit\n        if (!colliderA.owner.isActive || !colliderB.owner.isActive) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Runs the broadphase sweep over tracked colliders and returns possible collision pairs\n     * @param targets\n     * @param elapsed\n     */\n    broadphase(targets, elapsed) {\n        const pairs = [];\n        this._pairs.clear();\n        this._nonPairs.clear();\n        let proxyId = 0;\n        for (const proxy of this.hashGrid.objectToProxy.values()) {\n            proxy.id = proxyId++; // track proxies we've already processed\n            if (!proxy.owner.isActive || proxy.collisionType === CollisionType.PreventCollision) {\n                continue;\n            }\n            // for every cell proxy collider is member of\n            for (let cellIndex = 0; cellIndex < proxy.cells.length; cellIndex++) {\n                const cell = proxy.cells[cellIndex];\n                // TODO Can we skip any cells or make this iteration faster?\n                // maybe a linked list here\n                for (let otherIndex = 0; otherIndex < cell.proxies.length; otherIndex++) {\n                    const other = cell.proxies[otherIndex];\n                    if (other.id === proxy.id) {\n                        // skip duplicates\n                        continue;\n                    }\n                    const id = Pair.calculatePairHash(proxy.collider.id, other.collider.id);\n                    if (this._nonPairs.has(id)) {\n                        continue; // Is there a way we can re-use the non-pair cache\n                    }\n                    if (!this._pairs.has(id) && this._canCollide(proxy, other) && proxy.object.bounds.overlaps(other.object.bounds)) {\n                        const pair = this._pairPool.get();\n                        pair.colliderA = proxy.collider;\n                        pair.colliderB = other.collider;\n                        pair.id = id;\n                        this._pairs.add(id);\n                        pairs.push(pair);\n                    }\n                    else {\n                        this._nonPairs.add(id);\n                    }\n                }\n            }\n        }\n        return pairs;\n    }\n    /**\n     * Runs a fine grain pass on collision pairs and does geometry intersection tests producing any contacts\n     * @param pairs\n     * @param stats\n     */\n    narrowphase(pairs, stats) {\n        const contacts = [];\n        for (let i = 0; i < pairs.length; i++) {\n            const newContacts = pairs[i].collide();\n            for (let j = 0; j < newContacts.length; j++) {\n                const c = newContacts[j];\n                contacts.push(c);\n                if (stats) {\n                    stats.physics.contacts.set(c.id, c);\n                }\n            }\n        }\n        this._pairPool.done();\n        if (stats) {\n            stats.physics.collisions += contacts.length;\n        }\n        return contacts; // TODO maybe we can re-use contacts as likely pairs next frame\n    }\n    /**\n     * Perform data structure maintenance, returns number of colliders updated\n     */\n    update(targets, elapsed) {\n        return this.hashGrid.update(targets);\n    }\n    /**\n     * Draws the internal data structure\n     * @param ex\n     * @param elapsed\n     */\n    debug(ex, elapsed) {\n        this.hashGrid.debug(ex, elapsed);\n    }\n}\n\n;// ./Collision/PhysicsWorld.ts\n\n\n\n\n\nclass PhysicsWorld {\n    get config() {\n        return watchDeep(this._config, (change) => {\n            this.$configUpdate.notifyAll(change);\n        });\n    }\n    set config(newConfig) {\n        this._config = newConfig;\n        this.$configUpdate.notifyAll(newConfig);\n    }\n    /**\n     * Spatial data structure for locating potential collision pairs and ray casts\n     */\n    get collisionProcessor() {\n        if (this._configDirty) {\n            this._configDirty = false;\n            // preserve tracked colliders if config updates\n            const colliders = this._collisionProcessor.getColliders();\n            if (this._config.spatialPartition === SpatialPartitionStrategy.SparseHashGrid) {\n                this._collisionProcessor = new SparseHashGridCollisionProcessor(this._config.sparseHashGrid);\n            }\n            else {\n                this._collisionProcessor = new DynamicTreeCollisionProcessor(this._config);\n            }\n            for (const collider of colliders) {\n                this._collisionProcessor.track(collider);\n            }\n        }\n        return this._collisionProcessor;\n    }\n    constructor(config) {\n        this.$configUpdate = new Observable();\n        this._configDirty = false;\n        this.config = config;\n        this.$configUpdate.subscribe((config) => {\n            this._configDirty = true;\n            BodyComponent.updateDefaultPhysicsConfig(config.bodies);\n        });\n        if (this._config.spatialPartition === SpatialPartitionStrategy.SparseHashGrid) {\n            this._collisionProcessor = new SparseHashGridCollisionProcessor(this._config.sparseHashGrid);\n        }\n        else {\n            this._collisionProcessor = new DynamicTreeCollisionProcessor(this._config);\n        }\n    }\n    /**\n     * Raycast into the scene's physics world\n     * @param ray\n     * @param options\n     */\n    rayCast(ray, options) {\n        return this.collisionProcessor.rayCast(ray, options);\n    }\n    query(pointOrBounds) {\n        // FIXME workaround TS: https://github.com/microsoft/TypeScript/issues/14107\n        return this._collisionProcessor.query(pointOrBounds);\n    }\n}\n\n;// ./Input/Gamepad.ts\n\n\nconst GamepadEvents = {\n    GamepadConnect: 'connect',\n    GamepadDisconnect: 'disconnect',\n    GamepadButton: 'button',\n    GamepadAxis: 'axis'\n};\n/**\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\n * to provide controller support for your games.\n */\nclass Gamepads {\n    constructor() {\n        this.events = new EventEmitter();\n        /**\n         * Whether or not to poll for Gamepad input (default: `false`)\n         */\n        this.enabled = false;\n        /**\n         * Whether or not Gamepad API is supported\n         */\n        this.supported = !!navigator.getGamepads;\n        this._gamePadTimeStamps = [0, 0, 0, 0];\n        this._oldPads = [];\n        this._pads = [];\n        this._initSuccess = false;\n        this._navigator = navigator;\n        this._minimumConfiguration = null;\n        this._enabled = true;\n    }\n    init() {\n        if (!this.supported) {\n            return;\n        }\n        if (this._initSuccess) {\n            return;\n        }\n        // In Chrome, this will return 4 undefined items until a button is pressed\n        // In FF, this will not return any items until a button is pressed\n        this._oldPads = this._clonePads(this._navigator.getGamepads());\n        if (this._oldPads.length && this._oldPads[0]) {\n            this._initSuccess = true;\n        }\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    /**\n     * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\n     * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\n     * all other controllers with more axis or buttons are valid as well. If no minimum\n     * configuration is set all pads are valid.\n     */\n    setMinimumGamepadConfiguration(config) {\n        this._enableAndUpdate(); // if config is used, implicitly enable\n        this._minimumConfiguration = config;\n    }\n    /**\n     * When implicitly enabled, set the enabled flag and run an update so information is updated\n     */\n    _enableAndUpdate() {\n        if (!this.enabled) {\n            this.enabled = true;\n            this.update();\n        }\n    }\n    /**\n     * Checks a navigator gamepad against the minimum configuration if present.\n     */\n    _isGamepadValid(pad) {\n        if (!this._minimumConfiguration) {\n            return true;\n        }\n        if (!pad) {\n            return false;\n        }\n        const axesLength = pad.axes.filter((value) => {\n            return typeof value !== undefined;\n        }).length;\n        const buttonLength = pad.buttons.filter((value) => {\n            return typeof value !== undefined;\n        }).length;\n        return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        this._enableAndUpdate(); // implicitly enable\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this._enableAndUpdate(); // implicitly enable\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Updates Gamepad state and publishes Gamepad events\n     */\n    update() {\n        if (!this.enabled || !this.supported) {\n            return;\n        }\n        if (!this._enabled) {\n            return;\n        }\n        this.init();\n        const gamepads = this._navigator.getGamepads();\n        for (let i = 0; i < gamepads.length; i++) {\n            if (!gamepads[i]) {\n                const gamepad = this.at(i);\n                // If was connected, but now isn't emit the disconnect event\n                if (gamepad.connected) {\n                    this.events.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\n                }\n                // Reset connection status\n                gamepad.connected = false;\n                continue;\n            }\n            else {\n                if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\n                    this.events.emit('connect', new GamepadConnectEvent(i, this.at(i)));\n                }\n                // Set connection status\n                this.at(i).connected = true;\n            }\n            this.at(i).update();\n            // Only supported in Chrome\n            if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\n                continue;\n            }\n            this._gamePadTimeStamps[i] = gamepads[i].timestamp;\n            // Add reference to navigator gamepad\n            this.at(i).navigatorGamepad = gamepads[i];\n            // Buttons\n            let b, bi, a, ai, value;\n            for (b in Buttons) {\n                bi = Buttons[b];\n                if (typeof bi === 'number') {\n                    if (gamepads[i].buttons[bi]) {\n                        value = gamepads[i].buttons[bi].value;\n                        if (value !== this._oldPads[i].getButton(bi)) {\n                            if (gamepads[i].buttons[bi].pressed) {\n                                this.at(i).updateButton(bi, value);\n                                this.at(i).events.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\n                            }\n                            else {\n                                this.at(i).updateButton(bi, 0);\n                            }\n                        }\n                    }\n                }\n            }\n            // Axes\n            for (a in Axes) {\n                ai = Axes[a];\n                if (typeof ai === 'number') {\n                    value = gamepads[i].axes[ai];\n                    if (value !== this._oldPads[i].getAxes(ai)) {\n                        this.at(i).updateAxes(ai, value);\n                        this.at(i).events.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\n                    }\n                }\n            }\n            this._oldPads[i] = this._clonePad(gamepads[i]);\n        }\n    }\n    /**\n     * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\n     */\n    at(index) {\n        this._enableAndUpdate(); // implicitly enable gamepads when at() is called\n        if (index >= this._pads.length) {\n            // Ensure there is a pad to retrieve\n            for (let i = this._pads.length - 1, max = index; i < max; i++) {\n                this._pads.push(new Gamepad());\n                this._oldPads.push(new Gamepad());\n            }\n        }\n        return this._pads[index];\n    }\n    /**\n     * Returns a list of all valid gamepads that meet the minimum configuration requirement.\n     */\n    getValidGamepads() {\n        this._enableAndUpdate();\n        const result = [];\n        for (let i = 0; i < this._pads.length; i++) {\n            if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\n                result.push(this.at(i));\n            }\n        }\n        return result;\n    }\n    /**\n     * Gets the number of connected gamepads\n     */\n    count() {\n        return this._pads.filter((p) => p.connected).length;\n    }\n    _clonePads(pads) {\n        const arr = [];\n        for (let i = 0, len = pads.length; i < len; i++) {\n            arr.push(this._clonePad(pads[i]));\n        }\n        return arr;\n    }\n    /**\n     * Fastest way to clone a known object is to do it yourself\n     */\n    _clonePad(pad) {\n        let i, len;\n        const clonedPad = new Gamepad();\n        if (!pad) {\n            return clonedPad;\n        }\n        for (i = 0, len = pad.buttons.length; i < len; i++) {\n            if (pad.buttons[i]) {\n                clonedPad.updateButton(i, pad.buttons[i].value);\n            }\n        }\n        for (i = 0, len = pad.axes.length; i < len; i++) {\n            clonedPad.updateAxes(i, pad.axes[i]);\n        }\n        return clonedPad;\n    }\n}\n/**\n * The minimum value an axis has to move before considering it a change\n */\nGamepads.MinAxisMoveThreshold = 0.05;\n/**\n * Gamepad holds state information for a connected controller. See {@apilink Gamepads}\n * for more information on handling controller input.\n */\nclass Gamepad {\n    constructor() {\n        this.events = new EventEmitter();\n        this.connected = false;\n        this._axes = new Array(4);\n        this._buttons = new Array(16);\n        this._buttonsUp = new Array(16);\n        this._buttonsDown = new Array(16);\n        for (let i = 0; i < this._buttons.length; i++) {\n            this._buttons[i] = 0;\n        }\n        for (let i = 0; i < this._axes.length; i++) {\n            this._axes[i] = 0;\n        }\n    }\n    update() {\n        // Reset buttonsDown and buttonsUp after update is complete\n        this._buttonsDown = new Array(16);\n        this._buttonsUp = new Array(16);\n    }\n    /**\n     * Whether or not the given button is pressed\n     * @deprecated will be removed in v0.28.0. Use isButtonHeld instead\n     * @param button     The button to query\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    isButtonPressed(button, threshold = 1) {\n        return this._buttons[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button is held down. This is persisted between frames.\n     * @param button     The button to query\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    isButtonHeld(button, threshold = 1) {\n        return this._buttons[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button was just pressed this frame. This is cleared at the end of the update frame.\n     * @param button Test whether a button was just pressed\n     * @param threshold  The threshold over which the button is considered to be pressed\n     */\n    wasButtonPressed(button, threshold = 1) {\n        return this._buttonsDown[button] >= threshold;\n    }\n    /**\n     * Tests if a certain button was just released this frame. This is cleared at the end of the update frame.\n     * @param button  Test whether a button was just released\n     */\n    wasButtonReleased(button) {\n        return Boolean(this._buttonsUp[button]);\n    }\n    /**\n     * Gets the given button value between 0 and 1\n     */\n    getButton(button) {\n        return this._buttons[button];\n    }\n    /**\n     * Gets the given axis value between -1 and 1. Values below\n     * {@apilink MinAxisMoveThreshold} are considered 0.\n     */\n    getAxes(axes) {\n        const value = this._axes[axes];\n        if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\n            return 0;\n        }\n        else {\n            return value;\n        }\n    }\n    updateButton(buttonIndex, value) {\n        // button was just released\n        if (value === 0 && this._buttons[buttonIndex]) {\n            this._buttonsUp[buttonIndex] = 1;\n            // button was just pressed\n        }\n        else {\n            this._buttonsDown[buttonIndex] = value;\n        }\n        this._buttons[buttonIndex] = value;\n    }\n    updateAxes(axesIndex, value) {\n        this._axes[axesIndex] = value;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n}\n/**\n * Gamepad Buttons enumeration\n */\nvar Buttons;\n(function (Buttons) {\n    /**\n     * Face 1 button (e.g. A)\n     */\n    Buttons[Buttons[\"Face1\"] = 0] = \"Face1\";\n    /**\n     * Face 2 button (e.g. B)\n     */\n    Buttons[Buttons[\"Face2\"] = 1] = \"Face2\";\n    /**\n     * Face 3 button (e.g. X)\n     */\n    Buttons[Buttons[\"Face3\"] = 2] = \"Face3\";\n    /**\n     * Face 4 button (e.g. Y)\n     */\n    Buttons[Buttons[\"Face4\"] = 3] = \"Face4\";\n    /**\n     * Left bumper button\n     */\n    Buttons[Buttons[\"LeftBumper\"] = 4] = \"LeftBumper\";\n    /**\n     * Right bumper button\n     */\n    Buttons[Buttons[\"RightBumper\"] = 5] = \"RightBumper\";\n    /**\n     * Left trigger button\n     */\n    Buttons[Buttons[\"LeftTrigger\"] = 6] = \"LeftTrigger\";\n    /**\n     * Right trigger button\n     */\n    Buttons[Buttons[\"RightTrigger\"] = 7] = \"RightTrigger\";\n    /**\n     * Select button\n     */\n    Buttons[Buttons[\"Select\"] = 8] = \"Select\";\n    /**\n     * Start button\n     */\n    Buttons[Buttons[\"Start\"] = 9] = \"Start\";\n    /**\n     * Left analog stick press (e.g. L3)\n     */\n    Buttons[Buttons[\"LeftStick\"] = 10] = \"LeftStick\";\n    /**\n     * Right analog stick press (e.g. R3)\n     */\n    Buttons[Buttons[\"RightStick\"] = 11] = \"RightStick\";\n    /**\n     * D-pad up\n     */\n    Buttons[Buttons[\"DpadUp\"] = 12] = \"DpadUp\";\n    /**\n     * D-pad down\n     */\n    Buttons[Buttons[\"DpadDown\"] = 13] = \"DpadDown\";\n    /**\n     * D-pad left\n     */\n    Buttons[Buttons[\"DpadLeft\"] = 14] = \"DpadLeft\";\n    /**\n     * D-pad right\n     */\n    Buttons[Buttons[\"DpadRight\"] = 15] = \"DpadRight\";\n})(Buttons || (Buttons = {}));\n/**\n * Gamepad Axes enumeration\n */\nvar Axes;\n(function (Axes) {\n    /**\n     * Left analogue stick X direction\n     */\n    Axes[Axes[\"LeftStickX\"] = 0] = \"LeftStickX\";\n    /**\n     * Left analogue stick Y direction\n     */\n    Axes[Axes[\"LeftStickY\"] = 1] = \"LeftStickY\";\n    /**\n     * Right analogue stick X direction\n     */\n    Axes[Axes[\"RightStickX\"] = 2] = \"RightStickX\";\n    /**\n     * Right analogue stick Y direction\n     */\n    Axes[Axes[\"RightStickY\"] = 3] = \"RightStickY\";\n})(Axes || (Axes = {}));\n\n;// ./Input/InputMapper.ts\n/**\n * This allows you to map multiple inputs to specific commands! This is especially useful when\n * you need to allow multiple input sources to control a specific action.\n */\nclass InputMapper {\n    constructor(inputs) {\n        this.inputs = inputs;\n        this._handlers = new Map();\n    }\n    /**\n     * Executes the input map, called internally by Excalibur\n     */\n    execute() {\n        for (const [input, command] of this._handlers.entries()) {\n            const results = input(this.inputs);\n            if (results) {\n                command(results);\n            }\n        }\n    }\n    /**\n     * This allows you to map multiple inputs to specific commands! This is useful\n     *\n     * The inputHandler should return a truthy value if you wish the commandHandler to fire.\n     *\n     * Example:\n     * ```typescript\n     * const moveRight = (amount: number) => { actor.vel.x = 100 * amount }\n     * const moveLeft = (amount: number) => { actor.vel.x = -100 * amount }\n     * const moveUp = (amount: number) => { actor.vel.y = -100 * amount }\n     * const moveDown = (amount: number) => { actor.vel.y = 100 * amount }\n     *\n     * engine.inputMapper.on(({keyboard}) => keyboard.isHeld(ex.Keys.ArrowRight) ? 1 : 0, moveRight);\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).isButtonPressed(ex.Buttons.DpadRight) ? 1 : 0, moveRight);\n     * engine.inputMapper.on(({gamepads}) => gamepads.at(0).getAxes(ex.Axes.LeftStickX) > 0 ?\n     *  gamepads.at(0).getAxes(ex.Axes.LeftStickX) : 0, moveRight);\n     * ```\n     * @param inputHandler\n     * @param commandHandler\n     */\n    on(inputHandler, commandHandler) {\n        this._handlers.set(inputHandler, commandHandler);\n    }\n}\n\n;// ./Util/IFrame.ts\n/**\n * Checks if excalibur is in a x-origin iframe\n */\nfunction isCrossOriginIframe() {\n    try {\n        // Try and listen to events on top window frame if within an iframe.\n        //\n        // See https://github.com/excaliburjs/Excalibur/issues/1294\n        //\n        // Attempt to add an event listener, which triggers a DOMException on\n        // cross-origin iframes\n        const noop = () => {\n            return;\n        };\n        window.top.addEventListener('blur', noop);\n        window.top.removeEventListener('blur', noop);\n    }\n    catch (_a) {\n        return true;\n    }\n    return false;\n}\n\n;// ./Input/Keyboard.ts\n\n\n\n\n/**\n * Enum representing physical input key codes\n *\n * Spec: https://w3c.github.io/uievents-code/#key-alphanumeric-section\n */\nvar Keys;\n(function (Keys) {\n    // Writing System Keys https://w3c.github.io/uievents-code/#key-alphanumeric-writing-system\n    Keys[\"Backquote\"] = \"Backquote\";\n    Keys[\"Backslash\"] = \"Backslash\";\n    Keys[\"BracketLeft\"] = \"BracketLeft\";\n    Keys[\"BracketRight\"] = \"BracketRight\";\n    Keys[\"Comma\"] = \"Comma\";\n    // NUMBERS\n    Keys[\"Key0\"] = \"Digit0\";\n    Keys[\"Key1\"] = \"Digit1\";\n    Keys[\"Key2\"] = \"Digit2\";\n    Keys[\"Key3\"] = \"Digit3\";\n    Keys[\"Key4\"] = \"Digit4\";\n    Keys[\"Key5\"] = \"Digit5\";\n    Keys[\"Key6\"] = \"Digit6\";\n    Keys[\"Key7\"] = \"Digit7\";\n    Keys[\"Key8\"] = \"Digit8\";\n    Keys[\"Key9\"] = \"Digit9\";\n    Keys[\"Digit0\"] = \"Digit0\";\n    Keys[\"Digit1\"] = \"Digit1\";\n    Keys[\"Digit2\"] = \"Digit2\";\n    Keys[\"Digit3\"] = \"Digit3\";\n    Keys[\"Digit4\"] = \"Digit4\";\n    Keys[\"Digit5\"] = \"Digit5\";\n    Keys[\"Digit6\"] = \"Digit6\";\n    Keys[\"Digit7\"] = \"Digit7\";\n    Keys[\"Digit8\"] = \"Digit8\";\n    Keys[\"Digit9\"] = \"Digit9\";\n    Keys[\"Equal\"] = \"Equal\";\n    Keys[\"IntlBackslash\"] = \"IntlBackslash\";\n    Keys[\"IntlRo\"] = \"IntlRo\";\n    Keys[\"IntlYen\"] = \"IntlYen\";\n    // LETTERS\n    Keys[\"A\"] = \"KeyA\";\n    Keys[\"B\"] = \"KeyB\";\n    Keys[\"C\"] = \"KeyC\";\n    Keys[\"D\"] = \"KeyD\";\n    Keys[\"E\"] = \"KeyE\";\n    Keys[\"F\"] = \"KeyF\";\n    Keys[\"G\"] = \"KeyG\";\n    Keys[\"H\"] = \"KeyH\";\n    Keys[\"I\"] = \"KeyI\";\n    Keys[\"J\"] = \"KeyJ\";\n    Keys[\"K\"] = \"KeyK\";\n    Keys[\"L\"] = \"KeyL\";\n    Keys[\"M\"] = \"KeyM\";\n    Keys[\"N\"] = \"KeyN\";\n    Keys[\"O\"] = \"KeyO\";\n    Keys[\"P\"] = \"KeyP\";\n    Keys[\"Q\"] = \"KeyQ\";\n    Keys[\"R\"] = \"KeyR\";\n    Keys[\"S\"] = \"KeyS\";\n    Keys[\"T\"] = \"KeyT\";\n    Keys[\"U\"] = \"KeyU\";\n    Keys[\"V\"] = \"KeyV\";\n    Keys[\"W\"] = \"KeyW\";\n    Keys[\"X\"] = \"KeyX\";\n    Keys[\"Y\"] = \"KeyY\";\n    Keys[\"Z\"] = \"KeyZ\";\n    Keys[\"KeyA\"] = \"KeyA\";\n    Keys[\"KeyB\"] = \"KeyB\";\n    Keys[\"KeyC\"] = \"KeyC\";\n    Keys[\"KeyD\"] = \"KeyD\";\n    Keys[\"KeyE\"] = \"KeyE\";\n    Keys[\"KeyF\"] = \"KeyF\";\n    Keys[\"KeyG\"] = \"KeyG\";\n    Keys[\"KeyH\"] = \"KeyH\";\n    Keys[\"KeyI\"] = \"KeyI\";\n    Keys[\"KeyJ\"] = \"KeyJ\";\n    Keys[\"KeyK\"] = \"KeyK\";\n    Keys[\"KeyL\"] = \"KeyL\";\n    Keys[\"KeyM\"] = \"KeyM\";\n    Keys[\"KeyN\"] = \"KeyN\";\n    Keys[\"KeyO\"] = \"KeyO\";\n    Keys[\"KeyP\"] = \"KeyP\";\n    Keys[\"KeyQ\"] = \"KeyQ\";\n    Keys[\"KeyR\"] = \"KeyR\";\n    Keys[\"KeyS\"] = \"KeyS\";\n    Keys[\"KeyT\"] = \"KeyT\";\n    Keys[\"KeyU\"] = \"KeyU\";\n    Keys[\"KeyV\"] = \"KeyV\";\n    Keys[\"KeyW\"] = \"KeyW\";\n    Keys[\"KeyX\"] = \"KeyX\";\n    Keys[\"KeyY\"] = \"KeyY\";\n    Keys[\"KeyZ\"] = \"KeyZ\";\n    // SYMBOLS\n    Keys[\"Minus\"] = \"Minus\";\n    Keys[\"Period\"] = \"Period\";\n    Keys[\"Quote\"] = \"Quote\";\n    Keys[\"Semicolon\"] = \"Semicolon\";\n    Keys[\"Slash\"] = \"Slash\";\n    // Functional keys https://w3c.github.io/uievents-code/#key-alphanumeric-functional\n    Keys[\"AltLeft\"] = \"AltLeft\";\n    Keys[\"AltRight\"] = \"AltRight\";\n    Keys[\"Alt\"] = \"Alt\";\n    Keys[\"AltGraph\"] = \"AltGraph\";\n    Keys[\"Backspace\"] = \"Backspace\";\n    Keys[\"CapsLock\"] = \"CapsLock\";\n    Keys[\"ContextMenu\"] = \"ContextMenu\";\n    Keys[\"ControlLeft\"] = \"ControlLeft\";\n    Keys[\"ControlRight\"] = \"ControlRight\";\n    Keys[\"Enter\"] = \"Enter\";\n    Keys[\"MetaLeft\"] = \"MetaLeft\";\n    Keys[\"MetaRight\"] = \"MetaRight\";\n    Keys[\"ShiftLeft\"] = \"ShiftLeft\";\n    Keys[\"ShiftRight\"] = \"ShiftRight\";\n    Keys[\"Space\"] = \"Space\";\n    Keys[\"Tab\"] = \"Tab\";\n    Keys[\"Convert\"] = \"Convert\";\n    Keys[\"KanaMode\"] = \"KanaMode\";\n    Keys[\"NonConvert\"] = \"NonConvert\";\n    // Control Pad https://w3c.github.io/uievents-code/#key-controlpad-section\n    Keys[\"Delete\"] = \"Delete\";\n    Keys[\"End\"] = \"End\";\n    Keys[\"Help\"] = \"Help\";\n    Keys[\"Home\"] = \"Home\";\n    Keys[\"Insert\"] = \"Insert\";\n    Keys[\"PageDown\"] = \"PageDown\";\n    Keys[\"PageUp\"] = \"PageUp\";\n    // Arrow Pad https://w3c.github.io/uievents-code/#key-arrowpad-section\n    Keys[\"Up\"] = \"ArrowUp\";\n    Keys[\"Down\"] = \"ArrowDown\";\n    Keys[\"Left\"] = \"ArrowLeft\";\n    Keys[\"Right\"] = \"ArrowRight\";\n    Keys[\"ArrowUp\"] = \"ArrowUp\";\n    Keys[\"ArrowDown\"] = \"ArrowDown\";\n    Keys[\"ArrowLeft\"] = \"ArrowLeft\";\n    Keys[\"ArrowRight\"] = \"ArrowRight\";\n    // Numpad Section https://w3c.github.io/uievents-code/#key-numpad-section\n    Keys[\"NumLock\"] = \"NumLock\";\n    Keys[\"Numpad0\"] = \"Numpad0\";\n    Keys[\"Numpad1\"] = \"Numpad1\";\n    Keys[\"Numpad2\"] = \"Numpad2\";\n    Keys[\"Numpad3\"] = \"Numpad3\";\n    Keys[\"Numpad4\"] = \"Numpad4\";\n    Keys[\"Numpad5\"] = \"Numpad5\";\n    Keys[\"Numpad6\"] = \"Numpad6\";\n    Keys[\"Numpad7\"] = \"Numpad7\";\n    Keys[\"Numpad8\"] = \"Numpad8\";\n    Keys[\"Numpad9\"] = \"Numpad9\";\n    Keys[\"Num0\"] = \"Numpad0\";\n    Keys[\"Num1\"] = \"Numpad1\";\n    Keys[\"Num2\"] = \"Numpad2\";\n    Keys[\"Num3\"] = \"Numpad3\";\n    Keys[\"Num4\"] = \"Numpad4\";\n    Keys[\"Num5\"] = \"Numpad5\";\n    Keys[\"Num6\"] = \"Numpad6\";\n    Keys[\"Num7\"] = \"Numpad7\";\n    Keys[\"Num8\"] = \"Numpad8\";\n    Keys[\"Num9\"] = \"Numpad9\";\n    Keys[\"NumAdd\"] = \"NumpadAdd\";\n    Keys[\"NumpadAdd\"] = \"NumpadAdd\";\n    Keys[\"NumDecimal\"] = \"NumpadDecimal\";\n    Keys[\"NumpadDecimal\"] = \"NumpadDecimal\";\n    Keys[\"NumDivide\"] = \"NumpadDivide\";\n    Keys[\"NumpadDivide\"] = \"NumpadDivide\";\n    Keys[\"NumEnter\"] = \"NumpadEnter\";\n    Keys[\"NumpadEnter\"] = \"NumpadEnter\";\n    Keys[\"NumMultiply\"] = \"NumpadMultiply\";\n    Keys[\"NumpadMultiply\"] = \"NumpadMultiply\";\n    Keys[\"NumSubtract\"] = \"NumpadSubtract\";\n    Keys[\"NumpadSubtract\"] = \"NumpadSubtract\";\n    // NumComma = 'NumpadComma', // not x-browser\n    // NumpadComma = 'NumpadComma', // not x-browser\n    // Function section https://w3c.github.io/uievents-code/#key-function-section\n    Keys[\"Esc\"] = \"Escape\";\n    Keys[\"Escape\"] = \"Escape\";\n    Keys[\"F1\"] = \"F1\";\n    Keys[\"F2\"] = \"F2\";\n    Keys[\"F3\"] = \"F3\";\n    Keys[\"F4\"] = \"F4\";\n    Keys[\"F5\"] = \"F5\";\n    Keys[\"F6\"] = \"F6\";\n    Keys[\"F7\"] = \"F7\";\n    Keys[\"F8\"] = \"F8\";\n    Keys[\"F9\"] = \"F9\";\n    Keys[\"F10\"] = \"F10\";\n    Keys[\"F11\"] = \"F11\";\n    Keys[\"F12\"] = \"F12\";\n    Keys[\"F13\"] = \"F13\";\n    Keys[\"F14\"] = \"F14\";\n    Keys[\"F15\"] = \"F15\";\n    Keys[\"F16\"] = \"F16\";\n    Keys[\"F17\"] = \"F17\";\n    Keys[\"F18\"] = \"F18\";\n    Keys[\"F19\"] = \"F19\";\n    Keys[\"F20\"] = \"F20\";\n    Keys[\"PrintScreen\"] = \"PrintScreen\";\n    Keys[\"ScrollLock\"] = \"ScrollLock\";\n    Keys[\"Pause\"] = \"Pause\";\n    Keys[\"Unidentified\"] = \"Unidentified\";\n})(Keys || (Keys = {}));\n/**\n * Event thrown on a game object for a key event\n */\nclass KeyEvent extends GameEvent {\n    /**\n     * @param key  The key responsible for throwing the event\n     * @param value The key's typed value the browser detected\n     * @param originalEvent The original keyboard event that Excalibur handled\n     */\n    constructor(key, value, originalEvent) {\n        super();\n        this.key = key;\n        this.value = value;\n        this.originalEvent = originalEvent;\n    }\n}\nconst KeyEvents = {\n    Press: 'press',\n    Hold: 'hold',\n    Release: 'release'\n};\n/**\n * Provides keyboard support for Excalibur.\n */\nclass Keyboard {\n    constructor() {\n        this.events = new EventEmitter();\n        this._enabled = true;\n        /**\n         * Keys that are currently held down\n         */\n        this._keys = [];\n        /**\n         * Keys up in the current frame\n         */\n        this._keysUp = [];\n        /**\n         * Keys down in the current frame\n         */\n        this._keysDown = [];\n        this._releaseAllKeys = (ev) => {\n            for (const code of this._keys) {\n                const keyEvent = new KeyEvent(code, ev.key, ev);\n                this.events.emit('up', keyEvent);\n                this.events.emit('release', keyEvent);\n            }\n            this._keysUp = Array.from(new Set(this._keys.concat(this._keysUp)));\n            this._keys.length = 0;\n        };\n        this._handleKeyDown = (ev) => {\n            if (!this._enabled) {\n                return;\n            }\n            // handle macos meta key issue\n            // https://github.com/excaliburjs/Excalibur/issues/2608\n            if (!ev.metaKey && (this._keys.includes(Keys.MetaLeft) || this._keys.includes(Keys.MetaRight))) {\n                this._releaseAllKeys(ev);\n            }\n            const code = ev.code;\n            if (this._keys.indexOf(code) === -1) {\n                this._keys.push(code);\n                this._keysDown.push(code);\n                const keyEvent = new KeyEvent(code, ev.key, ev);\n                this.events.emit('down', keyEvent);\n                this.events.emit('press', keyEvent);\n            }\n        };\n        this._handleKeyUp = (ev) => {\n            if (!this._enabled) {\n                return;\n            }\n            const code = ev.code;\n            const key = this._keys.indexOf(code);\n            this._keys.splice(key, 1);\n            this._keysUp.push(code);\n            const keyEvent = new KeyEvent(code, ev.key, ev);\n            // alias the old api, we may want to deprecate this in the future\n            this.events.emit('up', keyEvent);\n            this.events.emit('release', keyEvent);\n            // handle macos meta key issue\n            // https://github.com/excaliburjs/Excalibur/issues/2608\n            if (ev.key === 'Meta') {\n                this._releaseAllKeys(ev);\n            }\n        };\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Initialize Keyboard event listeners\n     */\n    init(keyboardOptions) {\n        let { global } = keyboardOptions;\n        const { grabWindowFocus } = keyboardOptions;\n        if (!global) {\n            if (isCrossOriginIframe()) {\n                global = window;\n                // Workaround for iframes like for itch.io or codesandbox\n                // https://www.reddit.com/r/gamemaker/comments/kfs5cs/keyboard_inputs_no_longer_working_in_html5_game/\n                // https://forum.gamemaker.io/index.php?threads/solved-keyboard-issue-on-itch-io.87336/\n                if (grabWindowFocus) {\n                    window.focus();\n                }\n                Logger.getInstance().warn('Excalibur might be in a cross-origin iframe, in order to receive keyboard events it must be in focus');\n            }\n            else {\n                global = window.top;\n            }\n        }\n        global.addEventListener('blur', () => {\n            this._keys.length = 0; // empties array efficiently\n        });\n        // key up is on window because canvas cannot have focus\n        global.addEventListener('keyup', this._handleKeyUp);\n        // key down is on window because canvas cannot have focus\n        global.addEventListener('keydown', this._handleKeyDown);\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    clear() {\n        this._keysDown.length = 0;\n        this._keysUp.length = 0;\n        this._keys.length = 0;\n    }\n    update() {\n        // Reset keysDown and keysUp after update is complete\n        this._keysDown.length = 0;\n        this._keysUp.length = 0;\n        // Emit synthetic \"hold\" event\n        for (let i = 0; i < this._keys.length; i++) {\n            this.events.emit('hold', new KeyEvent(this._keys[i]));\n        }\n    }\n    /**\n     * Gets list of keys being pressed down\n     */\n    getKeys() {\n        return this._keys;\n    }\n    /**\n     * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\n     * @param key Test whether a key was just pressed\n     */\n    wasPressed(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keysDown.indexOf(key) > -1;\n    }\n    /**\n     * Tests if a certain key is held down. This is persisted between frames.\n     * @param key  Test whether a key is held down\n     */\n    isHeld(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keys.indexOf(key) > -1;\n    }\n    /**\n     * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\n     * @param key  Test whether a key was just released\n     */\n    wasReleased(key) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this._keysUp.indexOf(key) > -1;\n    }\n    /**\n     * Trigger a manual key event\n     * @param type\n     * @param key\n     * @param character\n     */\n    triggerEvent(type, key, character) {\n        if (type === 'down') {\n            this._handleKeyDown(new KeyboardEvent('keydown', {\n                code: key,\n                key: character !== null && character !== void 0 ? character : null\n            }));\n        }\n        if (type === 'up') {\n            this._handleKeyUp(new KeyboardEvent('keyup', {\n                code: key,\n                key: character !== null && character !== void 0 ? character : null\n            }));\n        }\n    }\n}\n\n;// ./Math/global-coordinates.ts\n\nclass GlobalCoordinates {\n    static fromPagePosition(xOrPos, yOrEngine, engineOrUndefined) {\n        let pageX;\n        let pageY;\n        let pagePos;\n        let engine;\n        if (arguments.length === 3) {\n            pageX = xOrPos;\n            pageY = yOrEngine;\n            pagePos = new Vector(pageX, pageY);\n            engine = engineOrUndefined;\n        }\n        else {\n            pagePos = xOrPos;\n            pageX = pagePos.x;\n            pageY = pagePos.y;\n            engine = yOrEngine;\n        }\n        const screenPos = engine.screen.pageToScreenCoordinates(pagePos);\n        const worldPos = engine.screen.screenToWorldCoordinates(screenPos);\n        return new GlobalCoordinates(worldPos, pagePos, screenPos);\n    }\n    constructor(worldPos, pagePos, screenPos) {\n        this.worldPos = worldPos;\n        this.pagePos = pagePos;\n        this.screenPos = screenPos;\n    }\n}\n\n;// ./Input/PointerEvent.ts\nclass PointerEvent {\n    cancel() {\n        this.active = false;\n    }\n    get pagePos() {\n        return this.coordinates.pagePos;\n    }\n    get screenPos() {\n        return this.coordinates.screenPos;\n    }\n    get worldPos() {\n        return this.coordinates.worldPos;\n    }\n    constructor(type, pointerId, button, pointerType, coordinates, nativeEvent) {\n        this.type = type;\n        this.pointerId = pointerId;\n        this.button = button;\n        this.pointerType = pointerType;\n        this.coordinates = coordinates;\n        this.nativeEvent = nativeEvent;\n        this.active = true;\n    }\n}\n\n;// ./Input/WheelEvent.ts\nclass WheelEvent {\n    cancel() {\n        this.active = false;\n    }\n    constructor(x, y, pageX, pageY, screenX, screenY, index, deltaX, deltaY, deltaZ, deltaMode, ev) {\n        this.x = x;\n        this.y = y;\n        this.pageX = pageX;\n        this.pageY = pageY;\n        this.screenX = screenX;\n        this.screenY = screenY;\n        this.index = index;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.deltaZ = deltaZ;\n        this.deltaMode = deltaMode;\n        this.ev = ev;\n        this.active = true;\n    }\n}\n\n;// ./Input/PointerAbstraction.ts\n\n\n\nclass PointerAbstraction {\n    constructor() {\n        this.events = new EventEmitter();\n        /**\n         * The last position on the document this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastPagePos = Vector.Zero;\n        /**\n         * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastScreenPos = Vector.Zero;\n        /**\n         * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\n         */\n        this.lastWorldPos = Vector.Zero;\n        this._onPointerMove = (ev) => {\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n        };\n        this._onPointerDown = (ev) => {\n            this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n            this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n            this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n        };\n        this.on('move', this._onPointerMove);\n        this.on('down', this._onPointerDown);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Called internally by excalibur to keep pointers up to date\n     * @internal\n     * @param engine\n     */\n    _updateWorldPosition(engine) {\n        const coord = GlobalCoordinates.fromPagePosition(this.lastPagePos, engine);\n        this.lastScreenPos = coord.screenPos;\n        this.lastWorldPos = coord.worldPos;\n    }\n}\n\n;// ./Input/WheelDeltaMode.ts\nvar WheelDeltaMode;\n(function (WheelDeltaMode) {\n    WheelDeltaMode[\"Pixel\"] = \"Pixel\";\n    WheelDeltaMode[\"Line\"] = \"Line\";\n    WheelDeltaMode[\"Page\"] = \"Page\";\n})(WheelDeltaMode || (WheelDeltaMode = {}));\n\n;// ./Input/NativePointerButton.ts\n/**\n * Native browser button enumeration\n */\nvar NativePointerButton;\n(function (NativePointerButton) {\n    NativePointerButton[NativePointerButton[\"NoButton\"] = -1] = \"NoButton\";\n    NativePointerButton[NativePointerButton[\"Left\"] = 0] = \"Left\";\n    NativePointerButton[NativePointerButton[\"Middle\"] = 1] = \"Middle\";\n    NativePointerButton[NativePointerButton[\"Right\"] = 2] = \"Right\";\n    NativePointerButton[NativePointerButton[\"Unknown\"] = 3] = \"Unknown\";\n})(NativePointerButton || (NativePointerButton = {}));\n\n;// ./Input/PointerButton.ts\n/**\n * The mouse button being pressed.\n */\nvar PointerButton;\n(function (PointerButton) {\n    PointerButton[\"Left\"] = \"Left\";\n    PointerButton[\"Middle\"] = \"Middle\";\n    PointerButton[\"Right\"] = \"Right\";\n    PointerButton[\"Unknown\"] = \"Unknown\";\n    PointerButton[\"NoButton\"] = \"NoButton\";\n})(PointerButton || (PointerButton = {}));\n\n;// ./Input/PointerType.ts\n/**\n * The type of pointer for a {@apilink PointerEvent}.\n */\nvar PointerType;\n(function (PointerType) {\n    PointerType[\"Touch\"] = \"Touch\";\n    PointerType[\"Mouse\"] = \"Mouse\";\n    PointerType[\"Pen\"] = \"Pen\";\n    PointerType[\"Unknown\"] = \"Unknown\";\n})(PointerType || (PointerType = {}));\n\n;// ./Input/PointerEventReceiver.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst PointerEvents = {\n    Move: 'move',\n    Down: 'down',\n    Up: 'up',\n    Wheel: 'wheel'\n};\n/**\n * Is this event a native touch event?\n */\nfunction isTouchEvent(value) {\n    // Guard for Safari <= 13.1\n    return globalThis.TouchEvent && value instanceof globalThis.TouchEvent;\n}\n/**\n * Is this event a native pointer event\n */\nfunction isPointerEvent(value) {\n    // Guard for Safari <= 13.1\n    return globalThis.PointerEvent && value instanceof globalThis.PointerEvent;\n}\n/**\n * The PointerEventProcessor is responsible for collecting all the events from the canvas and transforming them into GlobalCoordinates\n */\nclass PointerEventReceiver {\n    constructor(target, engine) {\n        this.target = target;\n        this.engine = engine;\n        this.events = new EventEmitter();\n        this.primary = new PointerAbstraction();\n        this._activeNativePointerIdsToNormalized = new Map();\n        this.lastFramePointerCoords = new Map();\n        this.currentFramePointerCoords = new Map();\n        this.currentFramePointerDown = new Map();\n        this.lastFramePointerDown = new Map();\n        this.currentFrameDown = [];\n        this.currentFrameUp = [];\n        this.currentFrameMove = [];\n        this.currentFrameCancel = [];\n        this.currentFrameWheel = [];\n        this._enabled = true;\n        this._pointers = [this.primary];\n        this._boundHandle = this._handle.bind(this);\n        this._boundWheel = this._handleWheel.bind(this);\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n    }\n    /**\n     * Creates a new PointerEventReceiver with a new target and engine while preserving existing pointer event\n     * handlers.\n     * @param target\n     * @param engine\n     */\n    recreate(target, engine) {\n        const eventReceiver = new PointerEventReceiver(target, engine);\n        eventReceiver.primary = this.primary;\n        eventReceiver._pointers = this._pointers;\n        return eventReceiver;\n    }\n    /**\n     * Locates a specific pointer by id, creates it if it doesn't exist\n     * @param index\n     */\n    at(index) {\n        if (index >= this._pointers.length) {\n            // Ensure there is a pointer to retrieve\n            for (let i = this._pointers.length - 1, max = index; i < max; i++) {\n                this._pointers.push(new PointerAbstraction());\n            }\n        }\n        return this._pointers[index];\n    }\n    /**\n     * The number of pointers currently being tracked by excalibur\n     */\n    count() {\n        return this._pointers.length;\n    }\n    /**\n     * Is the specified pointer id down this frame\n     * @param pointerId\n     */\n    isDown(pointerId) {\n        var _a;\n        if (!this._enabled) {\n            return false;\n        }\n        return (_a = this.currentFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\n    }\n    /**\n     * Was the specified pointer id down last frame\n     * @param pointerId\n     */\n    wasDown(pointerId) {\n        var _a;\n        if (!this._enabled) {\n            return false;\n        }\n        return (_a = this.lastFramePointerDown.get(pointerId)) !== null && _a !== void 0 ? _a : false;\n    }\n    /**\n     * Whether the Pointer is currently dragging.\n     */\n    isDragging(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this.isDown(pointerId);\n    }\n    /**\n     * Whether the Pointer just started dragging.\n     */\n    isDragStart(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return this.isDown(pointerId) && !this.wasDown(pointerId);\n    }\n    /**\n     * Whether the Pointer just ended dragging.\n     */\n    isDragEnd(pointerId) {\n        if (!this._enabled) {\n            return false;\n        }\n        return !this.isDown(pointerId) && this.wasDown(pointerId);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Called internally by excalibur\n     *\n     * Updates the current frame pointer info and emits raw pointer events\n     *\n     * This does not emit events to entities, see PointerSystem\n     * @internal\n     */\n    update() {\n        this.lastFramePointerDown = new Map(this.currentFramePointerDown);\n        this.lastFramePointerCoords = new Map(this.currentFramePointerCoords);\n        for (const event of this.currentFrameDown) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('down', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('down', event);\n            this.primary.emit('pointerdown', event);\n        }\n        for (const event of this.currentFrameUp) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('up', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('up', event);\n        }\n        for (const event of this.currentFrameMove) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('move', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('move', event);\n        }\n        for (const event of this.currentFrameCancel) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('cancel', event);\n            const pointer = this.at(event.pointerId);\n            pointer.emit('cancel', event);\n        }\n        for (const event of this.currentFrameWheel) {\n            if (!event.active) {\n                continue;\n            }\n            this.emit('pointerwheel', event);\n            this.emit('wheel', event);\n            this.primary.emit('pointerwheel', event);\n            this.primary.emit('wheel', event);\n        }\n        if (this.engine.currentScene.camera.hasChanged()) {\n            for (const pointer of this._pointers) {\n                pointer._updateWorldPosition(this.engine);\n            }\n        }\n    }\n    /**\n     * Clears the current frame event and pointer data\n     */\n    clear() {\n        for (const event of this.currentFrameUp) {\n            this.currentFramePointerCoords.delete(event.pointerId);\n            const ids = this._activeNativePointerIdsToNormalized.entries();\n            for (const [native, normalized] of ids) {\n                if (normalized === event.pointerId) {\n                    this._activeNativePointerIdsToNormalized.delete(native);\n                }\n            }\n        }\n        this.currentFrameDown.length = 0;\n        this.currentFrameUp.length = 0;\n        this.currentFrameMove.length = 0;\n        this.currentFrameCancel.length = 0;\n        this.currentFrameWheel.length = 0;\n    }\n    /**\n     * Initializes the pointer event receiver so that it can start listening to native\n     * browser events.\n     */\n    init(options) {\n        var _a;\n        if (this.engine.isDisposed()) {\n            return;\n        }\n        // Disabling the touch action avoids browser/platform gestures from firing on the canvas\n        // It is important on mobile to have touch action 'none'\n        // https://stackoverflow.com/questions/48124372/pointermove-event-not-working-with-touch-why-not\n        if (this.target === this.engine.canvas) {\n            this.engine.canvas.style.touchAction = 'none';\n        }\n        else {\n            document.body.style.touchAction = 'none';\n        }\n        // Preferred pointer events\n        if (window.PointerEvent) {\n            this.target.addEventListener('pointerdown', this._boundHandle);\n            this.target.addEventListener('pointerup', this._boundHandle);\n            this.target.addEventListener('pointermove', this._boundHandle);\n            this.target.addEventListener('pointercancel', this._boundHandle);\n        }\n        else {\n            // Touch Events\n            this.target.addEventListener('touchstart', this._boundHandle);\n            this.target.addEventListener('touchend', this._boundHandle);\n            this.target.addEventListener('touchmove', this._boundHandle);\n            this.target.addEventListener('touchcancel', this._boundHandle);\n            // Mouse Events\n            this.target.addEventListener('mousedown', this._boundHandle);\n            this.target.addEventListener('mouseup', this._boundHandle);\n            this.target.addEventListener('mousemove', this._boundHandle);\n        }\n        // MDN MouseWheelEvent\n        const wheelOptions = {\n            passive: !(this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n                this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas)\n        };\n        if ('onwheel' in document.createElement('div')) {\n            // Modern Browsers\n            this.target.addEventListener('wheel', this._boundWheel, wheelOptions);\n        }\n        else if (document.onmousewheel !== undefined) {\n            // Webkit and IE\n            this.target.addEventListener('mousewheel', this._boundWheel, wheelOptions);\n        }\n        else {\n            // Remaining browser and older Firefox\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel, wheelOptions);\n        }\n        const grabWindowFocus = (_a = options === null || options === void 0 ? void 0 : options.grabWindowFocus) !== null && _a !== void 0 ? _a : true;\n        // Handle cross origin iframe\n        if (grabWindowFocus && isCrossOriginIframe()) {\n            const grabFocus = () => {\n                window.focus();\n            };\n            // Preferred pointer events\n            if (window.PointerEvent) {\n                this.target.addEventListener('pointerdown', grabFocus);\n            }\n            else {\n                // Touch Events\n                this.target.addEventListener('touchstart', grabFocus);\n                // Mouse Events\n                this.target.addEventListener('mousedown', grabFocus);\n            }\n        }\n    }\n    detach() {\n        // Preferred pointer events\n        if (window.PointerEvent) {\n            this.target.removeEventListener('pointerdown', this._boundHandle);\n            this.target.removeEventListener('pointerup', this._boundHandle);\n            this.target.removeEventListener('pointermove', this._boundHandle);\n            this.target.removeEventListener('pointercancel', this._boundHandle);\n        }\n        else {\n            // Touch Events\n            this.target.removeEventListener('touchstart', this._boundHandle);\n            this.target.removeEventListener('touchend', this._boundHandle);\n            this.target.removeEventListener('touchmove', this._boundHandle);\n            this.target.removeEventListener('touchcancel', this._boundHandle);\n            // Mouse Events\n            this.target.removeEventListener('mousedown', this._boundHandle);\n            this.target.removeEventListener('mouseup', this._boundHandle);\n            this.target.removeEventListener('mousemove', this._boundHandle);\n        }\n        if ('onwheel' in document.createElement('div')) {\n            // Modern Browsers\n            this.target.removeEventListener('wheel', this._boundWheel);\n        }\n        else if (document.onmousewheel !== undefined) {\n            // Webkit and IE\n            this.target.addEventListener('mousewheel', this._boundWheel);\n        }\n        else {\n            // Remaining browser and older Firefox\n            this.target.addEventListener('MozMousePixelScroll', this._boundWheel);\n        }\n    }\n    /**\n     * Take native pointer id and map it to index in active pointers\n     * @param nativePointerId\n     */\n    _normalizePointerId(nativePointerId) {\n        // Add to the the native pointer set id\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, -1);\n        // Native pointer ids in ascending order\n        const currentPointerIds = Array.from(this._activeNativePointerIdsToNormalized.keys()).sort((a, b) => a - b);\n        // The index into sorted ids will be the new id, will always have an id\n        const id = currentPointerIds.findIndex((p) => p === nativePointerId);\n        // Save the mapping so we can reverse it later\n        this._activeNativePointerIdsToNormalized.set(nativePointerId, id);\n        // ignore pointer because game isn't watching\n        return id;\n    }\n    /**\n     * Responsible for handling and parsing pointer events\n     */\n    _handle(ev) {\n        if (!this._enabled) {\n            return;\n        }\n        ev.preventDefault();\n        const eventCoords = new Map();\n        let button;\n        let pointerType;\n        if (isTouchEvent(ev)) {\n            button = PointerButton.Unknown;\n            pointerType = PointerType.Touch;\n            // https://developer.mozilla.org/en-US/docs/Web/API/TouchEvent\n            for (let i = 0; i < ev.changedTouches.length; i++) {\n                const touch = ev.changedTouches[i];\n                const coordinates = GlobalCoordinates.fromPagePosition(touch.pageX, touch.pageY, this.engine);\n                const nativePointerId = i + 1;\n                const pointerId = this._normalizePointerId(nativePointerId);\n                this.currentFramePointerCoords.set(pointerId, coordinates);\n                eventCoords.set(pointerId, coordinates);\n            }\n        }\n        else {\n            button = this._nativeButtonToPointerButton(ev.button);\n            pointerType = PointerType.Mouse;\n            const coordinates = GlobalCoordinates.fromPagePosition(ev.pageX, ev.pageY, this.engine);\n            let nativePointerId = 1;\n            if (isPointerEvent(ev)) {\n                nativePointerId = ev.pointerId;\n                pointerType = this._stringToPointerType(ev.pointerType);\n            }\n            const pointerId = this._normalizePointerId(nativePointerId);\n            this.currentFramePointerCoords.set(pointerId, coordinates);\n            eventCoords.set(pointerId, coordinates);\n        }\n        for (const [pointerId, coord] of eventCoords.entries()) {\n            switch (ev.type) {\n                case 'mousedown':\n                case 'pointerdown':\n                case 'touchstart':\n                    this.currentFrameDown.push(new PointerEvent('down', pointerId, button, pointerType, coord, ev));\n                    this.currentFramePointerDown.set(pointerId, true);\n                    break;\n                case 'mouseup':\n                case 'pointerup':\n                case 'touchend':\n                    this.currentFrameUp.push(new PointerEvent('up', pointerId, button, pointerType, coord, ev));\n                    this.currentFramePointerDown.set(pointerId, false);\n                    break;\n                case 'mousemove':\n                case 'pointermove':\n                case 'touchmove':\n                    this.currentFrameMove.push(new PointerEvent('move', pointerId, button, pointerType, coord, ev));\n                    break;\n                case 'touchcancel':\n                case 'pointercancel':\n                    this.currentFrameCancel.push(new PointerEvent('cancel', pointerId, button, pointerType, coord, ev));\n                    break;\n            }\n        }\n    }\n    _handleWheel(ev) {\n        if (!this._enabled) {\n            return;\n        }\n        // Should we prevent page scroll because of this event\n        if (this.engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n            (this.engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && ev.target === this.engine.canvas)) {\n            ev.preventDefault();\n        }\n        const screen = this.engine.screen.pageToScreenCoordinates(vec(ev.pageX, ev.pageY));\n        const world = this.engine.screen.screenToWorldCoordinates(screen);\n        /**\n         * A constant used to normalize wheel events across different browsers\n         *\n         * This normalization factor is pulled from\n         * https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\n         */\n        const ScrollWheelNormalizationFactor = -1 / 40;\n        const deltaX = ev.deltaX || ev.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\n        const deltaY = ev.deltaY || ev.wheelDeltaY * ScrollWheelNormalizationFactor || ev.wheelDelta * ScrollWheelNormalizationFactor || ev.detail || 0;\n        const deltaZ = ev.deltaZ || 0;\n        let deltaMode = WheelDeltaMode.Pixel;\n        if (ev.deltaMode) {\n            if (ev.deltaMode === 1) {\n                deltaMode = WheelDeltaMode.Line;\n            }\n            else if (ev.deltaMode === 2) {\n                deltaMode = WheelDeltaMode.Page;\n            }\n        }\n        const we = new WheelEvent(world.x, world.y, ev.pageX, ev.pageY, screen.x, screen.y, 0, deltaX, deltaY, deltaZ, deltaMode, ev);\n        this.currentFrameWheel.push(we);\n    }\n    /**\n     * Triggers an excalibur pointer event in a world space pos\n     *\n     * Useful for testing pointers in excalibur\n     * @param type\n     * @param pos\n     */\n    triggerEvent(type, pos) {\n        const page = this.engine.screen.worldToPageCoordinates(pos);\n        // Send an event to the event receiver\n        if (window.PointerEvent) {\n            this._handle(new window.PointerEvent('pointer' + type, {\n                pointerId: 0,\n                clientX: page.x,\n                clientY: page.y\n            }));\n        }\n        else {\n            // Safari hack\n            this._handle(new window.MouseEvent('mouse' + type, {\n                clientX: page.x,\n                clientY: page.y\n            }));\n        }\n        // Force update pointer system\n        const pointerSystem = this.engine.currentScene.world.get(PointerSystem);\n        pointerSystem.preupdate(this.engine.currentScene, 1);\n        pointerSystem.update(1);\n    }\n    _nativeButtonToPointerButton(s) {\n        switch (s) {\n            case NativePointerButton.NoButton:\n                return PointerButton.NoButton;\n            case NativePointerButton.Left:\n                return PointerButton.Left;\n            case NativePointerButton.Middle:\n                return PointerButton.Middle;\n            case NativePointerButton.Right:\n                return PointerButton.Right;\n            case NativePointerButton.Unknown:\n                return PointerButton.Unknown;\n            default:\n                return fail(s);\n        }\n    }\n    _stringToPointerType(s) {\n        switch (s) {\n            case 'touch':\n                return PointerType.Touch;\n            case 'mouse':\n                return PointerType.Mouse;\n            case 'pen':\n                return PointerType.Pen;\n            default:\n                return PointerType.Unknown;\n        }\n    }\n}\n\n;// ./Input/InputHost.ts\n\n\n\n\nclass InputHost {\n    constructor(options) {\n        this._enabled = true;\n        const { pointerTarget, grabWindowFocus, engine } = options;\n        this.keyboard = new Keyboard();\n        this.pointers = new PointerEventReceiver(pointerTarget, engine);\n        this.gamepads = new Gamepads();\n        this.keyboard.init({ grabWindowFocus });\n        this.pointers.init({ grabWindowFocus });\n        this.gamepads.init();\n        this.inputMapper = new InputMapper({\n            keyboard: this.keyboard,\n            pointers: this.pointers,\n            gamepads: this.gamepads\n        });\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    toggleEnabled(enabled) {\n        this._enabled = enabled;\n        this.keyboard.toggleEnabled(this._enabled);\n        this.pointers.toggleEnabled(this._enabled);\n        this.gamepads.toggleEnabled(this._enabled);\n    }\n    update() {\n        if (this._enabled) {\n            this.inputMapper.execute();\n            this.keyboard.update();\n            this.gamepads.update();\n        }\n    }\n    clear() {\n        this.keyboard.clear();\n        this.pointers.clear();\n        // this.gamepads.clear();\n    }\n}\n\n;// ./Scene.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass PreLoadEvent {\n}\nconst SceneEvents = {\n    Initialize: 'initialize',\n    Activate: 'activate',\n    Deactivate: 'deactivate',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw',\n    PreDebugDraw: 'predebugdraw',\n    PostDebugDraw: 'postdebugdraw',\n    PreLoad: 'preload'\n};\n/**\n *\n */\nfunction isSceneConstructor(x) {\n    var _a, _b;\n    return !!(x === null || x === void 0 ? void 0 : x.prototype) && !!((_b = (_a = x === null || x === void 0 ? void 0 : x.prototype) === null || _a === void 0 ? void 0 : _a.constructor) === null || _b === void 0 ? void 0 : _b.name);\n}\n/**\n * {@apilink Actor | `Actors`} are composed together into groupings called Scenes in\n * Excalibur. The metaphor models the same idea behind real world\n * actors in a scene. Only actors in scenes will be updated and drawn.\n *\n * Typical usages of a scene include: levels, menus, loading screens, etc.\n */\nclass Scene {\n    /**\n     * The actors in the current scene\n     */\n    get actors() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof Actor;\n        });\n    }\n    /**\n     * The entities in the current scene\n     */\n    get entities() {\n        return this.world.entityManager.entities;\n    }\n    /**\n     * The triggers in the current scene\n     */\n    get triggers() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof Trigger;\n        });\n    }\n    /**\n     * The {@apilink TileMap}s in the scene, if any\n     */\n    get tileMaps() {\n        return this.world.entityManager.entities.filter((e) => {\n            return e instanceof TileMap;\n        });\n    }\n    get timers() {\n        return this._timers;\n    }\n    constructor() {\n        // Initialize systems\n        this._logger = Logger.getInstance();\n        this.events = new EventEmitter();\n        /**\n         * Gets or sets the current camera for the scene\n         */\n        this.camera = new Camera();\n        /**\n         * The ECS world for the scene\n         */\n        this.world = new World(this);\n        /**\n         * The Excalibur physics world for the scene. Used to interact\n         * with colliders included in the scene.\n         *\n         * Can be used to perform scene ray casts, track colliders, broadphase, and narrowphase.\n         */\n        this.physics = new PhysicsWorld(getDefaultPhysicsConfig());\n        this._isInitialized = false;\n        this._timers = [];\n        this._cancelQueue = [];\n        // Update\n        this.world.add(ActionsSystem);\n        this.world.add(new MotionSystem(this.world, this.physics));\n        this.world.add(new CollisionSystem(this.world, this.physics));\n        this.world.add(PointerSystem);\n        this.world.add(IsometricEntitySystem);\n        // Draw\n        this.world.add(OffscreenSystem);\n        this.world.add(GraphicsSystem);\n        this.world.add(DebugSystem);\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Event hook to provide Scenes a way of loading scene specific resources.\n     *\n     * This is called before the Scene.onInitialize during scene transition. It will only ever fire once for a scene.\n     * @param loader\n     */\n    onPreLoad(loader) {\n        // will be overridden\n    }\n    /**\n     * Event hook fired directly before transition, either \"in\" or \"out\" of the scene\n     *\n     * This overrides the Engine scene definition. However transitions specified in goToScene take highest precedence\n     *\n     * ```typescript\n     * // Overrides all\n     * Engine.goToScene('scene', { destinationIn: ..., sourceOut: ... });\n     * ```\n     *\n     * This can be used to configure custom transitions for a scene dynamically\n     */\n    onTransition(direction) {\n        // will be overridden\n        return undefined;\n    }\n    /**\n     * This is called before the first update of the {@apilink Scene}. Initializes scene members like the camera. This method is meant to be\n     * overridden. This is where initialization of child actors should take place.\n     */\n    onInitialize(engine) {\n        // will be overridden\n    }\n    /**\n     * This is called when the scene is made active and started. It is meant to be overridden,\n     * this is where you should setup any DOM UI or event handlers needed for the scene.\n     */\n    onActivate(context) {\n        // will be overridden\n    }\n    /**\n     * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\n     * this is where you should cleanup any DOM UI or event handlers needed for the scene.\n     */\n    onDeactivate(context) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreUpdate` is called directly before a scene is updated.\n     * @param engine reference to the engine\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPreUpdate(engine, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostUpdate` is called directly after a scene is updated.\n     * @param engine reference to the engine\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPostUpdate(engine, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPreDraw` is called directly before a scene is drawn.\n     *\n     */\n    onPreDraw(ctx, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n     *\n     * `onPostDraw` is called directly after a scene is drawn.\n     *\n     */\n    onPostDraw(ctx, elapsed) {\n        // will be overridden\n    }\n    /**\n     * Initializes actors in the scene\n     */\n    _initializeChildren() {\n        for (const child of this.entities) {\n            child._initialize(this.engine);\n        }\n    }\n    /**\n     * Gets whether or not the {@apilink Scene} has been initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Initializes the scene before the first update, meant to be called by engine not by users of\n     * Excalibur\n     * @internal\n     */\n    async _initialize(engine) {\n        var _a;\n        if (!this.isInitialized) {\n            try {\n                this.engine = engine;\n                // PhysicsWorld config is watched so things will automagically update\n                this.physics.config = this.engine.physics;\n                this.input = new InputHost({\n                    pointerTarget: engine.pointerScope === PointerScope.Canvas ? engine.canvas : document,\n                    grabWindowFocus: engine.grabWindowFocus,\n                    engine\n                });\n                // Initialize camera first\n                this.camera._initialize(engine);\n                this.world.systemManager.initialize();\n                // This order is important! we want to be sure any custom init that add actors\n                // fire before the actor init\n                await this.onInitialize(engine);\n                this._initializeChildren();\n                this._logger.debug('Scene.onInitialize', this, engine);\n                this.events.emit('initialize', new InitializeEvent(engine, this));\n            }\n            catch (e) {\n                this._logger.error(`Error during scene initialization for scene ${(_a = engine.director) === null || _a === void 0 ? void 0 : _a.getSceneName(this)}!`);\n                throw e;\n            }\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\n     * @internal\n     */\n    async _activate(context) {\n        var _a, _b;\n        try {\n            this._logger.debug('Scene.onActivate', this);\n            this.input.toggleEnabled(true);\n            await this.onActivate(context);\n        }\n        catch (e) {\n            this._logger.error(`Error during scene activation for scene ${(_b = (_a = this.engine) === null || _a === void 0 ? void 0 : _a.director) === null || _b === void 0 ? void 0 : _b.getSceneName(this)}!`);\n            throw e;\n        }\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\n     * @internal\n     */\n    async _deactivate(context) {\n        this._logger.debug('Scene.onDeactivate', this);\n        this.input.toggleEnabled(false);\n        await this.onDeactivate(context);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPreUpdate} lifecycle event\n     * @internal\n     */\n    _preupdate(engine, elapsed) {\n        this.emit('preupdate', new PreUpdateEvent(engine, elapsed, this));\n        this.onPreUpdate(engine, elapsed);\n    }\n    /**\n     *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _preupdate handler for {@apilink onPostUpdate} lifecycle event\n     * @internal\n     */\n    _postupdate(engine, elapsed) {\n        this.emit('postupdate', new PostUpdateEvent(engine, elapsed, this));\n        this.onPostUpdate(engine, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _predraw handler for {@apilink onPreDraw} lifecycle event\n     * @internal\n     */\n    _predraw(ctx, elapsed) {\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this));\n        this.onPreDraw(ctx, elapsed);\n    }\n    /**\n     * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n     *\n     * Internal _postdraw handler for {@apilink onPostDraw} lifecycle event\n     * @internal\n     */\n    _postdraw(ctx, elapsed) {\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n        this.onPostDraw(ctx, elapsed);\n    }\n    /**\n     * Updates all the actors and timers in the scene. Called by the {@apilink Engine}.\n     * @param engine  Reference to the current Engine\n     * @param elapsed   The number of milliseconds since the last update\n     */\n    update(engine, elapsed) {\n        var _a;\n        if (!this.isInitialized) {\n            this._logger.warnOnce(`Scene update called before initialize for scene ${(_a = engine.director) === null || _a === void 0 ? void 0 : _a.getSceneName(this)}!`);\n            return;\n        }\n        this._preupdate(engine, elapsed);\n        // TODO differed entity removal for timers\n        let i, len;\n        // Remove timers in the cancel queue before updating them\n        for (i = 0, len = this._cancelQueue.length; i < len; i++) {\n            this.removeTimer(this._cancelQueue[i]);\n        }\n        this._cancelQueue.length = 0;\n        // Cycle through timers updating timers\n        for (const timer of this._timers) {\n            timer.update(elapsed);\n        }\n        this.world.update(SystemType.Update, elapsed);\n        // Camera last keeps renders smooth that are based on entity/actor\n        if (this.camera) {\n            this.camera.update(engine, elapsed);\n        }\n        this._collectActorStats(engine);\n        this._postupdate(engine, elapsed);\n        this.input.update();\n    }\n    /**\n     * Draws all the actors in the Scene. Called by the {@apilink Engine}.\n     * @param ctx    The current rendering context\n     * @param elapsed  The number of milliseconds since the last draw\n     */\n    draw(ctx, elapsed) {\n        var _a;\n        if (!this.isInitialized) {\n            this._logger.warnOnce(`Scene draw called before initialize!`);\n            return;\n        }\n        this._predraw(ctx, elapsed);\n        this.world.update(SystemType.Draw, elapsed);\n        if ((_a = this.engine) === null || _a === void 0 ? void 0 : _a.isDebug) {\n            this.debugDraw(ctx);\n        }\n        this._postdraw(ctx, elapsed);\n    }\n    /**\n     * Draws all the actors' debug information in the Scene. Called by the {@apilink Engine}.\n     * @param ctx  The current rendering context\n     */\n    /* istanbul ignore next */\n    debugDraw(ctx) {\n        this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n        // pass\n        this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n    }\n    /**\n     * Checks whether an actor is contained in this scene or not\n     */\n    contains(actor) {\n        return this.actors.indexOf(actor) > -1;\n    }\n    add(entity) {\n        this.emit('entityadded', { target: entity });\n        this.world.add(entity);\n        entity.scene = this;\n        if (entity instanceof Timer) {\n            if (!contains(this._timers, entity)) {\n                this.addTimer(entity);\n            }\n            return;\n        }\n    }\n    /**\n     * Removes an {@apilink Entity} (Actor, TileMap, Trigger, etc) or {@apilink Timer} from it's current scene\n     * and adds it to this scene.\n     *\n     * Useful if you want to have an object be present in only 1 scene at a time.\n     * @param entity\n     */\n    transfer(entity) {\n        let scene;\n        if (entity instanceof Entity && entity.scene && entity.scene !== this) {\n            scene = entity.scene;\n            entity.scene.world.remove(entity, false);\n        }\n        if (entity instanceof Timer && entity.scene) {\n            scene = entity.scene;\n            entity.scene.removeTimer(entity);\n        }\n        scene === null || scene === void 0 ? void 0 : scene.emit('entityremoved', { target: entity });\n        this.add(entity);\n    }\n    remove(entity) {\n        if (entity instanceof Entity) {\n            this.emit('entityremoved', { target: entity });\n            if (entity.isActive) {\n                entity.kill();\n            }\n            this.world.remove(entity);\n        }\n        if (entity instanceof Timer) {\n            this.removeTimer(entity);\n        }\n    }\n    /**\n     * Removes all entities and timers from the scene, optionally indicate whether deferred should or shouldn't be used.\n     *\n     * By default entities use deferred removal\n     * @param deferred\n     */\n    clear(deferred = true) {\n        for (let i = this.entities.length - 1; i >= 0; i--) {\n            this.world.remove(this.entities[i], deferred);\n        }\n        for (let i = this.timers.length - 1; i >= 0; i--) {\n            this.removeTimer(this.timers[i]);\n        }\n    }\n    /**\n     * Adds a {@apilink Timer} to the scene\n     * @param timer  The timer to add\n     */\n    addTimer(timer) {\n        this._timers.push(timer);\n        timer.scene = this;\n        return timer;\n    }\n    /**\n     * Removes a {@apilink Timer} from the scene.\n     * @warning Can be dangerous, use {@apilink cancelTimer} instead\n     * @param timer  The timer to remove\n     */\n    removeTimer(timer) {\n        const i = this._timers.indexOf(timer);\n        if (i !== -1) {\n            this._timers.splice(i, 1);\n        }\n        return timer;\n    }\n    /**\n     * Cancels a {@apilink Timer}, removing it from the scene nicely\n     * @param timer  The timer to cancel\n     */\n    cancelTimer(timer) {\n        this._cancelQueue.push(timer);\n        return timer;\n    }\n    /**\n     * Tests whether a {@apilink Timer} is active in the scene\n     */\n    isTimerActive(timer) {\n        return this._timers.indexOf(timer) > -1 && !timer.complete;\n    }\n    isCurrentScene() {\n        if (this.engine) {\n            return this.engine.currentScene === this;\n        }\n        return false;\n    }\n    _collectActorStats(engine) {\n        const actors = this.actors;\n        for (let i = 0; i < actors.length; i++) {\n            const actor = actors[i];\n            if (actor instanceof ScreenElement) {\n                engine.stats.currFrame.actors.ui++;\n            }\n            engine.stats.currFrame.actors.alive++;\n            for (let j = 0; j < actor.children.length; j++) {\n                const child = actor.children[j];\n                if (isScreenElement(child)) {\n                    // TODO not true\n                    engine.stats.currFrame.actors.ui++;\n                }\n                else {\n                    engine.stats.currFrame.actors.alive++;\n                }\n            }\n        }\n    }\n}\n\n;// ./Graphics/PostProcessor/ColorBlindnessMode.ts\nvar ColorBlindnessMode;\n(function (ColorBlindnessMode) {\n    ColorBlindnessMode[\"Protanope\"] = \"Protanope\";\n    ColorBlindnessMode[\"Deuteranope\"] = \"Deuteranope\";\n    ColorBlindnessMode[\"Tritanope\"] = \"Tritanope\";\n})(ColorBlindnessMode || (ColorBlindnessMode = {}));\n\n;// ./Graphics/PostProcessor/color-blind-fragment.glsl\n/* harmony default export */ const color_blind_fragment = (\"#version 300 es\\r\\nprecision mediump float;\\r\\n// our texture\\r\\nuniform sampler2D u_image;\\r\\n// the texCoords passed in from the vertex shader.\\r\\nin vec2 v_texcoord;\\r\\n\\r\\n// color blind type\\r\\nuniform int u_type;\\r\\n\\r\\n// simulation?\\r\\nuniform bool u_simulate;\\r\\n\\r\\nout vec4 fragColor;\\r\\n\\r\\nvoid main() {\\r\\n  vec4 o =  texture(u_image, v_texcoord);\\r\\n  // RGB to LMS matrix conversion\\r\\n  float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);\\r\\n  float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);\\r\\n  float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);\\r\\n  // Simulate color blindness\\r\\n  float l;\\r\\n  float m;\\r\\n  float s;\\r\\n  //MODE CODE//\\r\\n  if (u_type == 0) {\\r\\n    // Protanope\\r\\n    l = 0.0 * L + 2.02344 * M + -2.52581 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;;\\r\\n  } else if (u_type == 1) {\\r\\n    // Deuteranope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.494207 * L + 0.0 * M + 1.24827 * S;\\r\\n    s = 0.0 * L + 0.0 * M + 1.0 * S;\\r\\n  } else if (u_type == 2) {\\r\\n    // Tritanope\\r\\n    l = 1.0 * L + 0.0 * M + 0.0 * S;\\r\\n    m = 0.0 * L + 1.0 * M + 0.0 * S;\\r\\n    s = -0.395913 * L + 0.801109 * M + 0.0 * S;\\r\\n  }\\r\\n\\r\\n  // LMS to RGB matrix conversion\\r\\n  vec4 error; // simulate the colors\\r\\n  error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);\\r\\n  error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);\\r\\n  error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);\\r\\n  error.a = 1.0;\\r\\n  vec4 diff = o - error;\\r\\n  vec4 correction; // correct the colors\\r\\n  correction.r = 0.0;\\r\\n  correction.g =  (diff.r * 0.7) + (diff.g * 1.0);\\r\\n  correction.b =  (diff.r * 0.7) + (diff.b * 1.0);\\r\\n  correction = o + correction;\\r\\n  correction.a = o.a;\\r\\n  //SIMULATE//\\r\\n\\r\\n  // sim \\r\\n  if (u_simulate) {\\r\\n    fragColor = error.rgba;\\r\\n  } else {\\r\\n    fragColor = correction.rgba;\\r\\n  }\\r\\n}\");\n;// ./Graphics/PostProcessor/ScreenShader.ts\n\n\n\n\n/**\n * Helper that defines a whole screen renderer, just provide a fragment source!\n *\n * Currently supports 1 varying\n * - vec2 a_texcoord between 0-1 which corresponds to screen position\n */\nclass ScreenShader {\n    constructor(gl, fragmentSource) {\n        if (false) {}\n        this._shader = new Shader({\n            gl,\n            vertexSource: `#version 300 es\r\n      in vec2 a_position;\r\n      in vec2 a_uv;\r\n      out vec2 v_texcoord;\r\n      out vec2 v_uv;\r\n\r\n      void main() {\r\n        gl_Position = vec4(a_position, 0.0, 1.0);\r\n        // Pass the texcoord to the fragment shader.\r\n        v_texcoord = a_uv;\r\n        v_uv = a_uv;\r\n      }`,\n            fragmentSource: fragmentSource\n        });\n        this._shader.compile();\n        // Setup memory layout\n        this._buffer = new VertexBuffer({\n            gl,\n            type: 'static',\n            // clip space quad + uv since we don't need a camera\n            data: new Float32Array([\n                -1, -1, 0, 0, -1, 1, 0, 1, 1, -1, 1, 0,\n                1, -1, 1, 0, -1, 1, 0, 1, 1, 1, 1, 1\n            ])\n        });\n        this._layout = new VertexLayout({\n            gl,\n            shader: this._shader,\n            vertexBuffer: this._buffer,\n            attributes: [\n                ['a_position', 2],\n                ['a_uv', 2]\n            ]\n        });\n        this._buffer.upload();\n    }\n    getShader() {\n        return this._shader;\n    }\n    getLayout() {\n        return this._layout;\n    }\n}\n\n;// ./Graphics/PostProcessor/ColorBlindnessPostProcessor.ts\n\n\n\nclass ColorBlindnessPostProcessor {\n    constructor(_colorBlindnessMode, simulate = false) {\n        this._colorBlindnessMode = _colorBlindnessMode;\n        this._simulate = false;\n        this._simulate = simulate;\n    }\n    initialize(gl) {\n        this._shader = new ScreenShader(gl, color_blind_fragment);\n        this.simulate = this._simulate;\n        this.colorBlindnessMode = this._colorBlindnessMode;\n    }\n    getShader() {\n        return this._shader.getShader();\n    }\n    getLayout() {\n        return this._shader.getLayout();\n    }\n    set colorBlindnessMode(colorBlindMode) {\n        this._colorBlindnessMode = colorBlindMode;\n        if (this._shader) {\n            const shader = this._shader.getShader();\n            shader.use();\n            if (this._colorBlindnessMode === ColorBlindnessMode.Protanope) {\n                shader.setUniformInt('u_type', 0);\n            }\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Deuteranope) {\n                shader.setUniformInt('u_type', 1);\n            }\n            else if (this._colorBlindnessMode === ColorBlindnessMode.Tritanope) {\n                shader.setUniformInt('u_type', 2);\n            }\n        }\n    }\n    get colorBlindnessMode() {\n        return this._colorBlindnessMode;\n    }\n    set simulate(value) {\n        this._simulate = value;\n        if (this._shader) {\n            const shader = this._shader.getShader();\n            shader.use();\n            shader.setUniformBoolean('u_simulate', value);\n        }\n    }\n    get simulate() {\n        return this._simulate;\n    }\n}\n\n;// ./Debug/DebugFlags.ts\n\n\n\nclass ColorBlindFlags {\n    constructor(engine) {\n        this._engine = engine;\n        this._colorBlindPostProcessor = new ColorBlindnessPostProcessor(ColorBlindnessMode.Protanope);\n    }\n    /**\n     * Correct colors for a specified color blindness\n     * @param colorBlindness\n     */\n    correct(colorBlindness) {\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this.clear();\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\n            this._colorBlindPostProcessor.simulate = false;\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\n        }\n    }\n    /**\n     * Simulate colors for a specified color blindness\n     * @param colorBlindness\n     */\n    simulate(colorBlindness) {\n        if (this._engine.graphicsContext instanceof ExcaliburGraphicsContextWebGL) {\n            this.clear();\n            this._colorBlindPostProcessor.colorBlindnessMode = colorBlindness;\n            this._colorBlindPostProcessor.simulate = true;\n            this._engine.graphicsContext.addPostProcessor(this._colorBlindPostProcessor);\n        }\n    }\n    /**\n     * Remove color blindness post processor\n     */\n    clear() {\n        this._engine.graphicsContext.removePostProcessor(this._colorBlindPostProcessor);\n    }\n}\n\n;// ./Debug/DebugConfig.ts\n\n\n/**\n * Debug statistics and flags for Excalibur. If polling these values, it would be\n * best to do so on the `postupdate` event for {@apilink Engine}, after all values have been\n * updated during a frame.\n */\nclass DebugConfig {\n    constructor(engine) {\n        /**\n         * Performance statistics\n         */\n        this.stats = {\n            /**\n             * Current frame statistics. Engine reuses this instance, use {@apilink FrameStats.clone} to copy frame stats.\n             * Best accessed on {@apilink postframe} event. See {@apilink FrameStats}\n             */\n            currFrame: new FrameStats(),\n            /**\n             * Previous frame statistics. Engine reuses this instance, use {@apilink FrameStats.clone} to copy frame stats.\n             * Best accessed on {@apilink preframe} event. Best inspected on engine event `preframe`. See {@apilink FrameStats}\n             */\n            prevFrame: new FrameStats()\n        };\n        /**\n         * Filter debug context to named entities or entity ids\n         */\n        this.filter = {\n            /**\n             * Toggle filter on or off (default off) must be on for DebugDraw to use filters\n             */\n            useFilter: false,\n            /**\n             * Query for entities by name, if the entity name contains `nameQuery` it will be included\n             */\n            nameQuery: '',\n            /**\n             * Query for Entity ids, if the id matches it will be included\n             */\n            ids: []\n        };\n        /**\n         * Entity debug settings\n         */\n        this.entity = {\n            showAll: false,\n            showId: false,\n            showName: false\n        };\n        /**\n         * Transform component debug settings\n         */\n        this.transform = {\n            showAll: false,\n            debugZIndex: 10000000,\n            showPosition: false,\n            showPositionLabel: false,\n            positionColor: Color.Yellow,\n            showZIndex: false,\n            showScale: false,\n            scaleColor: Color.Green,\n            showRotation: false,\n            rotationColor: Color.Blue\n        };\n        /**\n         * Graphics component debug settings\n         */\n        this.graphics = {\n            showAll: false,\n            showBounds: false,\n            boundsColor: Color.Yellow\n        };\n        /**\n         * Collider component debug settings\n         */\n        this.collider = {\n            showAll: false,\n            showBounds: false,\n            boundsColor: Color.Blue,\n            showOwner: false,\n            showGeometry: true,\n            geometryColor: Color.Green,\n            geometryLineWidth: 1,\n            geometryPointSize: 0.5\n        };\n        /**\n         * Physics simulation debug settings\n         */\n        this.physics = {\n            showAll: false,\n            showBroadphaseSpacePartitionDebug: false,\n            showCollisionNormals: false,\n            collisionNormalColor: Color.Cyan,\n            showCollisionContacts: true,\n            contactSize: 2,\n            collisionContactColor: Color.Red\n        };\n        /**\n         * Motion component debug settings\n         */\n        this.motion = {\n            showAll: false,\n            showVelocity: false,\n            velocityColor: Color.Yellow,\n            showAcceleration: false,\n            accelerationColor: Color.Red\n        };\n        /**\n         * Body component debug settings\n         */\n        this.body = {\n            showAll: false,\n            showCollisionGroup: false,\n            showCollisionType: false,\n            showSleeping: false,\n            showMotion: false,\n            showMass: false\n        };\n        /**\n         * Camera debug settings\n         */\n        this.camera = {\n            showAll: false,\n            showFocus: false,\n            focusColor: Color.Red,\n            showZoom: false\n        };\n        this.tilemap = {\n            showAll: false,\n            showGrid: false,\n            gridColor: Color.Red,\n            gridWidth: 0.5,\n            showSolidBounds: false,\n            solidBoundsColor: Color.fromHex('#8080807F'), // grayish\n            showColliderGeometry: true\n        };\n        this.isometric = {\n            showAll: false,\n            showPosition: false,\n            positionColor: Color.Yellow,\n            positionSize: 1,\n            showGrid: false,\n            gridColor: Color.Red,\n            gridWidth: 1,\n            showColliderGeometry: true\n        };\n        this._engine = engine;\n        this.colorBlindMode = new ColorBlindFlags(this._engine);\n    }\n    /**\n     * Switch the current excalibur clock with the {@apilink TestClock} and return\n     * it in the same running state.\n     *\n     * This is useful when you need to debug frame by frame.\n     */\n    useTestClock() {\n        const clock = this._engine.clock;\n        const wasRunning = clock.isRunning();\n        clock.stop();\n        const testClock = clock.toTestClock();\n        if (wasRunning) {\n            testClock.start();\n        }\n        this._engine.clock = testClock;\n        return testClock;\n    }\n    /**\n     * Switch the current excalibur clock with the {@apilink StandardClock} and\n     * return it in the same running state.\n     *\n     * This is useful when you need to switch back to normal mode after\n     * debugging.\n     */\n    useStandardClock() {\n        const currentClock = this._engine.clock;\n        const wasRunning = currentClock.isRunning();\n        currentClock.stop();\n        const standardClock = currentClock.toStandardClock();\n        if (wasRunning) {\n            standardClock.start();\n        }\n        this._engine.clock = standardClock;\n        return standardClock;\n    }\n}\n/**\n * Implementation of a frame's stats. Meant to have values copied via {@apilink FrameStats.reset}, avoid\n * creating instances of this every frame.\n */\nclass FrameStats {\n    constructor() {\n        this._id = 0;\n        this._elapsedMs = 0;\n        this._fps = 0;\n        this._actorStats = {\n            alive: 0,\n            killed: 0,\n            ui: 0,\n            get remaining() {\n                return this.alive - this.killed;\n            },\n            get total() {\n                return this.remaining + this.ui;\n            }\n        };\n        this._durationStats = {\n            update: 0,\n            draw: 0,\n            get total() {\n                return this.update + this.draw;\n            }\n        };\n        this._physicsStats = new PhysicsStats();\n        this._graphicsStats = {\n            drawCalls: 0,\n            drawnImages: 0\n        };\n    }\n    /**\n     * Zero out values or clone other IFrameStat stats. Allows instance reuse.\n     * @param [otherStats] Optional stats to clone\n     */\n    reset(otherStats) {\n        if (otherStats) {\n            this.id = otherStats.id;\n            this.elapsedMs = otherStats.elapsedMs;\n            this.fps = otherStats.fps;\n            this.actors.alive = otherStats.actors.alive;\n            this.actors.killed = otherStats.actors.killed;\n            this.actors.ui = otherStats.actors.ui;\n            this.duration.update = otherStats.duration.update;\n            this.duration.draw = otherStats.duration.draw;\n            this._physicsStats.reset(otherStats.physics);\n            this.graphics.drawCalls = otherStats.graphics.drawCalls;\n            this.graphics.drawnImages = otherStats.graphics.drawnImages;\n        }\n        else {\n            this.id = this.elapsedMs = this.fps = 0;\n            this.actors.alive = this.actors.killed = this.actors.ui = 0;\n            this.duration.update = this.duration.draw = 0;\n            this._physicsStats.reset();\n            this.graphics.drawnImages = this.graphics.drawCalls = 0;\n        }\n    }\n    /**\n     * Provides a clone of this instance.\n     */\n    clone() {\n        const fs = new FrameStats();\n        fs.reset(this);\n        return fs;\n    }\n    /**\n     * Gets the frame's id\n     */\n    get id() {\n        return this._id;\n    }\n    /**\n     * Sets the frame's id\n     */\n    set id(value) {\n        this._id = value;\n    }\n    /**\n     * Gets the frame's delta (time since last frame)\n     */\n    get elapsedMs() {\n        return this._elapsedMs;\n    }\n    /**\n     * Sets the frame's delta (time since last frame). Internal use only.\n     * @internal\n     */\n    set elapsedMs(value) {\n        this._elapsedMs = value;\n    }\n    /**\n     * Gets the frame's frames-per-second (FPS)\n     */\n    get fps() {\n        return this._fps;\n    }\n    /**\n     * Sets the frame's frames-per-second (FPS). Internal use only.\n     * @internal\n     */\n    set fps(value) {\n        this._fps = value;\n    }\n    /**\n     * Gets the frame's actor statistics\n     */\n    get actors() {\n        return this._actorStats;\n    }\n    /**\n     * Gets the frame's duration statistics\n     */\n    get duration() {\n        return this._durationStats;\n    }\n    /**\n     * Gets the frame's physics statistics\n     */\n    get physics() {\n        return this._physicsStats;\n    }\n    /**\n     * Gets the frame's graphics statistics\n     */\n    get graphics() {\n        return this._graphicsStats;\n    }\n}\nclass PhysicsStats {\n    constructor() {\n        this._pairs = 0;\n        this._collisions = 0;\n        this._contacts = new Map();\n        this._fastBodies = 0;\n        this._fastBodyCollisions = 0;\n        this._broadphase = 0;\n        this._narrowphase = 0;\n    }\n    /**\n     * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\n     * @param [otherStats] Optional stats to clone\n     */\n    reset(otherStats) {\n        if (otherStats) {\n            this.pairs = otherStats.pairs;\n            this.collisions = otherStats.collisions;\n            this.contacts = otherStats.contacts;\n            this.fastBodies = otherStats.fastBodies;\n            this.fastBodyCollisions = otherStats.fastBodyCollisions;\n            this.broadphase = otherStats.broadphase;\n            this.narrowphase = otherStats.narrowphase;\n        }\n        else {\n            this.pairs = this.collisions = this.fastBodies = 0;\n            this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\n            this.contacts.clear();\n        }\n    }\n    /**\n     * Provides a clone of this instance.\n     */\n    clone() {\n        const ps = new PhysicsStats();\n        ps.reset(this);\n        return ps;\n    }\n    get pairs() {\n        return this._pairs;\n    }\n    set pairs(value) {\n        this._pairs = value;\n    }\n    get collisions() {\n        return this._collisions;\n    }\n    set collisions(value) {\n        this._collisions = value;\n    }\n    get contacts() {\n        return this._contacts;\n    }\n    set contacts(contacts) {\n        this._contacts = contacts;\n    }\n    get fastBodies() {\n        return this._fastBodies;\n    }\n    set fastBodies(value) {\n        this._fastBodies = value;\n    }\n    get fastBodyCollisions() {\n        return this._fastBodyCollisions;\n    }\n    set fastBodyCollisions(value) {\n        this._fastBodyCollisions = value;\n    }\n    get broadphase() {\n        return this._broadphase;\n    }\n    set broadphase(value) {\n        this._broadphase = value;\n    }\n    get narrowphase() {\n        return this._narrowphase;\n    }\n    set narrowphase(value) {\n        this._narrowphase = value;\n    }\n}\n\n;// ./Util/Browser.ts\nclass BrowserComponent {\n    on(eventName, handler) {\n        if (this._nativeHandlers[eventName]) {\n            this.off(eventName, this._nativeHandlers[eventName]);\n        }\n        this._nativeHandlers[eventName] = this._decorate(handler);\n        this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\n    }\n    off(eventName, handler) {\n        if (!handler) {\n            handler = this._nativeHandlers[eventName];\n        }\n        this.nativeComponent.removeEventListener(eventName, handler);\n        this._nativeHandlers[eventName] = null;\n    }\n    _decorate(handler) {\n        return (evt) => {\n            if (!this._paused) {\n                handler(evt);\n            }\n        };\n    }\n    pause() {\n        this._paused = true;\n    }\n    resume() {\n        this._paused = false;\n    }\n    clear() {\n        for (const event in this._nativeHandlers) {\n            this.off(event);\n        }\n    }\n    constructor(nativeComponent) {\n        this.nativeComponent = nativeComponent;\n        this._paused = false;\n        this._nativeHandlers = {};\n    }\n}\nclass BrowserEvents {\n    constructor(_windowGlobal, _documentGlobal) {\n        this._windowGlobal = _windowGlobal;\n        this._documentGlobal = _documentGlobal;\n        this._windowComponent = new BrowserComponent(this._windowGlobal);\n        this._documentComponent = new BrowserComponent(this._documentGlobal);\n    }\n    get window() {\n        return this._windowComponent;\n    }\n    get document() {\n        return this._documentComponent;\n    }\n    pause() {\n        this.window.pause();\n        this.document.pause();\n    }\n    resume() {\n        this.window.resume();\n        this.document.resume();\n    }\n    clear() {\n        this.window.clear();\n        this.document.clear();\n    }\n}\n\n;// ./Graphics/Context/ExcaliburGraphicsContext.ts\n\nconst DefaultAntialiasOptions = {\n    pixelArtSampler: false,\n    nativeContextAntialiasing: false,\n    multiSampleAntialiasing: true,\n    filtering: ImageFiltering.Blended,\n    canvasImageRendering: 'auto'\n};\nconst DefaultPixelArtOptions = {\n    pixelArtSampler: true,\n    nativeContextAntialiasing: false,\n    multiSampleAntialiasing: true,\n    filtering: ImageFiltering.Blended,\n    canvasImageRendering: 'auto'\n};\n\n;// ./Util/Fps.ts\nclass FpsSampler {\n    constructor(options) {\n        var _a;\n        this._samplePeriod = 100;\n        this._currentFrameTime = 0;\n        this._frames = 0;\n        this._previousSampleTime = 0;\n        this._beginFrameTime = 0;\n        this._fps = options.initialFps;\n        this._samplePeriod = (_a = options.samplePeriod) !== null && _a !== void 0 ? _a : this._samplePeriod;\n        this._currentFrameTime = 1000 / options.initialFps;\n        this._nowFn = options.nowFn;\n        this._previousSampleTime = this._nowFn();\n    }\n    /**\n     * Start of code block to sample FPS for\n     */\n    start() {\n        this._beginFrameTime = this._nowFn();\n    }\n    /**\n     * End of code block to sample FPS for\n     */\n    end() {\n        this._frames++;\n        const time = this._nowFn();\n        this._currentFrameTime = time - this._beginFrameTime;\n        if (time >= this._previousSampleTime + this._samplePeriod) {\n            this._fps = (this._frames * 1000) / (time - this._previousSampleTime);\n            this._previousSampleTime = time;\n            this._frames = 0;\n        }\n    }\n    /**\n     * Return the currently sampled fps over the last sample period, by default every 100ms\n     */\n    get fps() {\n        return this._fps;\n    }\n    /**\n     * Return the instantaneous fps, this can be less useful because it will fluctuate given the current frames time\n     */\n    get instant() {\n        return 1000 / this._currentFrameTime;\n    }\n}\n\n;// ./Util/Clock.ts\n\n\n/**\n * Abstract Clock is the base type of all Clocks\n *\n * It has a few opinions\n * 1. It manages the calculation of what \"elapsed\" time means and thus maximum fps\n * 2. The default timing api is implemented in now()\n *\n * To implement your own clock, extend Clock and override start/stop to start and stop the clock, then call update() with whatever\n * method is unique to your clock implementation.\n */\nclass Clock {\n    constructor(options) {\n        var _a, _b, _c;\n        this._onFatalException = () => {\n            /* default nothing */\n        };\n        this._maxFps = Infinity;\n        this._lastTime = 0;\n        this._elapsed = 1;\n        this._scheduledCbs = [];\n        this._totalElapsed = 0;\n        this._options = options;\n        this.tick = options.tick;\n        this._lastTime = (_a = this.now()) !== null && _a !== void 0 ? _a : 0;\n        this._maxFps = (_b = options.maxFps) !== null && _b !== void 0 ? _b : this._maxFps;\n        this._onFatalException = (_c = options.onFatalException) !== null && _c !== void 0 ? _c : this._onFatalException;\n        this.fpsSampler = new FpsSampler({\n            initialFps: 60,\n            nowFn: () => this.now()\n        });\n    }\n    /**\n     * Get the elapsed time for the last completed frame\n     */\n    elapsed() {\n        return this._elapsed;\n    }\n    /**\n     * Get the current time in milliseconds\n     */\n    now() {\n        return performance.now();\n    }\n    toTestClock() {\n        const testClock = new TestClock({\n            ...this._options,\n            defaultUpdateMs: 16.6\n        });\n        return testClock;\n    }\n    toStandardClock() {\n        const clock = new StandardClock({\n            ...this._options\n        });\n        return clock;\n    }\n    setFatalExceptionHandler(handler) {\n        this._onFatalException = handler;\n    }\n    /**\n     * Schedule a callback to fire given a timeout in milliseconds using the excalibur {@apilink Clock}\n     *\n     * This is useful to use over the built in browser `setTimeout` because callbacks will be tied to the\n     * excalibur update clock, instead of browser time, this means that callbacks wont fire if the game is\n     * stopped or paused.\n     * @param cb callback to fire\n     * @param timeoutMs Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\n     * @param timing Optionally specify a timeout in milliseconds from now, default is 0ms which means the next possible tick\n     */\n    schedule(cb, timeoutMs = 0, timing = 'preframe') {\n        // Scheduled based on internal elapsed time\n        const scheduledTime = this._totalElapsed + timeoutMs;\n        this._scheduledCbs.push([cb, scheduledTime, timing]);\n    }\n    /**\n     * Called internally to trigger scheduled callbacks in the clock\n     * @param timing\n     * @internal\n     */\n    __runScheduledCbs(timing = 'preframe') {\n        // walk backwards to delete items as we loop\n        for (let i = this._scheduledCbs.length - 1; i > -1; i--) {\n            if (timing === this._scheduledCbs[i][2] && this._scheduledCbs[i][1] <= this._totalElapsed) {\n                this._scheduledCbs[i][0](this._elapsed);\n                this._scheduledCbs.splice(i, 1);\n            }\n        }\n    }\n    update(overrideUpdateMs) {\n        try {\n            this.fpsSampler.start();\n            // Get the time to calculate time-elapsed\n            const now = this.now();\n            let elapsed = now - this._lastTime || 1; // first frame\n            // Constrain fps\n            const fpsInterval = 1000 / this._maxFps;\n            // only run frame if enough time has elapsed\n            if (elapsed >= fpsInterval) {\n                let leftover = 0;\n                if (fpsInterval !== 0) {\n                    leftover = elapsed % fpsInterval;\n                    elapsed = elapsed - leftover; // shift elapsed to be \"in phase\" with the current loop fps\n                }\n                // Resolves issue #138 if the game has been paused, or blurred for\n                // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\n                // and provides more expected behavior when the engine comes back\n                // into focus\n                if (elapsed > 200) {\n                    elapsed = 1;\n                }\n                // tick the mainloop and run scheduled callbacks\n                this._elapsed = overrideUpdateMs || elapsed;\n                this._totalElapsed += this._elapsed;\n                this.__runScheduledCbs('preframe');\n                this.tick(overrideUpdateMs || elapsed);\n                this.__runScheduledCbs('postframe');\n                if (fpsInterval !== 0) {\n                    this._lastTime = now - leftover;\n                }\n                else {\n                    this._lastTime = now;\n                }\n                this.fpsSampler.end();\n            }\n        }\n        catch (e) {\n            this._onFatalException(e);\n            this.stop();\n        }\n    }\n}\n/**\n * The {@apilink StandardClock} implements the requestAnimationFrame browser api to run the tick()\n */\nclass StandardClock extends Clock {\n    constructor(options) {\n        super(options);\n        this._running = false;\n    }\n    isRunning() {\n        return this._running;\n    }\n    start() {\n        if (this._running) {\n            return;\n        }\n        this._running = true;\n        const mainloop = () => {\n            // stop the loop\n            if (!this._running) {\n                return;\n            }\n            try {\n                // request next loop\n                this._requestId = window.requestAnimationFrame(mainloop);\n                this.update();\n            }\n            catch (e) {\n                window.cancelAnimationFrame(this._requestId);\n                throw e;\n            }\n        };\n        // begin the first frame\n        mainloop();\n    }\n    stop() {\n        window.cancelAnimationFrame(this._requestId);\n        this._running = false;\n    }\n}\n/**\n * The TestClock is meant for debugging interactions in excalibur that require precise timing to replicate or test\n */\nclass TestClock extends Clock {\n    constructor(options) {\n        super({\n            ...options\n        });\n        this._logger = Logger.getInstance();\n        this._running = false;\n        this._currentTime = 0;\n        this._updateMs = options.defaultUpdateMs;\n    }\n    /**\n     * Get the current time in milliseconds\n     */\n    now() {\n        var _a;\n        return (_a = this._currentTime) !== null && _a !== void 0 ? _a : 0;\n    }\n    isRunning() {\n        return this._running;\n    }\n    start() {\n        this._running = true;\n    }\n    stop() {\n        this._running = false;\n    }\n    /**\n     * Manually step the clock forward 1 tick, optionally specify an elapsed time in milliseconds\n     * @param overrideUpdateMs\n     */\n    step(overrideUpdateMs) {\n        const time = overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs;\n        if (this._running) {\n            // to be comparable to RAF this needs to be a full blown Task\n            // For example, images cannot decode synchronously in a single step\n            this.update(time);\n            this._currentTime += time;\n        }\n        else {\n            this._logger.warn('The clock is not running, no step will be performed');\n        }\n    }\n    /**\n     * Run a number of steps that tick the clock, optionally specify an elapsed time in milliseconds\n     * @param numberOfSteps\n     * @param overrideUpdateMs\n     */\n    run(numberOfSteps, overrideUpdateMs) {\n        for (let i = 0; i < numberOfSteps; i++) {\n            this.step(overrideUpdateMs !== null && overrideUpdateMs !== void 0 ? overrideUpdateMs : this._updateMs);\n        }\n    }\n}\n\n// EXTERNAL MODULE: ./Util/Toaster.css\nvar Util_Toaster = __webpack_require__(296);\n;// ./Util/Toaster.ts\n\n/**\n * The Toaster is only meant to be called from inside Excalibur to display messages to players\n */\nclass Toaster {\n    constructor() {\n        this._toasterCss = Util_Toaster/* default */.A.toString();\n        this._isInitialized = false;\n    }\n    _initialize() {\n        if (!this._isInitialized) {\n            this._container = document.createElement('div');\n            this._container.id = 'ex-toast-container';\n            document.body.appendChild(this._container);\n            this._isInitialized = true;\n            this._styleBlock = document.createElement('style');\n            this._styleBlock.textContent = this._toasterCss;\n            document.head.appendChild(this._styleBlock);\n        }\n    }\n    dispose() {\n        this._container.parentElement.removeChild(this._container);\n        this._styleBlock.parentElement.removeChild(this._styleBlock);\n        this._isInitialized = false;\n    }\n    _createFragment(message) {\n        const toastMessage = document.createElement('span');\n        toastMessage.innerText = message;\n        return toastMessage;\n    }\n    /**\n     * Display a toast message to a player\n     * @param message Text of the message, messages may have a single \"[LINK]\" to influence placement\n     * @param linkTarget Optionally specify a link location\n     * @param linkName Optionally specify a name for that link location\n     */\n    toast(message, linkTarget, linkName) {\n        this._initialize();\n        const toast = document.createElement('div');\n        toast.className = 'ex-toast-message';\n        const messageFragments = message.split('[LINK]').map((message) => this._createFragment(message));\n        if (linkTarget) {\n            const link = document.createElement('a');\n            link.href = linkTarget;\n            if (linkName) {\n                link.innerText = linkName;\n            }\n            else {\n                link.innerText = linkTarget;\n            }\n            messageFragments.splice(1, 0, link);\n        }\n        // Assembly message\n        const finalMessage = document.createElement('div');\n        messageFragments.forEach((message) => {\n            finalMessage.appendChild(message);\n        });\n        toast.appendChild(finalMessage);\n        // Dismiss button\n        const dismissBtn = document.createElement('button');\n        dismissBtn.innerText = 'x';\n        dismissBtn.addEventListener('click', () => {\n            this._container.removeChild(toast);\n        });\n        toast.appendChild(dismissBtn);\n        // Escape to dismiss\n        const keydownHandler = (evt) => {\n            if (evt.key === 'Escape') {\n                try {\n                    this._container.removeChild(toast);\n                }\n                catch (_a) {\n                    // pass\n                }\n            }\n            document.removeEventListener('keydown', keydownHandler);\n        };\n        document.addEventListener('keydown', keydownHandler);\n        // Insert into container\n        const first = this._container.firstChild;\n        this._container.insertBefore(toast, first);\n    }\n}\n\n;// ./Director/Director.ts\n\n\n\n\n\n\nconst DirectorEvents = {\n    NavigationStart: 'navigationstart',\n    Navigation: 'navigation',\n    NavigationEnd: 'navigationend'\n};\n/**\n * The Director is responsible for managing scenes and changing scenes in Excalibur.\n *\n * It deals with transitions, scene loaders, switching scenes\n *\n * This is used internally by Excalibur, generally not mean to\n * be instantiated end users directly.\n */\nclass Director {\n    /**\n     * Gets whether the director currently transitioning between scenes\n     *\n     * Useful if you need to block behavior during transition\n     */\n    get isTransitioning() {\n        return this._isTransitioning;\n    }\n    constructor(_engine, scenes) {\n        this._engine = _engine;\n        this.events = new EventEmitter();\n        this._logger = Logger.getInstance();\n        this._initialized = false;\n        /**\n         * All registered scenes in Excalibur\n         */\n        this.scenes = {};\n        /**\n         * Holds all instantiated scenes\n         */\n        this._sceneToInstance = new Map();\n        this._sceneToLoader = new Map();\n        this._sceneToTransition = new Map();\n        /**\n         * Used to keep track of scenes that have already been loaded so we don't load multiple times\n         */\n        this._loadedScenes = new Set();\n        this._isTransitioning = false;\n        this.rootScene = this.currentScene = new Scene();\n        this.add('root', this.rootScene);\n        this.currentScene = this.rootScene;\n        this.currentSceneName = 'root';\n        for (const sceneKey in scenes) {\n            const sceneOrOptions = scenes[sceneKey];\n            this.add(sceneKey, sceneOrOptions);\n            if (sceneKey === 'root') {\n                this.rootScene = this.getSceneInstance('root'); // always a root scene\n                this.currentScene = this.rootScene;\n            }\n        }\n    }\n    /**\n     * Initialize the director's internal state\n     */\n    async onInitialize() {\n        if (!this._initialized) {\n            this._initialized = true;\n            if (this._deferredGoto) {\n                const deferredScene = this._deferredGoto;\n                this._deferredGoto = undefined;\n                const deferredTransition = this._deferredTransition;\n                this._deferredTransition = undefined;\n                const deferredSceneInstance = this.getSceneInstance(deferredScene);\n                if (deferredSceneInstance && deferredTransition) {\n                    deferredTransition._addToTargetScene(this._engine, deferredSceneInstance);\n                }\n                await this.swapScene(deferredScene);\n                if (deferredSceneInstance && deferredTransition) {\n                    await this.playTransition(deferredTransition, deferredSceneInstance);\n                }\n            }\n            else {\n                await this.swapScene('root');\n            }\n        }\n    }\n    get isInitialized() {\n        return this._initialized;\n    }\n    /**\n     * Configures the start scene, and optionally the transition & loader for the director\n     *\n     * Typically this is called at the beginning of the game to the start scene and transition and never again.\n     * @param startScene\n     * @param options\n     */\n    configureStart(startScene, options) {\n        const maybeLoaderOrCtor = options === null || options === void 0 ? void 0 : options.loader;\n        if (maybeLoaderOrCtor instanceof DefaultLoader) {\n            this.mainLoader = maybeLoaderOrCtor;\n        }\n        else if (isLoaderConstructor(maybeLoaderOrCtor)) {\n            this.mainLoader = new maybeLoaderOrCtor();\n        }\n        else {\n            this.mainLoader = new Loader();\n        }\n        let maybeStartTransition;\n        if (options === null || options === void 0 ? void 0 : options.inTransition) {\n            const { inTransition } = options;\n            maybeStartTransition = inTransition;\n        }\n        this.startScene = startScene;\n        // Fire and forget promise for the initial scene\n        if (maybeStartTransition) {\n            const startSceneInstance = this.getSceneInstance(this.startScene);\n            if (startSceneInstance) {\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                maybeStartTransition._addToTargetScene(this._engine, startSceneInstance);\n                this.swapScene(this.startScene).then(() => {\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    return this.playTransition(maybeStartTransition, startSceneInstance);\n                });\n            }\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.swapScene(this.startScene);\n        }\n        this.currentSceneName = this.startScene;\n    }\n    _getLoader(sceneName) {\n        return this._sceneToLoader.get(sceneName);\n    }\n    _getInTransition(sceneName) {\n        var _a;\n        const sceneOrRoute = this.scenes[sceneName];\n        if (sceneOrRoute instanceof Scene || isSceneConstructor(sceneOrRoute)) {\n            return undefined;\n        }\n        return (_a = sceneOrRoute === null || sceneOrRoute === void 0 ? void 0 : sceneOrRoute.transitions) === null || _a === void 0 ? void 0 : _a.in;\n    }\n    _getOutTransition(sceneName) {\n        var _a;\n        const sceneOrRoute = this.scenes[sceneName];\n        if (sceneOrRoute instanceof Scene || isSceneConstructor(sceneOrRoute)) {\n            return undefined;\n        }\n        return (_a = sceneOrRoute === null || sceneOrRoute === void 0 ? void 0 : sceneOrRoute.transitions) === null || _a === void 0 ? void 0 : _a.out;\n    }\n    getDeferredScene() {\n        const maybeDeferred = this.getSceneDefinition(this._deferredGoto);\n        if (this._deferredGoto && maybeDeferred) {\n            return maybeDeferred;\n        }\n        return null;\n    }\n    /**\n     * Returns a scene by name if it exists, might be the constructor and not the instance of a scene\n     * @param name\n     */\n    getSceneDefinition(name) {\n        const maybeScene = this.scenes[name];\n        if (maybeScene instanceof Scene || isSceneConstructor(maybeScene)) {\n            return maybeScene;\n        }\n        else if (maybeScene) {\n            return maybeScene.scene;\n        }\n        return undefined;\n    }\n    /**\n     * Returns the name of the registered scene, null if none can be found\n     * @param scene\n     */\n    getSceneName(scene) {\n        for (const [name, maybeScene] of Object.entries(this.scenes)) {\n            if (maybeScene instanceof Scene) {\n                if (scene === maybeScene) {\n                    return name;\n                }\n            }\n            else if (!isSceneConstructor(maybeScene)) {\n                if (scene === maybeScene.scene) {\n                    return name;\n                }\n            }\n        }\n        for (const [name, maybeScene] of Object.entries(this.scenes)) {\n            if (isSceneConstructor(maybeScene)) {\n                if (scene.constructor === maybeScene) {\n                    return name;\n                }\n            }\n            else if (!(maybeScene instanceof Scene)) {\n                if (scene.constructor === maybeScene.scene) {\n                    return name;\n                }\n            }\n        }\n        return null;\n    }\n    /**\n     * Returns the same Director, but asserts a scene DOES exist to the type system\n     * @param name\n     */\n    assertAdded(name) {\n        return this;\n    }\n    /**\n     * Returns the same Director, but asserts a scene DOES NOT exist to the type system\n     * @param name\n     */\n    assertRemoved(name) {\n        return this;\n    }\n    /**\n     * Adds additional Scenes to the game!\n     * @param name\n     * @param sceneOrRoute\n     */\n    add(name, sceneOrRoute) {\n        if (!(sceneOrRoute instanceof Scene) && !isSceneConstructor(sceneOrRoute)) {\n            const { loader, transitions } = sceneOrRoute;\n            const { in: inTransition, out: outTransition } = transitions !== null && transitions !== void 0 ? transitions : {};\n            this._sceneToTransition.set(name, { in: inTransition, out: outTransition });\n            if (isLoaderConstructor(loader)) {\n                this._sceneToLoader.set(name, new loader());\n            }\n            else if (loader) {\n                this._sceneToLoader.set(name, loader);\n            }\n        }\n        if (this.scenes[name]) {\n            this._logger.warn('Scene', name, 'already exists overwriting');\n        }\n        this.scenes[name] = sceneOrRoute;\n        return this.assertAdded(name);\n    }\n    remove(nameOrScene) {\n        if (nameOrScene instanceof Scene || isSceneConstructor(nameOrScene)) {\n            const sceneOrCtor = nameOrScene;\n            // remove scene\n            for (const key in this.scenes) {\n                if (this.scenes.hasOwnProperty(key)) {\n                    const potentialSceneOrOptions = this.scenes[key];\n                    let scene;\n                    if (potentialSceneOrOptions instanceof Scene || isSceneConstructor(potentialSceneOrOptions)) {\n                        scene = potentialSceneOrOptions;\n                    }\n                    else {\n                        scene = potentialSceneOrOptions.scene;\n                    }\n                    if (scene === sceneOrCtor) {\n                        if (key === this.currentSceneName) {\n                            throw new Error(`Cannot remove a currently active scene: ${key}`);\n                        }\n                        this._sceneToInstance.delete(key);\n                        this._sceneToTransition.delete(key);\n                        this._sceneToLoader.delete(key);\n                        delete this.scenes[key];\n                    }\n                }\n            }\n        }\n        if (typeof nameOrScene === 'string') {\n            if (nameOrScene === this.currentSceneName) {\n                throw new Error(`Cannot remove a currently active scene: ${nameOrScene}`);\n            }\n            // remove scene\n            this._sceneToInstance.delete(nameOrScene);\n            this._sceneToTransition.delete(nameOrScene);\n            this._sceneToLoader.delete(nameOrScene);\n            delete this.scenes[nameOrScene];\n        }\n    }\n    /**\n     * Go to a specific scene, and optionally override loaders and transitions\n     * @param destinationScene\n     * @param options\n     */\n    async goToScene(destinationScene, options) {\n        var _a, _b, _c, _d, _e, _f;\n        const maybeDest = this.getSceneInstance(destinationScene);\n        if (!maybeDest) {\n            this._logger.warn(`Scene ${destinationScene} does not exist! Check the name, are you sure you added it?`);\n            return;\n        }\n        const sourceSceneInstance = this.currentScene;\n        const sourceScene = this.currentSceneName;\n        const engineInputEnabled = (_b = (_a = this._engine.input) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n        this._isTransitioning = true;\n        const maybeSourceOut = (_c = this.getSceneInstance(sourceScene)) === null || _c === void 0 ? void 0 : _c.onTransition('out');\n        const maybeDestinationIn = maybeDest === null || maybeDest === void 0 ? void 0 : maybeDest.onTransition('in');\n        options = {\n            // Engine configuration then dynamic scene transitions\n            ...{ sourceOut: (_d = this._getOutTransition(this.currentSceneName)) !== null && _d !== void 0 ? _d : maybeSourceOut },\n            ...{ destinationIn: (_e = this._getInTransition(destinationScene)) !== null && _e !== void 0 ? _e : maybeDestinationIn },\n            // Goto options\n            ...options\n        };\n        const { sourceOut, destinationIn, sceneActivationData } = options;\n        const outTransition = sourceOut !== null && sourceOut !== void 0 ? sourceOut : this._getOutTransition(this.currentSceneName);\n        const inTransition = destinationIn !== null && destinationIn !== void 0 ? destinationIn : this._getInTransition(destinationScene);\n        const hideLoader = (outTransition === null || outTransition === void 0 ? void 0 : outTransition.hideLoader) || (inTransition === null || inTransition === void 0 ? void 0 : inTransition.hideLoader);\n        if (hideLoader) {\n            // Start hidden loader early and take advantage of the transition\n            // Don't await and block on a hidden loader\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            this.maybeLoadScene(destinationScene, hideLoader);\n        }\n        this._emitEvent('navigationstart', sourceScene, destinationScene);\n        // Run the out transition on the current scene if present\n        if (outTransition) {\n            await this.playTransition(outTransition, sourceSceneInstance);\n        }\n        // Run the loader if present\n        await this.maybeLoadScene(destinationScene, hideLoader);\n        // Give incoming transition a chance to grab info from previous\n        if (inTransition) {\n            await inTransition.onPreviousSceneDeactivate(this.currentScene);\n        }\n        // Setup the in transition on the destination scene if present\n        // this is important to it can be initialized with the\n        if (inTransition) {\n            inTransition._addToTargetScene(this._engine, maybeDest);\n        }\n        // Swap to the new scene\n        // Runs scene lifecycle init and activate\n        await this.swapScene(destinationScene, sceneActivationData);\n        this._emitEvent('navigation', sourceScene, destinationScene);\n        // Run the in transition on the new scene if present\n        if (inTransition) {\n            await this.playTransition(inTransition, maybeDest);\n        }\n        this._emitEvent('navigationend', sourceScene, destinationScene);\n        (_f = this._engine.input) === null || _f === void 0 ? void 0 : _f.toggleEnabled(engineInputEnabled);\n        this._isTransitioning = false;\n    }\n    /**\n     * Retrieves a scene instance by key if it's registered.\n     *\n     * This will call any constructors that were given as a definition\n     * @param scene\n     */\n    getSceneInstance(scene) {\n        const sceneDefinition = this.getSceneDefinition(scene);\n        if (!sceneDefinition) {\n            return undefined;\n        }\n        if (this._sceneToInstance.has(scene)) {\n            return this._sceneToInstance.get(scene);\n        }\n        if (sceneDefinition instanceof Scene) {\n            this._sceneToInstance.set(scene, sceneDefinition);\n            return sceneDefinition;\n        }\n        const newScene = new sceneDefinition();\n        this._sceneToInstance.set(scene, newScene);\n        return newScene;\n    }\n    /**\n     * Triggers scene loading if has not already been loaded\n     * @param scene\n     * @param hideLoader\n     */\n    async maybeLoadScene(scene, hideLoader = false) {\n        var _a;\n        const loader = (_a = this._getLoader(scene)) !== null && _a !== void 0 ? _a : new DefaultLoader();\n        const sceneToLoad = this.getSceneDefinition(scene);\n        const sceneToLoadInstance = this.getSceneInstance(scene);\n        if (sceneToLoad && sceneToLoadInstance && !this._loadedScenes.has(sceneToLoadInstance)) {\n            sceneToLoadInstance.onPreLoad(loader);\n            sceneToLoadInstance.events.emit('preload', { loader });\n            if (hideLoader) {\n                // Don't await a hidden loader\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                this._engine.load(loader, hideLoader);\n            }\n            else {\n                await this._engine.load(loader);\n            }\n            this._loadedScenes.add(sceneToLoadInstance);\n        }\n    }\n    /**\n     * Plays a transition in the current scene and does book keeping for input.\n     * @param transition\n     */\n    async playTransition(transition, targetScene) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        if (!this.isInitialized) {\n            this._deferredTransition = transition;\n            return;\n        }\n        if (transition) {\n            this.currentTransition = transition;\n            const sceneInputEnabled = (_b = (_a = targetScene.input) === null || _a === void 0 ? void 0 : _a.enabled) !== null && _b !== void 0 ? _b : true;\n            (_c = targetScene.input) === null || _c === void 0 ? void 0 : _c.toggleEnabled(!transition.blockInput);\n            (_d = this._engine.input) === null || _d === void 0 ? void 0 : _d.toggleEnabled(!transition.blockInput);\n            this.currentTransition._addToTargetScene(this._engine, targetScene);\n            await this.currentTransition._play();\n            (_e = targetScene.input) === null || _e === void 0 ? void 0 : _e.toggleEnabled(sceneInputEnabled);\n        }\n        (_f = this.currentTransition) === null || _f === void 0 ? void 0 : _f.kill();\n        (_g = this.currentTransition) === null || _g === void 0 ? void 0 : _g.reset();\n        this.currentTransition = undefined;\n    }\n    /**\n     * Swaps the current and destination scene after performing required lifecycle events\n     * @param destinationScene\n     * @param data\n     */\n    async swapScene(destinationScene, data) {\n        const engine = this._engine;\n        // if not yet initialized defer goToScene\n        if (!this.isInitialized) {\n            this._deferredGoto = destinationScene;\n            return;\n        }\n        const maybeDest = this.getSceneInstance(destinationScene);\n        if (maybeDest) {\n            const previousScene = this.currentScene;\n            const nextScene = maybeDest;\n            this._logger.debug('Going to scene:', destinationScene);\n            // only deactivate when initialized\n            if (this.currentScene.isInitialized) {\n                const context = { engine, previousScene, nextScene };\n                await this.currentScene._deactivate(context);\n                this.currentScene.events.emit('deactivate', new DeactivateEvent(context, this.currentScene));\n                this.currentScene.input.clear();\n            }\n            // wait for the scene to be loaded if needed\n            const destLoader = this._sceneToLoader.get(destinationScene);\n            await (destLoader === null || destLoader === void 0 ? void 0 : destLoader.areResourcesLoaded());\n            // set current scene to new one\n            this.currentScene = nextScene;\n            this.currentSceneName = destinationScene;\n            engine.screen.setCurrentCamera(nextScene.camera);\n            // initialize the current scene if has not been already\n            await this.currentScene._initialize(engine);\n            const context = { engine, previousScene, nextScene, data };\n            await this.currentScene._activate(context);\n            this.currentScene.events.emit('activate', new ActivateEvent(context, this.currentScene));\n        }\n        else {\n            this._logger.error('Scene', destinationScene, 'does not exist!');\n        }\n    }\n    _emitEvent(eventName, sourceScene, destinationScene) {\n        const source = this.getSceneDefinition(sourceScene);\n        const dest = this.getSceneDefinition(destinationScene);\n        this.events.emit(eventName, {\n            sourceScene: source,\n            sourceName: sourceScene,\n            destinationScene: dest,\n            destinationName: destinationScene\n        });\n    }\n}\n\n;// ./Context.ts\n/**\n * Creates a injectable context that can be retrieved later with `useContext(context)`\n *\n * Example\n * ```typescript\n *\n * const AppContext = createContext({some: 'value'});\n * context.scope(val, () => {\n *    const value = useContext(AppContext);\n * })\n *\n * ```\n */\nfunction createContext() {\n    const ctx = {\n        scope: (value, cb) => {\n            const old = ctx.value;\n            ctx.value = value;\n            try {\n                return cb();\n            }\n            catch (e) {\n                throw e;\n            }\n            finally {\n                ctx.value = old;\n            }\n        },\n        value: undefined\n    };\n    return ctx;\n}\n/**\n * Retrieves the value from the current context\n */\nfunction useContext(context) {\n    return context.value;\n}\n\n;// ./GarbageCollector.ts\nconst DefaultGarbageCollectionOptions = {\n    textureCollectInterval: 60000\n    // TODO future work to integrate the font and text configuration, refactor existing collection mechanism\n    // fontCollectInterval: 60_000,\n    // textMeasurementCollectInterval: 60_000,\n};\nclass GarbageCollector {\n    constructor(options) {\n        this.options = options;\n        this._running = false;\n        this._collectionMap = new Map();\n        this._collectors = new Map();\n        /**\n         * Runs the collection loop to cleanup any stale resources given the registered collect handlers\n         */\n        this.collectStaleResources = (deadline) => {\n            if (!this._running) {\n                return;\n            }\n            for (const [type, [collector, timeoutInterval]] of this._collectors.entries()) {\n                const now = this.options.getTimestamp();\n                for (const [resource, [resourceType, time]] of this._collectionMap.entries()) {\n                    if (type !== resourceType || time + timeoutInterval >= now) {\n                        continue;\n                    }\n                    const collected = collector(resource);\n                    if (collected) {\n                        this._collectionMap.delete(resource);\n                    }\n                }\n            }\n            this._collectHandle = requestIdleCallback(this.collectStaleResources);\n        };\n    }\n    /**\n     *\n     * @param type Resource type\n     * @param timeoutInterval If resource type exceeds interval in milliseconds collect() is called\n     * @param collect Collection implementation, returns true if collected\n     */\n    registerCollector(type, timeoutInterval, collect) {\n        this._collectors.set(type, [collect, timeoutInterval]);\n    }\n    /**\n     * Add a resource to be tracked for collection\n     * @param type\n     * @param resource\n     */\n    addCollectableResource(type, resource) {\n        this._collectionMap.set(resource, [type, this.options.getTimestamp()]);\n    }\n    /**\n     * Update the resource last used timestamp preventing collection\n     * @param resource\n     */\n    touch(resource) {\n        const collectionData = this._collectionMap.get(resource);\n        if (collectionData) {\n            this._collectionMap.set(resource, [collectionData[0], this.options.getTimestamp()]);\n        }\n    }\n    /**\n     * Force collect all resources, useful for shutting down a game\n     * or if you know that you will not use anything you've allocated before now\n     */\n    forceCollectAll() {\n        for (const [_, [collector]] of this._collectors.entries()) {\n            for (const [resource] of this._collectionMap.entries()) {\n                const collected = collector(resource);\n                if (collected) {\n                    this._collectionMap.delete(resource);\n                }\n            }\n        }\n    }\n    /**\n     * Starts the garbage collection loop\n     */\n    start() {\n        this._running = true;\n        this.collectStaleResources();\n    }\n    /**\n     * Stops the garbage collection loop\n     */\n    stop() {\n        this._running = false;\n        cancelIdleCallback(this._collectHandle);\n    }\n}\n\n;// ./Engine.ts\n\n\n\n\n\n\npolyfill();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst EngineEvents = {\n    FallbackGraphicsContext: 'fallbackgraphicscontext',\n    Initialize: 'initialize',\n    Visible: 'visible',\n    Hidden: 'hidden',\n    Start: 'start',\n    Stop: 'stop',\n    PreUpdate: 'preupdate',\n    PostUpdate: 'postupdate',\n    PreFrame: 'preframe',\n    PostFrame: 'postframe',\n    PreDraw: 'predraw',\n    PostDraw: 'postdraw'\n};\n/**\n * Enum representing the different mousewheel event bubble prevention\n */\nvar ScrollPreventionMode;\n(function (ScrollPreventionMode) {\n    /**\n     * Do not prevent any page scrolling\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"None\"] = 0] = \"None\";\n    /**\n     * Prevent page scroll if mouse is over the game canvas\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"Canvas\"] = 1] = \"Canvas\";\n    /**\n     * Prevent all page scrolling via mouse wheel\n     */\n    ScrollPreventionMode[ScrollPreventionMode[\"All\"] = 2] = \"All\";\n})(ScrollPreventionMode || (ScrollPreventionMode = {}));\n/**\n * The Excalibur Engine\n *\n * The {@apilink Engine} is the main driver for a game. It is responsible for\n * starting/stopping the game, maintaining state, transmitting events,\n * loading resources, and managing the scene.\n */\nclass Engine {\n    static useEngine() {\n        const value = useContext(Engine.Context);\n        if (!value) {\n            throw new Error('Cannot inject engine with `useEngine()`, `useEngine()` was called outside of Engine lifecycle scope.');\n        }\n        return value;\n    }\n    /**\n     * The width of the game canvas in pixels (physical width component of the\n     * resolution of the canvas element)\n     */\n    get canvasWidth() {\n        return this.screen.canvasWidth;\n    }\n    /**\n     * Returns half width of the game canvas in pixels (half physical width component)\n     */\n    get halfCanvasWidth() {\n        return this.screen.halfCanvasWidth;\n    }\n    /**\n     * The height of the game canvas in pixels, (physical height component of\n     * the resolution of the canvas element)\n     */\n    get canvasHeight() {\n        return this.screen.canvasHeight;\n    }\n    /**\n     * Returns half height of the game canvas in pixels (half physical height component)\n     */\n    get halfCanvasHeight() {\n        return this.screen.halfCanvasHeight;\n    }\n    /**\n     * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawWidth() {\n        return this.screen.drawWidth;\n    }\n    /**\n     * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawWidth() {\n        return this.screen.halfDrawWidth;\n    }\n    /**\n     * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get drawHeight() {\n        return this.screen.drawHeight;\n    }\n    /**\n     * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n     */\n    get halfDrawHeight() {\n        return this.screen.halfDrawHeight;\n    }\n    /**\n     * Returns whether excalibur detects the current screen to be HiDPI\n     */\n    get isHiDpi() {\n        return this.screen.isHiDpi;\n    }\n    /**\n     * Access {@apilink stats} that holds frame statistics.\n     */\n    get stats() {\n        return this.debug.stats;\n    }\n    /**\n     * The current {@apilink Scene} being drawn and updated on screen\n     */\n    get currentScene() {\n        return this.director.currentScene;\n    }\n    /**\n     * The current {@apilink Scene} being drawn and updated on screen\n     */\n    get currentSceneName() {\n        return this.director.currentSceneName;\n    }\n    /**\n     * The default {@apilink Scene} of the game, use {@apilink Engine.goToScene} to transition to different scenes.\n     */\n    get rootScene() {\n        return this.director.rootScene;\n    }\n    /**\n     * Contains all the scenes currently registered with Excalibur\n     */\n    get scenes() {\n        return this.director.scenes;\n    }\n    /**\n     * Indicates whether the engine is set to fullscreen or not\n     */\n    get isFullscreen() {\n        return this.screen.isFullScreen;\n    }\n    /**\n     * Indicates the current {@apilink DisplayMode} of the engine.\n     */\n    get displayMode() {\n        return this.screen.displayMode;\n    }\n    /**\n     * Returns the calculated pixel ration for use in rendering\n     */\n    get pixelRatio() {\n        return this.screen.pixelRatio;\n    }\n    get isDebug() {\n        return this._isDebug;\n    }\n    /**\n     * Hints the graphics context to truncate fractional world space coordinates\n     */\n    get snapToPixel() {\n        return this.graphicsContext.snapToPixel;\n    }\n    set snapToPixel(shouldSnapToPixel) {\n        this.graphicsContext.snapToPixel = shouldSnapToPixel;\n    }\n    emit(eventName, event) {\n        this.events.emit(eventName, event);\n    }\n    on(eventName, handler) {\n        return this.events.on(eventName, handler);\n    }\n    once(eventName, handler) {\n        return this.events.once(eventName, handler);\n    }\n    off(eventName, handler) {\n        this.events.off(eventName, handler);\n    }\n    /**\n     * Creates a new game using the given {@apilink EngineOptions}. By default, if no options are provided,\n     * the game will be rendered full screen (taking up all available browser window space).\n     * You can customize the game rendering through {@apilink EngineOptions}.\n     *\n     * Example:\n     *\n     * ```js\n     * var game = new ex.Engine({\n     *   width: 0, // the width of the canvas\n     *   height: 0, // the height of the canvas\n     *   enableCanvasTransparency: true, // the transparencySection of the canvas\n     *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\n     *   displayMode: ex.DisplayMode.FullScreen, // the display mode\n     *   pointerScope: ex.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\n     *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\n     * });\n     *\n     * // call game.start, which is a Promise\n     * game.start().then(function () {\n     *   // ready, set, go!\n     * });\n     * ```\n     */\n    constructor(options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n        /**\n         * Anything run under scope can use `useEngine()` to inject the current engine\n         * @param cb\n         */\n        this.scope = (cb) => Engine.Context.scope(this, cb);\n        /**\n         * Current Excalibur version string\n         *\n         * Useful for plugins or other tools that need to know what features are available\n         */\n        this.version = EX_VERSION;\n        /**\n         * Listen to and emit events on the Engine\n         */\n        this.events = new EventEmitter();\n        /**\n         * Optionally set the maximum fps if not set Excalibur will go as fast as the device allows.\n         *\n         * You may want to constrain max fps if your game cannot maintain fps consistently, it can look and feel better to have a 30fps game than\n         * one that bounces between 30fps and 60fps\n         */\n        this.maxFps = Number.POSITIVE_INFINITY;\n        this._inputEnabled = true;\n        this._suppressPlayButton = false;\n        /**\n         * Indicates whether audio should be paused when the game is no longer visible.\n         */\n        this.pauseAudioWhenHidden = true;\n        /**\n         * Indicates whether the engine should draw with debug information\n         */\n        this._isDebug = false;\n        /**\n         * Sets the Transparency for the engine.\n         */\n        this.enableCanvasTransparency = true;\n        /**\n         * The action to take when a fatal exception is thrown\n         */\n        this.onFatalException = (e) => {\n            Logger.getInstance().fatal(e, e.stack);\n        };\n        this._toaster = new Toaster();\n        this._timescale = 1.0;\n        this._isInitialized = false;\n        this._originalOptions = {};\n        this._handleWebGLContextLost = (e) => {\n            var _a;\n            e.preventDefault();\n            this.clock.stop();\n            this._logger.fatalOnce('WebGL Graphics Lost', e);\n            const container = document.createElement('div');\n            container.id = 'ex-webgl-graphics-context-lost';\n            container.style.position = 'absolute';\n            container.style.zIndex = '99';\n            container.style.left = '50%';\n            container.style.top = '50%';\n            container.style.display = 'flex';\n            container.style.flexDirection = 'column';\n            container.style.transform = 'translate(-50%, -50%)';\n            container.style.backgroundColor = 'white';\n            container.style.padding = '10px';\n            container.style.borderStyle = 'solid 1px';\n            const div = document.createElement('div');\n            div.innerHTML = `\r\n      <h1>There was an issue rendering, please refresh the page.</h1>\r\n      <div>\r\n        <p>WebGL Graphics Context Lost</p>\r\n\r\n        <button id=\"ex-webgl-graphics-reload\">Refresh Page</button>\r\n\r\n        <p>There are a few reasons this might happen:</p>\r\n        <ul>\r\n          <li>Two or more pages are placing a high demand on the GPU</li>\r\n          <li>Another page or operation has stalled the GPU and the browser has decided to reset the GPU</li>\r\n          <li>The computer has multiple GPUs and the user has switched between them</li>\r\n          <li>Graphics driver has crashed or restarted</li>\r\n          <li>Graphics driver was updated</li>\r\n        </ul>\r\n      </div>\r\n    `;\n            container.appendChild(div);\n            if ((_a = this.canvas) === null || _a === void 0 ? void 0 : _a.parentElement) {\n                this.canvas.parentElement.appendChild(container);\n                const button = div.querySelector('#ex-webgl-graphics-reload');\n                button === null || button === void 0 ? void 0 : button.addEventListener('click', () => location.reload());\n            }\n        };\n        this._performanceThresholdTriggered = false;\n        this._fpsSamples = [];\n        this._disposed = false;\n        this._isLoading = false;\n        this._hideLoader = false;\n        this._isReadyFuture = new Future();\n        /**\n         * Returns the current frames elapsed milliseconds\n         */\n        this.currentFrameElapsedMs = 0;\n        /**\n         * Returns the current frame lag when in fixed update mode\n         */\n        this.currentFrameLagMs = 0;\n        this._lagMs = 0;\n        this._screenShotRequests = [];\n        options = { ...Engine._DEFAULT_ENGINE_OPTIONS, ...options };\n        this._originalOptions = options;\n        Flags.freeze();\n        // Initialize browser events facade\n        this.browser = new BrowserEvents(window, document);\n        // Check compatibility\n        const detector = new Detector();\n        if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\n            const message = document.createElement('div');\n            message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\n            document.body.appendChild(message);\n            detector.failedTests.forEach(function (test) {\n                const testMessage = document.createElement('div');\n                testMessage.innerText = 'Browser feature missing ' + test;\n                document.body.appendChild(testMessage);\n            });\n            if (options.canvasElementId) {\n                const canvas = document.getElementById(options.canvasElementId);\n                if (canvas) {\n                    canvas.parentElement.removeChild(canvas);\n                }\n            }\n            return;\n        }\n        else {\n            this._compatible = true;\n        }\n        // Use native console API for color fun\n        // eslint-disable-next-line no-console\n        if (console.log && !options.suppressConsoleBootMessage) {\n            // eslint-disable-next-line no-console\n            console.log(`%cPowered by Excalibur.js (v${EX_VERSION})`, 'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;');\n            // eslint-disable-next-line no-console\n            console.log('\\n\\\r\n      /| ________________\\n\\\r\nO|===|* >________________>\\n\\\r\n      \\\\|');\n            // eslint-disable-next-line no-console\n            console.log('Visit', 'http://excaliburjs.com', 'for more information');\n        }\n        // Suppress play button\n        if (options.suppressPlayButton) {\n            this._suppressPlayButton = true;\n        }\n        this._logger = Logger.getInstance();\n        // If debug is enabled, let's log browser features to the console.\n        if (this._logger.defaultLevel === LogLevel.Debug) {\n            detector.logBrowserFeatures();\n        }\n        this._logger.debug('Building engine...');\n        if (options.garbageCollection === true) {\n            this.garbageCollectorConfig = {\n                ...DefaultGarbageCollectionOptions\n            };\n        }\n        else if (options.garbageCollection === false) {\n            this._logger.warn('WebGL Garbage Collection Disabled!!! If you leak any images over time your game will crash when GPU memory is exhausted');\n            this.garbageCollectorConfig = null;\n        }\n        else {\n            this.garbageCollectorConfig = {\n                ...DefaultGarbageCollectionOptions,\n                ...options.garbageCollection\n            };\n        }\n        this._garbageCollector = new GarbageCollector({ getTimestamp: Date.now });\n        this.canvasElementId = options.canvasElementId;\n        if (options.canvasElementId) {\n            this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\n            //test for existence of element\n            if (document.getElementById(options.canvasElementId) === null) {\n                throw new Error('Cannot find existing element in the DOM, please ensure element is created prior to engine creation.');\n            }\n            this.canvas = document.getElementById(options.canvasElementId);\n        }\n        else if (options.canvasElement) {\n            this._logger.debug('Using Canvas element specified:', options.canvasElement);\n            this.canvas = options.canvasElement;\n        }\n        else {\n            this._logger.debug('Using generated canvas element');\n            this.canvas = document.createElement('canvas');\n        }\n        if (this.canvas && !options.enableCanvasContextMenu) {\n            this.canvas.addEventListener('contextmenu', (evt) => {\n                evt.preventDefault();\n            });\n        }\n        let displayMode = (_a = options.displayMode) !== null && _a !== void 0 ? _a : DisplayMode.Fixed;\n        if ((options.width && options.height) || options.viewport) {\n            if (options.displayMode === undefined) {\n                displayMode = DisplayMode.Fixed;\n            }\n            this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\n        }\n        else if (!options.displayMode) {\n            this._logger.debug('Engine viewport is fit');\n            displayMode = DisplayMode.FitScreen;\n        }\n        this.grabWindowFocus = options.grabWindowFocus;\n        this.pointerScope = options.pointerScope;\n        this._originalDisplayMode = displayMode;\n        let pixelArtSampler;\n        let uvPadding;\n        let nativeContextAntialiasing;\n        let canvasImageRendering;\n        let filtering;\n        let multiSampleAntialiasing;\n        if (typeof options.antialiasing === 'object') {\n            ({ pixelArtSampler, nativeContextAntialiasing, multiSampleAntialiasing, filtering, canvasImageRendering } = {\n                ...(options.pixelArt ? DefaultPixelArtOptions : DefaultAntialiasOptions),\n                ...options.antialiasing\n            });\n        }\n        else {\n            pixelArtSampler = !!options.pixelArt;\n            nativeContextAntialiasing = false;\n            multiSampleAntialiasing = options.antialiasing;\n            canvasImageRendering = options.antialiasing ? 'auto' : 'pixelated';\n            filtering = options.antialiasing ? ImageFiltering.Blended : ImageFiltering.Pixel;\n        }\n        if (nativeContextAntialiasing && multiSampleAntialiasing) {\n            this._logger.warnOnce(`Cannot use antialias setting nativeContextAntialiasing and multiSampleAntialiasing` +\n                ` at the same time, they are incompatible settings. If you aren\\'t sure use multiSampleAntialiasing`);\n        }\n        if (options.pixelArt) {\n            uvPadding = 0.25;\n        }\n        if (!options.antialiasing || filtering === ImageFiltering.Pixel) {\n            uvPadding = 0;\n        }\n        // Override with any user option, if non default to .25 for pixel art, 0.01 for everything else\n        uvPadding = (_c = (_b = options.uvPadding) !== null && _b !== void 0 ? _b : uvPadding) !== null && _c !== void 0 ? _c : 0.01;\n        // Canvas 2D fallback can be flagged on\n        let useCanvasGraphicsContext = Flags.isEnabled('use-canvas-context');\n        if (!useCanvasGraphicsContext) {\n            // Attempt webgl first\n            try {\n                this.graphicsContext = new ExcaliburGraphicsContextWebGL({\n                    canvasElement: this.canvas,\n                    enableTransparency: this.enableCanvasTransparency,\n                    pixelArtSampler: pixelArtSampler,\n                    antialiasing: nativeContextAntialiasing,\n                    multiSampleAntialiasing: multiSampleAntialiasing,\n                    uvPadding: uvPadding,\n                    powerPreference: options.powerPreference,\n                    backgroundColor: options.backgroundColor,\n                    snapToPixel: options.snapToPixel,\n                    useDrawSorting: options.useDrawSorting,\n                    garbageCollector: this.garbageCollectorConfig\n                        ? {\n                            garbageCollector: this._garbageCollector,\n                            collectionInterval: this.garbageCollectorConfig.textureCollectInterval\n                        }\n                        : null,\n                    handleContextLost: (_d = options.handleContextLost) !== null && _d !== void 0 ? _d : this._handleWebGLContextLost,\n                    handleContextRestored: options.handleContextRestored\n                });\n            }\n            catch (e) {\n                this._logger.warn(`Excalibur could not load webgl for some reason (${e.message}) and loaded a Canvas 2D fallback. ` +\n                    `Some features of Excalibur will not work in this mode. \\n\\n` +\n                    'Read more about this issue at https://excaliburjs.com/docs/performance');\n                // fallback to canvas in case of failure\n                useCanvasGraphicsContext = true;\n            }\n        }\n        if (useCanvasGraphicsContext) {\n            this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\n                canvasElement: this.canvas,\n                enableTransparency: this.enableCanvasTransparency,\n                antialiasing: nativeContextAntialiasing,\n                backgroundColor: options.backgroundColor,\n                snapToPixel: options.snapToPixel,\n                useDrawSorting: options.useDrawSorting\n            });\n        }\n        this.screen = new Screen({\n            canvas: this.canvas,\n            context: this.graphicsContext,\n            antialiasing: nativeContextAntialiasing,\n            canvasImageRendering: canvasImageRendering,\n            browser: this.browser,\n            viewport: (_e = options.viewport) !== null && _e !== void 0 ? _e : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\n            resolution: options.resolution,\n            displayMode,\n            pixelRatio: options.suppressHiDPIScaling ? 1 : (_f = options.pixelRatio) !== null && _f !== void 0 ? _f : null\n        });\n        // TODO REMOVE STATIC!!!\n        // Set default filtering based on antialiasing\n        TextureLoader.filtering = filtering;\n        if (options.backgroundColor) {\n            this.backgroundColor = options.backgroundColor.clone();\n        }\n        this.maxFps = (_g = options.maxFps) !== null && _g !== void 0 ? _g : this.maxFps;\n        this.fixedUpdateTimestep = (_h = options.fixedUpdateTimestep) !== null && _h !== void 0 ? _h : this.fixedUpdateTimestep;\n        this.fixedUpdateFps = (_j = options.fixedUpdateFps) !== null && _j !== void 0 ? _j : this.fixedUpdateFps;\n        this.fixedUpdateTimestep = this.fixedUpdateTimestep || 1000 / this.fixedUpdateFps;\n        this.clock = new StandardClock({\n            maxFps: this.maxFps,\n            tick: this._mainloop.bind(this),\n            onFatalException: (e) => this.onFatalException(e)\n        });\n        this.enableCanvasTransparency = options.enableCanvasTransparency;\n        if (typeof options.physics === 'boolean') {\n            this.physics = {\n                ...getDefaultPhysicsConfig(),\n                enabled: options.physics\n            };\n        }\n        else {\n            this.physics = {\n                ...getDefaultPhysicsConfig()\n            };\n            mergeDeep(this.physics, options.physics);\n        }\n        this.debug = new DebugConfig(this);\n        this.director = new Director(this, options.scenes);\n        this._initialize(options);\n        window.___EXCALIBUR_DEVTOOL = this;\n        Engine.InstanceCount++;\n    }\n    _monitorPerformanceThresholdAndTriggerFallback() {\n        const { allow } = this._originalOptions.configurePerformanceCanvas2DFallback;\n        let { threshold, showPlayerMessage } = this._originalOptions.configurePerformanceCanvas2DFallback;\n        if (threshold === undefined) {\n            threshold = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.threshold;\n        }\n        if (showPlayerMessage === undefined) {\n            showPlayerMessage = Engine._DEFAULT_ENGINE_OPTIONS.configurePerformanceCanvas2DFallback.showPlayerMessage;\n        }\n        if (!Flags.isEnabled('use-canvas-context') && allow && this.ready && !this._performanceThresholdTriggered) {\n            // Calculate Average fps for last X number of frames after start\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\n                this._fpsSamples.splice(0, 1);\n            }\n            this._fpsSamples.push(this.clock.fpsSampler.fps);\n            let total = 0;\n            for (let i = 0; i < this._fpsSamples.length; i++) {\n                total += this._fpsSamples[i];\n            }\n            const average = total / this._fpsSamples.length;\n            if (this._fpsSamples.length === threshold.numberOfFrames) {\n                if (average <= threshold.fps) {\n                    this._performanceThresholdTriggered = true;\n                    this._logger.warn(`Switching to browser 2D Canvas fallback due to performance. Some features of Excalibur will not work in this mode.\\n` +\n                        \"this might mean your browser doesn't have webgl enabled or hardware acceleration is unavailable.\\n\\n\" +\n                        'If in Chrome:\\n' +\n                        '  * Visit Settings > Advanced > System, and ensure \"Use Hardware Acceleration\" is checked.\\n' +\n                        '  * Visit chrome://flags/#ignore-gpu-blocklist and ensure \"Override software rendering list\" is \"enabled\"\\n' +\n                        'If in Firefox, visit about:config\\n' +\n                        '  * Ensure webgl.disabled = false\\n' +\n                        '  * Ensure webgl.force-enabled = true\\n' +\n                        '  * Ensure layers.acceleration.force-enabled = true\\n\\n' +\n                        'Read more about this issue at https://excaliburjs.com/docs/performance');\n                    if (showPlayerMessage) {\n                        this._toaster.toast('Excalibur is encountering performance issues. ' +\n                            \"It's possible that your browser doesn't have hardware acceleration enabled. \" +\n                            'Visit [LINK] for more information and potential solutions.', 'https://excaliburjs.com/docs/performance');\n                    }\n                    this.useCanvas2DFallback();\n                    this.emit('fallbackgraphicscontext', this.graphicsContext);\n                }\n            }\n        }\n    }\n    /**\n     * Switches the engine's graphics context to the 2D Canvas.\n     * @warning Some features of Excalibur will not work in this mode.\n     */\n    useCanvas2DFallback() {\n        var _a, _b, _c;\n        // Swap out the canvas\n        const newCanvas = this.canvas.cloneNode(false);\n        this.canvas.parentNode.replaceChild(newCanvas, this.canvas);\n        this.canvas = newCanvas;\n        const options = { ...this._originalOptions, antialiasing: this.screen.antialiasing };\n        const displayMode = this._originalDisplayMode;\n        // New graphics context\n        this.graphicsContext = new ExcaliburGraphicsContext2DCanvas({\n            canvasElement: this.canvas,\n            enableTransparency: this.enableCanvasTransparency,\n            antialiasing: options.antialiasing,\n            backgroundColor: options.backgroundColor,\n            snapToPixel: options.snapToPixel,\n            useDrawSorting: options.useDrawSorting\n        });\n        // Reset screen\n        if (this.screen) {\n            this.screen.dispose();\n        }\n        this.screen = new Screen({\n            canvas: this.canvas,\n            context: this.graphicsContext,\n            antialiasing: (_a = options.antialiasing) !== null && _a !== void 0 ? _a : true,\n            browser: this.browser,\n            viewport: (_b = options.viewport) !== null && _b !== void 0 ? _b : (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\n            resolution: options.resolution,\n            displayMode,\n            pixelRatio: options.suppressHiDPIScaling ? 1 : (_c = options.pixelRatio) !== null && _c !== void 0 ? _c : null\n        });\n        this.screen.setCurrentCamera(this.currentScene.camera);\n        // Reset pointers\n        this.input.pointers.detach();\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\n        this.input.pointers = this.input.pointers.recreate(pointerTarget, this);\n        this.input.pointers.init();\n    }\n    /**\n     * Attempts to completely clean up excalibur resources, including removing the canvas from the dom.\n     *\n     * To start again you will need to new up an Engine.\n     */\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            this.stop();\n            this._garbageCollector.forceCollectAll();\n            this.input.toggleEnabled(false);\n            this.canvas.parentNode.removeChild(this.canvas);\n            this.canvas = null;\n            this.screen.dispose();\n            this.graphicsContext.dispose();\n            this.graphicsContext = null;\n            Engine.InstanceCount--;\n        }\n    }\n    isDisposed() {\n        return this._disposed;\n    }\n    /**\n     * Returns a BoundingBox of the top left corner of the screen\n     * and the bottom right corner of the screen.\n     */\n    getWorldBounds() {\n        return this.screen.getWorldBounds();\n    }\n    /**\n     * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\n     */\n    get timescale() {\n        return this._timescale;\n    }\n    /**\n     * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\n     * when using time-based movement.\n     */\n    set timescale(value) {\n        if (value < 0) {\n            Logger.getInstance().warnOnce('engine.timescale to a value less than 0 are ignored');\n            return;\n        }\n        this._timescale = value;\n    }\n    /**\n     * Adds a {@apilink Timer} to the {@apilink currentScene}.\n     * @param timer  The timer to add to the {@apilink currentScene}.\n     */\n    addTimer(timer) {\n        return this.currentScene.addTimer(timer);\n    }\n    /**\n     * Removes a {@apilink Timer} from the {@apilink currentScene}.\n     * @param timer  The timer to remove to the {@apilink currentScene}.\n     */\n    removeTimer(timer) {\n        return this.currentScene.removeTimer(timer);\n    }\n    /**\n     * Adds a {@apilink Scene} to the engine, think of scenes in Excalibur as you\n     * would levels or menus.\n     * @param key  The name of the scene, must be unique\n     * @param scene The scene to add to the engine\n     */\n    addScene(key, scene) {\n        this.director.add(key, scene);\n        return this;\n    }\n    /**\n     * @internal\n     */\n    removeScene(entity) {\n        this.director.remove(entity);\n    }\n    add(entity) {\n        if (arguments.length === 2) {\n            this.director.add(arguments[0], arguments[1]);\n            return;\n        }\n        const maybeDeferred = this.director.getDeferredScene();\n        if (maybeDeferred instanceof Scene) {\n            maybeDeferred.add(entity);\n        }\n        else {\n            this.currentScene.add(entity);\n        }\n    }\n    remove(entity) {\n        if (entity instanceof Entity) {\n            this.currentScene.remove(entity);\n        }\n        if (entity instanceof Scene || isSceneConstructor(entity)) {\n            this.removeScene(entity);\n        }\n        if (typeof entity === 'string') {\n            this.removeScene(entity);\n        }\n    }\n    /**\n     * Changes the current scene with optionally supplied:\n     * * Activation data\n     * * Transitions\n     * * Loaders\n     *\n     * Example:\n     * ```typescript\n     * game.goToScene('myScene', {\n     *   sceneActivationData: {any: 'thing at all'},\n     *   destinationIn: new FadeInOut({duration: 1000, direction: 'in'}),\n     *   sourceOut: new FadeInOut({duration: 1000, direction: 'out'}),\n     *   loader: MyLoader\n     * });\n     * ```\n     *\n     * Scenes are defined in the Engine constructor\n     * ```typescript\n     * const engine = new ex.Engine({\n        scenes: {...}\n      });\n     * ```\n     * Or by adding dynamically\n     *\n     * ```typescript\n     * engine.addScene('myScene', new ex.Scene());\n     * ```\n     * @param destinationScene\n     * @param options\n     */\n    async goToScene(destinationScene, options) {\n        await this.scope(async () => {\n            await this.director.goToScene(destinationScene, options);\n        });\n    }\n    /**\n     * Transforms the current x, y from screen coordinates to world coordinates\n     * @param point  Screen coordinate to convert\n     */\n    screenToWorldCoordinates(point) {\n        return this.screen.screenToWorldCoordinates(point);\n    }\n    /**\n     * Transforms a world coordinate, to a screen coordinate\n     * @param point  World coordinate to convert\n     */\n    worldToScreenCoordinates(point) {\n        return this.screen.worldToScreenCoordinates(point);\n    }\n    /**\n     * Initializes the internal canvas, rendering context, display mode, and native event listeners\n     */\n    _initialize(options) {\n        var _a, _b;\n        this.pageScrollPreventionMode = options.scrollPreventionMode;\n        // initialize inputs\n        const pointerTarget = options && options.pointerScope === PointerScope.Document ? document : this.canvas;\n        const grabWindowFocus = (_b = (_a = this._originalOptions) === null || _a === void 0 ? void 0 : _a.grabWindowFocus) !== null && _b !== void 0 ? _b : true;\n        this.input = new InputHost({\n            pointerTarget,\n            grabWindowFocus,\n            engine: this\n        });\n        this.inputMapper = this.input.inputMapper;\n        // Issue #385 make use of the visibility api\n        // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n        this.browser.document.on('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                this.events.emit('hidden', new HiddenEvent(this));\n                this._logger.debug('Window hidden');\n            }\n            else if (document.visibilityState === 'visible') {\n                this.events.emit('visible', new VisibleEvent(this));\n                this._logger.debug('Window visible');\n            }\n        });\n        if (!this.canvasElementId && !options.canvasElement) {\n            document.body.appendChild(this.canvas);\n        }\n    }\n    toggleInputEnabled(enabled) {\n        this._inputEnabled = enabled;\n        this.input.toggleEnabled(this._inputEnabled);\n    }\n    onInitialize(engine) {\n        // Override me\n    }\n    /**\n     * Gets whether the actor is Initialized\n     */\n    get isInitialized() {\n        return this._isInitialized;\n    }\n    async _overrideInitialize(engine) {\n        if (!this.isInitialized) {\n            await this.director.onInitialize();\n            await this.onInitialize(engine);\n            this.events.emit('initialize', new InitializeEvent(engine, this));\n            this._isInitialized = true;\n        }\n    }\n    /**\n     * Updates the entire state of the game\n     * @param elapsed  Number of milliseconds elapsed since the last update.\n     */\n    _update(elapsed) {\n        var _a;\n        if (this._isLoading) {\n            // suspend updates until loading is finished\n            (_a = this._loader) === null || _a === void 0 ? void 0 : _a.onUpdate(this, elapsed);\n            // Update input listeners\n            this.input.update();\n            return;\n        }\n        // Publish preupdate events\n        this.clock.__runScheduledCbs('preupdate');\n        this._preupdate(elapsed);\n        // process engine level events\n        this.currentScene.update(this, elapsed);\n        // Update graphics postprocessors\n        this.graphicsContext.updatePostProcessors(elapsed);\n        // Publish update event\n        this.clock.__runScheduledCbs('postupdate');\n        this._postupdate(elapsed);\n        // Update input listeners\n        this.input.update();\n    }\n    /**\n     * @internal\n     */\n    _preupdate(elapsed) {\n        this.emit('preupdate', new PreUpdateEvent(this, elapsed, this));\n        this.onPreUpdate(this, elapsed);\n    }\n    /**\n     * Safe to override method\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPreUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * @internal\n     */\n    _postupdate(elapsed) {\n        this.emit('postupdate', new PostUpdateEvent(this, elapsed, this));\n        this.onPostUpdate(this, elapsed);\n    }\n    /**\n     * Safe to override method\n     * @param engine The reference to the current game engine\n     * @param elapsed  The time elapsed since the last update in milliseconds\n     */\n    onPostUpdate(engine, elapsed) {\n        // Override me\n    }\n    /**\n     * Draws the entire game\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    _draw(elapsed) {\n        var _a, _b;\n        // Use scene background color if present, fallback to engine\n        this.graphicsContext.backgroundColor = (_a = this.currentScene.backgroundColor) !== null && _a !== void 0 ? _a : this.backgroundColor;\n        this.graphicsContext.beginDrawLifecycle();\n        this.graphicsContext.clear();\n        this.clock.__runScheduledCbs('predraw');\n        this._predraw(this.graphicsContext, elapsed);\n        // Drawing nothing else while loading\n        if (this._isLoading) {\n            if (!this._hideLoader) {\n                (_b = this._loader) === null || _b === void 0 ? void 0 : _b.canvas.draw(this.graphicsContext, 0, 0);\n                this.clock.__runScheduledCbs('postdraw');\n                this.graphicsContext.flush();\n                this.graphicsContext.endDrawLifecycle();\n            }\n            return;\n        }\n        this.currentScene.draw(this.graphicsContext, elapsed);\n        this.clock.__runScheduledCbs('postdraw');\n        this._postdraw(this.graphicsContext, elapsed);\n        // Flush any pending drawings\n        this.graphicsContext.flush();\n        this.graphicsContext.endDrawLifecycle();\n        this._checkForScreenShots();\n    }\n    /**\n     * @internal\n     */\n    _predraw(ctx, elapsed) {\n        this.emit('predraw', new PreDrawEvent(ctx, elapsed, this));\n        this.onPreDraw(ctx, elapsed);\n    }\n    /**\n     * Safe to override method to hook into pre draw\n     * @param ctx {@link ExcaliburGraphicsContext} for drawing\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPreDraw(ctx, elapsed) {\n        // Override me\n    }\n    /**\n     * @internal\n     */\n    _postdraw(ctx, elapsed) {\n        this.emit('postdraw', new PostDrawEvent(ctx, elapsed, this));\n        this.onPostDraw(ctx, elapsed);\n    }\n    /**\n     * Safe to override method to hook into pre draw\n     * @param ctx {@link ExcaliburGraphicsContext} for drawing\n     * @param elapsed  Number of milliseconds elapsed since the last draw.\n     */\n    onPostDraw(ctx, elapsed) {\n        // Override me\n    }\n    /**\n     * Enable or disable Excalibur debugging functionality.\n     * @param toggle a value that debug drawing will be changed to\n     */\n    showDebug(toggle) {\n        this._isDebug = toggle;\n    }\n    /**\n     * Toggle Excalibur debugging functionality.\n     */\n    toggleDebug() {\n        this._isDebug = !this._isDebug;\n        return this._isDebug;\n    }\n    /**\n     * Returns true when loading is totally complete and the player has clicked start\n     */\n    get loadingComplete() {\n        return !this._isLoading;\n    }\n    get ready() {\n        return this._isReadyFuture.isCompleted;\n    }\n    isReady() {\n        return this._isReadyFuture.promise;\n    }\n    async start(sceneNameOrLoader, options) {\n        await this.scope(async () => {\n            if (!this._compatible) {\n                throw new Error('Excalibur is incompatible with your browser');\n            }\n            this._isLoading = true;\n            let loader;\n            if (sceneNameOrLoader instanceof DefaultLoader) {\n                loader = sceneNameOrLoader;\n            }\n            else if (typeof sceneNameOrLoader === 'string') {\n                this.director.configureStart(sceneNameOrLoader, options);\n                loader = this.director.mainLoader;\n            }\n            // Start the excalibur clock which drives the mainloop\n            this._logger.debug('Starting game clock...');\n            this.browser.resume();\n            this.clock.start();\n            if (this.garbageCollectorConfig) {\n                this._garbageCollector.start();\n            }\n            this._logger.debug('Game clock started');\n            await this.load(loader !== null && loader !== void 0 ? loader : new Loader());\n            // Initialize before ready\n            await this._overrideInitialize(this);\n            this._isReadyFuture.resolve();\n            this.emit('start', new GameStartEvent(this));\n            return this._isReadyFuture.promise;\n        });\n    }\n    _mainloop(elapsed) {\n        this.scope(() => {\n            this.emit('preframe', new PreFrameEvent(this, this.stats.prevFrame));\n            const elapsedMs = elapsed * this.timescale;\n            this.currentFrameElapsedMs = elapsedMs;\n            // reset frame stats (reuse existing instances)\n            const frameId = this.stats.prevFrame.id + 1;\n            this.stats.currFrame.reset();\n            this.stats.currFrame.id = frameId;\n            this.stats.currFrame.elapsedMs = elapsedMs;\n            this.stats.currFrame.fps = this.clock.fpsSampler.fps;\n            GraphicsDiagnostics.clear();\n            const beforeUpdate = this.clock.now();\n            const fixedTimestepMs = this.fixedUpdateTimestep;\n            if (this.fixedUpdateTimestep) {\n                this._lagMs += elapsedMs;\n                while (this._lagMs >= fixedTimestepMs) {\n                    this._update(fixedTimestepMs);\n                    this._lagMs -= fixedTimestepMs;\n                }\n            }\n            else {\n                this._update(elapsedMs);\n            }\n            const afterUpdate = this.clock.now();\n            this.currentFrameLagMs = this._lagMs;\n            this._draw(elapsedMs);\n            const afterDraw = this.clock.now();\n            this.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\n            this.stats.currFrame.duration.draw = afterDraw - afterUpdate;\n            this.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\n            this.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\n            this.emit('postframe', new PostFrameEvent(this, this.stats.currFrame));\n            this.stats.prevFrame.reset(this.stats.currFrame);\n            this._monitorPerformanceThresholdAndTriggerFallback();\n        });\n    }\n    /**\n     * Stops Excalibur's main loop, useful for pausing the game.\n     */\n    stop() {\n        if (this.clock.isRunning()) {\n            this.emit('stop', new GameStopEvent(this));\n            this.browser.pause();\n            this.clock.stop();\n            this._garbageCollector.stop();\n            this._logger.debug('Game stopped');\n        }\n    }\n    /**\n     * Returns the Engine's running status, Useful for checking whether engine is running or paused.\n     */\n    isRunning() {\n        return this.clock.isRunning();\n    }\n    /**\n     * Takes a screen shot of the current viewport and returns it as an\n     * HTML Image Element.\n     * @param preserveHiDPIResolution in the case of HiDPI return the full scaled backing image, by default false\n     */\n    screenshot(preserveHiDPIResolution = false) {\n        const screenShotPromise = new Promise((resolve) => {\n            this._screenShotRequests.push({ preserveHiDPIResolution, resolve });\n        });\n        return screenShotPromise;\n    }\n    _checkForScreenShots() {\n        // We must grab the draw buffer before we yield to the browser\n        // the draw buffer is cleared after compositing\n        // the reason for the asynchrony is setting `preserveDrawingBuffer: true`\n        // forces the browser to copy buffers which can have a mass perf impact on mobile\n        for (const request of this._screenShotRequests) {\n            const finalWidth = request.preserveHiDPIResolution ? this.canvas.width : this.screen.resolution.width;\n            const finalHeight = request.preserveHiDPIResolution ? this.canvas.height : this.screen.resolution.height;\n            const screenshot = document.createElement('canvas');\n            screenshot.width = finalWidth;\n            screenshot.height = finalHeight;\n            const ctx = screenshot.getContext('2d');\n            ctx.imageSmoothingEnabled = this.screen.antialiasing;\n            ctx.drawImage(this.canvas, 0, 0, finalWidth, finalHeight);\n            const result = new Image();\n            const raw = screenshot.toDataURL('image/png');\n            result.onload = () => {\n                request.resolve(result);\n            };\n            result.src = raw;\n        }\n        // Reset state\n        this._screenShotRequests.length = 0;\n    }\n    /**\n     * Another option available to you to load resources into the game.\n     * Immediately after calling this the game will pause and the loading screen\n     * will appear.\n     * @param loader  Some {@apilink Loadable} such as a {@apilink Loader} collection, {@apilink Sound}, or {@apilink Texture}.\n     */\n    async load(loader, hideLoader = false) {\n        await this.scope(async () => {\n            try {\n                // early exit if loaded\n                if (loader.isLoaded()) {\n                    return;\n                }\n                this._loader = loader;\n                this._isLoading = true;\n                this._hideLoader = hideLoader;\n                if (loader instanceof Loader) {\n                    loader.suppressPlayButton = loader.suppressPlayButton || this._suppressPlayButton;\n                }\n                this._loader.onInitialize(this);\n                await loader.load();\n            }\n            catch (e) {\n                this._logger.error('Error loading resources, things may not behave properly', e);\n                await Promise.resolve();\n            }\n            finally {\n                this._isLoading = false;\n                this._hideLoader = false;\n                this._loader = null;\n            }\n        });\n    }\n}\nEngine.Context = createContext();\nEngine.InstanceCount = 0;\n/**\n * Default {@apilink EngineOptions}\n */\nEngine._DEFAULT_ENGINE_OPTIONS = {\n    width: 0,\n    height: 0,\n    enableCanvasTransparency: true,\n    useDrawSorting: true,\n    configurePerformanceCanvas2DFallback: {\n        allow: false,\n        showPlayerMessage: false,\n        threshold: { fps: 20, numberOfFrames: 100 }\n    },\n    canvasElementId: '',\n    canvasElement: undefined,\n    enableCanvasContextMenu: false,\n    snapToPixel: false,\n    antialiasing: true,\n    pixelArt: false,\n    garbageCollection: true,\n    powerPreference: 'high-performance',\n    pointerScope: PointerScope.Canvas,\n    suppressConsoleBootMessage: null,\n    suppressMinimumBrowserFeatureDetection: null,\n    suppressHiDPIScaling: null,\n    suppressPlayButton: null,\n    grabWindowFocus: true,\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\n};\n\n;// ./Math/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Debug/index.ts\n\n\n\n\n;// ./Label.ts\n\n\n\n\n\n/**\n * Labels are the way to draw small amounts of text to the screen. They are\n * actors and inherit all of the benefits and capabilities.\n */\nclass Label extends Actor {\n    set maxWidth(width) {\n        this._text.maxWidth = width;\n    }\n    get maxWidth() {\n        return this._text.maxWidth;\n    }\n    get font() {\n        return this._font;\n    }\n    set font(newFont) {\n        this._font = newFont;\n        this._text.font = newFont;\n    }\n    /**\n     * The text to draw.\n     */\n    get text() {\n        return this._text.text;\n    }\n    set text(text) {\n        this._text.text = text;\n    }\n    get color() {\n        return this._text.color;\n    }\n    set color(color) {\n        if (this._text) {\n            this._text.color = color;\n        }\n    }\n    get opacity() {\n        return this.graphics.opacity;\n    }\n    set opacity(opacity) {\n        this.graphics.opacity = opacity;\n    }\n    /**\n     * The {@apilink SpriteFont} to use, if any. Overrides {@apilink Font | `font`} if present.\n     */\n    get spriteFont() {\n        return this._spriteFont;\n    }\n    set spriteFont(sf) {\n        if (sf) {\n            this._spriteFont = sf;\n            this._text.font = this._spriteFont;\n        }\n    }\n    /**\n     * Build a new label\n     * @param options\n     */\n    constructor(options) {\n        super(options);\n        this._font = new Font();\n        this._text = new Text({ text: '', font: this._font });\n        const { text, pos, x, y, spriteFont, font, color, maxWidth } = { text: '', ...options };\n        this.pos = pos !== null && pos !== void 0 ? pos : (x && y ? vec(x, y) : this.pos);\n        this.text = text !== null && text !== void 0 ? text : this.text;\n        this.font = font !== null && font !== void 0 ? font : this.font;\n        this.maxWidth = maxWidth !== null && maxWidth !== void 0 ? maxWidth : this.maxWidth;\n        this.spriteFont = spriteFont !== null && spriteFont !== void 0 ? spriteFont : this.spriteFont;\n        this._text.color = color !== null && color !== void 0 ? color : this.color;\n        const gfx = this.get(GraphicsComponent);\n        gfx.anchor = Vector.Zero;\n        gfx.use(this._text);\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n    }\n    /**\n     * Returns the width of the text in the label (in pixels);\n     */\n    getTextWidth() {\n        return this._text.width;\n    }\n}\n\n;// ./Particles/EmitterType.ts\n/**\n * An enum that represents the types of emitter nozzles\n */\nvar EmitterType;\n(function (EmitterType) {\n    /**\n     * Constant for the circular emitter type\n     */\n    EmitterType[\"Circle\"] = \"circle\";\n    /**\n     * Constant for the rectangular emitter type\n     */\n    EmitterType[\"Rectangle\"] = \"rectangle\";\n})(EmitterType || (EmitterType = {}));\n\n;// ./Particles/ParticleEmitter.ts\n\n\n\n\n\n\n\n\n/**\n * Using a particle emitter is a great way to create interesting effects\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\n * extend {@apilink Actor} allowing you to use all of the features that come with.\n *\n * These particles are simulated on the CPU in JavaScript\n */\nclass ParticleEmitter extends Actor {\n    /**\n     * @param config particle emitter options bag\n     */\n    constructor(config) {\n        var _a, _b;\n        super({ width: (_a = config.width) !== null && _a !== void 0 ? _a : 0, height: (_b = config.height) !== null && _b !== void 0 ? _b : 0 });\n        this._particlesToEmit = 0;\n        this._particlePool = new RentalPool(() => new Particle({}), (p) => p, 500);\n        this.numParticles = 0;\n        /**\n         * Gets or sets the isEmitting flag\n         */\n        this.isEmitting = true;\n        /**\n         * Gets or sets the backing deadParticle collection\n         */\n        this.deadParticles = [];\n        /**\n         * Gets or sets the emission rate for particles (particles/sec)\n         */\n        this.emitRate = 1; //particles/sec\n        /**\n         * Gets or sets the emitter type for the particle emitter\n         */\n        this.emitterType = EmitterType.Rectangle;\n        /**\n         * Gets or sets the emitter radius, only takes effect when the {@apilink emitterType} is {@apilink EmitterType.Circle}\n         */\n        this.radius = 0;\n        this.particle = {\n            /**\n             * Gets or sets the life of each particle in milliseconds\n             */\n            life: 2000,\n            transform: ParticleTransform.Global,\n            graphic: undefined,\n            opacity: 1,\n            angularVelocity: 0,\n            focus: undefined,\n            focusAccel: undefined,\n            randomRotation: false\n        };\n        this._activeParticles = [];\n        const { particle, x, y, z, pos, isEmitting, emitRate, emitterType, radius, random } = { ...config };\n        this.particle = { ...this.particle, ...particle };\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\n        this.body.collisionType = CollisionType.PreventCollision;\n        this.random = random !== null && random !== void 0 ? random : new Random();\n    }\n    removeParticle(particle) {\n        this.deadParticles.push(particle);\n    }\n    /**\n     * Causes the emitter to emit particles\n     * @param particleCount  Number of particles to emit right now\n     */\n    emitParticles(particleCount) {\n        var _a;\n        if (particleCount <= 0) {\n            return;\n        }\n        particleCount = particleCount | 0; // coerce to int\n        for (let i = 0; i < particleCount; i++) {\n            const p = this._createParticle();\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\n                if (this.particle.transform === ParticleTransform.Global) {\n                    this.scene.world.add(p);\n                }\n                else {\n                    this.addChild(p);\n                }\n            }\n            this._activeParticles.push(p);\n        }\n    }\n    clearParticles() {\n        for (let i = 0; i < this._activeParticles.length; i++) {\n            this.removeParticle(this._activeParticles[i]);\n        }\n    }\n    // Creates a new particle given the constraints of the emitter\n    _createParticle() {\n        let ranX = 0;\n        let ranY = 0;\n        const angle = randomInRange(this.particle.minAngle || 0, this.particle.maxAngle || Math.PI * 2, this.random);\n        const vel = randomInRange(this.particle.minSpeed || 0, this.particle.maxSpeed || 0, this.random);\n        const size = this.particle.startSize || randomInRange(this.particle.minSize || 5, this.particle.maxSize || 5, this.random);\n        const dx = vel * Math.cos(angle);\n        const dy = vel * Math.sin(angle);\n        if (this.emitterType === EmitterType.Rectangle) {\n            ranX = randomInRange(0, this.width, this.random);\n            ranY = randomInRange(0, this.height, this.random);\n        }\n        else if (this.emitterType === EmitterType.Circle) {\n            const radius = randomInRange(0, this.radius, this.random);\n            ranX = radius * Math.cos(angle);\n            ranY = radius * Math.sin(angle);\n        }\n        const p = this._particlePool.rent();\n        p.configure({\n            life: this.particle.life,\n            opacity: this.particle.opacity,\n            beginColor: this.particle.beginColor,\n            endColor: this.particle.endColor,\n            pos: vec(ranX, ranY),\n            vel: vec(dx, dy),\n            acc: this.particle.acc,\n            angularVelocity: this.particle.angularVelocity,\n            startSize: this.particle.startSize,\n            endSize: this.particle.endSize,\n            size: size,\n            graphic: this.particle.graphic,\n            fade: this.particle.fade\n        });\n        p.registerEmitter(this);\n        if (this.particle.randomRotation) {\n            p.transform.rotation = randomInRange(0, Math.PI * 2, this.random);\n        }\n        if (this.particle.focus) {\n            p.focus = this.particle.focus.add(vec(this.pos.x, this.pos.y));\n            p.focusAccel = this.particle.focusAccel;\n        }\n        return p;\n    }\n    update(engine, elapsed) {\n        var _a;\n        super.update(engine, elapsed);\n        if (this.isEmitting) {\n            this._particlesToEmit += this.emitRate * (elapsed / 1000);\n            if (this._particlesToEmit > 1.0) {\n                this.emitParticles(Math.floor(this._particlesToEmit));\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n            }\n        }\n        // deferred removal\n        for (let i = 0; i < this.deadParticles.length; i++) {\n            if ((_a = this === null || this === void 0 ? void 0 : this.scene) === null || _a === void 0 ? void 0 : _a.world) {\n                this.scene.world.remove(this.deadParticles[i], false);\n                this._particlePool.return(this.deadParticles[i]);\n            }\n            const index = this._activeParticles.indexOf(this.deadParticles[i]);\n            if (index > -1) {\n                this._activeParticles.splice(index, 1);\n            }\n        }\n        this.deadParticles.length = 0;\n    }\n}\n\n;// ./Util/Assert.ts\n/**\n * Asserts will throw in `process.env.NODE_ENV === 'development'` builds if the expression evaluates false\n */\nfunction assert(message, expression) {\n    if (false) {}\n}\n\n;// ./Particles/GpuParticleRenderer.ts\n\n\n\n\n\n/**\n * Container for the GPU Particle State contains the internal state needed for the GPU\n * to render particles and maintain state.\n */\nclass GpuParticleRenderer {\n    constructor(emitter, random, options) {\n        var _a;\n        this.emitRate = 1;\n        this._initialized = false;\n        this._vaos = [];\n        this._buffers = [];\n        this._drawIndex = 0;\n        this._numInputFloats = 2 + 2 + 1 + 1 + 1;\n        this._particleIndex = 0;\n        this._uploadIndex = 0;\n        this._wrappedLife = 0;\n        this._wrappedParticles = 0;\n        this._particleLife = 0;\n        this._clearRequested = false;\n        this._emitted = [];\n        this.emitter = emitter;\n        this.particle = options;\n        this._particleData = new Float32Array(this.emitter.maxParticles * this._numInputFloats);\n        this._random = random;\n        this._particleLife = (_a = this.particle.life) !== null && _a !== void 0 ? _a : 2000;\n    }\n    get isInitialized() {\n        return this._initialized;\n    }\n    get maxParticles() {\n        return this.emitter.maxParticles;\n    }\n    initialize(gl, context) {\n        if (this._initialized) {\n            return;\n        }\n        const numParticles = this.emitter.maxParticles;\n        const numInputFloats = this._numInputFloats;\n        const particleData = this._particleData;\n        const bytesPerFloat = 4;\n        const particleDataBuffer1 = gl.createBuffer();\n        const vao1 = gl.createVertexArray();\n        gl.bindVertexArray(vao1);\n        gl.bindBuffer(gl.ARRAY_BUFFER, particleDataBuffer1);\n        gl.bufferData(gl.ARRAY_BUFFER, numParticles * numInputFloats * bytesPerFloat, gl.DYNAMIC_DRAW);\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, particleData);\n        let offset = 0;\n        // position\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, 0);\n        offset += bytesPerFloat * 2;\n        // velocity\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 2;\n        // rotation\n        gl.vertexAttribPointer(2, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // angularVelocity\n        gl.vertexAttribPointer(3, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // life\n        gl.vertexAttribPointer(4, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // enable attributes\n        gl.enableVertexAttribArray(0);\n        gl.enableVertexAttribArray(1);\n        gl.enableVertexAttribArray(2);\n        gl.enableVertexAttribArray(3);\n        gl.enableVertexAttribArray(4);\n        this._vaos.push(vao1);\n        this._buffers.push(particleDataBuffer1);\n        // Clean up\n        gl.bindVertexArray(null);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        const particleDataBuffer2 = gl.createBuffer();\n        const vao2 = gl.createVertexArray();\n        gl.bindVertexArray(vao2);\n        gl.bindBuffer(gl.ARRAY_BUFFER, particleDataBuffer2);\n        gl.bufferData(gl.ARRAY_BUFFER, numParticles * numInputFloats * bytesPerFloat, gl.DYNAMIC_DRAW);\n        offset = 0;\n        // position\n        gl.vertexAttribPointer(0, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, 0);\n        offset += bytesPerFloat * 2;\n        // velocity\n        gl.vertexAttribPointer(1, 2, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 2;\n        // rotation\n        gl.vertexAttribPointer(2, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // angularVelocity\n        gl.vertexAttribPointer(3, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // life\n        gl.vertexAttribPointer(4, 1, gl.FLOAT, false, numInputFloats * bytesPerFloat, offset);\n        offset += bytesPerFloat * 1;\n        // enable attributes\n        gl.enableVertexAttribArray(0);\n        gl.enableVertexAttribArray(1);\n        gl.enableVertexAttribArray(2);\n        gl.enableVertexAttribArray(3);\n        gl.enableVertexAttribArray(4);\n        this._vaos.push(vao2);\n        this._buffers.push(particleDataBuffer2);\n        // Clean up\n        gl.bindVertexArray(null);\n        gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        this._currentVao = this._vaos[this._drawIndex % 2];\n        this._currentBuffer = this._buffers[(this._drawIndex + 1) % 2];\n        this._initialized = true;\n    }\n    clearParticles() {\n        this._particleData.fill(0);\n        this._clearRequested = true;\n    }\n    emitParticles(particleCount) {\n        const startIndex = this._particleIndex;\n        const maxSize = this.maxParticles * this._numInputFloats;\n        const endIndex = particleCount * this._numInputFloats + startIndex;\n        let countParticle = 0;\n        for (let i = startIndex; i < endIndex; i += this._numInputFloats) {\n            const angle = this._random.floating(this.particle.minAngle || 0, this.particle.maxAngle || TwoPI);\n            const speedX = this._random.floating(this.particle.minSpeed || 0, this.particle.maxSpeed || 0);\n            const speedY = this._random.floating(this.particle.minSpeed || 0, this.particle.maxSpeed || 0);\n            const dx = speedX * Math.cos(angle);\n            const dy = speedY * Math.sin(angle);\n            let ranX = 0;\n            let ranY = 0;\n            if (this.emitter.emitterType === EmitterType.Rectangle) {\n                ranX = this._random.floating(-0.5, 0.5) * this.emitter.width;\n                ranY = this._random.floating(-0.5, 0.5) * this.emitter.height;\n            }\n            else {\n                const radius = this._random.floating(0, this.emitter.radius);\n                ranX = radius * Math.cos(angle);\n                ranY = radius * Math.sin(angle);\n            }\n            const tx = this.emitter.transform.apply(vec(ranX, ranY));\n            const data = [\n                this.particle.transform === ParticleTransform.Local ? ranX : tx.x,\n                this.particle.transform === ParticleTransform.Local ? ranY : tx.y, // pos in world space\n                dx,\n                dy, // velocity\n                this.particle.randomRotation ? randomInRange(0, TwoPI, this._random) : this.particle.rotation || 0, // rotation\n                this.particle.angularVelocity || 0, // angular velocity\n                this._particleLife // life\n            ];\n            countParticle++;\n            this._particleData.set(data, i % this._particleData.length);\n        }\n        if (endIndex >= maxSize) {\n            this._wrappedParticles += (endIndex - maxSize) / this._numInputFloats;\n            this._wrappedLife = this._particleLife;\n        }\n        else if (this._wrappedLife > 0) {\n            this._wrappedParticles += particleCount;\n        }\n        this._particleIndex = endIndex % maxSize;\n        this._emitted.push([this._particleLife, startIndex]);\n    }\n    _uploadEmitted(gl) {\n        // upload index is the index of the previous upload\n        // particle index is the current index of modification\n        if (this._particleIndex !== this._uploadIndex) {\n            // Bind one buffer to ARRAY_BUFFER and the other to TFB\n            gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers[(this._drawIndex + 1) % 2]);\n            if (this._particleIndex >= this._uploadIndex) {\n                gl.bufferSubData(gl.ARRAY_BUFFER, this._uploadIndex * 4, // dst byte offset 4 bytes per float\n                this._particleData, this._uploadIndex, this._particleIndex - this._uploadIndex);\n            }\n            else {\n                // upload before the wrap\n                // prettier-ignore\n                gl.bufferSubData(gl.ARRAY_BUFFER, this._uploadIndex * 4, this._particleData, this._uploadIndex, this._particleData.length - this._uploadIndex);\n                // upload after the wrap if there are any\n                if (this._wrappedParticles) {\n                    // prettier-ignore\n                    gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._particleData, 0, this._wrappedParticles * this._numInputFloats);\n                }\n                this._wrappedLife = this._particleLife;\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, null);\n        }\n        this._uploadIndex = this._particleIndex % (this.maxParticles * this._numInputFloats);\n    }\n    update(elapsed) {\n        var _a;\n        this._particleLife = (_a = this.particle.life) !== null && _a !== void 0 ? _a : this._particleLife;\n        if (this._wrappedLife > 0) {\n            this._wrappedLife -= elapsed;\n        }\n        else {\n            this._wrappedLife = 0;\n            this._wrappedParticles = 0;\n        }\n        if (!this._emitted.length) {\n            return;\n        }\n        for (let i = this._emitted.length - 1; i >= 0; i--) {\n            const particle = this._emitted[i];\n            particle[0] -= elapsed;\n            const life = particle[0];\n            if (life <= 0) {\n                this._emitted.splice(i, 1);\n            }\n        }\n        this._emitted.sort((a, b) => a[0] - b[0]);\n    }\n    draw(gl) {\n        if (this._initialized) {\n            // Emit\n            if (this._clearRequested) {\n                gl.bindBuffer(gl.ARRAY_BUFFER, this._buffers[(this._drawIndex + 1) % 2]);\n                gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._particleData);\n                gl.bindBuffer(gl.ARRAY_BUFFER, null);\n                this._clearRequested = false;\n            }\n            else {\n                this._uploadEmitted(gl);\n            }\n            // Bind one buffer to ARRAY_BUFFER and the other to transform feedback buffer\n            gl.bindVertexArray(this._currentVao);\n            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer);\n            // Perform transform feedback (run the simulation) and the draw call all at once\n            if (this._wrappedLife && this._emitted[0] && this._emitted[0][1] > 0) {\n                const midpoint = this._emitted[0][1] / this._numInputFloats;\n                // draw oldest first (maybe make configurable)\n                assert(`midpoint greater than 0, actual: ${midpoint}`, () => midpoint > 0);\n                assert(`midpoint is less than max, actual: ${midpoint}`, () => midpoint < this.maxParticles);\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, this._emitted[0][1] * 4, (this.maxParticles - midpoint) * this._numInputFloats * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, midpoint, this.maxParticles - midpoint);\n                gl.endTransformFeedback();\n                // then draw newer particles\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, 0, this._emitted[0][1] * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, 0, midpoint);\n                gl.endTransformFeedback();\n            }\n            else {\n                gl.bindBufferRange(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this._currentBuffer, 0, this._particleData.length * 4);\n                gl.beginTransformFeedback(gl.POINTS);\n                gl.drawArrays(gl.POINTS, 0, this.maxParticles);\n                gl.endTransformFeedback();\n            }\n            // Clean up after ourselves to avoid errors.\n            gl.bindVertexArray(null);\n            gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);\n            // flip flop buffers, one will be draw the other simulation\n            this._currentVao = this._vaos[this._drawIndex % 2];\n            this._currentBuffer = this._buffers[(this._drawIndex + 1) % 2];\n            this._drawIndex = (this._drawIndex + 1) % 2;\n        }\n    }\n}\nGpuParticleRenderer.GPU_MAX_PARTICLES = 100000;\n\n;// ./Particles/GpuParticleEmitter.ts\n\n\n\n\n\n\n\n\nclass GpuParticleEmitter extends Actor {\n    get pos() {\n        return this.transform.pos;\n    }\n    set pos(pos) {\n        this.transform.pos = pos;\n    }\n    get z() {\n        return this.transform.z;\n    }\n    set z(z) {\n        this.transform.z = z;\n    }\n    constructor(config) {\n        super({ name: `GpuParticleEmitter`, width: config.width, height: config.height }); // somewhat goofy way of doing width/height\n        this.particle = {\n            /**\n             * Gets or sets the life of each particle in milliseconds\n             */\n            life: 2000,\n            transform: ParticleTransform.Global,\n            graphic: undefined,\n            opacity: 1,\n            angularVelocity: 0,\n            focus: undefined,\n            focusAccel: undefined,\n            randomRotation: false\n        };\n        this.graphics = new GraphicsComponent();\n        this.isEmitting = false;\n        this.emitRate = 1;\n        this.emitterType = EmitterType.Rectangle;\n        this.radius = 0;\n        this.maxParticles = 2000;\n        this._particlesToEmit = 0;\n        this.addComponent(this.graphics, true);\n        this.graphics.onPostDraw = this.draw.bind(this);\n        const { particle, maxParticles, x, y, z, pos, isEmitting, emitRate, emitterType, radius, random } = { ...config };\n        this.maxParticles = clamp(maxParticles !== null && maxParticles !== void 0 ? maxParticles : this.maxParticles, 0, GpuParticleRenderer.GPU_MAX_PARTICLES);\n        this.pos = pos !== null && pos !== void 0 ? pos : vec(x !== null && x !== void 0 ? x : 0, y !== null && y !== void 0 ? y : 0);\n        this.z = z !== null && z !== void 0 ? z : 0;\n        this.isEmitting = isEmitting !== null && isEmitting !== void 0 ? isEmitting : this.isEmitting;\n        this.emitRate = emitRate !== null && emitRate !== void 0 ? emitRate : this.emitRate;\n        this.emitterType = emitterType !== null && emitterType !== void 0 ? emitterType : this.emitterType;\n        this.radius = radius !== null && radius !== void 0 ? radius : this.radius;\n        this.particle = { ...this.particle, ...particle };\n        this.random = random !== null && random !== void 0 ? random : new Random();\n        this.renderer = new GpuParticleRenderer(this, this.random, this.particle);\n    }\n    _initialize(engine) {\n        super._initialize(engine);\n        const context = engine.graphicsContext;\n        this.renderer.initialize(context.__gl, context);\n    }\n    update(engine, elapsed) {\n        super.update(engine, elapsed);\n        if (this.isEmitting) {\n            this._particlesToEmit += this.emitRate * (elapsed / 1000);\n            if (this._particlesToEmit > 1.0) {\n                this.emitParticles(Math.floor(this._particlesToEmit));\n                this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n            }\n        }\n        this.renderer.update(elapsed);\n    }\n    emitParticles(particleCount) {\n        if (particleCount <= 0) {\n            return;\n        }\n        this.renderer.emitParticles(particleCount | 0); // coerce to integer\n    }\n    clearParticles() {\n        this.renderer.clearParticles();\n    }\n    draw(ctx, elapsed) {\n        ctx.draw('ex.particle', this.renderer, elapsed);\n    }\n}\n\n;// ./Particles/index.ts\n\n\n\n\n\n\n;// ./TileMap/IsometricMap.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass IsometricTile extends Entity {\n    getGraphics() {\n        return this._graphics;\n    }\n    /**\n     * Tile graphics\n     */\n    addGraphic(graphic, options) {\n        this._graphics.push(graphic);\n        this._gfx.isVisible = this.map.isVisible;\n        this._gfx.opacity = this.map.opacity;\n        if (options === null || options === void 0 ? void 0 : options.offset) {\n            this._gfx.offset = options.offset;\n        }\n        // TODO detect when this changes on the map and apply to all tiles\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    _recalculateBounds() {\n        let bounds = this._tileBounds.clone();\n        for (const graphic of this._graphics) {\n            const offset = vec(this.map.graphicsOffset.x - this.map.tileWidth / 2, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : graphic.height - this.map.tileHeight));\n            bounds = bounds.combine(graphic.localBounds.translate(offset));\n        }\n        return bounds;\n    }\n    removeGraphic(graphic) {\n        const index = this._graphics.indexOf(graphic);\n        if (index > -1) {\n            this._graphics.splice(index, 1);\n        }\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    clearGraphics() {\n        this._graphics.length = 0;\n        this._gfx.isVisible = false;\n        this._gfx.localBounds = this._recalculateBounds();\n    }\n    getColliders() {\n        return this._colliders;\n    }\n    /**\n     * Adds a collider to the IsometricTile\n     *\n     * **Note!** the {@apilink Tile.solid} must be set to true for it to act as a \"fixed\" collider\n     * @param collider\n     */\n    addCollider(collider) {\n        this._colliders.push(collider);\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Removes a collider from the IsometricTile\n     * @param collider\n     */\n    removeCollider(collider) {\n        const index = this._colliders.indexOf(collider);\n        if (index > -1) {\n            this._colliders.splice(index, 1);\n        }\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Clears all colliders from the IsometricTile\n     */\n    clearColliders() {\n        this._colliders.length = 0;\n        this.map.flagCollidersDirty();\n    }\n    /**\n     * Returns the top left corner of the {@apilink IsometricTile} in world space\n     */\n    get pos() {\n        return this.map.tileToWorld(vec(this.x, this.y));\n    }\n    /**\n     * Returns the center of the {@apilink IsometricTile}\n     */\n    get center() {\n        return this.pos.add(vec(0, this.map.tileHeight / 2));\n    }\n    /**\n     * Construct a new IsometricTile\n     * @param x tile coordinate in x (not world position)\n     * @param y tile coordinate in y (not world position)\n     * @param graphicsOffset offset that tile should be shifted by (default (0, 0))\n     * @param map reference to owning IsometricMap\n     */\n    constructor(x, y, graphicsOffset, map) {\n        super([\n            new TransformComponent(),\n            new GraphicsComponent({\n                offset: graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : Vector.Zero,\n                onPostDraw: (gfx, elapsed) => this.draw(gfx, elapsed)\n            }),\n            new IsometricEntityComponent(map)\n        ]);\n        /**\n         * Indicates whether this tile is solid\n         */\n        this.solid = false;\n        this.events = new EventEmitter();\n        this._tileBounds = new BoundingBox();\n        this._graphics = [];\n        /**\n         * Tile colliders\n         */\n        this._colliders = [];\n        /**\n         * Arbitrary data storage per tile, useful for any game specific data\n         */\n        this.data = new Map();\n        this.x = x;\n        this.y = y;\n        this.map = map;\n        this._transform = this.get(TransformComponent);\n        this._isometricEntityComponent = this.get(IsometricEntityComponent);\n        const halfTileWidth = this.map.tileWidth / 2;\n        const halfTileHeight = this.map.tileHeight / 2;\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\n        // The x position shifts left with every y step\n        const xPos = (this.x - this.y) * halfTileWidth;\n        // The y position needs to go down with every x step\n        const yPos = (this.x + this.y) * halfTileHeight;\n        this._transform.pos = vec(xPos, yPos);\n        this._isometricEntityComponent.elevation = map.elevation;\n        this._gfx = this.get(GraphicsComponent);\n        this._gfx.isVisible = false; // start not visible\n        const totalWidth = this.map.tileWidth;\n        const totalHeight = this.map.tileHeight;\n        // initial guess at gfx bounds based on the tile\n        const offset = vec(0, this.map.renderFromTopOfGraphic ? totalHeight : 0);\n        this._gfx.localBounds = this._tileBounds = new BoundingBox({\n            left: -totalWidth / 2,\n            top: -totalHeight,\n            right: totalWidth / 2,\n            bottom: totalHeight\n        }).translate(offset);\n    }\n    draw(gfx, _elapsed) {\n        const halfTileWidth = this.map.tileWidth / 2;\n        gfx.save();\n        // shift left origin to corner of map, not the left corner of the first sprite\n        gfx.translate(-halfTileWidth, 0);\n        for (const graphic of this._graphics) {\n            graphic.draw(gfx, this.map.graphicsOffset.x, this.map.graphicsOffset.y - (this.map.renderFromTopOfGraphic ? 0 : graphic.height - this.map.tileHeight));\n        }\n        gfx.restore();\n    }\n}\n/**\n * The IsometricMap is a special tile map that provides isometric rendering support to Excalibur\n *\n * The tileWidth and tileHeight should be the height and width in pixels of the parallelogram of the base of the tile art asset.\n * The tileWidth and tileHeight is not necessarily the same as your graphic pixel width and height.\n *\n * Please refer to the docs https://excaliburjs.com for more details calculating what your tile width and height should be given\n * your art assets.\n */\nclass IsometricMap extends Entity {\n    /**\n     * Whether tiles should be visible\n     * @deprecated use isVisible\n     */\n    get visible() {\n        return this.isVisible;\n    }\n    /**\n     * Whether tiles should be visible\n     * @deprecated use isVisible\n     */\n    set visible(val) {\n        this.isVisible = val;\n    }\n    constructor(options) {\n        super([\n            new TransformComponent(),\n            new BodyComponent({\n                type: CollisionType.Fixed\n            }),\n            new ColliderComponent(),\n            new PointerComponent(),\n            new DebugGraphicsComponent((ctx, debugFlags) => this.debug(ctx, debugFlags), false)\n        ], options.name);\n        this.elevation = 0;\n        /**\n         * Whether tiles should be visible\n         */\n        this.isVisible = true;\n        /**\n         * Opacity of tiles\n         */\n        this.opacity = 1.0;\n        /**\n         * Render the tile graphic from the top instead of the bottom\n         *\n         * default is `false` meaning rendering from the bottom\n         */\n        this.renderFromTopOfGraphic = false;\n        this.graphicsOffset = vec(0, 0);\n        this._collidersDirty = false;\n        this._originalOffsets = new WeakMap();\n        const { pos, tileWidth, tileHeight, columns: width, rows: height, renderFromTopOfGraphic, graphicsOffset, elevation } = options;\n        this.transform = this.get(TransformComponent);\n        if (pos) {\n            this.transform.pos = pos;\n        }\n        this.collider = this.get(ColliderComponent);\n        if (this.collider) {\n            this.collider.set((this._composite = new CompositeCollider([])));\n        }\n        this.pointer = this.get(PointerComponent);\n        this.renderFromTopOfGraphic = renderFromTopOfGraphic !== null && renderFromTopOfGraphic !== void 0 ? renderFromTopOfGraphic : this.renderFromTopOfGraphic;\n        this.graphicsOffset = graphicsOffset !== null && graphicsOffset !== void 0 ? graphicsOffset : this.graphicsOffset;\n        this.elevation = elevation !== null && elevation !== void 0 ? elevation : this.elevation;\n        this.tileWidth = tileWidth;\n        this.tileHeight = tileHeight;\n        this.columns = width;\n        this.rows = height;\n        this._pointerEventDispatcher = new PointerEventsToObjectDispatcher();\n        this.tiles = new Array(width * height);\n        // build up tile representation\n        for (let y = 0; y < height; y++) {\n            for (let x = 0; x < width; x++) {\n                const tile = new IsometricTile(x, y, this.graphicsOffset, this);\n                this.tiles[x + y * width] = tile;\n                this.addChild(tile);\n                this._pointerEventDispatcher.addObject(tile, (p) => this.getTileByPoint(p.worldPos) === tile, () => true);\n            }\n        }\n        this.pointer.localBounds = BoundingBox.fromDimension(tileWidth * width * this.transform.scale.x, tileHeight * height * this.transform.scale.y, vec(0.5, 0));\n    }\n    /**\n     * @internal\n     */\n    _processPointerToObject(receiver) {\n        this._pointerEventDispatcher.processPointerToObject(receiver, this.tiles);\n    }\n    /**\n     * @internal\n     */\n    _dispatchPointerEvents(receiver) {\n        this._pointerEventDispatcher.dispatchEvents(receiver, this.tiles);\n    }\n    update() {\n        if (this._collidersDirty) {\n            this.updateColliders();\n            this._collidersDirty = false;\n        }\n        this._pointerEventDispatcher.clear();\n    }\n    flagCollidersDirty() {\n        this._collidersDirty = true;\n    }\n    _getOrSetColliderOriginalOffset(collider) {\n        var _a;\n        if (!this._originalOffsets.has(collider)) {\n            const originalOffset = collider.offset;\n            this._originalOffsets.set(collider, originalOffset);\n            return originalOffset;\n        }\n        else {\n            return (_a = this._originalOffsets.get(collider)) !== null && _a !== void 0 ? _a : Vector.Zero;\n        }\n    }\n    updateColliders() {\n        this._composite.clearColliders();\n        const pos = this.get(TransformComponent).pos;\n        for (const tile of this.tiles) {\n            if (tile.solid) {\n                for (const collider of tile.getColliders()) {\n                    const originalOffset = this._getOrSetColliderOriginalOffset(collider);\n                    collider.offset = this.tileToWorld(vec(tile.x, tile.y))\n                        .sub(pos)\n                        .add(originalOffset)\n                        .sub(vec(this.tileWidth / 2, this.tileHeight)); // We need to unshift height based on drawing\n                    collider.owner = this;\n                    this._composite.addCollider(collider);\n                }\n            }\n        }\n        this.collider.update();\n    }\n    /**\n     * Convert world space coordinates to the tile x, y coordinate\n     * @param worldCoordinate\n     */\n    worldToTile(worldCoordinate) {\n        // TODO I don't think this handles parent transform see TileMap\n        worldCoordinate = worldCoordinate.sub(this.transform.globalPos);\n        const halfTileWidth = this.tileWidth / 2;\n        const halfTileHeight = this.tileHeight / 2;\n        // See https://clintbellanger.net/articles/isometric_math/ for formula\n        return vec(~~((worldCoordinate.x / halfTileWidth + worldCoordinate.y / halfTileHeight) / 2), ~~((worldCoordinate.y / halfTileHeight - worldCoordinate.x / halfTileWidth) / 2));\n    }\n    /**\n     * Given a tile coordinate, return the top left corner in world space\n     * @param tileCoordinate\n     */\n    tileToWorld(tileCoordinate) {\n        const halfTileWidth = this.tileWidth / 2;\n        const halfTileHeight = this.tileHeight / 2;\n        // The x position shifts left with every y step\n        const xPos = (tileCoordinate.x - tileCoordinate.y) * halfTileWidth;\n        // The y position needs to go down with every x step\n        const yPos = (tileCoordinate.x + tileCoordinate.y) * halfTileHeight;\n        return vec(xPos, yPos).add(this.transform.pos);\n    }\n    /**\n     * Returns the {@apilink IsometricTile} by its x and y coordinates\n     */\n    getTile(x, y) {\n        if (x < 0 || y < 0 || x >= this.columns || y >= this.rows) {\n            return null;\n        }\n        return this.tiles[x + y * this.columns];\n    }\n    /**\n     * Returns the {@apilink IsometricTile} by testing a point in world coordinates,\n     * returns `null` if no Tile was found.\n     */\n    getTileByPoint(point) {\n        const tileCoord = this.worldToTile(point);\n        const tile = this.getTile(tileCoord.x, tileCoord.y);\n        return tile;\n    }\n    _getMaxZIndex() {\n        let maxZ = Number.NEGATIVE_INFINITY;\n        for (const tile of this.tiles) {\n            const currentZ = tile.get(TransformComponent).z;\n            if (currentZ > maxZ) {\n                maxZ = currentZ;\n            }\n        }\n        return maxZ;\n    }\n    /**\n     * Debug draw for IsometricMap, called internally by excalibur when debug mode is toggled on\n     * @param gfx\n     */\n    debug(gfx, debugFlags) {\n        const { showAll, showPosition, positionColor, positionSize, showGrid, gridColor, gridWidth, showColliderGeometry } = debugFlags.isometric;\n        const { geometryColor, geometryLineWidth, geometryPointSize } = debugFlags.collider;\n        gfx.save();\n        gfx.z = this._getMaxZIndex() + 0.5;\n        if (showAll || showGrid) {\n            for (let y = 0; y < this.rows + 1; y++) {\n                const left = this.tileToWorld(vec(0, y));\n                const right = this.tileToWorld(vec(this.columns, y));\n                gfx.drawLine(left, right, gridColor, gridWidth);\n            }\n            for (let x = 0; x < this.columns + 1; x++) {\n                const top = this.tileToWorld(vec(x, 0));\n                const bottom = this.tileToWorld(vec(x, this.rows));\n                gfx.drawLine(top, bottom, gridColor, gridWidth);\n            }\n        }\n        if (showAll || showPosition) {\n            for (const tile of this.tiles) {\n                gfx.drawCircle(this.tileToWorld(vec(tile.x, tile.y)), positionSize, positionColor);\n            }\n        }\n        if (showAll || showColliderGeometry) {\n            for (const tile of this.tiles) {\n                if (tile.solid) {\n                    // only draw solid tiles\n                    for (const collider of tile.getColliders()) {\n                        collider.debug(gfx, geometryColor, { lineWidth: geometryLineWidth, pointSize: geometryPointSize });\n                    }\n                }\n            }\n        }\n        gfx.restore();\n    }\n}\n\n;// ./TileMap/index.ts\n\n\n\n\n\n;// ./Actions/Action/ActionSequence.ts\n\n\n/**\n * Action that can represent a sequence of actions, this can be useful in conjunction with\n * {@apilink ParallelActions} to run multiple sequences in parallel.\n */\nclass ActionSequence {\n    constructor(entity, actionBuilder) {\n        this.id = nextActionId();\n        this._stopped = false;\n        this._sequenceBuilder = actionBuilder;\n        this._sequenceContext = new ActionContext(entity);\n        this._actionQueue = this._sequenceContext.getQueue();\n        this._sequenceBuilder(this._sequenceContext);\n    }\n    update(elapsed) {\n        this._actionQueue.update(elapsed);\n    }\n    isComplete() {\n        return this._stopped || this._actionQueue.isComplete();\n    }\n    stop() {\n        this._stopped = true;\n    }\n    reset() {\n        this._stopped = false;\n        this._actionQueue.reset();\n    }\n    clone(entity) {\n        return new ActionSequence(entity, this._sequenceBuilder);\n    }\n}\n\n;// ./Actions/Action/ParallelActions.ts\n\n/**\n * Action that can run multiple {@apilink Action}s or {@apilink ActionSequence}s at the same time\n */\nclass ParallelActions {\n    constructor(parallelActions) {\n        this.id = nextActionId();\n        this._actions = parallelActions;\n    }\n    update(elapsed) {\n        for (let i = 0; i < this._actions.length; i++) {\n            this._actions[i].update(elapsed);\n        }\n    }\n    isComplete(entity) {\n        return this._actions.every((a) => a.isComplete(entity));\n    }\n    reset() {\n        this._actions.forEach((a) => a.reset());\n    }\n    stop() {\n        this._actions.forEach((a) => a.stop());\n    }\n}\n\n;// ./Actions/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Collision/Detection/QuadTree.ts\n\n\n/**\n * QuadTree spatial data structure. Useful for quickly retrieving all objects that might\n * be in a specific location.\n */\nclass QuadTree {\n    constructor(bounds, options) {\n        this.bounds = bounds;\n        this.options = options;\n        this._defaultOptions = {\n            maxDepth: 10,\n            capacity: 10,\n            level: 0\n        };\n        this.items = [];\n        this._isDivided = false;\n        this.topLeft = null;\n        this.topRight = null;\n        this.bottomLeft = null;\n        this.bottomRight = null;\n        this.options = { ...this._defaultOptions, ...options };\n        this.halfWidth = bounds.width / 2;\n        this.halfHeight = bounds.height / 2;\n    }\n    /**\n     * Splits the quad tree one level deeper\n     */\n    _split() {\n        this._isDivided = true;\n        const newLevelOptions = {\n            maxDepth: this.options.maxDepth,\n            capacity: this.options.capacity,\n            level: this.options.level + 1\n        };\n        this.topLeft = new QuadTree(new BoundingBox({\n            left: this.bounds.left,\n            top: this.bounds.top,\n            right: this.bounds.left + this.halfWidth,\n            bottom: this.bounds.top + this.halfHeight\n        }), newLevelOptions);\n        this.topRight = new QuadTree(new BoundingBox({\n            left: this.bounds.left + this.halfWidth,\n            top: this.bounds.top,\n            right: this.bounds.right,\n            bottom: this.bounds.top + this.halfHeight\n        }), newLevelOptions);\n        this.bottomLeft = new QuadTree(new BoundingBox({\n            left: this.bounds.left,\n            top: this.bounds.top + this.halfHeight,\n            right: this.bounds.left + this.halfWidth,\n            bottom: this.bounds.bottom\n        }), newLevelOptions);\n        this.bottomRight = new QuadTree(new BoundingBox({\n            left: this.bounds.left + this.halfWidth,\n            top: this.bounds.top + this.halfHeight,\n            right: this.bounds.right,\n            bottom: this.bounds.bottom\n        }), newLevelOptions);\n    }\n    _insertIntoSubNodes(item) {\n        var _a, _b, _c, _d;\n        if ((_a = this.topLeft) === null || _a === void 0 ? void 0 : _a.bounds.overlaps(item.bounds)) {\n            this.topLeft.insert(item);\n        }\n        if ((_b = this.topRight) === null || _b === void 0 ? void 0 : _b.bounds.overlaps(item.bounds)) {\n            this.topRight.insert(item);\n        }\n        if ((_c = this.bottomLeft) === null || _c === void 0 ? void 0 : _c.bounds.overlaps(item.bounds)) {\n            this.bottomLeft.insert(item);\n        }\n        if ((_d = this.bottomRight) === null || _d === void 0 ? void 0 : _d.bounds.overlaps(item.bounds)) {\n            this.bottomRight.insert(item);\n        }\n    }\n    /**\n     * Insert an item to be tracked in the QuadTree\n     * @param item\n     */\n    insert(item) {\n        // add to subnodes if it matches\n        if (this._isDivided) {\n            this._insertIntoSubNodes(item);\n            return;\n        }\n        // leaf case\n        this.items.push(item);\n        // capacity\n        if (this.items.length > this.options.capacity && this.options.level < this.options.maxDepth) {\n            if (!this._isDivided) {\n                this._split();\n            }\n            // divide this level's items into it's subnodes\n            for (const item of this.items) {\n                this._insertIntoSubNodes(item);\n            }\n            // clear this level\n            this.items.length = 0;\n        }\n    }\n    /**\n     * Remove a tracked item in the QuadTree\n     * @param item\n     */\n    remove(item) {\n        var _a, _b, _c, _d;\n        if (!this.bounds.overlaps(item.bounds)) {\n            return;\n        }\n        if (!this._isDivided) {\n            const index = this.items.indexOf(item);\n            if (index > -1) {\n                this.items.splice(index, 1);\n            }\n            return;\n        }\n        if ((_a = this.topLeft) === null || _a === void 0 ? void 0 : _a.bounds.overlaps(item.bounds)) {\n            this.topLeft.remove(item);\n        }\n        if ((_b = this.topRight) === null || _b === void 0 ? void 0 : _b.bounds.overlaps(item.bounds)) {\n            this.topRight.remove(item);\n        }\n        if ((_c = this.bottomLeft) === null || _c === void 0 ? void 0 : _c.bounds.overlaps(item.bounds)) {\n            this.bottomLeft.remove(item);\n        }\n        if ((_d = this.bottomRight) === null || _d === void 0 ? void 0 : _d.bounds.overlaps(item.bounds)) {\n            this.bottomRight.remove(item);\n        }\n    }\n    /**\n     * Query the structure for all objects that intersect the bounding box\n     * @param boundingBox\n     * @returns items\n     */\n    query(boundingBox) {\n        let results = this.items;\n        if (this._isDivided) {\n            if (this.topLeft.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.topLeft.query(boundingBox));\n            }\n            if (this.topRight.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.topRight.query(boundingBox));\n            }\n            if (this.bottomLeft.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.bottomLeft.query(boundingBox));\n            }\n            if (this.bottomRight.bounds.overlaps(boundingBox)) {\n                results = results.concat(this.bottomRight.query(boundingBox));\n            }\n        }\n        results = results.filter((item, index) => {\n            return results.indexOf(item) >= index;\n        });\n        return results;\n    }\n    clear() {\n        this.items = [];\n        this._isDivided = false;\n        this.topLeft = null;\n        this.topRight = null;\n        this.bottomLeft = null;\n        this.bottomRight = null;\n    }\n    getAllItems() {\n        let results = this.items;\n        if (this._isDivided) {\n            results = results.concat(this.topLeft.getAllItems());\n            results = results.concat(this.topRight.getAllItems());\n            results = results.concat(this.bottomLeft.getAllItems());\n            results = results.concat(this.bottomRight.getAllItems());\n        }\n        results = results.filter((item, index) => {\n            return results.indexOf(item) >= index;\n        });\n        return results;\n    }\n    getTreeDepth() {\n        if (!this._isDivided) {\n            return 0;\n        }\n        return (1 +\n            Math.max(this.topLeft.getTreeDepth(), this.topRight.getTreeDepth(), this.bottomLeft.getTreeDepth(), this.bottomRight.getTreeDepth()));\n    }\n    debug(ctx) {\n        this.bounds.draw(ctx, Color.Yellow);\n        if (this._isDivided) {\n            this.topLeft.bounds.draw(ctx, Color.Yellow);\n            this.topRight.bounds.draw(ctx, Color.Yellow);\n            this.bottomLeft.bounds.draw(ctx, Color.Yellow);\n            this.bottomRight.bounds.draw(ctx, Color.Yellow);\n        }\n    }\n}\n\n;// ./Collision/Index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Interfaces/LifecycleEvents.ts\n/**\n * Type guard checking for internal initialize method\n * @internal\n * @param a\n */\nfunction has_initialize(a) {\n    return !!a._initialize;\n}\n/**\n *\n */\nfunction has_add(a) {\n    return !!a.onAdd;\n}\n/**\n *\n */\nfunction has_remove(a) {\n    return !!a.onRemove;\n}\n/**\n *\n */\nfunction hasOnInitialize(a) {\n    return !!a.onInitialize;\n}\n/**\n *\n */\nfunction has_preupdate(a) {\n    return !!a._preupdate;\n}\n/**\n *\n */\nfunction hasOnPreUpdate(a) {\n    return !!a.onPreUpdate;\n}\n/**\n *\n */\nfunction has_postupdate(a) {\n    return !!a.onPostUpdate;\n}\n/**\n *\n */\nfunction hasOnPostUpdate(a) {\n    return !!a.onPostUpdate;\n}\n/**\n *\n */\nfunction hasOnAdd(a) {\n    return !!a.onAdd;\n}\n/**\n *\n */\nfunction hasOnRemove(a) {\n    return !!a.onRemove;\n}\n/**\n *\n */\nfunction hasPreDraw(a) {\n    return !!a.onPreDraw;\n}\n/**\n *\n */\nfunction hasPostDraw(a) {\n    return !!a.onPostDraw;\n}\n\n;// ./Interfaces/Index.ts\n\n\n\n\n\n\n\n\n;// ./Resources/Sound/Index.ts\n\n\n\n\n;// ./Resources/Gif.ts\n\n\n\n\n/**\n * The {@apilink Texture} object allows games built in Excalibur to load image resources.\n * {@apilink Texture} is an {@apilink Loadable} which means it can be passed to a {@apilink Loader}\n * to pre-load before starting a level or game.\n */\nclass Gif {\n    /**\n     * @param path       Path to the image resource\n     * @param bustCache  Optionally load texture with cache busting\n     */\n    constructor(path, bustCache = false) {\n        this.path = path;\n        /**\n         * The width of the texture in pixels\n         */\n        this.width = 0;\n        /**\n         * The height of the texture in pixels\n         */\n        this.height = 0;\n        this._images = [];\n        this.data = [];\n        this._sprites = [];\n        this._resource = new Resource(path, 'arraybuffer', bustCache);\n    }\n    /**\n     * Should excalibur add a cache busting querystring? By default false.\n     * Must be set before loading\n     */\n    get bustCache() {\n        return this._resource.bustCache;\n    }\n    set bustCache(val) {\n        this._resource.bustCache = val;\n    }\n    /**\n     * Begins loading the texture and returns a promise to be resolved on completion\n     */\n    async load() {\n        const arraybuffer = await this._resource.load();\n        this._stream = new Stream(arraybuffer);\n        this._gif = new GifParser(this._stream);\n        const images = this._gif.images.map((i) => new ImageSource(i.src, false));\n        // Load all textures\n        await Promise.all(images.map((t) => t.load()));\n        this.data = this._images = images;\n        this._sprites = this._images.map((image) => {\n            return image.toSprite();\n        });\n        return this.data;\n    }\n    isLoaded() {\n        return !!this.data;\n    }\n    /**\n     * Return a frame of the gif as a sprite by id\n     * @param id\n     */\n    toSprite(id = 0) {\n        var _a;\n        return (_a = this._sprites[id]) !== null && _a !== void 0 ? _a : null;\n    }\n    /**\n     * Return the gif as a spritesheet\n     */\n    toSpriteSheet() {\n        const sprites = this._sprites;\n        if (sprites.length) {\n            return new SpriteSheet({ sprites });\n        }\n        return null;\n    }\n    /**\n     * Transform the GIF into an animation with duration per frame\n     * @param durationPerFrame Optionally override duration per frame\n     */\n    toAnimation(durationPerFrame) {\n        var _a;\n        const images = (_a = this._gif) === null || _a === void 0 ? void 0 : _a.images;\n        if (images === null || images === void 0 ? void 0 : images.length) {\n            const frames = images.map((image, index) => {\n                var _a;\n                return {\n                    graphic: this._sprites[index],\n                    duration: ((_a = this._gif) === null || _a === void 0 ? void 0 : _a.frames[index].delayMs) || undefined\n                };\n            });\n            this._animation = new Animation({\n                frames,\n                frameDuration: durationPerFrame\n            });\n            return this._animation;\n        }\n        return null;\n    }\n    get readCheckBytes() {\n        var _a, _b;\n        return (_b = (_a = this._gif) === null || _a === void 0 ? void 0 : _a.checkBytes) !== null && _b !== void 0 ? _b : [];\n    }\n}\nconst bitsToNum = (ba) => {\n    return ba.reduce(function (s, n) {\n        return s * 2 + n;\n    }, 0);\n};\nconst byteToBitArr = (bite) => {\n    const a = [];\n    for (let i = 7; i >= 0; i--) {\n        a.push(!!(bite & (1 << i)));\n    }\n    return a;\n};\nclass Stream {\n    constructor(dataArray) {\n        this.len = 0;\n        this.position = 0;\n        this.readByte = () => {\n            if (this.position >= this.data.byteLength) {\n                throw new Error('Attempted to read past end of stream.');\n            }\n            return this.data[this.position++];\n        };\n        this.readBytes = (n) => {\n            const bytes = [];\n            for (let i = 0; i < n; i++) {\n                bytes.push(this.readByte());\n            }\n            return bytes;\n        };\n        this.read = (n) => {\n            let s = '';\n            for (let i = 0; i < n; i++) {\n                s += String.fromCharCode(this.readByte());\n            }\n            return s;\n        };\n        this.readUnsigned = () => {\n            // Little-endian.\n            const a = this.readBytes(2);\n            return (a[1] << 8) + a[0];\n        };\n        this.data = new Uint8Array(dataArray);\n        this.len = this.data.byteLength;\n        if (this.len === 0) {\n            throw new Error('No data loaded from file');\n        }\n    }\n}\nconst lzwDecode = function (minCodeSize, data) {\n    // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n    let pos = 0; // Maybe this streaming thing should be merged with the Stream?\n    const readCode = function (size) {\n        let code = 0;\n        for (let i = 0; i < size; i++) {\n            if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n                code |= 1 << i;\n            }\n            pos++;\n        }\n        return code;\n    };\n    const output = [];\n    const clearCode = 1 << minCodeSize;\n    const eoiCode = clearCode + 1;\n    let codeSize = minCodeSize + 1;\n    let dict = [];\n    const clear = function () {\n        dict = [];\n        codeSize = minCodeSize + 1;\n        for (let i = 0; i < clearCode; i++) {\n            dict[i] = [i];\n        }\n        dict[clearCode] = [];\n        dict[eoiCode] = null;\n    };\n    let code = 0;\n    let last = 0;\n    while (true) {\n        last = code;\n        code = readCode(codeSize);\n        if (code === clearCode) {\n            clear();\n            continue;\n        }\n        if (code === eoiCode) {\n            break;\n        }\n        if (code < dict.length) {\n            if (last !== clearCode) {\n                dict.push(dict[last].concat(dict[code][0]));\n            }\n        }\n        else {\n            if (code !== dict.length) {\n                throw new Error('Invalid LZW code.');\n            }\n            dict.push(dict[last].concat(dict[last][0]));\n        }\n        output.push.apply(output, dict[code]);\n        if (dict.length === 1 << codeSize && codeSize < 12) {\n            // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n            codeSize++;\n        }\n    }\n    // I don't know if this is technically an error, but some GIFs do it.\n    //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n    return output;\n};\n/**\n * GifParser for binary format\n *\n * Roughly based on the documentation https://giflib.sourceforge.net/whatsinagif/index.html\n */\nclass GifParser {\n    constructor(stream) {\n        this._handler = {};\n        this.frames = [];\n        this.images = [];\n        this.globalColorTableBytes = [];\n        this.checkBytes = [];\n        this.parseColorTableBytes = (entries) => {\n            // Each entry is 3 bytes, for RGB.\n            const colorTable = [];\n            for (let i = 0; i < entries; i++) {\n                const rgb = this._st.readBytes(3);\n                colorTable.push(rgb);\n            }\n            return colorTable;\n        };\n        this.readSubBlocks = () => {\n            let size, data;\n            data = '';\n            do {\n                size = this._st.readByte();\n                data += this._st.read(size);\n            } while (size !== 0);\n            return data;\n        };\n        this.parseHeader = () => {\n            const hdr = {\n                sig: '',\n                ver: '',\n                width: 0,\n                height: 0,\n                colorResolution: 0,\n                globalColorTableSize: 0,\n                gctFlag: false,\n                sortedFlag: false,\n                globalColorTable: [],\n                backgroundColorIndex: 0,\n                pixelAspectRatio: 0 // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n            };\n            hdr.sig = this._st.read(3);\n            hdr.ver = this._st.read(3);\n            if (hdr.sig !== 'GIF') {\n                throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\n            }\n            hdr.width = this._st.readUnsigned();\n            hdr.height = this._st.readUnsigned();\n            this._currentFrameCanvas.width = hdr.width;\n            this._currentFrameCanvas.height = hdr.height;\n            const bits = byteToBitArr(this._st.readByte());\n            hdr.gctFlag = bits.shift();\n            hdr.colorResolution = bitsToNum(bits.splice(0, 3));\n            hdr.sortedFlag = bits.shift();\n            hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\n            hdr.backgroundColorIndex = this._st.readByte();\n            hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n            if (hdr.gctFlag) {\n                // hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\n                this.globalColorTableBytes = this.parseColorTableBytes(1 << (hdr.globalColorTableSize + 1));\n            }\n            if (this._handler.hdr && this._handler.hdr(hdr)) {\n                this.checkBytes.push(this._handler.hdr);\n            }\n        };\n        this.parseExt = (block) => {\n            const parseGCExt = (block) => {\n                this.checkBytes.push(this._st.readByte()); // Always 4\n                const bits = byteToBitArr(this._st.readByte());\n                block.reserved = bits.splice(0, 3); // Reserved; should be 000.\n                block.disposalMethod = bitsToNum(bits.splice(0, 3));\n                block.userInputFlag = bits.shift();\n                block.transparentColorFlag = bits.shift();\n                block.delayTime = this._st.readUnsigned();\n                block.transparentColorIndex = this._st.readByte();\n                block.terminator = this._st.readByte(); // always 0\n                if (this._handler.gce && this._handler.gce(block)) {\n                    this.checkBytes.push(this._handler.gce);\n                }\n                return block;\n            };\n            const parseComExt = (block) => {\n                block.comment = this.readSubBlocks();\n                if (this._handler.com && this._handler.com(block)) {\n                    this.checkBytes.push(this._handler.com);\n                }\n            };\n            const parsePTExt = (block) => {\n                this.checkBytes.push(this._st.readByte()); // Always 12\n                block.ptHeader = this._st.readBytes(12);\n                block.ptData = this.readSubBlocks();\n                if (this._handler.pte && this._handler.pte(block)) {\n                    this.checkBytes.push(this._handler.pte);\n                }\n            };\n            const parseAppExt = (block) => {\n                const parseNetscapeExt = (block) => {\n                    this.checkBytes.push(this._st.readByte()); // Always 3\n                    block.unknown = this._st.readByte(); // Q: Always 1? What is this?\n                    block.iterations = this._st.readUnsigned();\n                    block.terminator = this._st.readByte();\n                    if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\n                        this.checkBytes.push(this._handler.app);\n                    }\n                };\n                const parseUnknownAppExt = (block) => {\n                    block.appData = this.readSubBlocks();\n                    // FIXME: This won't work if a handler wants to match on any identifier.\n                    if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\n                        this.checkBytes.push(this._handler.app[block.identifier]);\n                    }\n                };\n                this.checkBytes.push(this._st.readByte()); // Always 11\n                block.identifier = this._st.read(8);\n                block.authCode = this._st.read(3);\n                switch (block.identifier) {\n                    case 'NETSCAPE':\n                        parseNetscapeExt(block);\n                        break;\n                    default:\n                        parseUnknownAppExt(block);\n                        break;\n                }\n            };\n            const parseUnknownExt = (block) => {\n                block.data = this.readSubBlocks();\n                if (this._handler.unknown && this._handler.unknown(block)) {\n                    this.checkBytes.push(this._handler.unknown);\n                }\n            };\n            block.label = this._st.readByte();\n            switch (block.label) {\n                case 0xf9:\n                    block.extType = 'gce';\n                    this._gce = parseGCExt(block);\n                    break;\n                case 0xfe:\n                    block.extType = 'com';\n                    parseComExt(block);\n                    break;\n                case 0x01:\n                    block.extType = 'pte';\n                    parsePTExt(block);\n                    break;\n                case 0xff:\n                    block.extType = 'app';\n                    parseAppExt(block);\n                    break;\n                default:\n                    block.extType = 'unknown';\n                    parseUnknownExt(block);\n                    break;\n            }\n        };\n        this.parseImg = (img) => {\n            var _a;\n            const deinterlace = (pixels, width) => {\n                // Of course this defeats the purpose of interlacing. And it's *probably*\n                // the least efficient way it's ever been implemented. But nevertheless...\n                const newPixels = new Array(pixels.length);\n                const rows = pixels.length / width;\n                const cpRow = (toRow, fromRow) => {\n                    const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n                    newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n                };\n                const offsets = [0, 4, 2, 1];\n                const steps = [8, 8, 4, 2];\n                let fromRow = 0;\n                for (let pass = 0; pass < 4; pass++) {\n                    for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n                        cpRow(toRow, fromRow);\n                        fromRow++;\n                    }\n                }\n                return newPixels;\n            };\n            img.leftPos = this._st.readUnsigned();\n            img.topPos = this._st.readUnsigned();\n            img.width = this._st.readUnsigned();\n            img.height = this._st.readUnsigned();\n            const bits = byteToBitArr(this._st.readByte());\n            img.lctFlag = bits.shift();\n            img.interlaced = bits.shift();\n            img.sorted = bits.shift();\n            img.reserved = bits.splice(0, 2);\n            img.lctSize = bitsToNum(bits.splice(0, 3));\n            if (img.lctFlag) {\n                img.lctBytes = this.parseColorTableBytes(1 << (img.lctSize + 1));\n            }\n            img.lzwMinCodeSize = this._st.readByte();\n            const lzwData = this.readSubBlocks();\n            img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\n            if (img.interlaced) {\n                // Move\n                img.pixels = deinterlace(img.pixels, img.width);\n            }\n            if ((_a = this._gce) === null || _a === void 0 ? void 0 : _a.delayTime) {\n                img.delayMs = this._gce.delayTime * 10;\n            }\n            this.frames.push(img);\n            this.arrayToImage(img, img.lctFlag ? img.lctBytes : this.globalColorTableBytes);\n            if (this._handler.img && this._handler.img(img)) {\n                this.checkBytes.push(this._handler);\n            }\n        };\n        this.parseBlocks = () => {\n            const block = {\n                sentinel: this._st.readByte(),\n                type: ''\n            };\n            const blockChar = String.fromCharCode(block.sentinel);\n            switch (blockChar) {\n                case '!':\n                    block.type = 'ext';\n                    this.parseExt(block);\n                    break;\n                case ',':\n                    block.type = 'img';\n                    this.parseImg(block);\n                    break;\n                case ';':\n                    block.type = 'eof';\n                    if (this._handler.eof && this._handler.eof(block)) {\n                        this.checkBytes.push(this._handler.eof);\n                    }\n                    break;\n                default:\n                    throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\n            }\n            if (block.type !== 'eof') {\n                this.parseBlocks();\n            }\n        };\n        this.arrayToImage = (frame, colorTable) => {\n            var _a, _b, _c, _d;\n            const canvas = document.createElement('canvas');\n            canvas.width = frame.width;\n            canvas.height = frame.height;\n            const context = canvas.getContext('2d');\n            const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n            let transparentColorIndex = -1;\n            if ((_a = this._gce) === null || _a === void 0 ? void 0 : _a.transparentColorFlag) {\n                transparentColorIndex = this._gce.transparentColorIndex;\n            }\n            for (let pixel = 0; pixel < frame.pixels.length; pixel++) {\n                const colorIndex = frame.pixels[pixel];\n                const color = colorTable[colorIndex];\n                if (colorIndex === transparentColorIndex) {\n                    imageData.data.set([0, 0, 0, 0], pixel * 4);\n                }\n                else {\n                    imageData.data.set([...color, 255], pixel * 4);\n                }\n            }\n            context.putImageData(imageData, 0, 0);\n            // A value of 1 which tells the decoder to leave the image in place and draw the next image on top of it.\n            // A value of 2 would have meant that the canvas should be restored to the background color (as indicated by the logical screen descriptor).\n            // A value of 3 is defined to mean that the decoder should restore the canvas to its previous state before the current image was drawn.\n            // The behavior for values 4-7 are yet to be defined.\n            if (((_b = this._gce) === null || _b === void 0 ? void 0 : _b.disposalMethod) === 1 && this.images.length) {\n                this._currentFrameContext.drawImage(this.images[this.images.length - 1], 0, 0);\n            }\n            else if (((_c = this._gce) === null || _c === void 0 ? void 0 : _c.disposalMethod) === 2 && ((_d = this._hdr) === null || _d === void 0 ? void 0 : _d.gctFlag)) {\n                const bg = colorTable[this._hdr.backgroundColorIndex];\n                this._currentFrameContext.fillStyle = `rgb(${bg[0]}, ${bg[1]}, ${bg[2]})`;\n                this._currentFrameContext.fillRect(0, 0, this._hdr.width, this._hdr.height);\n            }\n            else {\n                this._currentFrameContext.clearRect(0, 0, this._currentFrameCanvas.width, this._currentFrameCanvas.height);\n            }\n            this._currentFrameContext.drawImage(canvas, frame.leftPos, frame.topPos, frame.width, frame.height);\n            const img = new Image();\n            img.src = this._currentFrameCanvas.toDataURL(); // default is png\n            this.images.push(img);\n        };\n        this._st = stream;\n        this._handler = {};\n        this._currentFrameCanvas = document.createElement('canvas');\n        this._currentFrameContext = this._currentFrameCanvas.getContext('2d');\n        this.parseHeader();\n        this.parseBlocks();\n    }\n}\n\n;// ./Resources/Font.ts\n\n\nclass FontSource {\n    constructor(\n    /**\n     * Path to the font resource relative from the HTML document hosting the game, or absolute\n     */\n    path, \n    /**\n     * The font family name\n     */\n    family, { bustCache, ...options } = {}) {\n        this.path = path;\n        this.family = family;\n        this._isLoaded = false;\n        this._resource = new Resource(path, 'blob', bustCache);\n        this._options = options;\n    }\n    async load() {\n        if (this.isLoaded()) {\n            return this.data;\n        }\n        try {\n            const blob = await this._resource.load();\n            const url = URL.createObjectURL(blob);\n            if (!this.data) {\n                this.data = new FontFace(this.family, `url(${url})`);\n                document.fonts.add(this.data);\n            }\n            await this.data.load();\n            this._isLoaded = true;\n        }\n        catch (error) {\n            throw `Error loading FontSource from path '${this.path}' with error [${error.message}]`;\n        }\n        return this.data;\n    }\n    isLoaded() {\n        return this._isLoaded;\n    }\n    /**\n     * Build a font from this FontSource.\n     * @param options {FontOptions} Override the font options\n     */\n    toFont(options) {\n        return new Font({ family: this.family, ...this._options, ...options });\n    }\n}\n\n;// ./Resources/Index.ts\n\n\n\n\n\n;// ./EntityComponentSystem/index.ts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n;// ./Util/Coroutine.ts\n\n\n\nconst InsideCoroutineContext = createContext();\nconst generatorFunctionDeclaration = /^\\s*(?:function)?\\*/;\n/**\n *\n */\nfunction isCoroutineGenerator(x) {\n    if (typeof x !== 'function') {\n        return false;\n    }\n    if (generatorFunctionDeclaration.test(Function.prototype.toString.call(x))) {\n        return true;\n    }\n    if (!Object.getPrototypeOf) {\n        return false;\n    }\n    return Object.getPrototypeOf(x) === Object.getPrototypeOf(new Function('return function * () {}')());\n}\n/**\n *\n */\nfunction coroutine(...args) {\n    var _a;\n    const logger = Logger.getInstance();\n    let coroutineGenerator;\n    let thisArg;\n    let options;\n    let passedEngine;\n    // coroutine(coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (isCoroutineGenerator(args[0])) {\n        thisArg = globalThis;\n        coroutineGenerator = args[0];\n        options = args[1];\n    }\n    // coroutine(thisArg: any, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (isCoroutineGenerator(args[1])) {\n        thisArg = args[0];\n        coroutineGenerator = args[1];\n        options = args[2];\n    }\n    // coroutine(thisArg: any, engine: Engine, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (args[1] instanceof Engine) {\n        thisArg = args[0];\n        passedEngine = args[1];\n        coroutineGenerator = args[2];\n        options = args[3];\n    }\n    // coroutine(engine: Engine, coroutineGenerator: CoroutineGenerator, options?: CoroutineOptions): CoroutineInstance;\n    if (args[0] instanceof Engine) {\n        thisArg = globalThis;\n        passedEngine = args[0];\n        coroutineGenerator = args[1];\n        options = args[2];\n    }\n    const inside = useContext(InsideCoroutineContext);\n    const schedule = options === null || options === void 0 ? void 0 : options.timing;\n    const autostart = inside ? false : (_a = options === null || options === void 0 ? void 0 : options.autostart) !== null && _a !== void 0 ? _a : true;\n    let engine;\n    try {\n        engine = passedEngine !== null && passedEngine !== void 0 ? passedEngine : Engine.useEngine();\n    }\n    catch (_) {\n        throw Error('Cannot run coroutine without engine parameter outside of an excalibur lifecycle method.\\n' +\n            'Pass an engine parameter to ex.coroutine(engine, function * {...})');\n    }\n    let started = false;\n    let completed = false;\n    let cancelled = false;\n    const generatorFcn = coroutineGenerator.bind(thisArg);\n    const generator = generatorFcn();\n    let loop;\n    const complete = new Promise((resolve, reject) => {\n        loop = (elapsed) => {\n            try {\n                if (cancelled) {\n                    completed = true;\n                    resolve();\n                    return;\n                }\n                const { done, value } = InsideCoroutineContext.scope(true, () => generator.next(elapsed));\n                if (done || cancelled) {\n                    completed = true;\n                    resolve();\n                    return;\n                }\n                if (value instanceof Promise) {\n                    value.then(() => {\n                        // schedule next loop\n                        engine.clock.schedule(loop, 0, schedule);\n                    });\n                }\n                else if (value === undefined || value === void 0) {\n                    // schedule next frame\n                    engine.clock.schedule(loop, 0, schedule);\n                }\n                else {\n                    // schedule value milliseconds from now\n                    engine.clock.schedule(loop, value || 0, schedule);\n                }\n            }\n            catch (e) {\n                reject(e);\n                return;\n            }\n        };\n        if (autostart) {\n            started = true;\n            loop(engine.clock.elapsed()); // run first frame immediately\n        }\n    });\n    const co = {\n        isRunning: () => {\n            return started && !cancelled && !completed;\n        },\n        isComplete: () => {\n            return completed;\n        },\n        cancel: () => {\n            cancelled = true;\n        },\n        start: () => {\n            if (!started) {\n                started = true;\n                loop(engine.clock.elapsed());\n            }\n            else {\n                logger.warn('.start() was called on a coroutine that was already started, this is probably a bug:\\n', Function.prototype.toString.call(generatorFcn));\n            }\n            return co;\n        },\n        generator,\n        done: complete,\n        then: complete.then.bind(complete),\n        [Symbol.iterator]: () => {\n            // TODO warn if a coroutine is already running\n            // TODO warn if a coroutine is cancelled\n            return generator;\n        }\n    };\n    return co;\n}\n\n;// ./Director/Transition.ts\n\n\n\n\n\n\n\n\n\n/**\n * Base Transition that can be extended to provide custom scene transitions in Excalibur.\n */\nclass Transition extends Entity {\n    /**\n     * Returns a number between [0, 1] indicating what state the transition is in.\n     *\n     * * For 'out' direction transitions start at 0 and end at 1\n     * * For 'in' direction transitions start at 1 and end at 0\n     */\n    get progress() {\n        return this._currentProgress;\n    }\n    get complete() {\n        if (this.direction === 'out') {\n            return this.progress >= 1;\n        }\n        else {\n            return this.progress <= 0;\n        }\n    }\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this._logger = Logger.getInstance();\n        this.transform = new TransformComponent();\n        this.graphics = new GraphicsComponent();\n        this._completeFuture = new Future();\n        // State needs to be reset between uses\n        this.started = false;\n        this._currentDistance = 0;\n        this._currentProgress = 0;\n        this.done = this._completeFuture.promise;\n        this.name = `Transition#${this.id}`;\n        this.duration = options.duration;\n        this.easing = (_a = options.easing) !== null && _a !== void 0 ? _a : EasingFunctions.Linear;\n        this.direction = (_b = options.direction) !== null && _b !== void 0 ? _b : 'out';\n        this.hideLoader = (_c = options.hideLoader) !== null && _c !== void 0 ? _c : false;\n        this.blockInput = (_d = options.blockInput) !== null && _d !== void 0 ? _d : false;\n        this.transform.coordPlane = CoordPlane.Screen;\n        this.transform.pos = Vector.Zero;\n        this.transform.z = Infinity; // Transitions sit on top of everything\n        this.graphics.anchor = Vector.Zero;\n        this.addComponent(this.transform);\n        this.addComponent(this.graphics);\n        if (this.direction === 'out') {\n            this._currentProgress = 0;\n        }\n        else {\n            this._currentProgress = 1;\n        }\n    }\n    /**\n     * Overridable lifecycle method, called before each update.\n     *\n     * **WARNING BE SURE** to call `super.updateTransition()` if overriding in your own custom implementation\n     * @param engine\n     * @param elapsed\n     */\n    updateTransition(engine, elapsed) {\n        if (this.complete) {\n            return;\n        }\n        this._currentDistance += clamp(elapsed / this.duration, 0, 1);\n        if (this._currentDistance >= 1) {\n            this._currentDistance = 1;\n        }\n        if (this.direction === 'out') {\n            this._currentProgress = clamp(this.easing(this._currentDistance, 0, 1, 1), 0, 1);\n        }\n        else {\n            this._currentProgress = clamp(this.easing(this._currentDistance, 1, 0, 1), 0, 1);\n        }\n    }\n    /**\n     * Overridable lifecycle method, called right before the previous scene has deactivated.\n     *\n     * This gives incoming transition a chance to grab info from previous scene if desired\n     * @param scene\n     */\n    async onPreviousSceneDeactivate(scene) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called once at the beginning of the transition\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onStart(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called every frame of the transition\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onUpdate(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called at the end of the transition,\n     *\n     * `progress` is given between 0 and 1\n     * @param progress\n     */\n    onEnd(progress) {\n        // override me\n    }\n    /**\n     * Overridable lifecycle method, called when the transition is reset\n     *\n     * Use this to override and provide your own reset logic for internal state in custom transition implementations\n     */\n    onReset() {\n        // override me\n    }\n    /**\n     * reset() is called by the engine to reset transitions\n     */\n    reset() {\n        this.started = false;\n        this._completeFuture = new Future();\n        this.done = this._completeFuture.promise;\n        this._currentDistance = 0;\n        if (this.direction === 'out') {\n            this._currentProgress = 0;\n        }\n        else {\n            this._currentProgress = 1;\n        }\n        this.onReset();\n    }\n    /**\n     * @internal\n     */\n    _addToTargetScene(engine, targetScene) {\n        const currentScene = targetScene;\n        if (this.started) {\n            this._logger.warn(`Attempted to add a transition ${this.name} that is already playing.`);\n        }\n        if (currentScene.world.entityManager.getById(this.id)) {\n            return this._co;\n        }\n        this._engine = engine;\n        currentScene.add(this);\n        const self = this;\n        this._co = coroutine(engine, function* () {\n            while (!self.complete) {\n                const elapsed = yield; // per frame\n                self.updateTransition(self._engine, elapsed);\n                self._execute();\n            }\n        }, {\n            autostart: false\n        });\n        return this._co;\n    }\n    /**\n     * Called internally by excalibur to swap scenes with transition\n     * @internal\n     */\n    async _play() {\n        if (this.started) {\n            this.reset();\n            this._logger.warn(`Attempted to play a transition ${this.name} that is already playing, reset transition.`);\n        }\n        if (!this._engine || !this._co) {\n            this.reset();\n            this._logger.warn(`Attempted to play a transition ${this.name} that hasn't been added`);\n        }\n        if (this._co) {\n            await this._co.start();\n        }\n    }\n    /**\n     * execute() is called by the engine every frame to update the Transition lifecycle onStart/onUpdate/onEnd\n     * @internal\n     */\n    _execute() {\n        if (!this.isInitialized) {\n            return;\n        }\n        if (!this.started) {\n            this.started = true;\n            this.onStart(this.progress);\n        }\n        this.onUpdate(this.progress);\n        if (this.complete && !this._completeFuture.isCompleted) {\n            this.onEnd(this.progress);\n            this._completeFuture.resolve();\n        }\n    }\n}\n\n;// ./Director/FadeInOut.ts\n\n\n\nclass FadeInOut extends Transition {\n    constructor(options) {\n        var _a, _b;\n        super({\n            ...options,\n            duration: (_a = options.duration) !== null && _a !== void 0 ? _a : 2000\n        });\n        this.name = `FadeInOut#${this.id}`;\n        this.color = (_b = options.color) !== null && _b !== void 0 ? _b : Color.Black;\n    }\n    onInitialize(engine) {\n        this.transform.pos = engine.screen.unsafeArea.topLeft;\n        this.screenCover = new Rectangle({\n            width: engine.screen.resolution.width,\n            height: engine.screen.resolution.height,\n            color: this.color\n        });\n        this.graphics.add(this.screenCover);\n        this.graphics.opacity = this.progress;\n    }\n    onReset() {\n        this.graphics.opacity = this.progress;\n    }\n    onStart(progress) {\n        this.graphics.opacity = progress;\n    }\n    onEnd(progress) {\n        this.graphics.opacity = progress;\n    }\n    onUpdate(progress) {\n        this.graphics.opacity = progress;\n    }\n}\n\n;// ./Director/CrossFade.ts\n\n\n\n/**\n * CrossFades between the previous scene and the destination scene\n *\n * Note: CrossFade only works as an \"in\" transition\n */\nclass CrossFade extends Transition {\n    constructor(options) {\n        super({ direction: 'in', ...options }); // default the correct direction\n        this.name = `CrossFade#${this.id}`;\n    }\n    async onPreviousSceneDeactivate(scene) {\n        this.image = await scene.engine.screenshot(true);\n        // Firefox is particularly slow\n        // needed in case the image isn't ready yet\n        await this.image.decode();\n    }\n    onInitialize(engine) {\n        this.engine = engine;\n        this.transform.pos = engine.screen.unsafeArea.topLeft;\n        this.screenCover = ImageSource.fromHtmlImageElement(this.image).toSprite();\n        this.graphics.add(this.screenCover);\n        // This is because we preserve hidpi res on the screen shot which COULD be bigger than the logical resolution\n        this.transform.scale = vec(1 / engine.screen.pixelRatio, 1 / engine.screen.pixelRatio);\n        this.graphics.opacity = this.progress;\n    }\n    onStart(_progress) {\n        this.graphics.opacity = this.progress;\n    }\n    onReset() {\n        this.graphics.opacity = this.progress;\n    }\n    onEnd(progress) {\n        this.graphics.opacity = progress;\n    }\n    onUpdate(progress) {\n        this.graphics.opacity = progress;\n    }\n}\n\n;// ./Director/Slide.ts\n\n\n\n\n\n/**\n * Slide`s between the previous scene and the destination scene\n *\n * Note: Slide` only works as an \"in\" transition\n */\nclass Slide extends Transition {\n    constructor(options) {\n        var _a;\n        super({ direction: 'in', ...options }); // default the correct direction\n        this._easing = EasingFunctions.Linear;\n        this.name = `Slide#${this.id}`;\n        this.slideDirection = options.slideDirection;\n        this.transform.coordPlane = CoordPlane.World;\n        this.graphics.forceOnScreen = true;\n        this._easing = (_a = options.easingFunction) !== null && _a !== void 0 ? _a : this._easing;\n        this._vectorEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n    }\n    async onPreviousSceneDeactivate(scene) {\n        this._image = await scene.engine.screenshot(true);\n        // Firefox is particularly slow\n        // needed in case the image isn't ready yet\n        await this._image.decode();\n        this._screenCover = ImageSource.fromHtmlImageElement(this._image).toSprite();\n    }\n    onInitialize(engine) {\n        this._engine = engine;\n        switch (this.slideDirection) {\n            case 'up': {\n                this._directionOffset = vec(0, -engine.screen.resolution.height);\n                break;\n            }\n            case 'down': {\n                this._directionOffset = vec(0, engine.screen.resolution.height);\n                break;\n            }\n            case 'left': {\n                this._directionOffset = vec(-engine.screen.resolution.width, 0);\n                break;\n            }\n            case 'right': {\n                this._directionOffset = vec(engine.screen.resolution.width, 0);\n                break;\n            }\n        }\n        this._camera = this._engine.currentScene.camera;\n        this._destinationCameraPosition = this._camera.pos.clone();\n        // For sliding shift the camera and the transition slide by offset\n        this._camera.pos = this._camera.pos.add(this._directionOffset);\n        this.transform.pos = this.transform.pos.add(this._directionOffset);\n        this._startCameraPosition = this._camera.pos.clone();\n        this.graphics.use(this._screenCover);\n        // This is because we preserve hidpi res on the screen shot which COULD be bigger than the logical resolution\n        this.transform.scale = vec(1 / engine.screen.pixelRatio, 1 / engine.screen.pixelRatio);\n    }\n    onUpdate(progress) {\n        // in-transitions count down from 1 -> 0, so our \"end\" is swapped\n        this._camera.pos = this._vectorEasing(progress, this._destinationCameraPosition, this._startCameraPosition, 1);\n    }\n}\n\n;// ./Director/index.ts\n\n\n\n\n\n\n\n\n;// ./Graphics/Line.ts\n\n\n\nclass Line extends Graphic {\n    constructor(options) {\n        super();\n        this.color = Color.Black;\n        this.thickness = 1;\n        const { start, end, color, thickness } = options;\n        this.start = start;\n        this.end = end;\n        this.color = color !== null && color !== void 0 ? color : this.color;\n        this.thickness = thickness !== null && thickness !== void 0 ? thickness : this.thickness;\n        this._localBounds = this._calculateBounds();\n        const { width, height } = this._localBounds;\n        this.width = width;\n        this.height = height;\n    }\n    get localBounds() {\n        return this._localBounds;\n    }\n    _calculateBounds() {\n        const lineNormal = this.end.sub(this.start).normal();\n        const halfThickness = this.thickness / 2;\n        const points = [\n            this.start.add(lineNormal.scale(halfThickness)),\n            this.end.add(lineNormal.scale(halfThickness)),\n            this.end.add(lineNormal.scale(-halfThickness)),\n            this.start.add(lineNormal.scale(-halfThickness))\n        ];\n        return BoundingBox.fromPoints(points);\n    }\n    _drawImage(ctx, _x, _y) {\n        ctx.drawLine(this.start, this.end, this.color, this.thickness);\n    }\n    clone() {\n        return new Line({\n            start: this.start,\n            end: this.end,\n            color: this.color,\n            thickness: this.thickness\n        });\n    }\n}\n\n;// ./Graphics/Polygon.ts\n\n\n\n/**\n * A polygon {@apilink Graphic} for drawing arbitrary polygons to the {@apilink ExcaliburGraphicsContext}\n *\n * Polygons default to {@apilink ImageFiltering.Blended}\n */\nclass Polygon extends Raster {\n    get points() {\n        return this._points;\n    }\n    set points(points) {\n        this._points = points;\n        const min = this.minPoint;\n        this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\n        this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\n        this.flagDirty();\n    }\n    get minPoint() {\n        const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\n        const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\n        return vec(minX, minY);\n    }\n    constructor(options) {\n        super(options);\n        this._points = [];\n        this.points = options.points;\n        this.filtering = ImageFiltering.Blended;\n        this.rasterize();\n    }\n    clone() {\n        return new Polygon({\n            points: this.points.map((p) => p.clone()),\n            ...this.cloneGraphicOptions(),\n            ...this.cloneRasterOptions()\n        });\n    }\n    execute(ctx) {\n        if (this.points && this.points.length) {\n            ctx.beginPath();\n            // Iterate through the supplied points and construct a 'polygon'\n            const min = this.minPoint.negate();\n            const firstPoint = this.points[0].add(min);\n            ctx.moveTo(firstPoint.x, firstPoint.y);\n            this.points.forEach((point) => {\n                ctx.lineTo(point.x + min.x, point.y + min.y);\n            });\n            ctx.lineTo(firstPoint.x, firstPoint.y);\n            ctx.closePath();\n            if (this.color) {\n                ctx.fill();\n            }\n            if (this.strokeColor) {\n                ctx.stroke();\n            }\n        }\n    }\n}\n\n;// ./Graphics/NineSlice.ts\n\n\n\n/**\n * Nine slice stretch mode\n */\nvar NineSliceStretch;\n(function (NineSliceStretch) {\n    /**\n     * Stretch the image across a dimension\n     */\n    NineSliceStretch[\"Stretch\"] = \"stretch\";\n    /**\n     * Tile the image across a dimension\n     */\n    NineSliceStretch[\"Tile\"] = \"tile\";\n    /**\n     * Tile the image across a dimension but only by whole image amounts\n     */\n    NineSliceStretch[\"TileFit\"] = \"tile-fit\";\n})(NineSliceStretch || (NineSliceStretch = {}));\nclass NineSlice extends Graphic {\n    constructor(config) {\n        super(config);\n        this._logger = Logger.getInstance();\n        this._config = config;\n        this._imgSource = config.source;\n        this._canvasA = document.createElement('canvas');\n        this._canvasB = document.createElement('canvas');\n        this._canvasC = document.createElement('canvas');\n        this._canvasD = document.createElement('canvas');\n        this._canvasE = document.createElement('canvas');\n        this._canvasF = document.createElement('canvas');\n        this._canvasG = document.createElement('canvas');\n        this._canvasH = document.createElement('canvas');\n        this._canvasI = document.createElement('canvas');\n        this._initialize();\n        this._imgSource.ready.then(() => {\n            this._initialize();\n        });\n    }\n    /**\n     * Sets the target width of the 9 slice (pixels), and recalculates the 9 slice if desired (auto)\n     * @param newWidth\n     * @param auto\n     */\n    setTargetWidth(newWidth, auto = false) {\n        this._config.width = newWidth;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     * Sets the target height of the 9 slice (pixels), and recalculates the 9 slice if desired (auto)\n     * @param newHeight\n     * @param auto\n     */\n    setTargetHeight(newHeight, auto = false) {\n        this._config.height = newHeight;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Sets the 9 slice margins (pixels), and recalculates the 9 slice if desired (auto)\n     */\n    setMargins(left, top, right, bottom, auto = false) {\n        this._config.sourceConfig.leftMargin = left;\n        this._config.sourceConfig.topMargin = top;\n        this._config.sourceConfig.rightMargin = right;\n        this._config.sourceConfig.bottomMargin = bottom;\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Sets the stretching strategy for the 9 slice, and recalculates the 9 slice if desired (auto)\n     *\n     */\n    setStretch(type, stretch, auto = false) {\n        if (type === 'horizontal') {\n            this._config.destinationConfig.horizontalStretch = stretch;\n        }\n        else if (type === 'vertical') {\n            this._config.destinationConfig.verticalStretch = stretch;\n        }\n        else {\n            this._config.destinationConfig.horizontalStretch = stretch;\n            this._config.destinationConfig.verticalStretch = stretch;\n        }\n        if (auto) {\n            this._initialize();\n        }\n    }\n    /**\n     *  Returns the config of the 9 slice\n     */\n    getConfig() {\n        return this._config;\n    }\n    /**\n     * Draws 1 of the 9 tiles based on parameters passed in\n     * context is the ExcaliburGraphicsContext from the _drawImage function\n     * destinationSize is the size of the destination image as a vector (width,height)\n     * targetCanvas is the canvas to draw to\n     * horizontalStretch and verticalStretch are the horizontal and vertical stretching strategies\n     * marginW and marginH are optional margins for the 9 slice for positioning\n     * @param context\n     * @param targetCanvas\n     * @param destinationSize\n     * @param horizontalStretch\n     * @param verticalStretch\n     * @param marginWidth\n     * @param marginHeight\n     */\n    _drawTile(context, targetCanvas, destinationSize, horizontalStretch, verticalStretch, marginWidth, marginHeight) {\n        const tempMarginW = marginWidth || 0;\n        const tempMarginH = marginHeight || 0;\n        let tempSizeX, tempPositionX, tempSizeY, tempPositionY;\n        const numTilesX = this._getNumberOfTiles(targetCanvas.width, destinationSize.x, horizontalStretch);\n        const numTilesY = this._getNumberOfTiles(targetCanvas.height, destinationSize.y, verticalStretch);\n        for (let i = 0; i < numTilesX; i++) {\n            for (let j = 0; j < numTilesY; j++) {\n                let { tempSize, tempPosition } = this._calculateParams(i, numTilesX, targetCanvas.width, destinationSize.x, this._config.destinationConfig.horizontalStretch);\n                tempSizeX = tempSize;\n                tempPositionX = tempPosition;\n                ({ tempSize, tempPosition } = this._calculateParams(j, numTilesY, targetCanvas.height, destinationSize.y, this._config.destinationConfig.verticalStretch));\n                tempSizeY = tempSize;\n                tempPositionY = tempPosition;\n                context.drawImage(targetCanvas, 0, 0, targetCanvas.width, targetCanvas.height, tempMarginW + tempPositionX, tempMarginH + tempPositionY, tempSizeX, tempSizeY);\n            }\n        }\n    }\n    /**\n     *  Draws the 9 slices to the canvas\n     */\n    _drawImage(ex, x, y) {\n        if (this._imgSource.isLoaded()) {\n            // Top left, no stretching\n            this._drawTile(ex, this._canvasA, new Vector(this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch);\n            // Top, middle, horizontal stretching\n            this._drawTile(ex, this._canvasB, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, 0);\n            // Top right, no stretching\n            this._drawTile(ex, this._canvasC, new Vector(this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, 0);\n            // middle, left, vertical stretching\n            this._drawTile(ex, this._canvasD, new Vector(this._config.sourceConfig.leftMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, 0, this._config.sourceConfig.topMargin);\n            // center, both stretching\n            if (this._config.destinationConfig.drawCenter) {\n                this._drawTile(ex, this._canvasE, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin);\n            }\n            // middle, right, vertical stretching\n            this._drawTile(ex, this._canvasF, new Vector(this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin - this._config.sourceConfig.topMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin);\n            // bottom left, no stretching\n            this._drawTile(ex, this._canvasG, new Vector(this._config.sourceConfig.leftMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, 0, this._config.height - this._config.sourceConfig.bottomMargin);\n            // bottom middle, horizontal stretching\n            this._drawTile(ex, this._canvasH, new Vector(this._config.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.sourceConfig.leftMargin, this._config.height - this._config.sourceConfig.bottomMargin);\n            // bottom right, no stretching\n            this._drawTile(ex, this._canvasI, new Vector(this._config.sourceConfig.rightMargin, this._config.sourceConfig.bottomMargin), this._config.destinationConfig.horizontalStretch, this._config.destinationConfig.verticalStretch, this._config.width - this._config.sourceConfig.rightMargin, this._config.height - this._config.sourceConfig.bottomMargin);\n        }\n        else {\n            this._logger.warnOnce(`NineSlice ImageSource ${this._imgSource.path}` +\n                ` is not yet loaded and won't be drawn. Please call .load() or include in a Loader.\\n\\n` +\n                `Read https://excaliburjs.com/docs/imagesource for more information.`);\n        }\n    }\n    /**\n     * Slices the source sprite into the 9 slice canvases internally\n     */\n    _initialize() {\n        this._sourceSprite = this._imgSource.image;\n        // top left slice\n        this._canvasA.width = this._config.sourceConfig.leftMargin;\n        this._canvasA.height = this._config.sourceConfig.topMargin;\n        const aCtx = this._canvasA.getContext('2d');\n        aCtx === null || aCtx === void 0 ? void 0 : aCtx.drawImage(this._sourceSprite, 0, 0, this._canvasA.width, this._canvasA.height, 0, 0, this._canvasA.width, this._canvasA.height);\n        // top slice\n        this._canvasB.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasB.height = this._config.sourceConfig.topMargin;\n        const bCtx = this._canvasB.getContext('2d');\n        bCtx === null || bCtx === void 0 ? void 0 : bCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, 0, this._canvasB.width, this._canvasB.height, 0, 0, this._canvasB.width, this._canvasB.height);\n        // top right slice\n        this._canvasC.width = this._config.sourceConfig.rightMargin;\n        this._canvasC.height = this._config.sourceConfig.topMargin;\n        const cCtx = this._canvasC.getContext('2d');\n        cCtx === null || cCtx === void 0 ? void 0 : cCtx.drawImage(this._sourceSprite, this._sourceSprite.width - this._config.sourceConfig.rightMargin, 0, this._canvasC.width, this._canvasC.height, 0, 0, this._canvasC.width, this._canvasC.height);\n        // middle left slice\n        this._canvasD.width = this._config.sourceConfig.leftMargin;\n        this._canvasD.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const dCtx = this._canvasD.getContext('2d');\n        dCtx === null || dCtx === void 0 ? void 0 : dCtx.drawImage(this._sourceSprite, 0, this._config.sourceConfig.topMargin, this._canvasD.width, this._canvasD.height, 0, 0, this._canvasD.width, this._canvasD.height);\n        // middle slice\n        this._canvasE.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasE.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const eCtx = this._canvasE.getContext('2d');\n        eCtx === null || eCtx === void 0 ? void 0 : eCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, this._config.sourceConfig.topMargin, this._canvasE.width, this._canvasE.height, 0, 0, this._canvasE.width, this._canvasE.height);\n        // middle right slice\n        this._canvasF.width = this._config.sourceConfig.rightMargin;\n        this._canvasF.height = this._config.sourceConfig.height - this._config.sourceConfig.topMargin - this._config.sourceConfig.bottomMargin;\n        const fCtx = this._canvasF.getContext('2d');\n        fCtx === null || fCtx === void 0 ? void 0 : fCtx.drawImage(this._sourceSprite, this._config.sourceConfig.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.topMargin, this._canvasF.width, this._canvasF.height, 0, 0, this._canvasF.width, this._canvasF.height);\n        // bottom left slice\n        this._canvasG.width = this._config.sourceConfig.leftMargin;\n        this._canvasG.height = this._config.sourceConfig.bottomMargin;\n        const gCtx = this._canvasG.getContext('2d');\n        gCtx === null || gCtx === void 0 ? void 0 : gCtx.drawImage(this._sourceSprite, 0, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasG.width, this._canvasG.height, 0, 0, this._canvasG.width, this._canvasG.height);\n        // bottom slice\n        this._canvasH.width = this._config.sourceConfig.width - this._config.sourceConfig.leftMargin - this._config.sourceConfig.rightMargin;\n        this._canvasH.height = this._config.sourceConfig.bottomMargin;\n        const hCtx = this._canvasH.getContext('2d');\n        hCtx === null || hCtx === void 0 ? void 0 : hCtx.drawImage(this._sourceSprite, this._config.sourceConfig.leftMargin, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasH.width, this._canvasH.height, 0, 0, this._canvasH.width, this._canvasH.height);\n        // bottom right slice\n        this._canvasI.width = this._config.sourceConfig.rightMargin;\n        this._canvasI.height = this._config.sourceConfig.bottomMargin;\n        const iCtx = this._canvasI.getContext('2d');\n        iCtx === null || iCtx === void 0 ? void 0 : iCtx.drawImage(this._sourceSprite, this._sourceSprite.width - this._config.sourceConfig.rightMargin, this._config.sourceConfig.height - this._config.sourceConfig.bottomMargin, this._canvasI.width, this._canvasI.height, 0, 0, this._canvasI.width, this._canvasI.height);\n    }\n    /**\n     * Clones the 9 slice\n     */\n    clone() {\n        return new NineSlice(this._config);\n    }\n    /**\n     * Returns the number of tiles\n     */\n    _getNumberOfTiles(tileSize, destinationSize, strategy) {\n        switch (strategy) {\n            case NineSliceStretch.Stretch:\n                return 1;\n            case NineSliceStretch.Tile:\n                return Math.ceil(destinationSize / tileSize);\n            case NineSliceStretch.TileFit:\n                return Math.ceil(destinationSize / tileSize);\n        }\n    }\n    /**\n     * Returns the position and size of the tile\n     */\n    _calculateParams(tileNum, numTiles, tileSize, destinationSize, strategy) {\n        switch (strategy) {\n            case NineSliceStretch.Stretch:\n                return {\n                    tempPosition: 0,\n                    tempSize: destinationSize\n                };\n            case NineSliceStretch.Tile:\n                // if last tile, adjust size\n                if (tileNum === numTiles - 1) {\n                    //last tile\n                    return {\n                        tempPosition: tileNum * tileSize,\n                        tempSize: tileSize - (numTiles * tileSize - destinationSize)\n                    };\n                }\n                else {\n                    return {\n                        tempPosition: tileNum * tileSize,\n                        tempSize: tileSize\n                    };\n                }\n            case NineSliceStretch.TileFit:\n                const reducedTileSize = destinationSize / numTiles;\n                const position = tileNum * reducedTileSize;\n                return {\n                    tempPosition: position,\n                    tempSize: reducedTileSize\n                };\n        }\n    }\n}\n\n;// ./Graphics/TiledAnimation.ts\n\n\n\n\n\nclass TiledAnimation extends Animation {\n    constructor(options) {\n        super({\n            ...options,\n            frames: options.animation.frames.slice(),\n            strategy: options.animation.strategy,\n            frameDuration: options.animation.frameDuration,\n            speed: options.animation.speed,\n            reverse: options.animation.isReversed\n        });\n        this._ready = new Future();\n        this.ready = this._ready.promise;\n        this._tiledWidth = 0;\n        this._tiledHeight = 0;\n        this._sourceView = {};\n        this._sourceView = { ...options.sourceView };\n        this._tiledWidth = options.width;\n        this._tiledHeight = options.height;\n        const promises = [];\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                const tiledSprite = new TiledSprite({\n                    image: graphic.image,\n                    width: options.width,\n                    height: options.height,\n                    sourceView: { ...graphic.sourceView },\n                    wrapping: options.wrapping,\n                    filtering: options.filtering\n                });\n                this.frames[i].graphic = tiledSprite;\n                // There is a new calc'd sourceView when ready\n                tiledSprite.ready.then(() => {\n                    tiledSprite.sourceView = { ...tiledSprite.sourceView, ...this._sourceView };\n                });\n                promises.push(tiledSprite.ready);\n            }\n        }\n        Promise.all(promises).then(() => this._ready.resolve());\n    }\n    static fromAnimation(animation, options) {\n        return new TiledAnimation({\n            width: animation.width,\n            height: animation.height,\n            ...options,\n            animation\n        });\n    }\n    _updateSourceView() {\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                graphic.sourceView = { ...graphic.sourceView, ...this._sourceView };\n            }\n        }\n    }\n    get sourceView() {\n        return watch(this._sourceView, () => this._updateSourceView());\n    }\n    set sourceView(sourceView) {\n        this._sourceView = watch(sourceView, () => this._updateSourceView());\n        this._updateSourceView();\n    }\n    _updateWidthHeight() {\n        for (let i = 0; i < this.frames.length; i++) {\n            const graphic = this.frames[i].graphic;\n            if (graphic && graphic instanceof Sprite) {\n                graphic.sourceView.height = this._tiledHeight || graphic.height;\n                graphic.destSize.height = this._tiledHeight || graphic.height;\n                graphic.sourceView.width = this._tiledWidth || graphic.width;\n                graphic.destSize.width = this._tiledWidth || graphic.width;\n            }\n        }\n    }\n    get width() {\n        return this._tiledWidth;\n    }\n    get height() {\n        return this._tiledHeight;\n    }\n    set width(width) {\n        this._tiledWidth = width;\n        this._updateWidthHeight();\n    }\n    set height(height) {\n        this._tiledHeight = height;\n        this._updateWidthHeight();\n    }\n}\n\n;// ./Graphics/index.ts\n// Graphics\n\n\n\n\n\n\n\n// Graphics ECS\n\n\n\n\n\n// Raster graphics\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// TODO DELETEME\n\n\n// Post Processor\n\n\n\n\n\n\n\n// Rendering\n\n\n\n\n\n\n// Debug\n\n// Util\n\n\n\n;// ./Util/Index.ts\n\n\n\n\n\n\n\n;// ./Util/Decorators.ts\n\n\nconst maxMessages = 5;\nconst obsoleteMessage = {};\nconst resetObsoleteCounter = () => {\n    for (const message in obsoleteMessage) {\n        obsoleteMessage[message] = 0;\n    }\n};\nconst logMessage = (message, options) => {\n    const suppressObsoleteMessages = Flags.isEnabled('suppress-obsolete-message');\n    if (obsoleteMessage[message] < maxMessages && !suppressObsoleteMessages) {\n        Logger.getInstance().warn(message);\n        // tslint:disable-next-line: no-console\n        if (console.trace && options.showStackTrace) {\n            // tslint:disable-next-line: no-console\n            console.trace();\n        }\n    }\n    obsoleteMessage[message]++;\n};\n/**\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\n */\nfunction obsolete(options) {\n    options = {\n        message: 'This feature will be removed in future versions of Excalibur.',\n        alternateMethod: null,\n        showStackTrace: false,\n        ...options\n    };\n    return function (target, property, descriptor) {\n        if (descriptor &&\n            !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')) {\n            throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\n        }\n        const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\n        const message = `${methodSignature} is marked obsolete: ${options.message}` +\n            (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\n        if (!obsoleteMessage[message]) {\n            obsoleteMessage[message] = 0;\n        }\n        // If descriptor is null it is a class\n        const method = descriptor ? { ...descriptor } : target;\n        if (!descriptor) {\n            // with es2015 classes we need to change our decoration tactic\n            class DecoratedClass extends method {\n                constructor(...args) {\n                    logMessage(message, options);\n                    super(...args);\n                }\n            }\n            return DecoratedClass;\n        }\n        if (descriptor && descriptor.value) {\n            method.value = function () {\n                logMessage(message, options);\n                return descriptor.value.apply(this, arguments);\n            };\n            return method;\n        }\n        if (descriptor && descriptor.get) {\n            method.get = function () {\n                logMessage(message, options);\n                return descriptor.get.apply(this, arguments);\n            };\n        }\n        if (descriptor && descriptor.set) {\n            method.set = function () {\n                logMessage(message, options);\n                return descriptor.set.apply(this, arguments);\n            };\n        }\n        return method;\n    };\n}\n\n;// ./Util/Semaphore.ts\n\nclass AsyncWaitQueue {\n    constructor() {\n        // Code from StephenCleary https://gist.github.com/StephenCleary/ba50b2da419c03b9cba1d20cb4654d5e\n        this._queue = [];\n    }\n    get length() {\n        return this._queue.length;\n    }\n    enqueue() {\n        const future = new Future();\n        this._queue.push(future);\n        return future.promise;\n    }\n    dequeue(value) {\n        const future = this._queue.shift();\n        future.resolve(value);\n    }\n}\n/**\n * Semaphore allows you to limit the amount of async calls happening between `enter()` and `exit()`\n *\n * This can be useful when limiting the number of http calls, browser api calls, etc either for performance or to work\n * around browser limitations like max Image.decode() calls in chromium being 256.\n */\nclass Semaphore {\n    constructor(_count) {\n        this._count = _count;\n        this._waitQueue = new AsyncWaitQueue();\n    }\n    get count() {\n        return this._count;\n    }\n    get waiting() {\n        return this._waitQueue.length;\n    }\n    // eslint-disable-next-line require-await\n    async enter() {\n        if (this._count !== 0) {\n            this._count--;\n            return Promise.resolve();\n        }\n        return this._waitQueue.enqueue();\n    }\n    exit(count = 1) {\n        if (count === 0) {\n            return;\n        }\n        while (count !== 0 && this._waitQueue.length !== 0) {\n            this._waitQueue.dequeue(null);\n            count--;\n        }\n        this._count += count;\n    }\n}\n\n;// ./index.ts\n/**\n * The current Excalibur version string\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\n */\nconst EX_VERSION = \"0.30.2\";\n\npolyfill();\n// This file is used as the bundle entry point and exports everything\n// that will be exposed as the `ex` global variable.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Events namespace\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Util namespaces\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ex.Deprecated\n// import * as deprecated from './Deprecated';\n// export { deprecated as Deprecated };\n// export * from './Deprecated';\n\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});\n//# sourceMappingURL=excalibur.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nexports.Config = {\n    PlayerSpeed: 16 * 2, // pixels/sec\n    PlayerFrameSpeed: 200, // ms\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ex = __importStar(require(\"excalibur\"));\nconst resources_1 = require(\"./resources\");\nconst game = new ex.Engine({\n    width: 800,\n    height: 600,\n    canvasElementId: 'game',\n    pixelArt: true,\n    pixelRatio: 2\n});\ngame.start(resources_1.loader).then(() => {\n    resources_1.Resources.TiledMap.addToScene(game.currentScene);\n});\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || (function () {\n    var ownKeys = function(o) {\n        ownKeys = Object.getOwnPropertyNames || function (o) {\n            var ar = [];\n            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n            return ar;\n        };\n        return ownKeys(o);\n    };\n    return function (mod) {\n        if (mod && mod.__esModule) return mod;\n        var result = {};\n        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n        __setModuleDefault(result, mod);\n        return result;\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Player = void 0;\nconst ex = __importStar(require(\"excalibur\"));\nconst resources_1 = require(\"./resources\");\nconst config_1 = require(\"./config\");\nclass Player extends ex.Actor {\n    constructor(pos) {\n        super({\n            pos,\n            width: 16,\n            height: 16,\n            collisionType: ex.CollisionType.Active\n        });\n    }\n    onInitialize(engine) {\n        const playerSpriteSheet = ex.SpriteSheet.fromImageSource({\n            image: resources_1.Resources.HeroSpriteSheetPng,\n            grid: {\n                spriteWidth: 16,\n                spriteHeight: 16,\n                rows: 8,\n                columns: 8\n            }\n        });\n        const leftIdle = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 1), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 1), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 1), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 1), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('left-idle', leftIdle);\n        const rightIdle = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 2), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 2), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 2), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 2), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('right-idle', rightIdle);\n        const upIdle = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 3), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 3), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 3), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 3), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('up-idle', upIdle);\n        const downIdle = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 0), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 0), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 0), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 0), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('down-idle', downIdle);\n        const leftWalk = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 5), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 5), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 5), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 5), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('left-walk', leftWalk);\n        const rightWalk = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 6), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 6), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 6), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 6), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('right-walk', rightWalk);\n        const upWalk = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 7), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 7), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 7), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 7), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('up-walk', upWalk);\n        const downWalk = new ex.Animation({\n            frames: [\n                { graphic: playerSpriteSheet.getSprite(0, 4), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(1, 4), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(2, 4), duration: config_1.Config.PlayerFrameSpeed },\n                { graphic: playerSpriteSheet.getSprite(3, 4), duration: config_1.Config.PlayerFrameSpeed },\n            ]\n        });\n        this.graphics.add('down-walk', downWalk);\n    }\n    onPreUpdate(engine, elapsedMs) {\n        this.vel = ex.Vector.Zero;\n        this.graphics.use('down-idle');\n        if (engine.input.keyboard.isHeld(ex.Keys.ArrowRight)) {\n            this.vel = ex.vec(config_1.Config.PlayerSpeed, 0);\n            this.graphics.use('right-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Keys.ArrowLeft)) {\n            this.vel = ex.vec(-config_1.Config.PlayerSpeed, 0);\n            this.graphics.use('left-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Keys.ArrowUp)) {\n            this.vel = ex.vec(0, -config_1.Config.PlayerSpeed);\n            this.graphics.use('up-walk');\n        }\n        if (engine.input.keyboard.isHeld(ex.Keys.ArrowDown)) {\n            this.vel = ex.vec(0, config_1.Config.PlayerSpeed);\n            this.graphics.use('down-walk');\n        }\n    }\n}\nexports.Player = Player;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loader = exports.Resources = void 0;\nconst excalibur_1 = require(\"excalibur\");\nconst plugin_tiled_1 = require(\"@excaliburjs/plugin-tiled\");\nconst player_1 = require(\"./player\");\nexports.Resources = {\n    HeroSpriteSheetPng: new excalibur_1.ImageSource('./img/Solaria Demo Pack Update 03/Solaria Demo Pack Update 03/16x16/Sprites/Hero 01.png', false, excalibur_1.ImageFiltering.Pixel),\n    TiledMap: new plugin_tiled_1.TiledResource('./res/first-level.tmx', {\n        entityClassNameFactories: {\n            player: (props) => {\n                const player = new player_1.Player(props.worldPos);\n                player.z = 100;\n                return player;\n            }\n        },\n    })\n};\nexports.loader = new excalibur_1.Loader();\nfor (let resource of Object.values(exports.Resources)) {\n    exports.loader.addResource(resource);\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(927);\n"],"names":["t","self","e","A","i","assign","exports","a","s","r","n","o","Object","prototype","toString","l","g","d","h","c","this","options","level","method","chunkSize","windowBits","memLevel","strategy","to","raw","gzip","err","msg","ended","chunks","strm","avail_out","deflateInit2","Error","header","deflateSetHeader","dictionary","I","string2buf","call","Uint8Array","deflateSetDictionary","_dict_set","push","result","input","next_in","avail_in","length","output","Buf8","next_out","deflate","onEnd","onData","buf2binstring","shrinkBuf","deflateEnd","join","flattenChunks","Deflate","deflateRaw","inflateInit2","Z_OK","inflateGetHeader","inflateSetDictionary","u","Z_FINISH","Z_NO_FLUSH","binstring2buf","inflate","Z_NEED_DICT","Z_BUF_ERROR","Z_STREAM_END","Z_SYNC_FLUSH","utf8border","buf2string","arraySet","inflateEnd","Inflate","inflateRaw","ungzip","Uint16Array","Int32Array","hasOwnProperty","Array","slice","arguments","shift","TypeError","subarray","set","concat","apply","setTyped","Buf16","Buf32","String","fromCharCode","charCodeAt","Z_PARTIAL_FLUSH","Z_FULL_FLUSH","Z_BLOCK","Z_TREES","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","B","p","f","Q","E","m","y","w","_","v","b","k","D","G","T","N","R","state","pending","pending_buf","pending_out","total_out","M","_tr_flush_block","block_start","strstart","U","O","q","max_chain_length","prev_length","nice_match","w_size","window","w_mask","prev","good_match","lookahead","match_start","j","window_size","hash_size","head","wrap","adler","total_in","insert","ins_h","hash_shift","hash_mask","J","match_length","_tr_tally","max_lazy_match","last_lit","Z","prev_match","match_available","H","good_length","max_lazy","nice_length","max_chain","func","Y","status","pending_buf_size","gzhead","gzindex","last_flush","w_bits","hash_bits","dyn_ltree","dyn_dtree","bl_tree","l_desc","d_desc","bl_desc","bl_count","heap","heap_len","heap_max","depth","l_buf","lit_bufsize","d_buf","opt_len","static_len","matches","bi_buf","bi_valid","K","data_type","_tr_init","P","z","deflateInit","deflateReset","deflateResetKeep","text","hcrc","extra","name","comment","time","os","_tr_align","_tr_stored_block","deflateInfo","xflags","extra_len","done","C","dmax","wsize","whave","wnext","hold","bits","lencode","distcode","lenbits","distbits","mode","sane","last","havedict","flags","check","total","wbits","offset","ncode","nlen","ndist","have","next","lens","work","lendyn","distdyn","back","was","inflateReset","inflateReset2","inflateResetKeep","inflateInit","x","L","S","F","inflateInfo","static_tree","extra_bits","extra_base","elems","max_length","has_stree","dyn_tree","max_code","stat_desc","V","W","code","defineProperty","enumerable","get","Symbol","toStringTag","value","Decoder","vA","Ellipse","WA","ExcaliburTiledProperties","bA","FLIPPED_DIAGONALLY_FLAG","GA","FLIPPED_HORIZONTALLY_FLAG","SA","FLIPPED_VERTICALLY_FLAG","FA","FetchLoader","kA","InsertedTile","PA","LoaderCache","UA","PluginObject","YA","Point","zA","Polygon","$A","Polyline","ei","Rectangle","XA","Template","ii","TemplateObject","KA","TemplateResource","ni","Text","VA","Tile","ai","TiledDataComponent","oi","TiledLayerDataComponent","li","TiledMap","cA","TiledParser","pA","TiledResource","wi","TiledTemplate","hA","TiledText","Xt","TiledTile","sA","TiledTileLayer","Kt","TiledTileLayerInfinite","Yt","TiledTileset","dA","TiledTilesetFile","lA","Tileset","si","TilesetResource","ri","byClassCaseInsensitive","xA","byNameCaseInsensitive","DA","byPropertyCaseInsensitive","LA","filenameFromPath","jA","getCanonicalGid","MA","isCSV","zt","isFlippedDiagonally","RA","isFlippedHorizontally","TA","isFlippedVertically","NA","isInfiniteLayer","IA","isTiledTilesetCollectionOfImages","oA","isTiledTilesetEmbedded","uA","isTiledTilesetExternal","BA","isTiledTilesetSingleImage","nA","mapPath","JA","mapProps","qA","needsDecoding","Pt","parseObject","ti","parseObjects","Ai","pathInMap","ZA","pathRelativeToBase","HA","assertEqual","assertIs","assertNever","arrayToEnum","getValidEnumValues","objectKeys","filter","objectValues","map","keys","find","isInteger","Number","isFinite","Math","floor","joinValues","jsonStringifyReplacer","mergeShapes","undefined","string","isNaN","nan","number","boolean","function","bigint","symbol","isArray","array","null","then","catch","promise","Map","Set","Date","date","object","unknown","errors","issues","constructor","super","addIssue","addIssues","setPrototypeOf","__proto__","format","message","_errors","unionErrors","returnTypeError","argumentsError","path","assert","JSON","stringify","isEmpty","flatten","formErrors","fieldErrors","create","invalid_type","received","expected","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","validation","includes","position","startsWith","endsWith","too_small","type","exact","inclusive","minimum","too_big","maximum","custom","invalid_intersection_types","not_multiple_of","multipleOf","not_finite","defaultError","data","errorMaps","issueData","reverse","common","contextualErrorMap","schemaErrorMap","dirty","abort","mergeArray","mergeObjectAsync","key","mergeObjectSync","alwaysSet","freeze","Promise","has","SuppressedError","errToObj","_cachedPath","parent","_path","_key","success","error","_error","errorMap","invalid_type_error","required_error","description","_def","_getType","_getOrReturnCtx","parsedType","_processInputParams","ctx","_parseSync","_parse","_parseAsync","resolve","parse","safeParse","async","toLowerCase","parseAsync","safeParseAsync","refine","_refinement","refinement","Fe","schema","typeName","He","ZodEffects","effect","superRefine","spa","bind","optional","nullable","nullish","or","and","transform","brand","default","describe","pipe","readonly","isNullable","isOptional","version","vendor","validate","Ge","Te","Ie","Se","Ce","Ee","Ne","innerType","defaultValue","ZodDefault","Oe","ZodBranded","Re","catchValue","ZodCatch","qe","je","RegExp","precision","X","local","$","test","split","replace","padEnd","atob","typ","alg","ee","te","coerce","checks","kind","URL","regex","lastIndex","trim","toUpperCase","_regex","_addCheck","email","url","emoji","uuid","nanoid","cuid","cuid2","ulid","base64","base64url","jwt","ip","cidr","datetime","duration","min","max","nonempty","isDatetime","isDate","isTime","isDuration","isEmail","isURL","isEmoji","isUUID","isNANOID","isCUID","isCUID2","isULID","isIP","isCIDR","isBase64","isBase64url","minLength","maxLength","Ae","parseInt","toFixed","pow","ZodString","ie","gte","lte","step","setLimit","gt","lt","int","positive","negative","nonpositive","nonnegative","finite","safe","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","minValue","maxValue","isInt","ZodNumber","ae","BigInt","_getInvalidInput","ZodBigInt","se","Boolean","ZodBoolean","re","getTime","minDate","maxDate","ZodDate","ne","ZodSymbol","oe","ZodUndefined","le","ZodNull","ge","_any","ZodAny","de","_unknown","ZodUnknown","he","never","ZodNever","ce","void","ZodVoid","exactLength","all","element","ue","Be","shape","unwrap","me","items","ZodArray","_cached","nonstrict","passthrough","augment","extend","_getCached","catchall","unknownKeys","strict","strip","merge","ZodObject","setKey","pick","forEach","omit","deepPartial","partial","required","keyof","De","strictCreate","lazycreate","ZodUnion","pe","be","ke","xe","Le","enum","fe","discriminator","optionsMap","from","ZodDiscriminatedUnion","Qe","valid","indexOf","left","right","ZodIntersection","rest","ZodTuple","ye","keySchema","keyType","valueSchema","valueType","ZodRecord","we","entries","ZodMap","_e","minSize","size","maxSize","add","values","ZodSet","ve","implement","returns","args","Reflect","parameters","returnType","strictImplement","ZodFunction","getter","ZodLazy","ZodEnum","ZodLiteral","Values","Enum","extract","exclude","WeakMap","ZodNativeEnum","ZodPromise","sourceType","fatal","createWithPreprocess","ZodOptional","ZodNullable","removeDefault","removeCatch","Me","ZodNaN","Ue","in","out","ZodPipeline","Je","ZodReadonly","Ze","Ye","Ke","Pe","ze","Ve","We","Xe","$e","et","tt","At","it","at","st","rt","nt","ot","dt","ht","ct","It","ut","Bt","Ct","pt","ft","Qt","Et","mt","yt","wt","_t","vt","bt","kt","defaultErrorMap","setErrorMap","getErrorMap","makeIssue","EMPTY_PATH","addIssueToContext","ParseStatus","INVALID","DIRTY","OK","isAborted","isDirty","isValid","isAsync","util","objectUtil","ZodParsedType","getParsedType","ZodType","datetimeRegex","ZodTransformer","BRAND","Schema","ZodSchema","late","ZodFirstPartyTypeKind","any","discriminatedUnion","instanceof","intersection","lazy","literal","nativeEnum","oboolean","onumber","ostring","pipeline","preprocess","record","strictObject","transformer","tuple","union","NEVER","ZodIssueCode","quotelessJson","ZodError","Dt","xt","Lt","St","Ft","Gt","Tt","Nt","Rt","class","height","width","id","opacity","properties","visible","tintcolor","parallaxx","parallaxy","offsetx","offsety","Mt","encoding","Ut","compression","Ot","qt","jt","Jt","Zt","Ht","startx","starty","Vt","Wt","color","fontfamily","pixelsize","halign","valign","$t","rotation","gid","point","ellipse","polyline","polygon","template","eA","tileid","tA","draworder","objects","AA","image","repeatx","repeaty","transparentcolor","iA","aA","animation","objectgroup","probability","imageheight","imagewidth","rA","firstgid","objectalignment","columns","tileheight","tilewidth","tilecount","grid","orientation","tileoffset","spacing","margin","tiles","tiledversion","gA","source","tileset","compressionlevel","infinite","nextlayerid","nextobjectid","parallaxoriginx","parallaxoriginy","hexsidelength","staggeraxis","staggerindex","renderorder","backgroundcolor","layers","tilesets","CA","combine","_largestBounds","_coerceNumber","_coerceBoolean","_coerceType","_parsePropertiesNode","children","getAttribute","innerHTML","_parseAttributes","attributes","_parseToDocument","DOMParser","parseFromString","JSDOM","contentType","document","console","querySelector","textContent","parseTileset","tagName","parseTileLayer","parseObjectGroup","parseImageLayer","parseExternalTemplate","parseExternalTileset","fA","QA","EA","mA","yA","env","emscripten_notify_memory_growth","memory","buffer","wA","init","fetch","_A","arrayBuffer","WebAssembly","instantiate","_init","Buffer","instance","decode","byteLength","malloc","ZSTD_findDecompressedSize","ZSTD_decompress","free","charAt","TileData","Tiled","ZIndex","Camera","Zoom","Animation","Strategy","Layer","Solid","Collision","Type","json","toLocaleLowerCase","localeCompare","_loaded","cache","getOrAdd","load","allSettled","reason","OA","match","pop","tiledObject","tiledTemplate","getTileByGid","font","Font","family","Color","fromHex","Black","unit","FontUnit","Px","textAlign","_textAlignFromTiled","baseAlign","_textBaselineFromTiled","quality","maxWidth","BaseAlign","Bottom","Middle","Top","TextAlign","Left","Center","Right","Start","anchor","points","localPoints","vec","textQuality","getTilesetForTileGid","templates","templatePath","Vector","Zero","Half","colliders","tiledTile","firstGid","tileCount","tileWidth","tileHeight","tileOffset","tiledTileset","tileToImage","horizontalFlipTransform","AffineMatrix","identity","translate","scale","verticalFlipTransform","diagonalFlipTransform","rotate","PI","spritesheet","SpriteSheet","fromImageSource","rows","spriteWidth","spriteHeight","originOffset","toSprite","sprites","getTilesetAlignmentAnchor","getTilesByClassName","getTilesByProperty","getSpriteForGid","clone","_isometricTiledCoordToWorld","getCollidersForGid","orientationOverride","One","_applyFlipsToPoints","Shape","isConvex","triangulate","BoundingBox","fromDimension","getPoints","Circle","multiply","getAnimationForGid","graphic","frames","AnimationStrategy","Loop","headless","fileLoader","parser","pathMap","imageLoader","ImageSource","isLoaded","Component","tiledTileLayer","gi","resource","order","logger","Logger","getInstance","_gidToTileInfo","getTilesByGid","isometricMap","exTile","getTileByPoint","warn","_recordTileData","updateTile","useExcaliburWiring","solid","IsometricEntityComponent","elevation","tint","addGraphic","pos","addCollider","clearGraphics","End","Freeze","PingPong","Transparent","isometricTiledCoordToWorld","IsometricMap","addComponent","ParallaxComponent","di","tilemap","getTileByCoordinate","getTile","TileMap","TransformComponent","GraphicsComponent","hi","tiledObjectLayer","entities","_objectToEntity","_entityToObject","_logLoadedWarning","getObjectsByName","getEntitiesByName","getEntityByObject","getObjectByEntity","getObjectsByProperty","getEntitiesByProperty","getObjectsByClassName","getEntitiesByClassName","getTemplates","runFactory","factories","worldPos","layer","_recordObjectEntityMapping","_actorFromObject","White","destSize","graphics","use","sub","collider","useCompositeCollider","Box","useCircleCollider","Actor","toRadians","CollisionType","Active","body","collisionType","Fixed","Passive","PreventCollision","ci","Ii","ui","Bi","Ci","pi","Qi","Ei","yi","tiledImageLayer","imageActor","mapFormat","startZIndex","useMapBackgroundColor","useTilemapCameraStrategy","_imageLoader","_tilesetLoader","_templateLoader","mapFormatOverride","entityClassNameFactories","registerEntityFactory","getObjectLayers","unregisterEntityFactory","delete","getTilesetByName","getTilesetByClassName","getTilesetByProperty","getTileMetadataByClassName","getTileMetadataByProperty","getTileLayers","getIsoTileLayers","getTilesByPoint","getImageLayers","getLayersByName","getLayersByClassName","getLayersByProperty","_parseMap","mi","fi","supportedTiledVersion","_collectTilesets","_collectTemplates","findIndex","addToScene","camera","zoom","limitCameraBounds","backgroundColor","module","factory","__webpack_modules__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__","_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__","___CSS_LOADER_EXPORT___","_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default","__WEBPACK_DEFAULT_EXPORT__","cssWithMappingToString","list","item","content","needLayer","modules","media","dedupe","supports","alreadyImportedModules","_k","cssMapping","btoa","unescape","encodeURIComponent","sourceMapping","__webpack_module_cache__","moduleId","cachedModule","__esModule","definition","obj","prop","ActionCompleteEvent","ActionContext","ActionQueue","ActionSequence","ActionStartEvent","ActionsComponent","ActionsSystem","ActivateEvent","ActorEvents","AddEvent","AddedComponent","AnimationDirection","AnimationEvents","ArcadeSolver","AudioContextFactory","Axes","Axis","BezierCurve","Blink","BodyComponent","BrowserComponent","BrowserEvents","Buttons","CameraEvents","Canvas","CircleCollider","Clock","ClosestLineJumpTable","Collider","ColliderComponent","CollisionContact","CollisionEndEvent","CollisionGroup","CollisionGroupManager","CollisionJumpTable","CollisionPostSolveEvent","CollisionPreSolveEvent","CollisionStartEvent","CollisionSystem","ColorBlindFlags","ColorBlindnessMode","ColorBlindnessPostProcessor","CompositeCollider","ConsoleAppender","ContactConstraintPoint","ContactEndEvent","ContactSolveBias","ContactStartEvent","CoordPlane","CrossFade","CurveBy","CurveTo","DeactivateEvent","Debug","DebugConfig","DebugGraphicsComponent","DebugSystem","DebugText","DefaultAntialiasOptions","DefaultGarbageCollectionOptions","DefaultLoader","DefaultPixelArtOptions","DegreeOfFreedom","Delay","Detector","Die","Direction","Director","DirectorEvents","DisplayMode","DynamicTree","DynamicTreeCollisionProcessor","EX_VERSION","EaseBy","EaseTo","EasingFunctions","EdgeCollider","ElasticToActorStrategy","EmitterType","Engine","EngineEvents","EnterTriggerEvent","EnterViewPortEvent","Entity","EntityEvents","EntityManager","EventEmitter","EventTypes","Events","ExResponse","ExcaliburGraphicsContext2DCanvas","ExcaliburGraphicsContextWebGL","ExitTriggerEvent","ExitViewPortEvent","Fade","FadeInOut","Flags","Flash","Follow","FontCache","FontSource","FontStyle","FpsSampler","FrameStats","Future","GameEvent","GameStartEvent","GameStopEvent","Gamepad","GamepadAxisEvent","GamepadButtonEvent","GamepadConnectEvent","GamepadDisconnectEvent","Gamepads","GarbageCollector","Gif","GifParser","GlobalCoordinates","GpuParticleEmitter","GpuParticleRenderer","Graphic","GraphicsGroup","GraphicsSystem","HashColliderProxy","HashGridCell","HashGridProxy","HiddenEvent","HorizontalFirst","ImageFiltering","ImageSourceAttributeConstants","ImageWrapping","InitializeEvent","InputHost","InputMapper","IsometricEntitySystem","IsometricTile","KeyEvent","Keyboard","Keys","KillEvent","Label","LimitCameraBoundsStrategy","Line","LineSegment","Loader","LoaderEvents","LockCameraToActorAxisStrategy","LockCameraToActorStrategy","LogLevel","Material","Matrix","MatrixLocations","MediaEvent","Meet","MotionComponent","MotionSystem","MoveBy","MoveByWithOptions","MoveTo","MoveToWithOptions","NativePointerButton","NativeSoundEvent","NativeSoundProcessedEvent","NineSlice","NineSliceStretch","None","Observable","OffscreenSystem","Pair","ParallelActions","Particle","ParticleEmitter","ParticleRenderer","ParticleTransform","PhysicsStats","PhysicsWorld","PointerAbstraction","PointerButton","PointerComponent","PointerEvent","PointerEventReceiver","PointerScope","PointerSystem","PointerType","PolygonCollider","Pool","PostCollisionEvent","PostDebugDrawEvent","PostDrawEvent","PostFrameEvent","PostKillEvent","PostTransformDrawEvent","PostUpdateEvent","PreCollisionEvent","PreDebugDrawEvent","PreDrawEvent","PreFrameEvent","PreKillEvent","PreLoadEvent","PreTransformDrawEvent","PreUpdateEvent","Projection","QuadIndexBuffer","QuadTree","Query","QueryManager","RadiusAroundActorStrategy","Random","Raster","Ray","RealisticSolver","RemoveEvent","RemovedComponent","Repeat","RepeatForever","Resolution","Resource","ResourceEvents","RotateBy","RotateByWithOptions","RotateTo","RotateToWithOptions","RotationType","ScaleBy","ScaleByWithOptions","ScaleTo","ScaleToWithOptions","Scene","SceneEvents","Screen","ScreenAppender","ScreenElement","ScreenEvents","ScreenShader","ScrollPreventionMode","Semaphore","SeparatingAxis","SeparationInfo","Shader","Side","Slide","SolverStrategy","Sound","SoundEvents","SparseHashGrid","SparseHashGridCollisionProcessor","SpatialPartitionStrategy","Sprite","SpriteFont","StandardClock","StateMachine","StrategyContainer","Stream","System","SystemManager","SystemPriority","SystemType","TagQuery","TestClock","TextureLoader","TileMapEvents","TiledAnimation","TiledSprite","Timer","Toaster","Transform","Transition","TreeNode","Trigger","TriggerEvents","TwoPI","Util","VectorView","VertexBuffer","VertexLayout","VerticalFirst","VisibleEvent","WebAudio","WebAudioInstance","WheelDeltaMode","WheelEvent","World","approximatelyEqual","canonicalizeAngle","clamp","coroutine","createId","frac","getDefaultPhysicsConfig","hasGraphicsTick","hasOnAdd","hasOnInitialize","hasOnPostUpdate","hasOnPreUpdate","hasOnRemove","hasPostDraw","hasPreDraw","has_add","has_initialize","has_postupdate","has_preupdate","has_remove","inverseLerp","inverseLerpVector","isActor","isAddedComponent","isComponentCtor","isLoaderConstructor","isMoveByOptions","isMoveToOptions","isRemovedComponent","isRotateByOptions","isRotateToOptions","isScaleByOptions","isScaleToOptions","isSceneConstructor","isScreenElement","isSystemConstructor","lerp","lerpAngle","lerpVector","maxMessages","nextActionId","obsolete","parseImageFiltering","parseImageWrapping","pixelSnapEpsilon","randomInRange","randomIntInRange","range","remap","remapVector","resetObsoleteCounter","sign","toDegrees","webgl","webgl_util_namespaceObject","getAttributeComponentSize","getAttributePointerType","getGLTypeFromSource","getGlTypeSizeBytes","getMaxShaderComplexity","isAttributeInSource","DrawUtil_namespaceObject","circle","line","roundRect","vector","Events_namespaceObject","Util_Index_namespaceObject","polyfill","audioContext","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setInterval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","AudioContext","webkitAudioContext","replaceMe","decodeAudioData","reject","mozAudioContext","msAudioContext","oAudioContext","devicePixelRatio","requestIdleCallback","cb","start","now","setTimeout","didTimeout","timeRemaining","cancelIdleCallback","clearTimeout","DrawUtil","addItemToArray","contains","delay","fail","getPosition","isObject","mergeDeep","removeItemFromArray","useCanvasGraphicsContext","enable","useLegacyImageRenderer","_FROZEN","_reset","_FLAGS","flagName","disable","isEnabled","show","_isCompleted","_resolver","_rejecter","isCompleted","_paused","_empty","_listeners","_listenersOnce","_pipes","clear","on","eventName","handler","_a","close","off","once","_b","newListeners","newOnceListeners","emit","event","listeners","onces","emitter","splice","unpipe","pause","unpause","BITMASK32","seed","_lowerMask","_upperMask","_w","_n","_m","_u","_s","_c","_l","_f","_mt","_index","_twist","mag01","nextInt","floating","integer","bool","likelihood","pickOne","pickSet","numPicks","allowDuplicates","_pickSetWithDuplicates","_pickSetWithoutDuplicates","currentPick","tempArray","index","shuffle","swap","randomIndex","d4","d6","d8","d10","d12","d20","ceil","val","val1","val2","tolerance","abs","angle","tmpAngle","radians","degrees","_x","random","round","Up","Down","fromAngle","cos","sin","Infinity","distance","vec1","vec2","sqrt","_y","setTo","equals","EQUALS_EPSILON","deltaX","deltaY","squareDistance","clampMagnitude","magnitude","newSize","newLength","normalize","newMagnitude","average","sizeOrScale","dest","addEqual","subEqual","scaleEqual","dot","cross","num","perpendicular","normal","negate","toAngle","atan2","angleBetween","rotationType","startAngleRadians","endAngleRadians","rotationClockwise","rotationAntiClockwise","ShortestPath","LongestPath","Clockwise","CounterClockwise","sinAngle","cosAngle","fixed","fromRGB","fromRGBString","parseFloat","hex","fromHSL","HSLColor","toRGBA","lighten","factor","temp","fromRGBA","darken","saturate","desaturate","newR","newG","newB","newA","screen","color1","invert","color2","equal","toHSLA","toHex","_componentToHex","hexRepresentation","fillStyle","Gray","LightGray","DarkGray","Yellow","Orange","Red","Vermilion","Rose","Pink","Magenta","Violet","Purple","Blue","Azure","Cyan","Viridian","Teal","Green","Chartreuse","ExcaliburBlue","Brown","hue2rgb","_appenders","defaultLevel","Info","_logOnceSet","_INSTANCE","addAppender","appender","clearAppenders","_log","len","log","_logOnce","serialized","debug","debugOnce","info","infoOnce","Warn","warnOnce","errorOnce","Fatal","fatalOnce","consoleArgs","unshift","_messages","_pos","_color","_options","canvas","createElement","_ctx","getContext","style","zIndex","appendChild","_positionScreenAppenderCanvas","engine","events","_d","resolution","pagePos","screenToPageCoordinates","top","xPos","clearRect","fillText","getOpposite","side","fromDirection","direction","leftOrOptions","bottom","_points","reset","getSideFromIntersection","fromPoints","minX","minY","maxX","maxY","hasZeroDimensions","center","topLeft","bottomRight","topRight","bottomLeft","shifted","matrix","xa1","xa2","xb1","xb2","ya1","ya2","yb1","yb2","matrixPos","getPerimeter","_left","_right","_top","_bottom","rayCast","ray","farClipDistance","tMin","tMax","xInv","dir","MAX_VALUE","yInv","tx1","tx2","ty1","ty2","rayCastTime","other","compositeBB","dimensions","overlaps","epsilon","totalBoundingBox","intersect","overlapX","overlapY","intersectWithSide","bb","draw","ex","drawRect","el","getBoundingClientRect","rect","scrollX","scrollY","milliseconds","clock","future","schedule","newObj","target","sources","Float32Array","_scaleX","_scaleSignX","_scaleY","_scaleSignY","ortho","near","far","mat","toDOMMatrix","DOMMatrix","fromFloat32Array","translation","sx","sy","vectorOrMatrix","resultX","resultY","a11","a21","a31","a41","a12","a22","a32","a42","a13","a23","a33","a43","a14","a24","a34","a44","b11","b21","b31","b41","b12","b22","b32","b42","b13","b23","b33","b43","b14","b24","b34","b44","getScale","setPosition","sine","cosine","setRotation","currentScale","getRotation","getScaleY","getScaleX","xscale","yscale","setScaleX","setScaleY","setScale","getBasisDeterminant","getAffineInverse","inverseDet","tx","ty","isIdentity","Float64Array","_scale","determinant","inverse","det","signX","signY","multiplyQuadInPlace","quad","resultTopLeftX","resultTopLeftY","resultTopRightX","resultTopRightY","resultBottomLeftX","resultBottomLeftY","resultBottomRightX","resultBottomRightY","to4x4","xScaleSq","yScaleSq","RentalPool","builder","cleaner","preAllocate","_pool","_size","grow","amount","rent","clean","TransformStack","_transforms","_currentTransform","save","restore","return","current","ContextState","material","StateStack","_states","_cloneState","Complete","Load","LoadStart","Progress","responseType","bustCache","_cacheBust","uri","request","XMLHttpRequest","open","addEventListener","response","statusText","Blob","errorText","send","watch","change","__isProxy","Proxy","createHandler","typeType","isStale","_transformStale","flipHorizontal","_flipHorizontal","flipVertical","_flipVertical","_rotation","origin","_origin","_g","_ID","showDebug","_width","_height","cloneGraphicOptions","localBounds","_preDraw","_drawImage","_postDraw","_rotate","_flip","scaleDirX","scaleDirY","_logger","_dirty","sourceView","_updateSpriteDimensions","ready","newWidth","newHeight","nativeWidth","nativeHeight","drawImage","Pixel","Blended","Clamp","Mirror","gl","_garbageCollector","_textureMap","_collect","_gl","dataset","originalSrc","_LOGGER","_MAX_TEXTURE_SIZE","getParameter","MAX_TEXTURE_SIZE","collectionInterval","garbageCollector","registerCollector","dispose","forceUpdate","filtering","wrapping","wrappingConfig","tex","bindTexture","TEXTURE_2D","texImage2D","RGBA","UNSIGNED_BYTE","touch","createTexture","checkImageSizeSupportedAndLog","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","xWrap","yWrap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","REPEAT","MIRRORED_REPEAT","TEXTURE_WRAP_T","filterMode","TEXTURE_MIN_FILTER","NEAREST","LINEAR","TEXTURE_MAG_FILTER","addCollectableResource","texture","deleteTexture","Filtering","WrappingX","WrappingY","naturalWidth","naturalHeight","_src","src","pathOrBase64","bustCacheOrOptions","Image","_readyFuture","_resource","fromHtmlImageElement","imageSource","setAttribute","fromHtmlCanvasElement","toBlob","blob","createObjectURL","onload","revokeObjectURL","fromSvgString","svgSource","loadedFuture","unload","_text","alphabet","shadow","caseInsensitive","lineHeight","spriteSheet","_getCharacterSprites","results","textToRender","letterIndex","letter","spriteIndex","letterSprite","measureText","lines","_getLinesFromText","maxWidthLine","reduce","sprite","xCursor","yCursor","render","bounds","_cachedText","_cachedRenderWidth","_cachedLines","newLine","_ready","_applyTiling","fromSprite","spriteCanvas","tiledImageSource","getSprite","_h","_j","spriteWithOptions","getTiledSprite","fromImageSourceWithSourceViews","sourceViews","cols","offsetDefaults","marginDefaults","fontSheet","_imageSource","_spriteSheet","_spriteFont","write","RenderSource","_texture","activeTexture","TEXTURE0","RenderTarget","antialias","samples","transparency","MAX_SAMPLES","drawingBufferFormat","bufferFormat","RGBA8","RGB8","_setupRenderBuffer","_setupFramebuffer","setResolution","_frameTexture","_renderBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisample","renderBuffer","renderFrameBuffer","_renderFrameBuffer","frameBuffer","_frameBuffer","frameTexture","createRenderbuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferRenderbuffer","COLOR_ATTACHMENT0","attachmentPoint","framebufferTexture2D","toRenderSource","blitRenderBufferToFrameBuffer","blitToScreen","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","clearBufferfv","COLOR","blitFramebuffer","COLOR_BUFFER_BIT","copyToTexture","copyTexImage2D","viewport","INT","UNSIGNED_INT","FLOAT","SHORT","UNSIGNED_SHORT","BYTE","variable","exec","groups","BOOL","LOW_FLOAT","HIGH_FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","numIfs","assembleTestShader","testComplexity","canCompile","shader","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","compiled","_compiled","uniforms","vertexSource","fragmentSource","onPreLink","onPostCompile","_onPreLink","_onPostCompile","deleteProgram","program","useProgram","_ACTIVE_SHADER_INSTANCE","isCurrentlyBound","compile","vertexShader","_compileShader","VERTEX_SHADER","fragmentShader","_createProgram","getAttributes","attribute","getUniforms","uniform","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","uniformLocation","getUniformLocation","glType","location","attributeCount","ACTIVE_ATTRIBUTES","getActiveAttrib","attributeLocation","getAttribLocation","normalized","setTexture","slotNumber","setUniformInt","setUniform","trySetUniformInt","trySetUniform","setUniformIntArray","trySetUniformIntArray","setUniformBoolean","trySetUniformBoolean","setUniformFloat","trySetUniformFloat","setUniformFloatArray","trySetUniformFloatArray","setUniformFloatVector","trySetUniformFloatVector","setUniformFloatColor","trySetUniformFloatColor","setUniformMatrix","setUniformAffineMatrix","trySetUniformMatrix","uniformType","createProgram","attachShader","linkProgram","LINK_STATUS","getProgramInfoLog","errorInfo","getShaderInfoLog","_processSourceForError","errorLineStart","search","errorLineEnd","error2","createBuffer","bufferData","bindBuffer","ARRAY_BUFFER","STATIC_DRAW","DYNAMIC_DRAW","unbind","upload","count","bufferSubData","deleteBuffer","vertexBuffer","_vertexBuffer","_attributes","_suppressWarnings","_layout","_vertexTotalSizeBytes","_initialized","suppressWarnings","_shader","initialize","totalVertexSizeBytes","shaderAttributes","attrib","componentsPerVertex","vertAttribute","typeSize","_vao","createVertexArray","bindVertexArray","vert","vertexAttribIPointer","vertexAttribPointer","enableVertexAttribArray","uploadBuffer","GraphicsDiagnostics","DrawCallCount","DrawnImagesCount","LineRenderer","priority","_maxLines","_vertexIndex","_lineCount","_startScratch","_endScratch","context","_context","end","_isFull","flush","getTransform","finalStart","finalEnd","hasPendingDraws","drawArrays","LINES","PointRenderer","_maxPoints","_pointCount","_buffer","snapToPixel","finalPoint","POINTS","ScreenPassPainter","renderWithPostProcessor","postprocessor","getShader","getLayout","onDraw","TRIANGLES","renderToScreen","numberOfQuads","useUint16","ELEMENT_ARRAY_BUFFER","totalVertices","maxUint16","maxUint16Index","bufferGlType","Uint32Array","currentQuad","ImageRenderer","_maxImages","_maxTextures","_imageCount","_textures","_textureIndex","_textureToIndex","_images","_imageToWidth","_imageToHeight","_view","_dest","_quad","_defaultTint","pixelArtSampler","uvPadding","maxTexture","MAX_TEXTURE_IMAGE_UNITS","maxComplexity","transformedFrag","_transformFragmentSource","_quads","maxTextures","newSource","texturePickerBuilder","_addImageAsTexture","maybeFiltering","wrapX","wrapY","force","textureLoader","removeAttribute","_bindTextures","_getTextureIdForImage","maybeTexture","_getImageWidth","maybeWidth","_getImageHeight","maybeHeight","swidth","sheight","dx","dy","dwidth","dheight","maybeImageWidth","maybeImageHeight","sw","sh","textureId","imageWidth","imageHeight","uvx0","uvy0","uvx1","uvy1","txWidth","txHeight","drawElements","RectangleRenderer","_maxRectangles","_rectangleCount","_transparent","_scratch1","_scratch2","_scratch3","_scratch4","drawLine","drawRectangle","thickness","halfThick","startTop","startBottom","endTop","endBottom","stroke","strokeThickness","CircleRenderer","_maxCircles","_circleCount","radius","recycler","maxObjects","totalAllocations","disableWarnings","preallocate","using","borrow","poolIndex","DrawCall","renderer","graphicsContext","images","_name","_vertexSource","_fragmentSource","_graphicsContext","_initialize","addImageSource","graphicsContextWebGL","__gl","_maxTextureSlots","isUsingScreenTexture","update","textureUniformName","removeImageSource","textureName","_loadImageSource","imageElement","uploadAndBind","startingTextureSlot","textureSlot","MaterialRenderer","vertexIndex","view","topLeftScreen","bottomRightScreen","screenUVX0","screenUVY0","screenUVX1","screenUVY1","performance","materialScreenTexture","_getX","getX","_getY","getY","_setX","setX","_setY","setY","WatchVector","original","newX","newY","transform_Transform","_parent","_children","flagDirty","_globalPos","_globalScale","globalScaleX","globalScale","globalScaleY","_z","_isDirty","_isInverseDirty","_matrix","_inverse","_scratch","globalPos","localPos","canonRotation","globalRotation","inverseRotation","inverseScale","globalZ","_calculateMatrix","applyInverse","setTransform","isMirrored","cloneWithParent","owner","newComponent","observers","subscriptions","register","observer","subscribe","unregister","unsubscribe","notifyAll","observersLength","notify","subscriptionsLength","_parentComponent","_transform","_addChildTransform","child","childTxComponent","zIndexChanged$","_coordPlane","onAdd","childrenAdded$","childrenRemoved$","onRemove","_previousOwner","oldz","coordPlane","component","Frame","frameDuration","_idempotencyToken","_firstTick","_currentFrame","_timeLeftInFrame","_pingPongDirection","_done","_playing","_speed","_reversed","speed","totalDuration","goToFrame","maybeFrame","currentFrame","fromSpriteSheet","spriteSheetIndex","durationPerFrame","maxIndex","invalidIndices","fromSpriteSheetCoordinates","frameCoordinates","durationPerFrameMs","defaultDuration","coord","currentFrameIndex","currentFrameTimeLeft","isPlaying","isReversed","Backward","Forward","play","canFinish","frameNumber","frameIndex","_nextFrame","tick","elapsed","idempotencyToken","useAnchor","members","_updateDimensions","member","useBounds","_isAnimationOrGroup","lineCap","_smoothing","_lineWidth","_lineDash","_padding","strokeColor","smoothing","lineWidth","lineDash","padding","_bitmap","bitmapWidth","bitmapHeight","maybeCtx","cloneRasterOptions","_getTotalWidth","_originalWidth","_getTotalHeight","_originalHeight","_strokeColor","rasterize","_applyRasterProperties","execute","imageSmoothingEnabled","setLineDash","getLineDash","strokeStyle","x1","y1","x2","y2","cap","beginPath","moveTo","lineTo","closePath","arc","fill","br","tl","tr","bl","defaultRadius","quadraticCurveTo","FontTextInstance","_textFragments","disposed","_setDimension","_lastHashCode","getHashCode","_applyFont","metrics","textHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","lineAdjustedHeight","bottomBounds","actualBoundingBoxLeft","actualBoundingBoxRight","textBounds","bitmap","lineHeightRatio","fontString","includeColor","resetTransform","textBaseline","shadowColor","blur","shadowBlur","shadowOffsetX","shadowOffsetY","_drawText","strokeText","_splitTextBitmap","textImages","currentX","currentY","_ex","hashCode","frag","hash","_MEASURE_CACHE","measurement","measureTextWithoutCache","getTextInstance","textInstance","_TEXT_CACHE","_TEXT_USAGE","checkAndClearCache","deferred","currentHashCodes","FONT_TIMEOUT","newTextMeasurementCache","cacheSize","clearCache","_o","_p","_q","_r","_v","Normal","bold","LeftToRight","_textBounds","_textMeasurement","colorOverride","_textWidth","_textHeight","_calculateDimension","_font","isVisible","_offset","recalculateBounds","_anchor","currentGraphic","_current","_graphics","forceOnScreen","copyGraphics","onPreDraw","onPostDraw","onPreTransformDraw","onPostTransformDraw","graphicOrOptions","getGraphic","getOptions","getNames","currentOptions","nameOrGraphic","optionsToSet","graphicToSet","remove","hide","_localBounds","offsetX","offsetY","_bubbles","bubbles","stopPropagation","prevStats","stats","gamepad","button","axis","contact","lastContact","entity","action","Add","Remove","Initialize","PreUpdate","PostUpdate","Kill","componentsOrOptions","componentsToAdd","nameToAdd","_tags","componentAdded$","componentRemoved$","tagAdded$","tagRemoved$","components","componentValues","_componentsToRemove","scene","isActive","_isInitialized","_isAdded","silence","silenceWarnings","active","kill","unparent","isKilled","tags","hasTag","tag","addTag","removeTag","types","getComponents","hasAll","requiredTypes","hasAllTags","requiredTags","removeChild","addChild","getAncestors","removeAllChildren","getDescendants","queue","curr","newEntity","componentInstance","addTemplate","templateEntity","_getClassHierarchyRoot","componentType","getPrototypeOf","removeComponent","dependencies","ctor","rootComponent","typeOrInstance","componentToRemove","componentIndex","clearComponents","processComponentRemoval","isInitialized","isAdded","onInitialize","_add","_remove","_preupdate","onPreUpdate","_postupdate","onPostUpdate","vel","acc","scaleFactor","angularVelocity","torque","inertia","EulerIntegrator","integrate","motion","totalAcc","seconds","_ACC","_VEL","_POS","_VEL_ACC","_SCALE_FACTOR","_SCALE","beginColor","endColor","life","fade","_rRate","_gRate","_bRate","_aRate","_currentColor","sizeRate","isOffscreen","particleTransform","Global","configure","registerEmitter","_emitter","startSize","endSize","drawPoint","removeParticle","accel","focus","focusAccel","DefaultConfig","transformFeedbackVaryings","INTERLEAVED_ATTRIBS","_getTexture","particle","Local","ImageRendererV2","_components","_quadMesh","_meshBuffer","_transformData","totalSize","vertexAttribDivisor","_bindData","drawArraysInstanced","ExcaliburGraphicsContextWebGLDebug","_webglCtx","_debugText","rectOptions","lineOptions","pointOptions","drawText","_state","_ortho","checkIfResolutionSupported","dim","supported","_renderers","_lazyRenderersFactory","imageRenderer","_isDrawLifecycle","useDrawSorting","_drawCallPool","_drawCallIndex","_drawCalls","_postProcessTargets","_postprocessors","multiSampleAntialiasing","_isContextLost","_disposed","_totalPostProcessorTime","canvasElement","enableTransparency","antialiasing","powerPreference","handleContextLost","handleContextRestored","premultipliedAlpha","alpha","clearColor","BLEND","blendEquation","FUNC_ADD","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","blendEquationSeparate","blendFuncSeparate","depthMask","lazyRegister","_screenRenderer","_renderTarget","_msaaTarget","rendererName","maybeRenderer","lazyFactory","_isCurrentRenderer","_currentRenderer","beginDrawLifecycle","endDrawLifecycle","drawCall","updateViewport","trace","drawCircle","addPostProcessor","removePostProcessor","clearPostProcessors","updatePostProcessors","onUpdate","createMaterial","currentTarget","originalSort","firstIndex","sort","originalSortOrder","oldTransform","oldState","currentRendererName","currentRenderer","ExcaliburGraphicsContext2DCanvas_pixelSnapEpsilon","ExcaliburGraphicsContext2DCanvasDebug","__ctx","strokeRect","_resolution","globalAlpha","fillRect","_postprocessor","SVGA","Standard","Atari2600","GameBoy","GameBoyAdvance","NintendoDS","NES","SNES","ScreenResize","PixelRatioChange","FullScreenChange","_antialiasing","_canvasImageRendering","_resolutionStack","_viewportStack","_pixelRatioOverride","_isFullscreen","_isDisposed","_fullscreenChangeHandler","fullscreen","isFullScreen","_pixelRatioChangeHandler","_listenForPixelRatio","_devicePixelRatio","_calculateDevicePixelRatio","applyResolutionAndViewport","pixelRatio","_resizeHandler","_setResolutionAndViewportByDisplayMode","_contentArea","_unsafeArea","_contentResolution","_displayMode","displayMode","_canvas","canvasImageRendering","_browser","browser","_applyDisplayMode","_mediaQueryList","removeListener","nativeComponent","matchMedia","addListener","_resizeObserver","disconnect","removeEventListener","worldToPagePixelRatio","pageOrigin","worldToPageCoordinates","pixelRatioOverride","isHiDpi","FillContainer","FitContainer","FitContainerAndFill","FitContainerAndZoom","parentElement","_viewport","aspectRatio","scaledWidth","scaledHeight","setCurrentCamera","_camera","pushResolutionAndViewport","peekViewport","peekResolution","popResolutionAndViewport","currentPixelRatio","newResolutionSupported","imageRendering","widthUnit","heightUnit","documentElement","setProperty","isSmooth","isFullscreen","goFullScreen","elementId","enterFullscreen","maybeElement","getElementById","requestFullscreen","exitFullScreen","exitFullscreen","_viewportToPixels","offsetWidth","offsetHeight","pageToScreenCoordinates","innerWidth","innerHeight","screenHeight","screenWidth","contentArea","screenMarginY","screenMarginX","screenToWorldCoordinates","worldToScreenCoordinates","pageToWorldCoordinates","getWorldBounds","drawPos","getScreenBounds","canvasWidth","halfCanvasWidth","canvasHeight","halfCanvasHeight","drawWidth","halfDrawWidth","drawHeight","halfDrawHeight","unsafeArea","_computeFit","overflow","aspect","adjustedWidth","adjustedHeight","_computeFitScreenAndFill","vw","vh","_computeFitAndFill","_computeFitContainerAndFill","clip","_computeFitScreenAndZoom","_computeFitAndZoom","_computeFitContainerAndZoom","scaleX","scaleY","maxScaleFactor","zoomedWidth","zoomedHeight","_computeFitContainer","clientWidth","clientHeight","Window","ResizeObserver","observe","FillScreen","FitScreen","FitScreenAndFill","FitScreenAndZoom","unlock","_UNLOCKED","unlockTimeoutTimer","resume","createBufferSource","connect","destination","onended","playbackState","isLegacyWebAudioSource","currentTime","PLAYING_STATE","FINISHED_STATE","isUnlocked","arraybuffer","states","currentState","_currentState","machineDescription","machine","stateName","transitionState","transitions","startState","go","eventData","potentialNewState","onExit","onEnter","onState","saveKey","localStorage","setItem","getItem","_createNewBufferSource","_instance","_audioContext","loop","playbackRate","_playbackRate","_volumeNode","_handleEnd","_playingFuture","_loop","volume","_volume","_stateMachine","gain","setTargetAtTime","_duration","getTotalPlaybackDuration","createGain","PLAYING","pausedAt","startedAt","_playStarted","stop","SEEK","STOPPED","PAUSED","isPaused","isStopped","playStarted","seek","getPlaybackPosition","_value","_val","propagate","layPath","_actor","track","_processedData","canPlayFile","file","Audio","filetype","canPlayType","VolumeChange","Processed","Pause","Stop","PlaybackEnd","Resume","PlaybackStart","_tracks","instances","paths","_isStopped","_wasPlayingOnHidden","audiobuffer","decodeAudio","wireEngine","_engine","pauseAudioWhenHidden","instanceCount","some","_resumePlayback","_startPlayback","trackId","_getTrackInstance","getTrackId","resumed","complete","newTrack","BeforeLoad","AfterLoad","UserAction","LoadResourceStart","LoadResourceEnd","resources","_resources","_numLoaded","_totalTimeMs","_loadingFuture","loadables","addResources","onUserAction","onBeforeLoad","onAfterLoad","addResource","loadable","markResourceComplete","progress","textbox","areResourcesLoaded","finally","Director_Loader","_image","_imageElement","_imageLoaded","logo","playButtonRootElement","_playButtonRootElement","playButtonElement","_playButtonElement","_playButton","existingRoot","_styleBlock","_playButtonStyles","startButtonFactory","loadablesOrOptions","_originalOptions","_playButtonShown","logoWidth","logoHeight","loadingBarColor","suppressPlayButton","playButtonText","buttonElement","display","_DEFAULT_LOADER_OPTIONS","showPlayButton","resizeHandler","_positionPlayButton","evt","click","playButtonClicked","startButtonHandler","hidePlayButton","fullscreenAfterLoad","fullscreenContainer","HTMLElement","buttonWidth","buttonHeight","playButtonPosition","logoY","logoX","logoPosition","oldAntialias","loadingX","loadingY","loadingBarPosition","progressWidth","REPORTED_FEATURES","webaudio","gamepadapi","_features","failedTests","_criticalTests","canvasSupport","elem","arrayBufferSupport","xhr","dataUrlSupport","toDataURL","objectUrlSupport","rgbaSupport","cssText","_warningTest","webAudioSupport","webglSupport","_loadBrowserFeatures","getBrowserFeatures","logBrowserFeatures","feature","dataurl","objecturl","rgba","navigator","getGamepads","failedCritical","warning","mask","_CURRENT_GROUP","_MAX_GROUPS","_GROUPS","existingGroup","group","_CURRENT_BIT","groupByName","_STARTING_BIT","category","_category","_mask","canCollide","overlap1","overlap2","collisionGroups","combinedName","combinedMask","collidesWith","padStart","All","colliderA","colliderB","calculatePairHash","bodyA","bodyB","collide","hasCollider","idA","idB","projection","getOverlap","isLeaf","_config","worldBounds","root","nodes","_insert","leaf","leafAABB","currentRoot","area","combinedArea","cost","inheritanceCost","leftCost","leftCombined","newArea","oldArea","rightCost","rightCombined","oldParent","newParent","currentNode","_balance","grandParent","sibling","trackCollider","node","updateCollider","untrackCollider","boundsPadding","multdx","velocityMultiplier","multdy","balance","getHeight","query","helper","rayCastQuery","getNodes","numerator","begin","getSlope","divisor","getLength","intersectPoint","getPoint","_pairs","_collisionPairCache","_colliders","_dynamicCollisionTree","dynamicTree","getColliders","pointOrBounds","maxDistance","collisionGroup","collisionMask","searchAllColliders","maybeBody","ignoreCollisionGroupAll","hit","untrack","_pairExists","broadphase","targets","potentialColliders","pair","physics","pairs","continuous","checkForFastBodies","updateDistance","minDimension","disableMinimumSpeedForFastBody","fastBodies","updateVec","oldPos","centerPoint","furthestPoint","getFurthestPoint","minCollider","surfaceEpsilon","minTranslate","fastBodyCollisions","narrowphase","contacts","newContacts","collisions","updated","composite","touching","vertical","horizontal","enabled","gravity","solver","Arcade","substep","compositeStrategy","bodies","canSleepByDefault","sleepEpsilon","wakeThreshold","sleepBias","defaultMass","spatialPartition","sparseHashGrid","arcade","contactSolveBias","realistic","positionIterations","velocityIterations","slop","steeringFactor","warmStart","_compositeStrategy","_collisionProcessor","_dynamicAABBTree","clearColliders","removeCollider","axes","furthestPoints","bestPoint","getInertia","mass","totalInertia","otherColliders","potentialCollider","getClosestLineBetween","maybeLine","minLine","hits","minHit","minDistance","project","projections","proj","newProjection","slope","intercept","_normal","_dir","_slope","getEdge","midpoint","flip","below","sideVector","clipTime","distanceToPoint","signed","x0","y0","findVectorToPoint","aMinusP","findPoint","hasPoint","currPoint","threshold","dxc","dyc","dx1","dy1","ClosestLine","line1","line2","EPSILON","line1Dir","line2Dir","d1Squared","d2Squared","closestPoint","denom","closestPointOnLine1","closestPointOnLine2","PolygonPolygonClosestLine","polygonA","polygonB","aSides","getSides","bSides","closestLine","PolygonEdgeClosestLine","edge","otherDirection","rayTowardsOther","thisPoint","thisFace","getClosestFace","edgeLine","asLine","face","PolygonCircleClosestLine","otherWorldPos","p0","circlex","circley","CircleCircleClosestLine","circleA","circleB","thisDirection","rayTowardsThis","otherPoint","CircleEdgeClosestLine","circleWorldPos","EdgeEdgeClosestLine","edgeA","edgeB","_globalMatrix","_radius","_naturalRadius","_localBoundsDirty","orig","u1","toi","discriminant","toi1","toi2","positiveToi","minToi","CollideCircleCircle","CollideCirclePolygon","CollideCircleEdge","getFurthestLocalPoint","scalars","dotProduct","mtv","tangent","_canceled","colliderAId","colliderBId","matchAwake","isSleeping","sleepMotion","isCanceled","cancel","bias","localAxis","localSide","localPoint","findPolygonPolygonSeparation","polyA","polyB","findPolygonPolygonSeparationDegenerate","bestSeparation","bestSideIndex","toPolyBSpace","_SCRATCH_MATRIX","toPolyBSpaceRotation","normalsA","normals","pointsA","pointsB","pointsAIndex","_ZERO","_SCRATCH_NORMAL","_SCRATCH_POINT","smallestLocalPoint","smallestPointDistance","pointsBIndex","_SCRATCH_SUB_POINT","bestSide2","separationInfo","SeparationPool","separation","sideId","findCirclePolygonSeparation","polyDir","closestPointOnPoly","minOverlap","minAxis","minIndex","proj1","proj2","overlap","bestSide","bestAxis","bestOtherPoint","sides","localSides","getLocalSides","vertB","vertSeparation","ScratchZero","ScratchNormal","ScratchMatrix","circleAPos","circleBPos","combinedRadius","mvt","sameDir","findSide","findLocalSide","cc","edgeWorld","asLocalLine","da","dda","db","ddb","den","pointOnEdge","dd","CollideEdgeEdge","CollidePolygonEdge","pc","linePoly","CollidePolygonPolygon","separationA","separationB","main","toIncidentFrame","toIncidentFrameRotation","referenceEdgeNormal","minEdge","incidentEdgeIndex","referenceSide","referenceDirection","clipRight","clipLeft","clipPoints","FindContactSeparation","shapeA","txA","shapeB","txB","worldPoint","circlePoint","dist","_getTransformedBegin","_getTransformedEnd","transformedBegin","transformedEnd","_boundsFromBeginEnd","edgeNormal","registerGraphicsContext","debugDrawCall","drawLines","drawPolygon","firstPoint","drawBounds","boundingBox","drawRay","_localSidesDirty","_transformedPointsDirty","_sidesDirty","_normals","_checkAndUpdateWinding","_calculateNormals","_transformedPoints","_sides","_localSides","suppressConvexWarning","_calculateTransformation","_isCounterClockwiseWinding","sum","oldPoint","newPoint","oldDirection","angleSum","tessellate","polygons","triangles","vertices","vertexCount","getPrevIndex","getNextIndex","va","vb","vc","leftArm","rightArm","convexVertices","isPointInTriangle","ab","bc","ca","ap","bp","cp","cross1","cross2","cross3","findEarTip","isEar","cutEarTip","getTransformedPoints","currentSide","mostDirection","testRay","intersectCount","sideIndex","pts","POSITIVE_INFINITY","faceIndex","_cachedMass","_cachedInertia","denominator","iplusone","crossTerm","contactSide","minContactTime","contactIndex","contactTime","scalar","Edge","Capsule","$colliderAdded","$colliderRemoved","_collidersToRemove","_collider","processColliderRemoval","flipped","precollision","onPreCollisionResolve","postcollision","onPostCollisionResolve","onCollisionStart","onCollisionEnd","useBoxCollider","usePolygonCollider","poly","useEdgeCollider","__oldTransformCaptured","enableFixedUpdateInterpolate","_sleeping","bounciness","friction","useGravity","limitDegreeOfFreedom","_oldGlobalPos","oldVel","oldAcc","_impulseScratch","_distanceFromCenterScratch","_bodyConfig","config","updatePhysicsConfig","_mass","_DEFAULT_CONFIG","canSleep","updateDefaultPhysicsConfig","newMass","_cachedInverseInertia","inverseMass","sleeping","setSleeping","updateMotion","currentMotion","maybeCollider","inverseInertia","oldGlobalPos","oldRotation","oldScale","applyImpulse","impulse","finalImpulse","Rotation","distanceFromCenter","applyLinearImpulse","applyAngularImpulse","captureOldTransform","useColliderShape","useGraphicsBounds","CreateReversibleEasingFunction","easing","CreateVectorEasingFunction","Linear","startValue","endValue","EaseInQuad","EaseOutQuad","EaseInOutQuad","EaseInCubic","EaseOutCubic","EaseInOutCubic","_actions","_currentAction","_completedActions","_entity","clearActions","getActions","getIncompleteActions","getCurrentAction","hasNext","isComplete","_ACTION_ID","repeatBuilder","repeat","_stopped","_repeatBuilder","_repeatContext","_actionQueue","getQueue","_repeat","_originalRepeat","startAngle","endAngle","shortestPathIsPositive","distance1","distance2","shortDistance","longDistance","minSource","maxSource","minDestination","maxDestination","_started","_easing","_tx","_motion","_durationMs","_currentMs","_start","_end","currentPos","newPosX","newPosY","velX","velY","_distance","destX","destY","_endAngle","_startAngle","_rotationType","rx","_currentNonCannonAngle","_shortDistance","_longDistance","_shortestPathIsPositive","_direction","distanceTraveled","angleRadiansOffset","_endScale","_startScale","newScale","speedX","speedY","_endX","_endY","_speedX","_speedY","_startX","_startY","_distanceX","_distanceY","directionX","directionY","scaleOffset","_scaleOffset","scaleOffsetX","scaleOffsetY","_directionX","_directionY","CallMethod","_hasBeenCalled","_method","easingFcn","_currentLerpTime","_lerpDuration","_lerpStart","_lerpEnd","timeVisible","timeNotVisible","numBlinks","_timeVisible","_timeNotVisible","_elapsedTime","_totalTime","endOpacity","_multiplier","_endOpacity","_remainingTime","_originalTime","_delay","entityToFollow","followDistance","_followTx","_followMotion","_maximumDistance","_distanceBetween","actorToFollowSpeed","actor","actorToMeet","_speedWasSpecified","_meetTx","_meetMotion","actorToMeetSpeed","_total","_currentDuration","_material","_distLookup","controlPoints","_controlPoints","_calculateLookup","arcLength","_arcLength","setControlPoint","totalLength","_getTimeGivenDistance","getTangent","timeSquared","p1","p2","p3","getUniformTangent","desiredDistance","uniformTime","getNormal","getUniformNormal","getUniformPoint","_mode","_curve","_queue","runAction","curveBy","curveTo","easeTo","easeBy","xOrPosOrOptions","yOrSpeed","speedOrUndefined","moveBy","xOffsetOrVectorOrOptions","yOffsetOrSpeed","xOffset","yOffset","rotateTo","angleRadiansOrOptions","rotateBy","angleRadiansOffsetOrOptions","scaleTo","sizeXOrVectorOrOptions","sizeYOrSpeed","speedXOrUndefined","speedYOrUndefined","sizeX","sizeY","scaleBy","sizeOffsetXOrVectorOrOptions","sizeOffsetYOrSpeed","sizeOffsetX","sizeOffsetY","blink","flash","die","callMethod","times","repeatForever","follow","meet","toPromise","_getCtx","xOffsetOrVectorOptions","CollisionStart","CollisionEnd","PreCollision","PostCollision","PreKill","PostKill","PreDraw","PostDraw","PreTransformDraw","PostTransformDraw","PreDebugDraw","PostDebugDraw","PointerUp","PointerDown","PointerEnter","PointerLeave","PointerMove","PointerCancel","Wheel","PointerDrag","PointerDragEnd","PointerDragEnter","PointerDragLeave","PointerDragMove","EnterViewPort","ExitViewPort","ActionStart","ActionComplete","thePos","theVel","theAcc","theAngle","_handleAnchorChange","_handleOffsetChange","isOffScreen","draggable","_draggable","isDraggable","_pointerDragStartHandler","_pointerDragEndHandler","_pointerDragMoveHandler","_pointerDragLeaveHandler","_dragging","defaults","_silenceWarnings","pointer","actions","builtInComponents","_prekill","onPreKill","_postkill","onPostKill","unkill","newZ","getGlobalPos","localCenter","getGlobalScale","getGlobalRotation","recurse","geom","containment","within","otherCollider","useWorld","coords","_complete","_totalTimeAlive","_running","_numberOfTicks","interval","repeats","maxNumberOfRepeats","randomRange","_baseInterval","_generateRandomInterval","fcn","numberOfRepeats","_MAX_ID","_callbacks","newInterval","newNumberOfRepeats","timesRepeated","getTimeRunning","timeToNextAction","timeElapsedTowardNextAction","isRunning","cancelTimer","parallaxFactor","useTransform","hasNestedEvents","_dispatchPointerEvents","_processPointerToObject","PointerTargetObjectProxy","PointerEventsToObjectDispatcher","_proxyPool","_objectToProxy","_proxies","_lastFrameObjectToPointers","_currentFrameObjectToPointers","addObject","proxy","_getProxy","removeObject","_objectCurrentlyUnderPointer","pointerId","_objectWasUnderPointer","_entered","addPointerToObject","maybeProxy","_addPointerToProxy","pointers","dispatchEvents","receiver","sortedObjects","lastFrameEntities","currentFrameEntities","lastMovePerPointer","lastUpPerPointer","lastDownPerPointer","_processDownAndEmit","_processUpAndEmit","_processMoveAndEmit","lastUpDownMoveEvents","_processEnterLeaveAndEmit","_processCancelAndEmit","_processWheelAndEmit","processPointerToObject","objectIndex","currentFramePointerCoords","currentFrameDown","isDragStart","currentFrameUp","isDragEnd","currentFrameMove","isDragging","currentFrameCancel","currentFrameWheel","flagCollidersDirty","_collidersDirty","flagTilesDirty","_token","_rows","_cols","renderFromTopOfGraphic","meshingLookBehind","_oldRotation","_originalOffsets","debugFlags","_composite","_oldPos","_oldScale","_pointerEventDispatcher","currentCol","tile","_getOrSetColliderOriginalOffset","originalOffset","_updateColliders","shareEdges","checkAndCombine","maxLookBack","defaultGeometry","getTileByIndex","_getTileCoordinates","getRows","getColumns","getOnScreenTiles","maybeParallax","oneMinusFactor","parallaxOffset","currentScene","tileStartX","tileStartY","tileEndX","tileEndY","graphicsIndex","graphicsLen","offsets","getGraphicsOffsets","getGraphics","gfx","showAll","showGrid","gridColor","gridWidth","showSolidBounds","showColliderBounds","solidBoundsColor","colliderBoundsColor","showColliderGeometry","geometryColor","geometryLineWidth","geometryPointSize","pointSize","_posDirty","_recalculate","_solid","_offsets","removeGraphic","geometryPos","_geometry","_bounds","lockToActor","addStrategy","lockToActorAxis","elasticToActor","cameraElasticity","cameraFriction","radiusAroundActor","box","cam","_eng","currentFocus","getFocus","cameraVel","stretch","boundSizeChecked","focusX","focusY","_cameraStrategies","dz","az","_angularVelocity","_posChanged","_cameraMoving","_isShaking","_shakeMagnitudeX","_shakeMagnitudeY","_shakeDuration","_elapsedShakeTime","_xShake","_yShake","_isZooming","_zoomStart","_zoomEnd","_currentZoomTime","_zoomDuration","_zoomEasing","_halfWidth","_halfHeight","_snapPos","hasChanged","_follow","ax","ay","move","easingFn","_lerpPromise","_lerpResolve","shake","magnitudeX","magnitudeY","zoomOverTime","_zoomPromise","_zoomResolve","cameraStrategy","removeStrategy","clearAllStrategies","_screen","currentRes","loadingComplete","res","updateTransform","runStrategies","newZoom","zoomEasing","lerpPoint","moveEasing","_isDoneShaking","fixedUpdateTimestep","blend","currentFrameLagMs","interpolatedPos","snapPos","newCanvasWidth","newCanvasHeight","cameraPos","ExitTrigger","EnterTrigger","_matchesTarget","_dispatchAction","Highest","Higher","Average","Lower","Lowest","_world","_entityIndex","_childAddedHandlerMap","_childRemovedHandlerMap","_createChildAddedHandler","addEntity","_createChildRemovedHandler","removeEntity","_entitiesToRemove","updateEntities","entityIndex","findEntitiesForRemoval","queryManager","childAdded","childRemoved","idOrEntity","childAddedHandler","childRemovedHandler","currFrame","actors","killed","processEntityRemovals","processComponentRemovals","getById","getByName","requiredComponents","entityAdded$","entityRemoved$","checkAndAdd","getEntities","_queries","_addComponentHandlers","_removeComponentHandlers","_componentToQueriesIndex","_tagQueries","_addTagHandlers","_removeTagHandlers","_tagToQueriesIndex","_createAddComponentHandler","_createRemoveComponentHandler","_createAddTagHandler","_createRemoveTagHandler","createQuery","queries","createTagQuery","maybeAddComponent","maybeRemoveComponent","maybeAddTag","maybeRemoveTag","tagQuery","systems","initialized","systemType","addSystem","systemOrCtor","system","removeSystem","updateSystems","preupdate","postupdate","entityManager","systemManager","queryTags","Update","entityOrSystem","clearEntities","clearSystems","world","_physicsConfigDirty","$configUpdate","optionalBody","captureOldTransformWithChildren","directionMap","distanceMap","solve","preSolve","aDir","bDir","aDist","bDist","solvePosition","solveVelocity","postSolve","opposite","velAdj","normalImpulse","tangentImpulse","normalMass","tangentMass","aToContact","bToContact","originalVelocityAndRestitution","aToContactNormal","bToContactNormal","aToContactTangent","bToContactTangent","getRelativeVelocity","velA","lastFrameContacts","idToContactConstraint","getContactConstraints","finishedContactIds","contactPoints","pointIndex","restitution","relativeVelocity","constraints","maxCorrection","steeringForce","impulseForce","impulseDelta","maxFriction","newImpulse","normalVelocity","_processor","_physics","collisionProcessor","_configDirty","_lastFrameContacts","_currentFrameContacts","_arcadeSolver","_realisticSolver","_trackCollider","_untrackCollider","colliderComponent","_motionSystem","colliderComp","compositeColliders","getSolver","compositeId","substring","runContactStartEnd","Realistic","blendTransform","oldTx","newTx","oldTxWithNewParent","oldGlobalScale","oldGlobalRotation","interpolatedScale","interpolatedRotation","sortedTransforms","_sortedTransforms","Draw","_zHasChanged","_zIndexUpdate","_targetInterpolationTransform","transformIndex","parallax","_applyTransform","_applyOpacity","_drawGraphicsComponent","graphicsComponent","transformComponent","oldFlipHorizontal","oldFlipVertical","isDebug","showBounds","boundsColor","ancestors","ancestor","maybeGraphics","_collisionSystem","filterSettings","entitySettings","txSettings","motionSettings","colliderSettings","physicsSettings","graphicsSettings","debugDraw","bodySettings","cameraSettings","useFilter","ids","nameQuery","cursor","_pushCameraTransform","debugZIndex","showPosition","positionColor","showPositionLabel","showZIndex","showId","showName","showRotation","rotationColor","showScale","scaleColor","showCollisionGroup","showCollisionType","showMass","showMotion","showSleeping","showVelocity","velocityColor","showAcceleration","accelerationColor","showGeometry","showOwner","_popCameraTransform","showBroadphaseSpacePartitionDebug","showCollisionContacts","showCollisionNormals","contactSize","collisionContactColor","collisionNormalColor","showFocus","focusColor","showZoom","gridSize","cells","hasZeroBounds","leftX","rightX","bottomY","topY","cell","proxies","updateBounds","calculateHashKey","_hashGridCellPool","objectToProxy","proxyFactory","_buildProxy","boundsOrPoint","xCoord","yCoord","proxyIndex","cellIndex","transparent","_graphicsHashGrid","_entityToPointer","overrideUseColliderShape","overrideUseGraphicsBounds","_sortedEntities","screenPos","maybeGfx","_scene","_receivers","_engineReceiver","maybePointer","mapOrOptions","iso","_worldBounds","entityOffscreen","_isOffscreen","transformedBounds","_nonPairs","_pairPool","hashGrid","unitRay","dydx","dxdy","unitStepX","unitStepY","startXCoord","startYCoord","stepDir","currentXCoord","currentYCoord","currentRayLengthX","currentRayLengthY","collidersVisited","maxIterations","cellHits","colliderIndex","hit1","hit2","compColliders","_canCollide","proxyId","otherIndex","newConfig","_gamePadTimeStamps","_oldPads","_pads","_initSuccess","_navigator","_minimumConfiguration","_enabled","_clonePads","toggleEnabled","setMinimumGamepadConfiguration","_enableAndUpdate","_isGamepadValid","pad","axesLength","buttonLength","buttons","connected","gamepads","timestamp","bi","navigatorGamepad","getButton","pressed","updateButton","getAxes","updateAxes","_clonePad","getValidGamepads","pads","arr","clonedPad","MinAxisMoveThreshold","_axes","_buttons","_buttonsUp","_buttonsDown","isButtonPressed","isButtonHeld","wasButtonPressed","wasButtonReleased","buttonIndex","axesIndex","inputs","_handlers","command","inputHandler","commandHandler","isCrossOriginIframe","noop","originalEvent","_keys","_keysUp","_keysDown","_releaseAllKeys","ev","keyEvent","_handleKeyDown","metaKey","MetaLeft","MetaRight","_handleKeyUp","keyboardOptions","global","grabWindowFocus","getKeys","wasPressed","isHeld","wasReleased","triggerEvent","character","KeyboardEvent","fromPagePosition","xOrPos","yOrEngine","engineOrUndefined","pageX","pageY","coordinates","pointerType","nativeEvent","screenX","screenY","deltaZ","deltaMode","lastPagePos","lastScreenPos","lastWorldPos","_onPointerMove","_onPointerDown","_updateWorldPosition","primary","_activeNativePointerIdsToNormalized","lastFramePointerCoords","currentFramePointerDown","lastFramePointerDown","_pointers","_boundHandle","_handle","_boundWheel","_handleWheel","recreate","eventReceiver","isDown","wasDown","native","isDisposed","touchAction","wheelOptions","passive","pageScrollPreventionMode","onmousewheel","grabFocus","detach","_normalizePointerId","nativePointerId","preventDefault","eventCoords","globalThis","TouchEvent","Unknown","Touch","changedTouches","_nativeButtonToPointerButton","Mouse","isPointerEvent","_stringToPointerType","ScrollWheelNormalizationFactor","wheelDeltaX","wheelDeltaY","wheelDelta","detail","Page","page","clientX","clientY","MouseEvent","pointerSystem","NoButton","Pen","pointerTarget","keyboard","inputMapper","Activate","Deactivate","PreLoad","triggers","tileMaps","timers","_timers","_cancelQueue","onPreLoad","loader","onTransition","onActivate","onDeactivate","_initializeChildren","pointerScope","director","getSceneName","_activate","_deactivate","_predraw","_postdraw","removeTimer","timer","_collectActorStats","addTimer","transfer","isTimerActive","isCurrentScene","alive","_colorBlindnessMode","simulate","_simulate","colorBlindnessMode","colorBlindMode","Protanope","Deuteranope","Tritanope","_colorBlindPostProcessor","correct","colorBlindness","prevFrame","isometric","positionSize","useTestClock","wasRunning","testClock","toTestClock","useStandardClock","currentClock","standardClock","toStandardClock","_id","_elapsedMs","_fps","_actorStats","remaining","_durationStats","_physicsStats","_graphicsStats","drawCalls","drawnImages","otherStats","elapsedMs","fps","fs","_collisions","_contacts","_fastBodies","_fastBodyCollisions","_broadphase","_narrowphase","ps","_nativeHandlers","_decorate","_windowGlobal","_documentGlobal","_windowComponent","_documentComponent","nativeContextAntialiasing","_samplePeriod","_currentFrameTime","_frames","_previousSampleTime","_beginFrameTime","initialFps","samplePeriod","_nowFn","nowFn","instant","_onFatalException","_maxFps","_lastTime","_elapsed","_scheduledCbs","_totalElapsed","maxFps","onFatalException","fpsSampler","defaultUpdateMs","setFatalExceptionHandler","timeoutMs","timing","scheduledTime","__runScheduledCbs","overrideUpdateMs","fpsInterval","leftover","mainloop","_requestId","_currentTime","_updateMs","run","numberOfSteps","Util_Toaster","_toasterCss","_container","_createFragment","toastMessage","innerText","toast","linkTarget","linkName","className","messageFragments","link","href","finalMessage","dismissBtn","keydownHandler","first","firstChild","insertBefore","NavigationStart","Navigation","NavigationEnd","isTransitioning","_isTransitioning","scenes","_sceneToInstance","_sceneToLoader","_sceneToTransition","_loadedScenes","rootScene","currentSceneName","sceneKey","sceneOrOptions","getSceneInstance","_deferredGoto","deferredScene","deferredTransition","_deferredTransition","deferredSceneInstance","_addToTargetScene","swapScene","playTransition","configureStart","startScene","maybeLoaderOrCtor","maybeStartTransition","mainLoader","inTransition","startSceneInstance","_getLoader","sceneName","_getInTransition","sceneOrRoute","_getOutTransition","getDeferredScene","maybeDeferred","getSceneDefinition","maybeScene","assertAdded","assertRemoved","outTransition","nameOrScene","sceneOrCtor","potentialSceneOrOptions","goToScene","destinationScene","maybeDest","sourceSceneInstance","sourceScene","engineInputEnabled","maybeSourceOut","maybeDestinationIn","sourceOut","destinationIn","sceneActivationData","hideLoader","maybeLoadScene","_emitEvent","onPreviousSceneDeactivate","sceneDefinition","newScene","sceneToLoad","sceneToLoadInstance","transition","targetScene","currentTransition","sceneInputEnabled","blockInput","_play","previousScene","nextScene","destLoader","sourceName","destinationName","createContext","scope","old","useContext","textureCollectInterval","_collectionMap","_collectors","collectStaleResources","deadline","collector","timeoutInterval","getTimestamp","resourceType","_collectHandle","collect","collectionData","forceCollectAll","FallbackGraphicsContext","Visible","Hidden","PreFrame","PostFrame","useEngine","Context","_isDebug","shouldSnapToPixel","_inputEnabled","_suppressPlayButton","enableCanvasTransparency","stack","_toaster","_timescale","_handleWebGLContextLost","container","flexDirection","borderStyle","div","reload","_performanceThresholdTriggered","_fpsSamples","_isLoading","_hideLoader","_isReadyFuture","currentFrameElapsedMs","_lagMs","_screenShotRequests","_DEFAULT_ENGINE_OPTIONS","detector","suppressMinimumBrowserFeatureDetection","_compatible","testMessage","canvasElementId","suppressConsoleBootMessage","garbageCollection","garbageCollectorConfig","enableCanvasContextMenu","_originalDisplayMode","pixelArt","suppressHiDPIScaling","fixedUpdateFps","_mainloop","___EXCALIBUR_DEVTOOL","InstanceCount","_monitorPerformanceThresholdAndTriggerFallback","allow","configurePerformanceCanvas2DFallback","showPlayerMessage","numberOfFrames","useCanvas2DFallback","newCanvas","cloneNode","parentNode","replaceChild","Document","timescale","addScene","removeScene","scrollPreventionMode","visibilityState","toggleInputEnabled","_overrideInitialize","_update","_loader","_draw","_checkForScreenShots","toggle","toggleDebug","isReady","sceneNameOrLoader","frameId","beforeUpdate","fixedTimestepMs","afterUpdate","afterDraw","screenshot","preserveHiDPIResolution","finalWidth","finalHeight","newFont","spriteFont","sf","getTextWidth","_particlesToEmit","_particlePool","numParticles","isEmitting","deadParticles","emitRate","emitterType","randomRotation","_activeParticles","emitParticles","particleCount","_createParticle","clearParticles","ranX","ranY","minAngle","maxAngle","minSpeed","maxSpeed","expression","_vaos","_buffers","_drawIndex","_numInputFloats","_particleIndex","_uploadIndex","_wrappedLife","_wrappedParticles","_particleLife","_clearRequested","_emitted","_particleData","maxParticles","_random","numInputFloats","particleData","particleDataBuffer1","vao1","bytesPerFloat","particleDataBuffer2","vao2","_currentVao","_currentBuffer","startIndex","endIndex","_uploadEmitted","bindBufferBase","TRANSFORM_FEEDBACK_BUFFER","bindBufferRange","beginTransformFeedback","endTransformFeedback","GPU_MAX_PARTICLES","_gfx","_recalculateBounds","_tileBounds","graphicsOffset","tileToWorld","_isometricEntityComponent","halfTileWidth","halfTileHeight","yPos","totalWidth","totalHeight","updateColliders","worldToTile","worldCoordinate","tileCoordinate","tileCoord","_getMaxZIndex","maxZ","NEGATIVE_INFINITY","currentZ","actionBuilder","_sequenceBuilder","_sequenceContext","parallelActions","every","_defaultOptions","maxDepth","capacity","_isDivided","halfWidth","halfHeight","_split","newLevelOptions","_insertIntoSubNodes","getAllItems","getTreeDepth","_sprites","_stream","_gif","toSpriteSheet","toAnimation","delayMs","_animation","readCheckBytes","checkBytes","bitsToNum","ba","byteToBitArr","bite","dataArray","readByte","readBytes","bytes","read","readUnsigned","stream","_handler","globalColorTableBytes","parseColorTableBytes","colorTable","rgb","_st","readSubBlocks","parseHeader","hdr","sig","ver","colorResolution","globalColorTableSize","gctFlag","sortedFlag","globalColorTable","backgroundColorIndex","pixelAspectRatio","_currentFrameCanvas","parseExt","block","parseGCExt","reserved","disposalMethod","userInputFlag","transparentColorFlag","delayTime","transparentColorIndex","terminator","gce","parseComExt","com","parsePTExt","ptHeader","ptData","pte","parseAppExt","identifier","authCode","iterations","app","NETSCAPE","parseNetscapeExt","appData","parseUnknownAppExt","parseUnknownExt","label","extType","_gce","parseImg","img","leftPos","topPos","lctFlag","interlaced","sorted","lctSize","lctBytes","lzwMinCodeSize","lzwData","pixels","minCodeSize","readCode","clearCode","eoiCode","codeSize","dict","lzwDecode","newPixels","cpRow","toRow","fromRow","fromPixels","steps","pass","deinterlace","arrayToImage","parseBlocks","sentinel","eof","frame","imageData","getImageData","pixel","colorIndex","putImageData","_currentFrameContext","_hdr","bg","_isLoaded","FontFace","fonts","toFont","InsideCoroutineContext","generatorFunctionDeclaration","isCoroutineGenerator","Function","coroutineGenerator","thisArg","passedEngine","inside","autostart","started","completed","cancelled","generatorFcn","generator","co","iterator","_currentProgress","_completeFuture","_currentDistance","updateTransition","onStart","onReset","_co","_execute","screenCover","_progress","slideDirection","easingFunction","_vectorEasing","_screenCover","_directionOffset","_destinationCameraPosition","_startCameraPosition","_calculateBounds","lineNormal","halfThickness","minPoint","_imgSource","_canvasA","_canvasB","_canvasC","_canvasD","_canvasE","_canvasF","_canvasG","_canvasH","_canvasI","setTargetWidth","auto","setTargetHeight","setMargins","sourceConfig","leftMargin","topMargin","rightMargin","bottomMargin","setStretch","destinationConfig","horizontalStretch","verticalStretch","getConfig","_drawTile","targetCanvas","destinationSize","marginWidth","marginHeight","tempMarginW","tempMarginH","tempSizeX","tempPositionX","tempSizeY","tempPositionY","numTilesX","_getNumberOfTiles","numTilesY","tempSize","tempPosition","_calculateParams","drawCenter","_sourceSprite","aCtx","bCtx","cCtx","dCtx","eCtx","fCtx","gCtx","hCtx","iCtx","tileSize","Stretch","TileFit","tileNum","numTiles","reducedTileSize","_tiledWidth","_tiledHeight","_sourceView","promises","tiledSprite","fromAnimation","_updateSourceView","_updateWidthHeight","obsoleteMessage","logMessage","suppressObsoleteMessages","showStackTrace","alternateMethod","property","descriptor","SyntaxError","DecoratedClass","AsyncWaitQueue","enqueue","dequeue","_count","_waitQueue","waiting","enter","exit","Config","PlayerSpeed","PlayerFrameSpeed","ownKeys","__createBinding","k2","desc","getOwnPropertyDescriptor","writable","configurable","__setModuleDefault","__importStar","getOwnPropertyNames","ar","mod","resources_1","game","Resources","Player","config_1","playerSpriteSheet","HeroSpriteSheetPng","leftIdle","rightIdle","upIdle","downIdle","leftWalk","rightWalk","upWalk","downWalk","ArrowRight","ArrowLeft","ArrowUp","ArrowDown","excalibur_1","plugin_tiled_1","player_1","player","props","__webpack_require__"],"sourceRoot":""}